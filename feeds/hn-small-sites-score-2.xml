<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 2]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 2. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Sat, 19 Sep 2020 20:23:52 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-2.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Sat, 19 Sep 2020 20:23:52 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[Don't hate the book because you don't use it]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24514953">thread link</a>) | @aseure
<br/>
September 18, 2020 | https://aseure.fr/articles/2020-09-18-dont-hate-the-book-because-you-dont-use-it/ | <a href="https://web.archive.org/web/*/https://aseure.fr/articles/2020-09-18-dont-hate-the-book-because-you-dont-use-it/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
  
<h3>
  18 September 2020
</h3>


  <p>In a few months, I‚Äôll celebrate my fifth year as a professional - understand paid - software engineer. I find this role to be a right balance of technical skills, human relationships and it fulfils my curiosity. As time goes by, I‚Äôm also starting to be disappointed by some of its negative aspects. While it doesn‚Äôt prevent me from sleeping, I think an effort could be made to challenge some lousy and short-sighted comments we see daily on social platforms.</p>
<p>Today, I‚Äôd like to talk about <a href="https://www.amazon.com/Design-Patterns-Object-Oriented-Addison-Wesley-Professional-ebook/dp/B000SEIBB8">Design Patterns: Elements of Reusable Object-Oriented Software</a>, a book written by Erich Gamma, Richard Helm, Ralph Johnson, and John Vlissides, famously known as the <em>Gang of Four</em>. If you never read it: this is a fundamental programming book describing programming abstractions published in 1994. The date is essential here, but we‚Äôll come to that later.</p>
<p>This book has recently been discussed by many, due to <a href="https://twitter.com/unclebobmartin/status/1306581616983183361">a recent tweet from Robert. C. Martin aka Uncle Bob</a>. Long story short, telling a massive audience that book X is great, and treating people who consider it outdated as ‚Äúfoolish‚Äù does not end well.</p>
<p>While I disagree with the tone here, I‚Äôd like to focus on the negative comments which followed, including but not limited to:</p>
<ul>
<li>the book is outdated</li>
<li>its concepts are outdated</li>
<li>its authors said it‚Äôs outdated</li>
<li>the book is only focused on mid-90s C++ developers</li>
<li>no one ever used the ‚Äúflyweight‚Äù design pattern</li>
<li>the book is not even readable</li>
<li>its abstractions make code unreadable</li>
</ul>
<p>First of all, let‚Äôs get back to 1994. I was two at the time. All Internet websites could probably fit on a floppy disk, Jeff Bezos founded Amazon, Rasmus Lerdorf was only starting to work on its <em>Personal Home Page/Forms Interpreter</em> CGI C program, and Larry Page and Sergey Brin would only start their research project for a web search engine two years later. The biggest technology companies were IBM, Hewlett-Packard, Motorola and Xerox, which mostly sat behind the oil, car, and food industries. Programming existed, but it wasn‚Äôt the same field as we know it today. Tech companies were a few, and I assume a lot of programmers were working in other industries. Being a professional in this sector was arguably more difficult then, and knowledge was not as easily accessible as it is today. This book was published in a world where programming started to spread in many industries. It surely was a very good resource, to try to apply its concepts, and see what works and what doesn‚Äôt. The authors were literally inventing the field at the time: Erich Gamma, for instance, teamed up with Kent Beck to create the Java JUnit test framework just a few years later, which hugely helped to popularise testing.</p>
<p>My point is: let‚Äôs remind ourselves we stand on the shoulders of many people who tried and experimented a lot at the time. We too often take for granted the knowledge and productivity we have today. On top of that, let‚Äôs not be disrespectful towards the previous generation. My father and my grandfather both work(ed) as electricians: never did my father complain about his father‚Äôs tools or habits before him. He learned them and perfected them with modern knowledge.</p>
<p>Now about the book in itself. While I agree with people saying that some design patterns are too abstract, I strongly disagree with the ones saying the whole book is outdated. Should you develop in a OO language today, such as Java, C++, Python or Ruby, or even more notably, develop a framework or a tool <em>for</em> developers, I think this book is still highly relevant today.</p>
<p>Here are my top picks from the book and why I chose them.</p>
<p><strong>Builder:</strong> because in OOP, objects often hold too much data in them, you need to control how to instantiate them properly. Even with overloaded constructors, data validation at instantiation can become messy. Do you like your testing framework using a <em>fluent interface</em> with method chaining (<code>assert(...).not().equalTo(...)</code>)? Guess what, it‚Äôs directly inspired by the builder design pattern.</p>
<p><strong>Prototype:</strong> I often hear people complaining about how complicated JavaScript is. While I don‚Äôt think this language makes it easy for the developer to write non error-prone code, I better understood the language via the lens of its prototype-based nature, precisely described by the prototype design pattern.</p>
<p><strong>Most of the structural patterns:</strong> While everyone is focused on the bad parts of OOP, namely inheritance, all those design patterns are focused on composability. If you want to be cool nowadays, you could say you prefer ‚Äúcomposition over inheritance‚Äù. Well, if you think composition is only about embedding objects in each other, you should read the part of structural design patterns. For instance, you probably know decorators from Python or annotations in Java/C#, they derive from the decorator design pattern.</p>
<p><strong>Chain of Responsibility:</strong> I think we can all agree on how great it is to use and implement a middleware in our modern web framework. Just use or write functions which take a <em>next</em> handler, a request object. Pass it to your web framework instance via a <code>.use(...)</code> method and you‚Äôre done. This is what the Chain of Responsibility pattern is all about. All Rails, Django, and Laravel developers knew that was NIH.</p>
<p><strong>Iterator:</strong> This one seems obvious now, perhaps not so much at a time where iterating on arrays with pointer arithmetic was common. Today, iterators are even buried behind standard libraries to implement even higher abstract functionalities, but they are still there. I don‚Äôt see a more universal way to implement, with the same public API, a traversal of an array, a tree, or a graph (they are better ways of iterating those last data structures though).</p>
<p><strong>Observer:</strong> For this last one, here is the verbatim definition from the book: ‚ÄúDefine a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically‚Äù. Now, if we take a look at some modern technologies, doesn‚Äôt this resonate with PubSub models or React hooks for instance?</p>
<p>To conclude, I‚Äôm not saying the book is not old, quite the opposite: you can feel it when it takes as examples from 90s user interfaces. I‚Äôm merely advocating that our industry and its workers have changed a lot in the last 30 years, dare I say even more than in any other industry. But this should not be an excuse to sweep away years of meticulous R&amp;D and documentation, on which our modern tools still rely on nowadays, and the people behind it.</p>
<p>Because a lot of people complained that they were never able to finish the book, here is an extract from the end, section ‚ÄúWhat to Expect from Design Patterns‚Äù, page 351:</p>
<blockquote>
<p>It‚Äôs possible to argue that this book hasn‚Äôt accomplished much. After all, it doesn‚Äôt present any algorithms or programming techniques that haven‚Äôt been used before. [‚Ä¶] it just documents existing designs. You could conclude that it makes a reasonable tutorial, perhaps, but it certainly can‚Äôt offer much to an experienced object-oriented designer.</p>
<p>We hope you think differently. Cataloging design patterns is important. It gives us standard names and definitions for the techniques we use. If we don‚Äôt study design patterns in software, we won‚Äôt be able to improve them, and it‚Äôll be harder to come up with new ones.</p>
<p>This book is only a start.</p>
</blockquote>

</div></div>]]>
            </description>
            <link>https://aseure.fr/articles/2020-09-18-dont-hate-the-book-because-you-dont-use-it/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24514953</guid>
            <pubDate>Fri, 18 Sep 2020 10:14:23 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Security Headlines: cURL special with Daniel Stenberg [audio]]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24514932">thread link</a>) | @devrustr
<br/>
September 18, 2020 | https://blog.firosolutions.com/2020/09/security-headlines-curl-special/ | <a href="https://web.archive.org/web/*/https://blog.firosolutions.com/2020/09/security-headlines-curl-special/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
  





<p><img alt="curl security headlines podcast" src="https://blog.firosolutions.com/shcurl.png"></p><h3 id="summary">Summary:</h3>

<p>In this episode of Security Headlines, we jump into curl with<br>
its founder and maintainer Daniel Stenberg.<br>
We talk security, CI systems, creation of curl, Fuzzing, IRC bots<br>
and a lot more!</p>

<p>Relax, Tune in and enjoy this episode of Security Headlines:</p>







<p><a href="https://anchor.fm/firo-solutions/episodes/Curl-special-with-Daniel-Stenberg-ejqn0g">https://anchor.fm/firo-solutions/episodes/Curl-special-with-Daniel-Stenberg-ejqn0g</a></p>

<p>Few software developers never even get near to having one<br>
of their projects being picked up by a larger community.</p>

<p>A project that started as a currency plugin to an IRC bot.<br>
Spun off and ended up becoming bigger and bigger resulting in being
adopted by over 10 billion devices.  Well, this project is called<br>
curl!  Curl is known to be the stable swizz army knife that can<br>
be used for making various types of transfer requests.</p>

<p>Need to download a file? Curl is here for you<br>
Need to test a socks5 proxy? Curl is here for you<br>
Need to download an ezine over Gopher? Curl is here for you<br>
Need to test a unix socket? Curl is here for you</p>

<p>In this episode of Security Headlines, we are joined by Daniel<br>
Stenberg who is the founder and maintainer of Curl.<br>
He has even been awarded a gold medal by the Swedish king for<br>
his work with Curl.</p>



<p><img alt="curl Daniel stenberg King medal" src="https://blog.firosolutions.com/daniel-king.jpg"></p><p>The curl codebase is around 100 000 lines of C code, filled with<br>
hidden gems such as a libcurl code generator that creates a template<br>
based on the command line arguments you give it.</p>

<p>One of curl‚Äôs many features is the ‚Äìlibcurl option which<br>
takes the commmand you give curl and generate a C program that use<br>
libcurl with the same functionally, you can even port it to other<br>
programming languages with a similar syntax and use it with libcurl‚Äôs<br>
bindings.</p>

<pre><code>$ curl https://blog.firosolutions.com --libcurl example.c   
$ head example.c 
/********* Sample code generated by the curl command line tool **********
 * All curl_easy_setopt() options are documented at:
 * https://curl.haxx.se/libcurl/c/curl_easy_setopt.html
 ************************************************************************/
#include &lt;curl/curl.h&gt;

int main(int argc, char *argv[])
{
  CURLcode ret;
  CURL *hnd;

</code></pre>

<p>Even Google love Curl, having curl in over 100 devices.<br>
This leads us to Google‚Äôs fuzzing project, where they have<br>
an army of computers that feed automated generated data in order<br>
to find bugs.<br>
This has resulted in curl being more stable, secure, and mature.</p>

<p>The world is always moving and so is the technology evolution.<br>
Getting a bit dystopian here, but maybe we will move to a future<br>
where we are running everything in a browser.<br>
A world where everything runs ipv6 and http3.</p>

<p>In that world, I know one tool we can count on.</p>

<h3 id="external-links">External links:</h3>

<p><a href="https://curl.haxx.se/">https://curl.haxx.se/</a><br>
<a href="https://curl.haxx.se/docs/security.html">https://curl.haxx.se/docs/security.html</a><br>
<a href="https://en.wikipedia.org/wiki/CURL">https://en.wikipedia.org/wiki/CURL</a><br>
<a href="https://twitter.com/bagder">https://twitter.com/bagder</a><br>
<a href="https://www.wolfssl.com/">https://www.wolfssl.com/</a><br>
<a href="https://daniel.haxx.se/">https://daniel.haxx.se/</a><br>
<a href="https://bugs.chromium.org/p/oss-fuzz/issues/list?sort=-opened&amp;can=1&amp;q=proj:curl">https://bugs.chromium.org/p/oss-fuzz/issues/list?sort=-opened&amp;can=1&amp;q=proj:curl</a><br>
<a href="https://en.wikipedia.org/wiki/Gopher_%28protocol%29">https://en.wikipedia.org/wiki/Gopher_%28protocol%29</a><br>
<a href="https://curl.haxx.se/mail/">https://curl.haxx.se/mail/</a></p>

</div></div>]]>
            </description>
            <link>https://blog.firosolutions.com/2020/09/security-headlines-curl-special/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24514932</guid>
            <pubDate>Fri, 18 Sep 2020 10:10:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Year and a Half of End-to-End Encryption at Misakey]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24514370">thread link</a>) | @cedricvanrompay
<br/>
September 18, 2020 | https://about.misakey.com/cryptography/white-paper.html?pk_campaign=HackerNews_Cedric | <a href="https://web.archive.org/web/*/https://about.misakey.com/cryptography/white-paper.html?pk_campaign=HackerNews_Cedric">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    
    <article>
      

<p>A journey through some of the reasonings and technical challenges that I had so far as a software developer at Misakey specialized in cryptography and security.</p>

<h2 id="how-i-got-here">How I Got Here</h2>
<p>I was recruited by Misakey shortly after its first fundraising (February 2019, ‚Ç¨1M). The mission of Misakey was, and still is as of today, to provide an easy-to-use and highly secure way to connect people to the numerous accounts they have on other websites, as well as to connect people between each other. One key element of the solution was to encrypt user data in an <em>end-to-end</em> fashion, meaning that, while the data exchanged by users and websites would flow through our servers, it would be encrypted with a key that Misakey does not have. Doing so greatly increases the security of user‚Äôs data, but it adds a lot of technical challenges.</p>
<p><em>‚ÄúDo not roll your own crypto‚Äù</em>: this adage is a reminder to software developers that cryptography is a very tricky discipline. Trying to build your own cryptography without a high degree of knowledge in this field is a sure way to introduce a security vulnerability in your product. Instead, you should rely entirely on third-party tools and services when it comes to cryptography, and you should avoid using them in a ‚Äúcreative‚Äù way.</p>
<p>At Misakey, we try to follow this principle as much as possible. For instance, we do TLS<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup> in the most standard, boring, uncreative way. But end-to-end encryption is still quite a ‚Äúbleeding-edge‚Äù technology, and as a result you are not sure to find a tool that perfectly fits your needs. In this situation, there are two sane things to do: giving up, or investing massively in cryptographic expertise.</p>
<p>The founders of Misakey went for the second option. Unfortunately, professional software developers with a high expertise in cryptography are pretty rare. So they went for the opposite approach: they started looking for an expert in cryptography that would have decent skills in software development.</p>
<p>At that time, I had recently finished my PhD on cryptography and secure protocols after graduating as an engineer from <a href="https://www.telecom-paris.fr/">T√©l√©com Paris</a> and <a href="https://www.eurecom.fr/fr">EURECOM</a>. Although I had never worked as a professional software developer, I had been programming as a hobbyist since the age of 15, and the engineering schools I graduated from are quite specialized in I.T. After a few discussions on the phone with the founders, I was hired. The deal was that I would progressively become a professional software developer in his own right by programming with the rest of the team, while using my knowledge of cryptography to design and implement the protocols Misakey needs. I also had some training in general cyber security (‚Äúhacking‚Äù, sort of), so I would be quite active on this topic as well<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup>.</p>
<h2 id="end-to-end-encryption">End-to-End Encryption</h2>
<p>End-to-end encryption is really booming these years. This is sometimes taking the form of what is called ‚Äúclient-side encryption‚Äù in some cloud-based services, like <a href="https://blog.cozy.io/en/cozy-cloud-how-to-encrypt-web-application/">what Cozy Cloud is doing</a> for instance, but the biggest trend is ‚Äúencrypted chat applications‚Äù. <a href="https://signal.org/blog/whatsapp-complete/">WhatsApp conversations use end-to-end encryption by default since 2016</a>, and <a href="https://signal.org/blog/facebook-messenger/">Facebook Messenger offers end-to-end encrypted conversations since more or less the same time</a>. <a href="https://telegram.org/">Telegram</a> is another popular chat application that offers end-to-end encryption, and there are a few other applications having a smaller market share, like <a href="https://signal.org/">Signal</a> and <a href="https://element.io/">Element</a> (formerly known as ‚ÄúRiot‚Äù).</p>
<figure>
    <img src="https://about.misakey.com/cryptography/images/e2e.png"> 
</figure>

<p>Before the rise of end-to-end encryption, messages were already encrypted in chat applications, but only with the TLS protocol<sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup> that provides encryption from a device (a computer or a phone) to a server. In TLS, the device and the server negotiate an encryption key with each other so that they communicate securely, but because this key is known to the server, the server ‚Äúsees‚Äú the data. Most of the time this is perfectly fine because the data is actually intended for the server. For instance when you change your username in Misakey, the new user name is only encrypted with TLS. For most websites, TLS is (almost) all the cryptography that‚Äôs required to operate the service securely, and nowadays it‚Äôs quite simple for anyone to enable TLS on her website in a secure way thanks to <a href="https://letsencrypt.org/">Let‚Äôs Encrypt</a> and <a href="https://certbot.eff.org/">CertBot</a>.</p>
<p>The situation is different in chat applications and in services like Misakey that simply act as intermediaries between users: the server is not one of the ‚Äúends‚Äù of the conversation anymore, it simply forwards data between users having a conversation. As a result, you cannot claim to provide ‚Äúend-to-end encryption‚Äù simply because you are using TLS.</p>
<p>It doesn‚Äôt mean that a chat application using only TLS is ‚Äúless secure‚Äù than a usual website. It means that we could aim at a higher level of security: if the server doesn‚Äôt <em>need</em> to see the data, we have an opportunity to protect the data from a hack of the server, and we do this by making the server <em>unable</em> to read the data.</p>
<p>It is tempting to ask: why not just use TLS from device to device, then? One reason is that TLS simply does not work from device to device: in TLS, servers do most of the work, so it is not trivial to recreate the same protocol with just devices. A second reason is that TLS will not give us some properties that we want for Misakey, like conversations between more than two devices and/or users. Of course, we will regularly see how things are done in the TLS protocol to better understand how to build our end-to-end encryption protocol, but it cannot be as simple as <em>‚Äúusing TLS from device to device‚Äù</em>.</p>
<h2 id="existing-protocols-and-why-we-are-not-using-them">Existing Protocols and Why We Are Not Using Them</h2>
<p>The end-to-end encryption protocol used by WhatsApp, Facebook Messenger and Signal is the ‚ÄúSignal Protocol‚Äù (because it was first developed by Signal, who then helped WhatsApp and Facebook integrate it in their own app) whose <a href="https://signal.org/docs/">specification and implementation are free open-source software</a>. This means that in theory we could use it to build Misakey, but in practice the Signal protocol is not really meant to be used as a stable platform for building other end-to-end encrypted products.</p>
<p>Element is a bit different from the other encrypted chat applications. The main goal of the people behind Element is to promote an entire <em>messaging protocol</em>, called <a href="https://matrix.org/">the <em>Matrix Protocol</em></a>, whose original purpose was to <em>‚Äúreplace email‚Äù</em>. Element is simply a client for this protocol, but the developers want <a href="https://matrix.org/clients-matrix/">anyone to be able to implement their own client</a>, just like there are various programs to surf the Web or manage emails.</p>
<p>As a result, the Matrix protocol and the various parts of the Element application are designed to be usable as building blocks for other implementations and usage. In particular, <a href="https://github.com/matrix-org/matrix-js-sdk">the Matrix JS SDK</a> gives you a high-level interface to use the Matrix Protocol, including the end-to-end encryption part, without having to worry too much about the technical details of it: you enable end-to-end encryption in a chat room by calling <code>matrixClient.setRoomEncryption</code> with the ID of the chat room, and now all the messages sent to this room will be end-to-end encrypted, even if there are many people in it, each one using several devices. The Matrix team also provides a server for the Matrix Protocol, <a href="https://github.com/matrix-org/synapse">Synapse</a>, which is very easy to use.</p>
<p>At the beginning of Misakey, the idea was to use the Matrix protocol as a communication platform to build our product. This way we did not have to implement end-to-end encryption ourselves, and we could enjoy a mature protocol and implementation which we would not have to maintain ourselves.</p>
<p>The Matrix protocol, and <a href="https://gitlab.matrix.org/matrix-org/olm">its end-to-end encryption protocol named ‚Äúolm‚Äù</a>, are quite easy to use and to integrate in your own application ‚Ä¶ as long as the application you are trying to build is close enough to Element. Now Misakey is not exactly a ‚Äúchat‚Äù application, its goal is mainly directed towards automated management of people‚Äôs accounts and data. As a result, we had some feature requirements that were quite far from what Matrix was designed for, like sending data to people that don‚Äôt have an account yet, or seamless device-to-device synchronization. Implementing them with Matrix would have required to somehow ‚Äúbend‚Äù the protocol, using it in ways it was not designed for, and this seemed overly complicated.</p>
<p>There were also a few features we were missing from the Matrix JS SDK, mainly regarding key management in the olm protocol. We had no idea if we could push for their integration, and it seemed too much of a hassle to implement them in our own fork of Matrix. At some time <a href="https://github.com/matrix-org/matrix-js-sdk/pull/1167">we tried to contribute to the Matrix JS SDK</a>, but again this did not give us the speed we needed.</p>
<p>Maybe one day the Matrix protocol will become more versatile and we will be able to use it as a base for Misakey, but for now it seems faster to implement our own protocol, and to use Matrix as a source of inspiration. This lets us move faster, even if it is a great responsibility to implement end-to-end encryption from scratch. As we said, end-to-end encryption is a technology that is still quite ‚Äúyoung‚Äù.</p>
<h2 id="the-most-trivial-end-to-end-encryption-protocol">The Most Trivial End-to-End Encryption Protocol</h2>
<p>It‚Äôs time to start building things. The quickest way of deploying end-to-end encryption between two users is to do the following: first, make the application of one user generate an encryption key. Then, tell this user to send the key to the other user through some other communication channel, typically email or some other chat application,or in person. This ‚Äúother communication channel‚Äù must be secure enough. When the application of the other user receives the key, the applications of both users can use this key to encrypt data for each other.</p>
<figure>
    <img src="https://about.misakey.com/cryptography/images/basic-e2e.png" alt="chart illustrating basic end-to-end encryption with the key sent through an out-of-band channel"> 
</figure>

<p>Note that the key must <em>not</em> be sent through Misakey itself, otherwise it is not ‚Äúend-to-end encryption‚Äù any more. This is why I speak of <em>another</em> communication channel. This is called an <em>out-of-band channel</em> in end-to-end encryption.</p>
<p>Of course it is not ideal to have to assume that users <em>already</em> have this out-of-band channel to send cryptographic keys to each other in a secure manner. One could ‚Ä¶</p></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://about.misakey.com/cryptography/white-paper.html?pk_campaign=HackerNews_Cedric">https://about.misakey.com/cryptography/white-paper.html?pk_campaign=HackerNews_Cedric</a></em></p>]]>
            </description>
            <link>https://about.misakey.com/cryptography/white-paper.html?pk_campaign=HackerNews_Cedric</link>
            <guid isPermaLink="false">hacker-news-small-sites-24514370</guid>
            <pubDate>Fri, 18 Sep 2020 08:35:31 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Hardware Design of a 8088 based Chinese Typewriter made in the 1980s]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24514269">thread link</a>) | @tifan
<br/>
September 18, 2020 | https://tifan.net/blog/2020/09/17/ms240x-chinese-typewriter-2-ms-2401h-hardware-design/ | <a href="https://web.archive.org/web/*/https://tifan.net/blog/2020/09/17/ms240x-chinese-typewriter-2-ms-2401h-hardware-design/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <header id="banner">
      
    </header><!-- /#banner -->
    <!-- /#menu -->
<section id="content">
  <header>
    <h2>
      Stone MS-240x Typewriter (2): Hardware Design
    </h2> 
    
  </header>
  <!-- /.post-info -->
  <div>
    <p>In case you misseed it -- I talked about the backgrounds of the MS-240x typewriter in the <a href="https://tifan.net/blog/2020/09/09/revealing-a-forgotten-chinese-compute-history-stone-ms240x-chinese-typewritter-1-background/">previous article</a>. In this article, I'm going to discuss the hardware design of the legendary Stone MS-240x Chinese Typewriter (ÂõõÈÄö MS-240x ‰∏≠Ëã±ÊñáÊâìÂ≠óÊú∫) designed and sold in the mid-1980s.</p>
<p>Both the hardware and the BIOS was designed by ALPS Electric Co. ALPS provided a BIOS reference manual before the development began so that the developers in China could just write an emulator on the PC emulating the ALPS BIOS, and just focus on the development of the word processor.</p>
<div id="the-hardware">
<h2>The Hardware</h2>
<p><img alt="Stone MS-2401H ÂõõÈÄö MS-2401H ÊâìÂ≠óÊú∫" src="https://tifan.net/images/20200917-ms-2401h.jpg"></p><p>(<a href="https://www.lty.me/stone-ms-2401h/">Picture taken by @lty1993</a>)</p>
<p>As I mentioned in the previous article, the hardware is just a 8088 machine in its core. In the 80s, the Japanese engineer reverse engineered and implemented Japanese counterparts of almost all popular chips in the west. The ALPS motherboard is not an exception to that.</p>
<p>I bought the machine on Xianyu (Chinese eBay equivalent) and shipped it to @lty1993 in China for examination, disassembly, and ROM dumps. The machine is quite heavy -- shipping it to the west coast would probably cost 200 USD. Guess there won't be any Stone Chinese Typewriters in the US for a while!</p>
</div>
<div id="processor-nec-v20">
<h2>Processor: NEC V20</h2>
<p>Instead of using the actual 8088 processor, MS-240x series used the NEC V20 running at different clock frequencies. The original MS-2400 clocks at 4.9125 MHz, the upgraded MS-2401 runs at 8 MHz, and the later MS-2401H model runs at 10 MHz.</p>
<p>The V20 is 30% faster than the original 8088 running at the same clock speed, providing additional power for the heavy lifting work a Chinese Typewriters needs to do.</p>
</div>
<div id="memory-hard-wired-memory-map-with-page-control">
<h2>Memory: Hard-wired Memory Map with Page Control</h2>
<p>The RAM itself is not interesting at all. It's just a bunch of Japanese made SRAM connected to the address bus of the processor.</p>
<p>The BIOS is mapped at <cite>0xF8000</cite> to <cite>0xFFFF</cite>, and CPU will execute the instruction at <cite>0xFFFF0</cite> -- that's the convention for 8088. So naturally, the BIOS was hard wired at that address.</p>
<p>Remember we talked about the Chinese fonts? It's a mask ROM, and it is quite large -- larger than the address space of 8088 processor if we include high precision Chinese fonts at 24x24 dot (which is still pretty awful in today's standard). To solve this problem, all external ROMs were divided into 32KB pages. To access any page in the ROM, you would send a command to the ASIC to select the page first (bank switching) before reading memory from the hard wired memory location. Sounds like a MMU? Well, this <em>is</em> a poor man's MMU.</p>
<p>One thing worth noting is that all models have built in battery backup units. Newer models (such as MS-2401) can even operate with battery with up to 3 hours battery life -- it almost makes the typewritter a laptop with a built-in printer.</p>
<p>Here's the memory map for various models of the Chinese typewriter.</p>
<p><img alt="Memory Map for MS-2400" src="https://tifan.net/images/20200917-ms-2400-memory-map.png"></p><p>MS-2400 have the Chinese font mapped at <cite>0xA0000</cite> with 16 pages in total. It can support up to 3 Chinese IMEs (input methods, such as Pinyin, Wubi or Cangjie) -- a standard IME comes with the machine, up to 2 additional IMEs can be purchased as a EPROM chip inserted in the expansion ROM socket. As there's only 1 IME socket, regardless of how many IMEs would you purchase, you'll always get just one 64KB EPROM. The keyboards are mapped at <cite>0x90000</cite> and have up to 3 pages in total.</p>
<p>When the machine was designed, there's also an expansion socket at <cite>0xE8000</cite>. However, the expansion socket was never used.</p>
<p>As the only display device is a 240x64 LCD, the VRAM is just 2KB in size mapped at <cite>0x80000</cite>.</p>
<p><img alt="Memory Map for MS-2401" src="https://tifan.net/images/20200917-ms-2401-memory-map.png"></p><p>MS-2401 is significantly more capable with a bigger LCD display, larger RAM, and larger Chinese font ROM. To conserve mask ROM space, all font data in the mask ROM was compressed.</p>
<p><img alt="Memory Map for MS-2401H" src="https://tifan.net/images/20200917-ms-2401h-memory-map.png"></p><p>You might wonder what does "V-RAM (CRT Áî®)" in MS-2401H/01C mean. MS-2401H/01C is the top of the line model in MS-2401 series featuring ability to attach an external monitor. The graphics chip is <cite>MGP TM6066A</cite>, a Hercules clone, with MDA output.</p>
</div>
<div id="system-devices">
<h2>System Devices</h2>
<p>We all know the 8088 is not a very capable machine. ALPS custom made a few ASICs to connect system devices such as printers, keyboards and LCD monitors to the system. That's also what makes it extremely hard to write an emulator -- without knowing exactly how the ASIC works, it's close to impossible to emulate all devices and peripherals. Even with the original designer's help, we still can't be quite sure what is the exact IO address for each device, let alone determining what each command would do.</p>
<p>But anyway, we do have an rough idea of what the system is doing.</p>
<div id="external-storage-device">
<h3>External Storage Device</h3>
<p>The first model, MS-2400, have an audio cassette connector running at 1200bps. Each cassette can hold around 500KB of data, or 250k Chinese characters.</p>
<p>In 1986, when 3 1/2 inch disk just came out, Mr Jizhi Wang chose to use the very new technology in MS-2401. This is a killer function at that time, because digital documents could be finally archived relatively cheaply. Of course you could always use a computer, but that's a big upfront investment.</p>
</div>
<div id="keyboard">
<h3>Keyboard</h3>
<p><img alt="Memory Map for MS-2401" src="https://tifan.net/images/20200917-ms-2401-keyboard.jpg"></p><p>It's not a ANSI keyboard. The design seems to be inspired by JIS keyboard, and was fully translated into Chinese -- you can't even find "Ctrl" on the keyboard, instead, you'll see "ÊéßÂà∂" (lit. control). This flattens learning curve for the typewriter, as it doesn't feel foreign to the users. Just like we say "it's all Chinese to me" -- the Chinese users would say "it's all English to me" -- because it really is!</p>
<p>One interesting fact to point out is instead of commonly seem Esc, Tab, Caps Lock, Shift, Ctrl arrangement on the left, the keyboard is actually Âçä/ÂÖ® (half width / full width), Tab, Ctrl, Shift, Â∏∏Áî®Â≠ó (frequently used characters). Of course, it's a Chinese typewriter, Caps Lock isn't that important after all.</p>
</div>
<div id="printer">
<h3>Printer</h3>
<p>It sees that the printer only accepts low level commands -- or shall we say, the printer itself does not have a controller. According to the reference manual, the printer head and motor are directly controlled by the ASIC. It also needs a few dedicated timers.</p>
</div>
<div id="asic-and-fdd-controller">
<h3>ASIC and FDD Controller</h3>
<p>In MS-2401H, there are 2 ASICs, each of them contains around 8000 gates. the model is uPD91260GD-5BD and uPD91261GD-5BB.</p>
<p>The floppy controller for MS-2401 MS-2401H is UPD72067GC.</p>
</div>
</div>
<div id="conclusion">
<h2>Conclusion</h2>
<p>The MS series machines are classical examples of pushing the hardware to its limits. Most people would simply say it's impossible to use a 8088-equivalent to drive a Chinese typewriter, but the engineers did it. By abusing the system and designing chips around the 8088, they were even able to map memory larger than the actual address space of the machine! Hats off to the hardworking engineers both in Stone Company and ALPS Electric.</p>
<p>Another thing to point out is Stone Company wrote fabulous documentations. It's really pleasing to read, contains a lot of technical details, and in some occasions, it teaches you electrical engineering! It even contained the layout of the diagnostics program so that you can just disassemble them and add new functionalities should you need them.</p>
<p><img alt="manga illustration in technical document" src="https://tifan.net/images/20200917-stone-documentation-manga.png"></p><p>Plus, the manga illustration is pretty cute. Haven't seen them for a long long time.</p>
</div>


  </div><!-- /.entry-content -->
  

</section>
    <!-- /#contentinfo -->
    
    
  </div></div>]]>
            </description>
            <link>https://tifan.net/blog/2020/09/17/ms240x-chinese-typewriter-2-ms-2401h-hardware-design/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24514269</guid>
            <pubDate>Fri, 18 Sep 2020 08:21:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Writing an x86 bootloader in Rust that can launch vmlinux]]>
            </title>
            <description>
<![CDATA[
Score 42 | Comments 22 (<a href="https://news.ycombinator.com/item?id=24514100">thread link</a>) | @lukastyrychtr
<br/>
September 18, 2020 | https://vmm.dev/en/rust/krabs.md | <a href="https://web.archive.org/web/*/https://vmm.dev/en/rust/krabs.md">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
<article id="contents">
<section>

<p>I've been developping an x86 bootloader in Rust that can use Linux boot protocol. In this article, I'd like to write about my motivation, features of this project, and issues. </p>
 
</section>
<section>
<h2>KRaBs - Kernel Reader and Booters</h2>
<p>KRaBs is a 4-stage chain loader for x86/x86_64 written in Rust.
<br>
 It can boot an ELF-formatted kernel placed on a FAT32 filesystem in the EFI System Partition. The ELF-formatted kernel is read from the filesystem and relocated, and then the kernel is booted. 
<br>
 It is all implemented in Rust. </p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/o8vm/krabs/">GitHub - o8vm/krabs: An x86 bootloader written in Rust.</a> </p>
<p>It has the following features: </p>
<ol> <li> Currently, only legacy BIOS is supported.</li> <li> Both 64 bit and 32 bit system are supported.</li> <li> Both 64 bit long mode and 32 bit protected mode kernel are supported.</li> <li> GPT format partition table is supported.</li> <li> FAT32 file system support.</li> <li> The boot-time behavior can be controlled by CONFIG.TXT, which is placed on the FAT32 filesystem.</li> <li> Minimal x86/x86_64 Linux boot protocol is supported.</li> <li> kernel command line setting in CONFIG.TXT is supported.</li> <li> Some modules such as initramsfs/initrd are supported.</li> 10. The multi-boot specification is not supported. </ol> 
<p>An example of starting 64bit vmlinux with kernel command line and initrd is described in <a target="_blank" rel="noopener noreferrer" href="https://github.com/o8vm/krabs/blob/master/docs/linux-image-setup-64.md">this article</a>. </p>
<p>Just git clone the project and run a <code>cargo run</code> to experience after some preparation: </p>
<pre><code>
cargo run -- -we disk.img
</code></pre>
<p><a target="_blank" rel="noopener noreferrer" href="https://vmm.dev/en/rust/gogWCnI37-demo3.gif"><img src="https://vmm.dev/en/rust/gogWCnI37-demo3.gif" alt="demo3.gif"></a></p>
</section>
<section>
<h2>What motivated me to develop KRaBs?</h2>
<p>I thought that lower level programming below the OS stack could be also made more modern by using Rust. I wanted to extract the minimum essentials from the process of booting the Linux kernel and finally make up original bootloader where there is no black box for me.
<br>
 </p>
<p>In addition: </p>
<ul> <li>It's not easy for me to read the source code of an existing chain loader.</li> <li>Reading large amounts of assembly and C source code is tough for a beginner. It takes a lot of time and effort to read it. </li> <li>It is said that Rust binaries tend to be too big and not suitable for writing bootloaders, but I wondered if it is true.</li> </ul> 
<p>Based on the above, I've decided to write down the bootloader in Rust from scratch. </p>
</section>
<section>
<h2>How KRaBs Works</h2>
</section>
<section>
<h3>Linux kernel bootstrapping mechanism</h3>
<p>While it may be difficult to unravel the Linux kernel bootstrapping mechanism from the bzImage and GRUB bootloader sources, The mechanism itself is surprisingly simple.
<br>
 There are four basic things: Loading the ELF-formatted image from the file system, Relocating it according to the program headers, and initializing system and setting parameters according to The Linux/x86 Boot Protocol. That's all there is to it. </p>
<p>Specifically, the following four types of initialization are performed: </p>
<p><strong>Hardware initialization:</strong> </p><ul> <li>Setting the keyboard repeat rate.</li> <li>Disable interrupts and mask all interrupt levels.</li> <li>Setting Interrupt descriptor (IDT) and segment descriptor (GDT). As a result,</li> all selectors (CS, DS, ES, FS, GS) refer to the 4 Gbyte flat linear address space. <li>Change the address bus to 32 bits (Enable A20 line).</li> <li>Transition to protected mode.</li> <li>If the target is ELF64, set the 4G boot pagetable and transition to long mode.</li> </ul> 
<p><strong>Software initialization:</strong> </p><ul> <li>Get system memory by BIOS call.</li> </ul> 
<p><strong>Information transmission to the kernel:</strong> </p><ul> <li>KRaBs mount the FAT32 EFI System Partition and Reading the CONFIG.TXT.</li> <li>Setting <a target="_blank" rel="noopener noreferrer" href="https://www.kernel.org/doc/html/latest/x86/zero-page.html">Zero Page</a> of kernel parameters and transmit it to the OS.</li> </ul> 
<p><strong>Load items and Relocate the kernel:</strong> </p><ul> <li>Load kernel, initrd and command line according to CONFIG.TXT.</li> <li>The target is an ELF file, KRaBs do the ELF relocation.</li> </ul> 
<p>The format of CONFIG.TXT is a simple matrix-oriented text file that looks like this: </p>
<pre><code>
main.kernel sample-kernel
main.initrd sample-initrd
main.cmdlin sample command line clocksource=tsc net.ifnames=0
</code></pre>
<p>To perform the above process, KRaBs uses a program that is divided into four stages. </p>
</section>
<section>
<h3>Stages Overview</h3>
<ol> <li> stage1  </li> A 446 byte program written to the boot sector. The segment registers(CS, DS, ES, SS) are set to <code>0x07C0</code>, and the stack pointer (ESP) is initialized to <code>0xFFF0</code>. After that, stage2 is loaded to address <code>0x07C0:0x0200</code>, and jumps to address <code>0x07C0:0x0206</code>. In the latter half of stage1, there is an area for storing the sector position and length (in units of 512 bytes) of the stage2 program. <li> stage2  </li> Load stage3 and stage4, then jump to stage3. The stage3 program is loaded at address <code>0x07C0:0x6000</code>, the stage4 is loaded at address <code>0x0003_0000</code> in the extended memory area. The file is read from the disk using a 2K byte track buffer from address <code>0x07C0:0xEE00</code>, and further transferred to an appropriate address using <code>INT 15h</code> BIOS Function <code>0x87h</code>. A mechanism similar to this function is used in stage 4. When the loading of stage3 and stage4 is completed, jump to address <code>0x07C0:0x6000</code>.  <li> stage3  </li> Do hardware and software initialization which need BIOS calls. After a series of initialization, empty_zero_page information is prepared in <code>0x07C0:0x0000</code> to <code>0x07C0:0x0FFF</code>. Enable the A20 line, change the address bus to 32 bits, and shift to the protect mode. Then, jump to the Stage4. <li> stage4  </li> Mount the FAT32 EFI System Partition. Then, read and parse the CONFIG.TXT on that partition. Load ELF kernel image, initrd, and kernel command line according to CONFIG.TXT. Drop to real mode when executing I/O. Set Command line and image informations in empty_zero_page. ELF kernel image is stored to the extended memory address <code>0x100000</code> or later, and then the ELF32/ELF64 file is parsed and loaded. If the target is ELF64, set the 4G boot pagetable and transition to long mode. Finally, jump to the entry point to launch the kernel. At this time, put the physical address (<code>0x00007C00</code>) of the empty_zero_page information prepared in the low-order memory into the <code>ESI</code> or <code>RSI</code> register. <li> planktonü¶†  </li> library common to stage1 ~ stage4. </ol> 
</section>
<section>
<h3>How build KRaBs</h3>
<p>The directory structure of the KRaBs project is as follows: </p>
<pre><code>
$ cd /path/to
$ tree . -L 3
.
‚îú‚îÄ‚îÄ build.rs
‚îú‚îÄ‚îÄ Cargo.toml
‚îú‚îÄ‚îÄ rust-toolchain
‚îú‚îÄ‚îÄ src
‚îÇ   ‚îú‚îÄ‚îÄ bios
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plankton
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stage_1st
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stage_2nd
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stage_3rd
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stage_4th
‚îÇ   ‚îú‚îÄ‚îÄ main.rs
‚îÇ   ‚îî‚îÄ‚îÄ uefi
...
</code></pre>
<p>All four stages that make up the bootloader for the legacy BIOS and a library called plankton are stored as a sub crate under a directory named <code>src/bios</code>.
<br>
 Under the <code>src/uefi</code> directory, we plan to store UEFI-compatible bootloader crates.
<br>
 All these sub-crates will be built by <code>build.rs</code> at <code>cargo build</code> time.
<br>
 </p>
<p><code>src/main.rs</code> is not the main body of the bootloader, <code>src/main.rs</code> is the CLI program that places KRaBs on the disk. This <code>main.rs</code> will write each stage of the KRaBs to the appropriate location on the disk. The <code>-w</code> option is used to write the stages to disk. </p>
<p>With this directory structure, just run <code>cargo buil</code> to build the CLI and the boot loader, and <code>cargo run -- -w disk.img</code> to burn the boot loader to disk. You can also test it with qemu by running <code>cargo run -- -e disk</code>. </p>
</section>
<section>
<h3>DISK Structure</h3>
<p>KRaBs supports disks that are partitioned in GPT format.
<br>
 The BIOS Boot Partition and the EFI System Partition are required. Place stage1 in the boot sector and stage2 ~ stage4 boot code for legacy BIOS in the BIOS Boot Partition. Place the CONFIG.TXT, Linux kernel, initrd on the FAT32 file system of the EFI System Partition. </p>
<p>Example: </p>
<pre><code>
$ gdisk -l disk.img 
...
Found valid GPT with protective MBR; using GPT.
Disk disk2.img: 204800 sectors, 100.0 MiB
Sector size (logical): 512 bytes
Disk identifier (GUID): 2A1F86BB-74EA-47C5-923A-7A3BAF83B5DF
Partition table holds up to 128 entries
Main partition table begins at sector 2 and ends at sector 33
First usable sector is 34, last usable sector is 204766
Partitions will be aligned on 2048-sector boundaries
Total free space is 2014 sectors (1007.0 KiB)

Number  Start (sector)    End (sector)  Size       Code  Name
   1            2048            4095   1024.0 KiB  EF02  BIOS boot partition
   2            4096          106495   50.0 MiB    EF00  EFI system partition
   3          106496          204766   48.0 MiB    8300  Linux filesystem
</code></pre>
</section>
<section>
<h3>Why use EFI System Partition?</h3>
<p>The reason for this is to make this project compatible with the UEFI environment in the future.
<br>
 I didn't support UEFI from the start because: </p>
<ul> <li>This bootloader was originally intended to be used on older PCs, such as the ThinkPad 600X.</li> <li>Currently, Legacy BIOS support works in a wider range system than UEFI.</li> <li>It is mainly intended to be used in the cloud environment except my PC. Legacy BIOS is the mainstream in x86 cloud environment, and there seems to be no merit to replace it with UEFI.</li> </ul> 
</section>
<section>
<h2>Is Rust good for writing a bootloader?</h2>
<p>I know there are pros and cons, but for me, Rust has been so much easier and better than writing C and assemblies. Personally, I think Rust is also pretty good for low-level programming, like bootloaders. </p>
<ol> <li> It's a great relief when the compilation is completed without problems   </li> When something goes wrong, most of the time I only need to suspect the unsafe part. This has made debugging a lot easier. I'm an amateur programmer, but thanks in part to this, I was able to complete my first prototype in a week. <li> Rust's build system is the best  </li> In Rust, you don't have to wonder which object file to link with which, like in C. <li> I can use my C experience</li> Since the chain loader is a rocket structure, we always have to code the unsafe parts in order to move to the next stage, and I thought it would be nice to be able to use the same techniques I often use in C for the unsafe parts.  <li> I think even the low-level code in no_std can be written in a modern way.</li> </ol> 
</section>
<section>
<h2>Issues</h2>
</section>
<section>
<h3>(RESOLVED) Setting Page Tables</h3>
<p>I tried to set up the page table with an alignment with a linker script or a struct attribute <a target="_blank" rel="noopener noreferrer" href="https://doc.rust-lang.org/reference/type-layout.html#representations">align</a>, but none of these things worked. It looked like the alignment settings were breaking other data structures. It's possible that I wasn't doing it right, but I didn't understand why and gave up debugging. In the end, I dealt with it by manually allocating the page table to the area where I wanted to set up. </p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/o8vm/krabs/blob/master/src/bios/stage_4th/src/svm/lm.rs#L44-L69">This code:</a> </p>
<pre><code>
fn setup_page_tables() {
    use plankton::layout::PGTABLE_START;
    use plankton::mem::MemoryRegion;
    let mut pg_table = ‚Ä¶</code></pre></section></article></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://vmm.dev/en/rust/krabs.md">https://vmm.dev/en/rust/krabs.md</a></em></p>]]>
            </description>
            <link>https://vmm.dev/en/rust/krabs.md</link>
            <guid isPermaLink="false">hacker-news-small-sites-24514100</guid>
            <pubDate>Fri, 18 Sep 2020 07:54:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Play console games on the web ‚Äì AirConsole]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24514066">thread link</a>) | @morgam
<br/>
September 18, 2020 | http://aircn.sl/console | <a href="https://web.archive.org/web/*/http://aircn.sl/console">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>http://aircn.sl/console</link>
            <guid isPermaLink="false">hacker-news-small-sites-24514066</guid>
            <pubDate>Fri, 18 Sep 2020 07:49:02 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Alacritty ‚Äì Fastest OS X Terminal Emulator ‚Äì Terminal like tmux/alacritty config]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24513821">thread link</a>) | @bebrws
<br/>
September 18, 2020 | https://bradbarrows.com/post/alacritty | <a href="https://web.archive.org/web/*/https://bradbarrows.com/post/alacritty">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><div><div><article><img src="https://bradbarrows.com/static/alacritty.png" alt="Alacritty - Fastest OSX Terminal?"><div><h2>Introducing Alacritty</h2><p>Alacritty is most likely the fastest GPU accelerated terminal emulator for OSX.</p><p>The only reason I hadn't tried it or used it very much before was the learning curve 
of a new terminal emulator and it's lack of tabs.</p><p>Luckily I was able to figure out how to make a great tmux and alacritty configuration 
file along with some nice bash functions to help with editing the configurations.</p><h2>Setting up Alacritty using my build</h2><p>First <a href="https://github.com/bebrws/alacritty/releases/download/0.6.0-dev-brads/Alacritty.zip">install Alacritty</a> from my repo to get a build that has an "Always On Top' action
I built in. The keyboard combo for this will "Command Shift A".</p><h2>Setting up Alacritty using my tmux and alacritty config</h2><p>Next clone my <a href="https://github.com/bebrws/myalacritty">configuration files</a></p><pre><code>git clone git@github.com:bebrws/myalacritty.git
cd myalacritty
cp tmux.conf ~/.tmux.conf
mkdir -p ~/.config/alacritty/
cp * ~/.config/alacritty/
wget http://bradbarrows.com/dls/jsin.zip
unzip jsin.zip
mv jsin /usr/local/bin/jsin</code></pre><h2>Bash/ZSH functions</h2><p>Add these functions to your .zshrc</p><pre><code>######### ALACRITTY GOOODNESS ############
alias -g alacrittycolors='python3 /Users/bbarrows/Library/Python/3.8//lib/python/site-packages/alacritty_colorscheme/cli.py '
# To use run: alaFontSize 12
function alaFontSize() {
    cat ~/.config/alacritty/alacritty.yml | jsin --yaml --yamlout --whole "(l.font.size=Number(\"$1\")) &amp;&amp; l; " &gt; $HOME/.config/alacritty/alacritty.yml.tmp
    mv $HOME/.config/alacritty/alacritty.yml.tmp $HOME/.config/alacritty/alacritty.yml
}
# To use run: alaOpacity 0.8
function alaOpacity() {
    cat ~/.config/alacritty/alacritty.yml | jsin --yaml --yamlout --whole "(l.background_opacity=Number(\"$1\")) &amp;&amp; l; " &gt; $HOME/.config/alacritty/alacritty.yml.tmp
    mv $HOME/.config/alacritty/alacritty.yml.tmp $HOME/.config/alacritty/alacritty.yml
}
# To use run: alaColorTheme
# Must run: sudo pip3 install alacrittycolors
# before using
# Also make sure jsin is installed from above or: https://github.com/bebrws/jsin
function alaColorTheme() {
   export ALABASE=$(python3 -m site | grep site | grep packages | head -n 1 | jsin "l.replace(/\s*\'/g, '').replace(/,/g, '')")
   python3 $ALABASE/alacritty_colorscheme/cli.py -a ~/.config/alacritty/colors/$(ls  ~/.config/alacritty/colors/ | fzf --preview "python3 $ALABASE/alacritty_colorscheme/cli.py -a ~/.config/alacritty/colors/{} &amp;&amp; htop")
}
function alaResetDark()  {
  cp ~/.config/alacritty/alacritty.yml.dark ~/.config/alacritty/alacritty.yml
}
function alaResetLight()  {
  cp ~/.config/alacritty/alacritty.yml.light  ~/.config/alacritty/alacritty.yml
}</code></pre><h2>Keyboard shortcuts</h2><ul><li>You should end up with tabs that you can click on just like Terminal.app and then can use the keyboard shortcuts "Shift-Left or Right arrow key".</li><li>"Control-b then c" - Create a new tab</li><li>"Control-b then f" - Create a horizonal window in the tab</li><li>"Control-b then v" - Create a veritical window in the tab</li><li>"Alt-Left or Right arrow key" - Move between split windows in the tab</li><li>"Command-Shift-A" - Keep Alacritty always on top</li><li>"Command-Shift-F" - Full screen</li><li>"Command-Shift-=/-" - Font size</li></ul><p>All the control and alt backspace and arrow key bindings should work out of the box!</p><p>You will end up with this beautiful terminal:</p><p><img alt="Alacritty in action" src="https://bradbarrows.com/static/alacritty.gif"></p></div></article></div></div></section></div>]]>
            </description>
            <link>https://bradbarrows.com/post/alacritty</link>
            <guid isPermaLink="false">hacker-news-small-sites-24513821</guid>
            <pubDate>Fri, 18 Sep 2020 07:10:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Love Hurts: So let‚Äôs stop infantilizing women and demonizing men]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24513528">thread link</a>) | @jseliger
<br/>
September 17, 2020 | https://www.persuasion.community/p/love-hurts-511 | <a href="https://web.archive.org/web/*/https://www.persuasion.community/p/love-hurts-511">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><a target="_blank" href="https://cdn.substack.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fd514fda0-6ff4-4caa-82cb-aaab2d7d66bb_4804x3203.jpeg"><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fd514fda0-6ff4-4caa-82cb-aaab2d7d66bb_4804x3203.jpeg" data-attrs="{&quot;src&quot;:&quot;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/d514fda0-6ff4-4caa-82cb-aaab2d7d66bb_4804x3203.jpeg&quot;,&quot;height&quot;:971,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:1378800,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/jpeg&quot;,&quot;href&quot;:null}" alt=""></a></p><p>If you've ever read a Regency romance novel or watched a Jane Austen adaptation, you probably have a passing acquaintance with the trope of the <em>ruined woman</em>: that tragic victim of some caddish man who loved her, left her, and wrecked her societal resale value on his way out the door. In a world governed by a patriarchal system of marriage and inheritance, dependent on female purity to ensure any male offspring were legitimate, the ruined woman was literally damaged goods. Even the slightest whiff of a premarital dalliance could spell her undoing.</p><p>These old school ideas about women's worth have never entirely left us, resurfacing over the years in everything from the work of Andrea Dworkin to the abstinence wars of the late 1990s (when sex ed teachers would memorably compare girls who had sex before marriage to used pieces of Scotch tape). With dowries out of the picture, the idea that sex devalued women attached itself instead to America's sudden obsession with self-esteem. A young woman who had sex, particularly casual sex, clearly didn't respect herself. She was trying to fill an emotional void with cheap physical connection, and‚Äîyes‚Äîwas making herself unmarriageable. <em>He won‚Äôt buy the cow,</em> we were told, <em>if he can get the milk for free.</em></p><p>Today, the notion that sexual contact is degrading to women has become wrapped up in the contemporary progressive language of trauma and consent. The damage in question is emotional, not material, but the paternalistic message is the same: innocent women must be protected. </p><p><em>Consent is sexy</em>, we are told, as sex-education pamphlets primly instruct us in the essentials of mid-coital conversation.<em> Do you like it when I touch you there? What do you want me to do to you? </em>Never mind that said literature studiously ignores the fact that for the young, inexperienced people at whom such instructions are directed, dirty talk by administrative mandate just adds a whole new layer of pressure to an already awkward situation: For all its protestations about how <em>hot </em>consent can be, the progressive discourse surrounding sex is markedly unsexy. Amid the obsession with power, oppression and the ever present threat of harm, the notion of desire (or, heaven forbid, <em>fun</em>) all but disappears. Even the most pornographic consent-is-sexy script is about risk mitigation, not titillation, an insurance waiver with a side of heavy breathing. </p><p>This laser-focus on consent effectively recasts sex itself as a dangerous act, to be undertaken with extreme caution and only if absolutely necessary. And if relationships are mainly about power and the threat of abuse, those who pursue them too enthusiastically must be viewed with suspicion. More old-school gender stereotypes crop up here: men are increasingly seen as predators almost by default, while women are cast as helpless, even infantile. (Witness the rise of the word "grooming," previously reserved for sexual predation of children, as something done to women in their twenties.) As a breathtaking range of disappointing male behavior gets swept under the umbrella of MeToo, the line between pursuing a woman and preying on her has become blurred. When it was revealed that comic book writer Warren Ellis <a href="https://www.theguardian.com/books/2020/jul/13/women-speak-out-about-warren-ellis-transmetropolitan">had relationships with multiple women at once</a>, the litany of harms included no sexual misconduct at all; instead, the women were "[shocked] at the sheer magnitude of his pursuits ‚Ä¶ heartbroken when he stopped talking to them, or angry after discovering he was sending many of them identical messages." </p><p>Shock, heartbreak, anger: these are normal things to feel when a romantic relationship goes sour. But today, they're lumped into the nefarious category of abuse by virtue of the purported power someone like Ellis‚Äîolder, wealthier, more professionally successful, or otherwise more <em>privileged</em>‚Äîholds over his partners. By contrast, the notion that these were known and unavoidable risks of intimacy is dismissed as victim-blaming. As one of Ellis' accusers tweeted, "None of us consented to being manipulated." </p><p>This notion of consent as a safeguard against upsetting emotions is both new and counterintuitive: in most contexts (for instance, medical trials or media interviews), consent is sought precisely because what follows cannot be predicted, and may well be uncomfortable. But in certain progressive spaces, discomfort of any kind is taken to indicate the absence of consent, rendering countless normal human interactions suspicious. Turning someone down isn't comfortable, but neither is asking someone out. Even happy relationships involve moments of discomfort, disappointment, conflict‚Äîand even amicable breakups are rarely pain-free. Yet young people are now being taught to expect absolute emotional safety in sex, love and courtship at all times‚Äîand that if they feel hurt, disappointed or betrayed, it means they've been violated.</p><p data-attrs="{&quot;url&quot;:&quot;https://www.persuasion.community/p/love-hurts-511?&amp;utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share&quot;,&quot;text&quot;:&quot;Share&quot;,&quot;class&quot;:null}"><a href="https://www.persuasion.community/p/love-hurts-511?&amp;utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share"><span>Share</span></a></p><div><p>So how did we get here? Social conservatives say that hookup culture is to blame, and they're not wrong: traditional courtship, monogamy and marriage have their downsides, but they do give relationships a certain amount of structure and security. In the age of Tinder, those safeguards are comparatively hard to come by‚Äîand the elaborate (and sometimes ridiculous) bureaucracy of consent regulations may be best understood as a desperate attempt to impose some order on this wild west of sex and intimacy, spearheaded by people who are terrified of being vulnerable or getting hurt. There's a sense that relationships could be made unfailingly safe and comfortable, that disappointment and awkwardness wouldn't exist, if we only had enough <em>rules</em>. </p><p> Relationships have always been risky endeavors, but, ironically, this hypervigilance has made them seem outright terrifying. Every new romance is treated like a scavenger hunt for "red flags" that forewarn abuse, and every breakup is subject to adjudication via the #MeToo framework. Unhappy exes hash out their grievances on social media in a way that used to be reserved for divorced celebrities wrangling for the sympathy of the press. Private affairs are dragged into the spotlight for public reckoning and reparations. Men, already saddled with the pressure of making the first move, have to calculate the additional risk that an awkward overture or misread signal will result not just in rejection, but public humiliation and ruination. For all its valuable contributions to combating sexual harassment in the workplace, #MeToo has also made dating itself at once more fraught and less appealing‚Äîfor everyone. If every relationship is a power struggle, in which the less privileged party is perpetually at risk of being victimized, why even bother? Who could possibly enjoy this? </p></div><p>This is not to demand a return to the rigid courtship norms of the Regency era‚Äînor to the blinkered sex-positivity of the early aughts. Instead, we need to reintroduce basic notions of female empowerment and individual agency, and push back against the facile understanding of complex interpersonal relationships as power struggles between oppressed and oppressor. We should teach both young men <em>and</em> young women to recognize each other's vulnerability and humanity‚Äîeven when a partner may hold more power than they do by certain measures‚Äîand to engage with their lovers as individuals, rather than as representatives of an identity group. And we should also teach young people to tolerate and work through discomfort, rather than seeing themselves as helplessly in thrall to power dynamics that leave them forever teetering on the precipice of victimhood. </p><p>When I wrote a teen advice column between 2009 and 2019, there was one question I received more often than any other: "How can I fall in love without getting hurt?" My answer was always the same: You can't! Intimacy requires vulnerability; the joy of human connection always comes with the risk of being hurt. But that risk is the same for everyone, no matter how privileged or blessed with institutional clout. Even the wealthiest, whitest, most cisheterosexual dudebro in the world can be absolutely wrecked by heartbreak‚Äîand even a person who sits at the intersectional nexus of multiple oppressed identity categories has the power to break someone's heart.</p><p>As much as trauma and abuse have replaced purity and marriageability on the landscape of moral panics, the same old fear is at work: that women's desires, left unchecked, will leave them in ruins. And while the impulse to protect young people from emotional pain may be well intentioned, the results are toxic. The obsessive focus on power as the driving mechanism in all relationships fuels a cycle of catastrophic thinking: women are ever more fearful of being mistreated, ever more convinced of their powerlessness to avoid it, and ever more sure that when it happens, they will be unable to handle it. And all the while, men, dehumanized by a framework that casts their desires as inherently predatory, are being taught to mistrust and infantilize women in the guise of respecting them.</p><p>We need to permanently banish the specter of the ruined woman from our understanding of heterosexual relationships. A healthy, sex-positive society acknowledges that unpredictability is a feature of dating, not a bug, and cannot be consent-scripted out of existence‚Äîparticularly for inexperienced people, and especially when it comes to casual sex. Young people must be taught to be kind with and conscientious to each other, to respect boundaries, and to err on the side of caution in ambiguous situations‚Äîbut they should also be taught that love and sex are rife with painful misunderstandings, and that even well-meaning people can hurt each other because they're insecure, confused or genuinely unsure about what they want. Instead of trying to keep them from ever feeling heartbreak, regret or shame, let's teach them that these things are always survivable, and sometimes even useful. Teach them to be gracious about rejection and charitable about missteps, knowing that they'll make mistakes ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.persuasion.community/p/love-hurts-511">https://www.persuasion.community/p/love-hurts-511</a></em></p>]]>
            </description>
            <link>https://www.persuasion.community/p/love-hurts-511</link>
            <guid isPermaLink="false">hacker-news-small-sites-24513528</guid>
            <pubDate>Fri, 18 Sep 2020 06:23:15 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How can we, as web professionals, help to make the web more energy efficient?]]>
            </title>
            <description>
<![CDATA[
Score 107 | Comments 223 (<a href="https://news.ycombinator.com/item?id=24513427">thread link</a>) | @giuliomagnifico
<br/>
September 17, 2020 | https://cmhb.de/web-design-and-carbon-impact | <a href="https://web.archive.org/web/*/https://cmhb.de/web-design-and-carbon-impact">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        
<section>
    <div><blockquote>
<p>How can we, as web professionals, help to make the web more energy efficient?</p>
</blockquote>
<p>From data centres to transmission networks to the devices that we hold in our hands, it is all consuming electricity, and in turn producing carbon emissions. According to recent estimates, the entire network already consumes 10% of global electricity production, with data traffic doubling roughly every two years. It‚Äôs probably something very few people think about, or are even aware of as being an issue. But the fact of the matter is that the Internet consumes a huge amount of electricity. And when it comes to web design, there is a lot that can be done to make the web far more energy efficient.</p>
<hr>
<h2>Attitudes</h2>
<p>Creating a website is a lot more accessible today, made simpler by the emergence of no-code site builders. But it might be asking a lot for your typical web user or amateur creator to be aware of the environmental impact of their site. This, however, shouldn‚Äôt really be the case for any digital professional. Naturally, web developers will be more conscious of the weight of their pages, given that they are fully immersed in the code and content management that serves what you see on a web page. But even then, many developers simply look for the quickest route to completing a project, rather than the best way to produce the quickest and most efficient site. </p>
<p>So they load a website with bulky Javascript and third-party tools to meet the visual specification of the client or designer. As long as it works, right? They probably don‚Äôt care. They‚Äôre probably happy with their site that loads quickly on their 500Mbps connection. Who cares if they‚Äôre wasting expensive data on mobile connections in other countries? ‚ÄúBut Carl, some of us don‚Äôt have the luxury of building super high-performance, lightweight, and optimised sites due to client budgets and deadlines.‚Äù Well, I think you need to work on your craft, change your attitude and your priorities, or find another profession.</p>
<p>When we talk about the energy efficiency of websites, it‚Äôs easy to assume that it‚Äôs a purely technical topic. However, efficiency can be improved before we even build a website. Design and content have a big impact on energy efficiency.</p>
<p>Therefore, some of the biggest contributors to heavy sites and large CO2 emissions, are <em>designers</em>. Large moving imagery, multiple web fonts, animation, sound, autoplaying video, and generally esoteric design is prevalent these days. We see showcase after showcase of the <em>best of the web</em>, where the only criteria is: ‚ÄúDoes it look well-designed?‚Äù Well, look under the hood. It‚Äôs pretty terrifying. And that‚Äôs not even getting into the many accessibility concerns. If only more designers would ask themselves, ‚ÄúWhen was the last time I considered page size when designing something? When was the last time I decided that page weight was more important than aesthetics?‚Äù </p>
<p>These are questions I have put to designers before, and the response quite often is, ‚ÄúI‚Äôm just experimenting with technologies and trying to improve my UI skills. What harm is there in that?‚Äù Well, <em>Site of the Day</em>, the harm is your energy usage, and the likelihood that nobody‚Äîbesides an echo chamber of fellow designers‚Äîgive a shit about your over-design. People just want to access content quickly, without distraction, without friction, and without it using a tonne of data. That‚Äôs not to say aesthetics aren‚Äôt important‚Äîthey certainly are. The visual design of a site can play a significant role in user experience, readability, and conversion, but as with most things, there is a balance to be achieved. And there is a responsibility to be shared.</p>
<hr>
<h2>Solutions</h2>
<p>Fortunately, there are a growing number of web professionals who do care about the impact sites have on the planet, and there are many solutions designers and developers alike can find to improve their sites without overly compromising their designs. Solutions that I am actively looking into to improve my own work.</p>
<p>So how can we be more energy efficient in web design? Well, the folks over at <a href="https://www.wholegraindigital.com/blog/website-energy-efficiency/">Wholegrain Digital</a> put together a comprehensive list, but here are some key considerations:</p>
<h3>Reduce Images</h3>
<p>The single largest contributors to page weight. The more images, the more data needs to be transferred and the more energy is used. A good starting point is to ask oneself:</p>
<ul>
<li>Does the image genuinely add value to the user?</li>
<li>Does it communicate useful information?</li>
<li>Could the same impact be achieved if the image was smaller?</li>
<li>Could we achieve the same effect with a vector graphic (or even CSS style) instead of a photo?</li>
</ul>
<h3>Optimise Images</h3>
<p>Some designs are focused almost entirely on imagery, in which case optimisation is vital to better performance. There are technical decisions that significantly affect the file size of images displayed on a page. These include:</p>
<ul>
<li>Load images at the correct scale instead of relying on CSS to resize them, so that you avoid loading images that are larger than the scale they will be displayed at.</li>
<li>Use image optimisation tools before you upload them to your site. I personally use <a href="https://imageoptim.com/mac">ImageOptim</a>.</li>
<li>Use the most efficient file format for each image, such as WebP instead of JPEG (although this is not supported by all browsers).</li>
<li>Use image processing tools to resize, crop, and enhance your images that are served. I use <a href="https://www.imgix.com/">imgimx</a> for this, which works well for image-heavy sites such as <a href="https://minimalissimo.com/">Minimalissimo</a>.</li>
</ul>
<h3>Reduce Video</h3>
<p>By far the most data intensive and processing intensive form of content. As with images, ask yourself if videos are really necessary. If they are, never autoplay a video. It creates a much higher load on the users CPU, resulting in vastly greater energy consumption. Plus, it‚Äôs annoying as hell. Let the user decide whether or not to play a video.</p>
<h3>Font Selection and Optimisation</h3>
<p>Web fonts can enhance the visual appeal of site designs, as well as improve readability, but they can add significant file weight to the sites on which they are used. A single font file could be as much as 250Kb, and that might only be for the standard weight. If you want bold, add another 250Kb! A couple of options worth considering:</p>
<ul>
<li>Use system fonts where possible.</li>
<li>Use fewer font variations.</li>
<li>Stick to modern web font file formats like WOFF and WOFF2.</li>
<li>Subset fonts to only include the characters needed on the site.</li>
</ul>
<h3>Write Clean Code</h3>
<p>Tidy and streamlined code is a fundamentally good thing. Keep code clean and simple, avoid duplication, and write efficient queries. The code behind the scenes should be a well oiled, lean machine. And I‚Äôll take this opportunity to share a controversial opinion: <em>all designers should learn to code.</em> At least if they want a website. No-code site builders can be very good, but if you‚Äôre not aware of the underlying code, then you‚Äôll be less aware of ways to optimise your site.</p>
<h3>Use Less Javascript</h3>
<p>JS impacts website efficiency in two ways: by adding file weight to the web page and by increasing the amount of processing required by the user‚Äôs device. The second of these is something that applies to JS much more than to other types of files. Look for ways to achieve front-end interactions, functionality, and animations using more efficient technologies like CSS, or at least use JS efficiently. A particular mention should be given here to tracking and advertising scripts that rarely offer any value to the user, but can add significant file weight. Don‚Äôt let advertising get in the way of craftsmanship.</p>
<h3>Use Server Caching</h3>
<p>Using caching technologies such as <a href="https://memcached.org/">Memcached</a> or <a href="https://varnish-cache.org/">Varnish</a> pre-generate static versions of each page so that the server overhead can be significantly reduced for most visitors. This significantly reduces server energy consumption and makes a big difference to page load times. </p>
<h3>SEO</h3>
<p>When optimising a site for search engines, we are helping people find the information they want quickly and easily. When SEO is successful, it results in people spending less time browsing the web looking for information, and visiting fewer pages that don‚Äôt meet their needs.</p>
<hr>
<p>No site is perfect, but appreciating that we have a responsibility to produce better digital design for the planet and for users is a good place to start. Web efficiency is an attitude and the result of a mindful approach to building for the web.</p>
<hr>
<h2>Useful Resources</h2>
<ul>
<li><a href="https://www.websitecarbon.com/">Website Carbon</a> (test your site‚Äôs carbon footprint)</li>
<li><a href="https://imageoptim.com/mac">ImageOptim</a> (image optimisation tool)</li>
<li><a href="https://www.imgix.com/">imgix</a> (image processing tool)</li>
<li><a href="https://developers.google.com/speed/pagespeed/insights/">Google PageSpeed Insights</a> (test your site‚Äôs performance)</li>
<li><a href="https://solar.lowtechmagazine.com/low-tech-solutions.html">Low-tech Solutions</a> (by Low-tech Magazine)</li>
</ul></div>
</section>
    </div></div>]]>
            </description>
            <link>https://cmhb.de/web-design-and-carbon-impact</link>
            <guid isPermaLink="false">hacker-news-small-sites-24513427</guid>
            <pubDate>Fri, 18 Sep 2020 06:02:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Ignore every founder‚Äôs story on how they started their company]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24513310">thread link</a>) | @trevmckendrick
<br/>
September 17, 2020 | https://www.trevormckendrick.com/essays/why-you-should-ignore-every-founders-story-about-how-they-started-their-company | <a href="https://web.archive.org/web/*/https://www.trevormckendrick.com/essays/why-you-should-ignore-every-founders-story-about-how-they-started-their-company">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>By Trevor McKendrick üëã - Have you <a href="https://www.trevormckendrick.com/newsletter" target="_blank">read my free newsletter</a>?<br>‚Äç</p></div><div><div><h3>Founding Stories Are Myths</h3><p>Company founding stories are almost always non-malicious lies. Take the image above of Reed Hastings @ Netflix....</p><p>Reed Hastings has <a href="https://www.vanityfair.com/news/2013/02/07-reed-hastings">said</a> <a href="http://archive.fortune.com/2009/01/27/news/newsmakers/hastings_netflix.fortune/index.html">many</a> <a href="https://twitter.com/netflix/status/2746816142?lang=en">times</a> <a href="https://www.wired.com/2002/12/netflix-6/">that</a> <a href="http://www.evancarmichael.com/library/reed-hastings/Reed-Hastings-Quotes.html">he got the</a> <a href="https://www.hollywoodreporter.com/news/reed-hastings-innovator-year-81514">idea</a> for Netflix because he once was charged a $40 late fee on Apollo 13.</p><p>That didn‚Äôt actually happen. </p><p>It‚Äôs unfortunate because it will inevitably mislead anyone learning how to start a company. </p><h3>Sam Walton's Overnight Success</h3><figure><p><img src="https://uploads-ssl.webflow.com/5f139e18c71662d40ea9d4c9/5f139e70c3fecf07561da8e7_grand_opening.jpeg" alt=""></p></figure><p>Sam was already 44(!) when he opened the first Walmart and had been running his own retail stores for over 15 years.</p><p>He wondered why people focused on the beginning of Walmart: </p><p><strong>Somehow over the years folks have gotten the impression that Walmart was something I dreamed up out of the blue as a middle-aged man, and that it was just this great idea that turned into an overnight success‚Ä¶ </strong></p><p><strong>Like most overnight successes, it was about 20 years in the making.</strong></p><p>If you‚Äôre trying to build your own thing &amp; you want to learn from ‚Äúthe founder of Walmart‚Äù, looking at the start of the company itself is stupid because at that point he already had 15 years of experience</p><p>So let‚Äôs start with Sam‚Äôs very first store.</p><h3>The Biggest Mistake of&nbsp;Sam's Professional Life</h3><p>Sam started his retail career at 27 buying his 1st store, a ‚ÄúBen Franklin‚Äù variety store franchise. </p><p>As a beginner he relied on the franchise‚Äôs playbook but also incorporated his own experiments. </p><p>Things like:</p><ul role="list"><li>putting popcorn &amp; ice cream machines in front of the store to drive traffic</li><li>doing huge discounts but actually making it up in volume (i.e. not ironically)</li><li>buying directly from manufactures instead of going through the franchise (which allowed for cheaper prices)</li></ul><p>He worked hard on that single store for 5 years, grew sales 3.5x to $250k/year and became the #1 Ben Franklin franchisee in his six-state region.</p><p>But then he found out he‚Äôd made a gigantic mistake.</p><p><strong><em>When he signed the store lease he didn‚Äôt include an option to renew it.</em></strong></p><p>The owner (a local department store competitor) saw his success &amp; refused to renew the lease at any price, thereby forcing Sam to shut down the store.</p><p>Imagine working on something for 5 years straight, becoming the best at it, and then having a single person end it all.</p><p>Sam was devastated:</p><p><strong><em>It was the lowpoint of my business life. I felt sick to my stomach. I couldn‚Äôt believe it was happening to me‚Ä¶ I had built the best variety store in the whole region and worked hard in the community ‚Äì done everything right ‚Äì and now I was being kicked out of town. It didn‚Äôt seem fair. I blamed myself for ever getting suckered into such an awful lease, and I was furious at the landlord.</em></strong></p><p>He was mad, but he accepted responsibility:</p><p><strong><em>I‚Äôve always thought of problems as challenges, and this one wasn‚Äôt any different‚Ä¶ I had to pick myself up and get on with it, do it all over again, only even better this time.</em></strong></p><p>If Facebook or Google change their algorithms you at least get to keep your old customer base and your business assets.</p><p>But with a retail store you have none of that. </p><p>And because of the structure of the town they couldn‚Äôt just open another store somewhere nearby.</p><p>The Waltons literally had to pack up their family of 6 and go find a new town.</p><figure><p><img src="https://uploads-ssl.webflow.com/5f139e18c71662d40ea9d4c9/5f139e7090bddf371b5d9227_shadow_figures.jpeg" alt=""></p></figure><p>If he‚Äôd wanted to Sam had plenty of reasons to sulk: they were starting all over in a <em>smaller</em> town (Bentonville) that also had its fair share of competition (3 other variety stores). </p><p><strong>But Sam said ‚Äúit didn‚Äôt matter much because I had big plans.‚Äù</strong></p><h3>Unsexy Determination</h3><p>Sam spent the next 12 years in what I call <em>narrative limbo</em>.</p><p>It‚Äôs the crucial part of any ‚Äúovernight success‚Äù that doesn‚Äôt get covered in the Successful Entrepreneur genre.</p><p>No one writes about all the random tangents and mistakes you make here.</p><p>Like, say, that time Sam tried to start a shopping mall 10 years too early and lost $25,000? </p><p>Or what about the time a tornado destroyed his best performing store? All he had to say was ‚Äúwe just rebuilt it and got back at it.‚Äù</p><p>This is important to know if you‚Äôre trying to learn from Sam, but it doesn‚Äôt fit into any narrative.</p><p>The lesson here is that there will be mistakes and problems on any path to success. As a recent book title says, <a href="https://www.amazon.com/dp/B00G3L1B8K/ref=dp-kindle-redirect?_encoding=UTF8&amp;btkr=1">those obstacles are the way itself.</a></p><p>A coworker said Sam excelled here because he woke up every day ‚Äúdetermined to improve something‚Äù, and that he was</p><p><strong><em>less afraid of being wrong than anyone I‚Äôve ever known‚Ä¶Once he sees he‚Äôs wrong, he just shakes it off and heads in another direction.</em></strong></p><p>You don‚Äôt get any of this from Reed Hastings when he talks about $40 late fees. You think ‚Äúoh I need a great idea‚Äù when the reality is the idea is nothing and your psychology &amp; persistence is everything.</p><p>Eventually Sam got to 15 stores &amp; by 1960 was the largest independent variety store operator in the US, doing a a total of ~$12M (in 2018 dollars) in annual revenue.</p><h3>It Would Seem Obvious</h3><p>It was here that Sam finally saw the opportunity for much bigger discount stores and got to work on the 1st Walmart.</p><p>He was the most successful independent operator in the US &amp; had 15 years of experience in retail, surely it should have been easy for him to raise money from investors‚Ä¶?</p><p>Wrong.</p><p>Sam asked other store owners, entrepreneurs, competitors‚Ä¶ basically everyone said no.</p><p>He got a measly 5% from his own brother &amp; a store manager and had to borrow the other 95% (signing their house and all their other stores as collateral).</p><p><strong><em>Even the great Sam Walton couldn‚Äôt find investors to start the 1st Walmart, on the back of a near-perfect record in retail.</em></strong></p><h3>The 1st Wal-Mart</h3><p>Finally, the point where most people look at to learn, is the end of our story.</p><p>The 1st Walmart was an ugly retail store (8-foot ceilings, concrete floor, wooden fixtures) but it worked because Walmart‚Äôs prices always beat competitors. </p><p>(Even the name ‚ÄúWalmart‚Äù was selected with customer prices in mind: it was cheaper to buy neon signs for 7 letters than the longer names Sam considered.)</p><p>And you think Sam cared 2 cents about what anyone else thought about his stores? </p><p>The New York Times doesn‚Äôt mention Sam or Walmart until 1969, 7 years after the 1st store opening, and he‚Äôs just one random quote in the back of the paper:</p><figure><p><img src="https://uploads-ssl.webflow.com/5f139e18c71662d40ea9d4c9/5f139e7098a06f34c1f02247_south.png" alt=""></p></figure><p>And the Walmart 1970 IPO got a <em>single</em> mention on page 44 of the Times:</p><figure><p><img src="https://uploads-ssl.webflow.com/5f139e18c71662d40ea9d4c9/5f139e7072644e0be8fffc12_nyt_walton.png" alt=""></p></figure><p>If you want to learn from entrepreneurs, look at the start not the finish.</p><p>This first appeared in my weekly newsletter <em>How It Actually Works</em>. <a href="https://www.howitactuallyworks.com/">Sign up to receive it here.</a></p></div></div></div>]]>
            </description>
            <link>https://www.trevormckendrick.com/essays/why-you-should-ignore-every-founders-story-about-how-they-started-their-company</link>
            <guid isPermaLink="false">hacker-news-small-sites-24513310</guid>
            <pubDate>Fri, 18 Sep 2020 05:32:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[My Principles for Building Software]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24512801">thread link</a>) | @dailymorn
<br/>
September 17, 2020 | http://kevinmahoney.co.uk/articles/my-principles-for-building-software/ | <a href="https://web.archive.org/web/*/http://kevinmahoney.co.uk/articles/my-principles-for-building-software/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article itemscope="" itemtype="http://schema.org/BlogPosting" id="my-principles-for-building-software">
  <div itemprop="articleBody">
    <p><time itemprop="datePublished">17 September 2020</time></p>

<p>These are my personal principles for building software. I hope to frequently update them as my views change. There can be
valid reasons for breaking them (they are <em>principles</em>, not <em>laws</em>), but in general I believe following
them works out well.</p>

<p>Most of them revolve around making the system simpler in some way. It‚Äôs
my belief that simpler systems are more reliable, easier and quicker to modify,
and generally easier to work with.</p>

<ul>
  <li><a href="#make-invalid-states-unrepresentable">Make Invalid States Unrepresentable</a></li>
  <li><a href="#data-consistency-makes-systems-simpler">Data Consistency Makes Systems Simpler</a></li>
  <li><a href="#design-data-first">Design ‚ÄúData First‚Äù</a></li>
  <li><a href="#measure-before-you-cut">Measure Before You Cut</a></li>
  <li><a href="#avoid-trading-local-simplicity-for-global-complexity">Avoid Trading Local Simplicity for Global Complexity</a></li>
  <li><a href="#recognise-intrinsic-complexity">Recognise Intrinsic Complexity</a></li>
  <li><a href="#fewer-technologies-result-in-simpler-systems">Fewer Technologies Result in Simpler Systems</a></li>
  <li><a href="#focus-your-learning-on-concepts-not-technologies">Focus Your Learning on Concepts, not Technologies</a></li>
  <li><a href="#code-consistency-is-important">Code Consistency is Important</a></li>
  <li><a href="#shared-principles-are-important">Shared Principles are Important</a></li>
</ul>

<h2 id="make-invalid-states-unrepresentable">Make Invalid States Unrepresentable</h2>

<p>I have put this first because I think it is one of the most important
and most powerful principles.</p>

<p>You may have heard this phrase in relation to designing your program‚Äôs types, but
the principle applies everywhere you represent data - for example database design.</p>

<p>Not only does this reduce the number of states
your system can be in (and thus make it simpler), but it reduces the
number of <em>invalid</em> states, which is even better! Your system does not
have to handle these states because they literally cannot be
represented in your program.</p>

<p>This is not just a minor convenience, it can drastically simplify your system and prevent
entire classes of bugs from occurring.</p>

<h2 id="data-consistency-makes-systems-simpler">Data Consistency Makes Systems Simpler</h2>

<p>Consistency enforces rules on your data, and so reduces the number
of states your system needs to handle. This follows on from the
‚Äúmake invalid states unrepresentable‚Äù principle.</p>

<p>I am using consistency here in a very general sense: that your data
adheres to certain rules, and that it always obeys those rules
at every point in time. This definition is related to ACID consistency, and shouldn‚Äôt be confused with CAP consistency.</p>

<p>The rules can be any pretty much anything, for example, 
that your credit should never be able to go negative,
or that private posts should not be visible to others.
It is not restricted to foreign keys or unique indexes, although
they are also valid examples.</p>

<p>As well as your database, consistency may be enforced by your
application utilising ACID transactions. It is preferable to enforce
them at the database level, but this is not common practice for
anything more complex than simple checks for practical reasons.</p>

<p>Anything which restricts or compromises consistency results in complexity.
This leads to the following practical advice:</p>

<p>It is simpler to have:</p>
<ul>
  <li>Fewer databases (ideally one)</li>
  <li>Normalised, less redundant data</li>
  <li>A ‚Äògood‚Äô database design (big topic)</li>
  <li>ACID transactions</li>
  <li>More data constraints</li>
</ul>

<p>It is more complex to have:</p>
<ul>
  <li>Multiple databases</li>
  <li>Redundant or denormalised data</li>
  <li>A poor database design</li>
  <li>Fewer (or no) data constraints</li>
</ul>

<p>Of course, there are valid reasons to make your system more complex, and I don‚Äôt
intend complexity to be a dirty word, but see <a href="#measure-before-you-cut">‚Äúmeasure before you cut‚Äù</a>.</p>

<p>I consider this principle to be one of the most undervalued in
software engineering today. Consistency issues often go unrecognised.
Many problems, I daresay <em>most</em> problems,
are consistency issues at an essential level - data that does
not conform to some expectation.</p>

<p>See <a href="#appendix-a-inconsistency-results-in-complexity">the appendix</a> for an illustration of how inconsistency can cause complexity.</p>

<h2 id="design-data-first">Design ‚ÄúData First‚Äù</h2>

<p>What is more likely to be around in 10 years: your code or your data?</p>

<p>Code can be thrown away and re-written, but this is rarely the case
with data.</p>

<p>Data is more important than code. The only purpose of code is to transform data.</p>

<p>When designing a new system, it‚Äôs best to start with your database and
your data structures and build your code on top of that. Consider
the constraints you can place on your data and enforce them, ideally
by the way your represent your data.</p>

<p>Code design flows naturally from data design. The simpler and more
consistent your data model is, the simpler your code will be.</p>

<blockquote>
<p>Show me your flowcharts and conceal your tables,
and I shall continue to be mystified. Show me your tables,
and I won‚Äôt usually need your flowcharts; they‚Äôll be obvious</p>

</blockquote>

<blockquote>
<p>Bad programmers worry about the code. Good programmers worry about data structures and their relationships.</p>

</blockquote>

<h2 id="measure-before-you-cut">Measure Before You Cut</h2>

<p>This is the most common mistake made by software developers.
It‚Äôs responsible for <em>many</em> self-inflicted problems.</p>

<p>The principle is that when you make a trade-off that has a complexity cost, ensure that
the need for the trade-off is backed by emprical evidence.</p>

<p>Common mistakes:</p>

<ul>
  <li>Trying to build a complex ‚Äúscalable‚Äù system that scales to
a size you‚Äôll never need.</li>
  <li>Making services as small as possible without considering
need or cost.</li>
  <li>Adding inconsistency or complexity for performance in a part
of the system that is not a performance bottleneck.</li>
</ul>

<p>Advice:</p>

<ul>
  <li>Start with the simplest, most correct system possible.</li>
  <li>Measure performance.</li>
  <li>Do not pay complexity costs or violate the other principles
until it solves an actual problem, not an imaginary one.</li>
  <li>Some optimisations can be made without measurement, because
they have very little or zero cost. For example, using the
correct data structures that support favourable performance
for the operations you want to perform.</li>
  <li>It‚Äôs true that sometimes experience alone can tell you if you‚Äôre making the
correct trade-off. It‚Äôs still better if you can prove it.</li>
  <li>When you have to choose, prefer correctness and simplicity over performance.</li>
  <li>In some cases correct and simple code is the best performing code!</li>
</ul>

<blockquote>
<p>The real problem is that programmers have spent far too much time
worrying about efficiency in the wrong places and at the wrong times;
premature optimization is the root of all evil (or at least most of
it) in programming.</p>

</blockquote>

<h2 id="avoid-trading-local-simplicity-for-global-complexity">Avoid Trading Local Simplicity for Global Complexity</h2>

<p>i.e. avoid making a part of the system simpler in exchange for making
the system as a whole more complex.</p>

<p>This trade is usually not an even one. Chasing after local simplicity can
cause and order of magnitude increase in global complexity.</p>

<p>For example, smaller services can make those services simpler,
but the reduction in consistency and the need for more inter-process
communication makes the system much more complicated.</p>

<h2 id="recognise-intrinsic-complexity">Recognise Intrinsic Complexity</h2>

<p>Sometimes things are just complicated. You cannot make problems simpler than they are.</p>

<p>Any attempt to do so will ironically make your system more complex.</p>

<h2 id="fewer-technologies-result-in-simpler-systems">Fewer Technologies Result in Simpler Systems</h2>

<p>It is better to understand a few technologies deeply than many
technologies at a surface level. Fewer technologies mean fewer
things to learn, and less operational complexity.</p>

<h2 id="focus-your-learning-on-concepts-not-technologies">Focus Your Learning on Concepts, not Technologies</h2>

<p>Do not concern yourself too much with intricate details of the software you use - you
can always look them up. Learn the underlying fundamental concepts.</p>

<p>Technologies change, concepts are eternal. The concepts you learn will
be used in newer technologies, and you will be able to learn them much quicker.</p>

<p>For example, do not concern yourself so much with the surface level
details of React, Kubernetes, Haskell, Rust, etc.</p>

<p>Focus on learning:</p>
<ul>
  <li>Pure functional programming</li>
  <li>The relational model</li>
  <li>Formal methods</li>
  <li>Logic programming</li>
  <li>Algebraic data types</li>
  <li>Typeclasses (in general and specific ones)</li>
  <li>The borrow checker (affine/linear types)</li>
  <li>Dependant Types</li>
  <li>The Curry-Howard Isomorphism</li>
  <li>Macros</li>
  <li>Homoiconicity</li>
  <li>VirtualDOM</li>
  <li>Linear regression</li>
  <li>etc.</li>
</ul>

<h2 id="code-consistency-is-important">Code Consistency is Important</h2>

<p>This is important for keeping the barrier to entry for understanding your code low.</p>

<p>Sometimes writing the consistent thing is more important than writing
the ‚Äúcorrect‚Äù thing. If you want to change the way something works in
your codebase, change all instances of it.  Otherwise, try to stick
with it.</p>



<p>The more principles you have in common with your teammates, the better
you will work together, and the more you will enjoy working together.</p>

<h2 id="appendix-a-inconsistency-results-in-complexity">Appendix A: Inconsistency Results in Complexity</h2>

<p>This is the simplest example I can think of to illustrate this principle.
I hope it doesn‚Äôt require too much imagination to relate to realistic
problems.</p>

<p>Consider a database with two Boolean variables <code>x</code> and <code>y</code>. Your
application has a rule that <code>x = y</code>, and it can enforce this rule by
using a transaction to atomically change both variables.</p>

<p>If this rule is correctly enforced, your data can only be
in two states: <code>(x = True, y = True)</code> or <code>(x = False, y = False)</code>.</p>

<p>Writing the function ‚Äòtoggle‚Äô with this rule in place is
straightforward. You atomically read one of the values and set both
values to the negation.</p>

<p>Now consider what happens if you split those variables into their own
databases and they can no longer be atomically changed together.</p>

<p>Because you can no longer consistently ensure that <code>x = y</code>, your data
can be in two more states: <code>(x = True, y = False)</code> or <code>(x = False, y = True)</code>.</p>

<ul>
  <li>Which value should you use if your system is in one of these states?</li>
  <li>What should your ‚Äòtoggle‚Äô function do in one of these states?</li>
  <li>How do you ensure that both writes are successful when writing a new value?</li>
</ul>

<p>There are no correct answers to these questions.</p>

<p>Of course, if we‚Äôd followed the <a href="#make-invalid-states-unrepresentable">‚Äúmake invalid states unrepresentable‚Äù</a> principle
in the first place, there would only be one variable! :)</p>

  </div>
</article></div>]]>
            </description>
            <link>http://kevinmahoney.co.uk/articles/my-principles-for-building-software/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24512801</guid>
            <pubDate>Fri, 18 Sep 2020 03:50:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Cryptologic Mystery]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24512546">thread link</a>) | @wglb
<br/>
September 17, 2020 | https://www.mattblaze.org/blog/neinnines/ | <a href="https://web.archive.org/web/*/https://www.mattblaze.org/blog/neinnines/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="center"><div>
		<p>18 September 2020</p><p>A Cryptologic Mystery</p>
	<p>Did a broken random number generator in Cuba help expose a Russian espionage network?</p>




	
<p>
I picked up the new book <em>Compromised</em> last week and was intrigued to discover that it may have shed some light on a small (and rather esoteric) cryptologic and espionage mystery that I've been puzzling over for about 15 years. <em>Compromised</em> is primarily a memoir of former FBI counterintelligence agent Peter Strzok's investigation into Russian operations in the lead up to the 2016 presidential election, but this post is not a review of the book or concerned with that aspect of it.
</p><p>
Early in the book, as an almost throwaway bit of background color, Strzok discusses his work in Boston investigating the famous Russian "illegals" espionage network from 2000 until their arrest (and subsequent exchange with Russia) in 2010. "Illegals" are foreign agents operating abroad under false identities and without official or diplomatic cover. In this case, ten Russian illegals were living and working in the US under false Canadian and American identities. (The case inspired the recent TV series <em>The Americans</em>.)
</p><p>
Strzok was the case agent responsible for two of the suspects, Andrey Bezrukov and Elena Vavilova (posing as a Canadian couple under the aliases Donald Heathfield and Tracey Lee Ann Foley). The author recounts watching from the street on Thursday evenings as Vavilova received encrypted shortwave "numbers" transmissions in their Cambridge, MA apartment.
</p><p>
Given that Bezrukov and Vaviloa were indeed, as the FBI suspected, Russian spies, it's not surprising that they were sent messages from headquarters using this method; numbers stations are part of time-honored espionage tradecraft for communicating with covert agents. But their capture may have illustrated how subtle errors can cause these systems to fail badly in practice, even when the cryptography itself is sound.
<br>
<a name="fold">&nbsp;</a></p><hr size="1"><p>
	

First, a bit of background. For at least the last sixty years, encrypted shortwave radio transmissions have been a standard method for sending messages to covert spies abroad. Shortwave radio has several attractive properties here. It covers long distances; it's possible for a single transmitter to get hemispheric or even global coverage. Shortwave radio receivers, while less common than they once were, are readily available commercially in almost every country and are not usually suspicious or alerting to possess. And while it's relatively easy to tell where a shortwave signal is coming from, their wide coverage area makes it very difficult to infer exactly who or where the intended recipients might be. Both the US (and its allies) and the Soviet Union (and its satellites) made extensive use of shortwave radio for communicating with spies during the cold war, and enigmatic "numbers" transmissions aimed at spies continue to this day.
</p><p>
The encryption method of choice used by numbers stations is called a "one time pad" (OTP) cipher. OTPs have unique advantages over other encryption methods. Used properly, they are <em>unconditionally</em> secure; no amount of computing power or ingenuity can "break" them without knowledge of the secret key. Also, they are almost deceptively low tech. It is possible to encrypt and decrypt OTP messages by hand with nothing more than paper and pencil and simple arithmetic. The disadvantage is that OTPs are cumbersome; you need a secret key as long as all the messages you will ever send, with no part of the key ever re-used for multiple messages. Typically, the key would be printed as a series of digits bound into a pad of paper, with each page removed after use; hence the name "one time pad". OTPs can be difficult in practice to use properly and are quite vulnerable if used improperly; more on that later.
</p><p>
The OTP messages sent to spies by shortwave radio typically consist of decimal digits broadcast in either a mechanically recorded voice or in morse code (more recently, digital transmissions are also used) on designated frequencies at designated times, usually in four or five digit groups (hence the term "numbers station"). After copying and verifying a header in the message, the agent would remove the corresponding page from their secret OTP codebook and add each key digit to each corresponding message digit using modulo-10 arithmetic (without carry). The resulting "plaintext" digits are then converted to text with a simple substitution encoding (e.g, A=01, B=02, etc., although other encodings are generally used). That's all there is to it. The security of the system depends entirely on the uniqueness and secrecy of the OTP codebook pad given to each agent.
</p><p>
To prevent "traffic analysis" that might reveal to an observer the number of active agents or the volume of messages sent to them, numbers stations typically operate on rigidly fixed schedules, sending messages at pre-determined times whether there is actually a message to be sent or not. When there is no traffic for a given timeslot, random dummy "fill" traffic is sent instead. The fill traffic should be indistinguishable to an outsider from real messages, thereby leaking nothing about how often or when the true messages are being sent. But more on this later.
</p><p>
None of this is by itself news. The existence of numbers stations has been publicly known (and tracked by hobbyists) since at least the 1960's, and OTPs are an elementary cryptographic technique known to every cryptographer. However, Strzok mentions two interesting details I'd not seen published previously and that may solve a mystery about one of the most well known numbers stations heard in North America.
</p><p>
First, <em>Compromised</em> reveals that the FBI found that during at least some of the time the illegals were under investigation, the Russian numbers intended for them were sent not by a transmitter in Russia (which might have difficulty being reliably received in the US), but relayed by the <em>Cuban</em> shortwave numbers station. This is perhaps a bit surprising, since the period in question (2000-2010) was well after the Soviet Union, the historic protector of Cuba's government, had ceased to exist.
</p><p>
The Cuban numbers station is somewhat legendary. It is a powerful station, operated by Cuba's intelligence directorate but co-located with Radio Habana's transmitters near Bauta, Cuba, and is easily received with even very modest equipment throughout the US. While its numbers transmissions have taken a variety of forms over the years, during the early 2000's it operated around the clock, transmitting in both voice and morse code. The station was (and remains) so powerful and widely heard that radio hobbyists quickly derived its hourly schedule. During this period, each scheduled hourly transmission consisted of a preamble followed by three messages, each made up entirely of a series of five digit groups (with by a brief period of silence separating the three messages). The three hourly messages would take a total of about 45 minutes, in either voice or morse code depending on the scheduled time and frequency. Every hour, the same thing, predictably right on schedule (with fill traffic presumably substituted for the slots during which there was no actual message).
</p><p>
If you want to hear what this sounded like, here's a recording I made on October 4, 2008 of one of the hourly voice transmissions, as received (static and all) in my Philadelphia apartment: <a target="_blank" href="https://www.mattblaze.org/private/17435khz-200810041700.mp3"><tt>www.mattblaze.org/private/17435khz-200810041700.mp3</tt></a>. The transmission follows the standard Cuban numbers format of the time, starting with an "Atenƒáion" preamble listing three five-digit identifiers for the three messages that follow, and ending with "Final, Final". In this recording, the first of the three messages (64202) starts at 3:00, the second (65852) at 16:00, and the third (86321) at 29:00, with the "Final" signoff at the end. The transmissions are, to my cryptographic ear at least, both profoundly dull and yet also eerily riveting. 
</p><p>
And this is where the mystery I've been wondering about comes in. In 2007, I noticed an odd anomaly: some messages completely lacked the digit 9 ("nueve"). Most messages had, as they always did and as you'd expect with OTP ciphertext, a uniform distribution of the digits 0-9. But other messages, at random times, suddenly had no 9s at all. I wasn't the only (or the first) person to notice this; apparently the 9s started disappearing from messages some time around 2005.
</p><p>
This is, to say the least, very odd. The way OTPs work should produce a uniform distribution of all ten digits in the ciphertext. The odds of an entire message lacking 9s (or any other digit) are infinitesimal. And yet such messages were plainly being transmitted, and fairly often at that. In fact, in the recording of the 2008 transmission linked to above, you will notice that while the second and third messages use all ten digits, the first is completely devoid of 9s.
</p><p>
I remember concluding that the most likely, if still rather improbable, explanation was that the 9-less messages were dummy fill traffic and that the random number generator used to create the messages had a bug or developed a defect that prevented 9s from being included. This would be, to say the least, a very serious error, since it would allow a listener to easily distinguish fill traffic from real traffic, completely negating the benefit of having fill traffic in the first place. It would open the door to exactly the kind of traffic analysis that the system was carefully engineered to thwart. The 9-less messages went on for almost ten years. (If I were reporting this as an Internet vulnerability, I would dub it the "Nein Nines" attack; please forgive the linguistic muddle). But I was resigned to the likelihood that I would never know for sure.
</p><p>
And this brings us to the second observation from Strzok's book.
</p><p>
<em>Compromised</em> doesn't say anything about missing nueves, but he does mention that the FBI exploited a serious tradecraft error on the part of the sender: the FBI was able ‚Ä¶</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.mattblaze.org/blog/neinnines/">https://www.mattblaze.org/blog/neinnines/</a></em></p>]]>
            </description>
            <link>https://www.mattblaze.org/blog/neinnines/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24512546</guid>
            <pubDate>Fri, 18 Sep 2020 03:03:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[ArTIfiCE is a jailbreak for TI CE calculators]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24512502">thread link</a>) | @bane
<br/>
September 17, 2020 | https://yvantt.github.io/arTIfiCE/ | <a href="https://web.archive.org/web/*/https://yvantt.github.io/arTIfiCE/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="faqDiv">
                                    <p>Great question! A more detailed answer will make its way onto this page later on, but in summary: it gives back to users their legitimate right to enjoy a feature they paid for that TI unilaterally removed in the latest OS versions (allegedly for security reasons, but the bug that cheaters could in theory use was from TI and had nothing to do with ASM!)</p>

                                    <p>Delete the arTIfiCE appvar from the Memory menu (<tt>2nd</tt>+<tt>+</tt>). Depending on what you need to do, you may also want to delete any installed shell and trigger a RAM Reset as well (be sure to archive and/or backup your files first)</p>

                                    <p>Most probably not, considering arTIfiCE only executes a small piece of assembly code (which was previously possible in earlier OSes), and doesn't install anything persistent. Simply fully reset your calc and there will be no trace of it.</p>

                                    <p>arTIfiCE uses software bugs in the calculator's code to be able to execute assembly. A light "shell" is run allowing you to choose which program to launch. The source code may become available later on GitHub.</p>

                                    <p>Most likely, but many other bugs have been found that future versions of arTIfiCE may use :)</p>

                                    <p>No - arTIfiCE only restores functionality TI calculators had for dozens of years and removed in the latest OS. arTIfiCE is in no way a cheating tool, and cheating is not condoned here in any way.</p>

                                    <p>No - arTIfiCE resides in an "appvar" file (Application Variable, an 8xv file) and it will be deleted by the OS when going into Press-To-Test mode, just like most other appvars. You'll have to re-transfer+open it after your exam.</p>

                                    <p>No, or at least not directly: arTIfiCE only makes it possible for you to launch ASM programs, that's it. So you'd have to find a downgrade program for that (search for it on the usual websites).</p>

                                    <p>Sure, from the arTIfiCE shell, you can install another shell, for instance <a href="https://github.com/mateoconlechuga/cesium/releases/latest" target="_blank">Cesium</a>, which can be opened more quickly (thus you get to launch your programs more easily).</p>

                                    <p>Alright... The underlying exploit has a codename. In fact, all the underlying exploits found so far have fun codenames. They'll be released in due time :D</p>
                                </div></div>]]>
            </description>
            <link>https://yvantt.github.io/arTIfiCE/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24512502</guid>
            <pubDate>Fri, 18 Sep 2020 02:55:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The File System is Unpredictable (2009)]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24512405">thread link</a>) | @azhenley
<br/>
September 17, 2020 | https://blog.paranoidcoding.com/2009/12/10/the-file-system-is-unpredictable.html | <a href="https://web.archive.org/web/*/https://blog.paranoidcoding.com/2009/12/10/the-file-system-is-unpredictable.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>One of the more frequent questions I answer on StackOverflow is a variation of the following.</p>

<blockquote>
  <p>I‚Äôm doing XXX with a file, how can I know if the file exists?</p>
</blockquote>

<p>The variations include verify no one else has the file open, if the file is in use, the file is not writable, etc ‚Äò. The answer to all of these questions is unfortunately the same. Simply put you can‚Äôt. The reason why is the fundamental nature of the file system prevents such predictive operations.</p>

<p>The file system is a resource with multiple levels of control that is shared between all users and processes in the system. The levels of control include but are not limited to file system and sharing permissions. At <strong>any</strong> point in time any entity on the computer may change a file system object or it‚Äôs controls in any number of ways. For example</p>

<ul>
  <li>The file could be deleted</li>
  <li>A file could be created at place one previously did not exist</li>
  <li>Permissions could change on the file in such a way that the current process does not have access</li>
  <li>Another process could open the file in such a way that is not conducive to sharing</li>
  <li>The user remove the USB key containing the file</li>
  <li>The network connection to the mapped drive could get disconnected</li>
</ul>

<p>Or in short</p>

<blockquote>
  <p>The file system is best viewed as a multi-threaded object over which you have no reliable synchronization capabilities</p>
</blockquote>

<p>Many developers, and APIs for that matter, though treat the file system as though it‚Äôs a static resource and assume what‚Äôs true at one point in time will be true later. Essentially using the result of one operation to predict the success or failure of another. This ignores the possibility of the above actions interweaving in between calls. It leads to code which reads well but executes badly in scenarios where more than one entity is changing the file system.</p>

<p>These problems are best demonstrated by a quick sample. Lets keep it simple and take a stab at a question I‚Äôve seen a few times. The challenge is to write a function which returns all of the text from a file if it exists and an empty string if it does not. To simplify this problem lets assume permissions are not an issue, paths are properly formatted, paths point to local drives and people aren‚Äôt randomly ripping out USB keys. Using the System.IO.File APIs we may construct the following solution.</p>

<div><div><pre><code><span>static</span> <span>string</span> <span>ReadTextOrEmpty</span><span>(</span><span>string</span> <span>path</span><span>)</span> <span>{</span>
    <span>if</span> <span>(</span><span>File</span><span>.</span><span>Exists</span><span>(</span><span>path</span><span>))</span> <span>{</span>
        <span>return</span> <span>File</span><span>.</span><span>ReadAllText</span><span>(</span><span>path</span><span>);</span> <span>// Bug!!!</span>
    <span>}</span> <span>else</span> <span>{</span>
        <span>return</span> <span>String</span><span>.</span><span>Empty</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>This code reads great and at a glance looks correct but is actually fundamentally flawed. The reason why is the code changes depends on the call to File.Exist to be true for a large portion of the function. It‚Äôs being used to predict the success of the call to ReadAllText. However there is nothing stopping the file from being deleted in between these two calls. In that case the call to File.ReadAllText would throw a FileNotFoundException which is exactly what the API is trying to prevent!</p>

<p>This code is flawed because it‚Äôs attempting to use one piece of data to make a prediction about the future state of the file system. This is simply not possible with the way the file system is designed. It‚Äôs a shared resource with no reliable synchronization mechanism. File.Exists is much better named as File.ExistedInTheRecentPast (the name gets much worse if you consider the impact of permissions).</p>

<p>Knowing this, how could we write ReadTextOrEmpty in a reliable fashion‚Äô Even though you can not make predictions on the file system the failures of operations is a finite set. So instead of attempting to predict successful conditions for the method, why not just execute the operation and deal with the consequences of failure?</p>

<div><div><pre><code><span>static</span> <span>string</span> <span>ReadTextOrEmpty</span><span>(</span><span>string</span> <span>path</span><span>)</span> <span>{</span>
    <span>try</span> <span>{</span>
        <span>return</span> <span>File</span><span>.</span><span>ReadAllText</span><span>(</span><span>path</span><span>);</span>
    <span>}</span> <span>catch</span> <span>(</span><span>DirectoryNotFoundException</span><span>)</span> <span>{</span>
        <span>return</span> <span>String</span><span>.</span><span>Empty</span><span>;</span>
    <span>}</span> <span>catch</span> <span>(</span><span>FileNotFoundException</span><span>)</span> <span>{</span>
        <span>return</span> <span>String</span><span>.</span><span>Empty</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>This implementation provides the original requested behavior. In the case the file exists, for the duration of the operation, it returns the text of the file and if not returns an empty string.</p>

<p>In general I find the above pattern is the best way to approach the file system. Do the operations you want and deal with the consequences of failure in the form of exceptions. To do anything else involves an unreliable prediction in which you still must handle the resulting exceptions.</p>

<p>If this is the case then why have File.Exist at all if the results can‚Äôt be trusted‚Äô It depends on the level of reliability you want to achieve. In production programs I flag any File.Exist I find as a bug because reliability is a critical component. However you‚Äôll see my personal powershell configuration scripts littered with calls to File.Exsit. Simply put because I‚Äôm a bit lazy in those scripts because critical reliability is not important when I‚Äôm updating my personal .vimrc file.</p>


    </div></div>]]>
            </description>
            <link>https://blog.paranoidcoding.com/2009/12/10/the-file-system-is-unpredictable.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24512405</guid>
            <pubDate>Fri, 18 Sep 2020 02:38:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Path of Exile (Poe) Is a Worth Playing MMO ‚Äì Five Reasons to Explain That]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 6 (<a href="https://news.ycombinator.com/item?id=24512371">thread link</a>) | @ChrisPineson
<br/>
September 17, 2020 | https://www.awow-tech.com/forum/topic/reasons-of-path-of-exile-why-you-really-need-to-play-path-of-exile/ | <a href="https://web.archive.org/web/*/https://www.awow-tech.com/forum/topic/reasons-of-path-of-exile-why-you-really-need-to-play-path-of-exile/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>You need to log in to create posts and topics.</p><div id="postid-1170"><div><div><p><a href="http://www.google.ae/url?q=https://eznpc.com/poe-currency"><img title="" src="https://lh3.googleusercontent.com/YpEB1sT8hT6WU2pqviNhZVrv6z-WZp3Z6jvQnf_j6nkLccp6FsKfkM_CqLaPX1rjOuTZsYJuwQAehpJYYBDm1N-aSyseDP6it2c2QZEibf9VkuK8d9dRWChdbapahCFE8WTwmo89CVw6CGxhBy76bWA9zFNrpcxoSdlLWvFLZZG0kDuQPClDlAGcvYcMj2pZs2we9cpCYY7VgjJo2hLGlltKfNtcYDvxGhkEGJn9zXeUstBfQ7c3Nx-E04j3as71baOyd1W4IrJ1S3UIw82ppje4TXzKmkZDfK2rsHuSMpKayTpt6mQ-MJYtJuwbTpmaDm589Wg03sIu7SttnBMEFSjoesCWSJ6RLTOm0nQzK2lo4np3VlaMU0pdjLYVU0t_uEpLp8iG-R7YSHep-wwCo5MQriXBxdy8N6tILdDT-Lk8xWc239hh9OPc3tMie1cJwk2MNX6QPFQjmeTDy6XDnrmJQOhiYxzx3AV_vmdt1bC0rmeDDdkHu0CLX87B_vLwTGxMYGxGe-bvKkHMGK9YbprrJOkphF-P88nDl5oZnQHwz4HdCuEGh5MsSpK-01JGce3Ghozj1h6aM99t0cAaY2WishVRakVfcfyvYBNSVwoCziSqnmztk-TVa50oQN-npAq3aAdkOvZ-hUqXsmGg8AsMwDaBbWntxJklPwNoA6tSrxCz52GS7EHO96Sp=w657-h329-no?authuser=0" alt="Why You Should Play Path of Exile" width="657" height="328"></a>As we all know the Path of Exile has been available for a very quite long time. Several days ago, they just launched their brand new and Free Delirium Expansion which concentrate on sending players off the grid to carve out a brand new section with passive skill and then encounter the worst nightmares over there and finally let players earn <a href="https://eznpc.com/poe-chaos-orb">PoE orbs</a>&nbsp;and Path of Exile Currency after finish this expansion successfully. Needless to say, a lot of unexpected things are certainly going on in this game. If you are now thinking of turning away from this game just because of the way it looks or the way it feels, then we recommend you to not do it! Cause, in fact, Path of Exile is a quite great ARPG (Action Role-Playing Game) that really deserves the praise and accolades it get from the online gaming community and now, here are five reasons for you to at least consider trying this out!</p>
<p>The very first one is: <strong>This Game Is Free To Play</strong></p>
<p>Who does not like Free Games? Even better, who does not like Free Games that are really excellent? Though Path of Exile offers some optional microtransactions (they have to earn money one way or the other after all), this game is totally free to download and play! Of course, it got off to a quite difficult start when the developer Grinding Gear Game (GGG) launched it firstly, but with tons of expansions, tweaks, and feedback from players, this game has improved drastically and now holds the torch as the best action role-playing video games to date. I have to admit that this game has set the standard that every other game of the same genre should follow!</p>
<p>The second one is: <strong>This Game Has Tons Of Content</strong></p>
<p>Here comes the question, if there's just one thing that Path of Exile is famous for, what would that be? For me, I might answer, that's the vast amount of content PoE has available. This game now has been successfully out for eight years, which means that it's packed full of great content. Though the developer Grinding Gear Games (GGG) has a reputation of sometimes rushing content (the Betrayal League is a great example of that) filled with glaring errors, the fact of the matter is you will be spoiled with so much stuff to do. And you have to admit that most of their expansions are top-notch, and you can sink your teeth into this endgame content easily for hours.</p>
<p>The third one is: <strong>This Game Has Awesome Developer Support</strong></p>
<p>The developer Grinding Gear Games (GGG) of Path of Exile, is always dedicated to continuously improving their game. They are always pushing for updates, from some minor patches every month to some big ones named Leagues. These Leagues give brand new methods to play this game, new loot to discover, and new skin to collect. If that's not enough to entice you into trying out Path of Exile, these Leagues come about 3-4 months! And the developer Grinding Gear Games (GGG) seems to want to ensure that their beloved game lasts forever, therefore, they consistently find unique methods to innovate upon what's have already there. Anyway, there's always something to look forward to!</p>
<p>The fourth one is: <strong>Guide Are Always Available In Path Of Exile</strong></p>
<p>Are you have trouble when choosing which melee equipment you need to use? Or maybe you are a little confused about the skill tree's use? You can find guides all over the Internet pretty easily, and that is mainly thanks to the tight-knit Path of Exile community! Wiki builds are abundant and new guides pop up almost every day. Whether it is a YouTube video to help you with power leveling or just in-depth written guides about all of the expansions, you should know there are plenty of guides to make your Exile in Wraeclast so much easier than before.</p>
<p>The community of Path of Exile is just insanely helpful, particularly to those new starters who are just figuring out this game. It's difficult to find fun games anymore as most are filled with toxicity (checking out League of Legends and DOTA 2). Here people will welcome you with just open arms, and if you are coming from games that are plagued with those toxic communities, then you will be taken aback by how nice everybody is on Path of Exile.</p>
<p>The fifth one is: <strong>This Is A Unique Game</strong></p>
<p>As you know, in most RPGs (Role-Playing Games), you just need to pick a class and the designate skill points to whichever stats you want to increase. Generally, you are just locked into a particular style of play. That is not the case in Path of Exile. Your skills and abilities are just linked to skill gems that are socketed into your very own gear, from your helmet to your boots. And now these gems will apply different abilities to your gear just depending on which you select. Path of Exile pushes players to personalize their own characters with the help of the massive skill tree and hundreds of gems to choose from. No role-playing game has ever implemented this kind of customization yet, making Path of Exile a quite unique experience unlike any other.</p>
<p>And above are our five reasons why you should start playing Path of Exile. Okay now, have we already convinced you to try and farm some rare items such as PoE orbs and <a href="https://eznpc.com/poe-currency">buy PoE currency online</a>&nbsp;for fun? If you are not, just post your comments down below and let us know why.</p>
</div>    </div>
</div><div id="postid-1181"><div><p><img alt="" src="https://secure.gravatar.com/avatar/bae48a4fafec9af9cb0512fbed819bc0?s=120&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/bae48a4fafec9af9cb0512fbed819bc0?s=240&amp;d=mm&amp;r=g 2x" height="120" width="120"></p><div><p><span><a href="https://www.awow-tech.com/forum/profile/dreamzweddingplanner2/">dreamzweddingplanner2</a></span><span>(@dreamzweddingplanner2)</span></p></div><p><small>2 Posts</small></p></div><div><div><p>looking for the Best wedding or an event planner to Organize a wedding or a party in udaipur, delhi, agra, India</p>
<p><a href="https://www.dreamzweddingplanner.com/services/wedding-planning/">Event planner</a></p>
</div>    </div>
</div></div>]]>
            </description>
            <link>https://www.awow-tech.com/forum/topic/reasons-of-path-of-exile-why-you-really-need-to-play-path-of-exile/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24512371</guid>
            <pubDate>Fri, 18 Sep 2020 02:34:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why is video editing so horrible today?]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24512292">thread link</a>) | @pavel_lishin
<br/>
September 17, 2020 | https://blog.rememberlenny.com/2020/09/15/why-is-video-editing-so-horrible-today/ | <a href="https://web.archive.org/web/*/https://blog.rememberlenny.com/2020/09/15/why-is-video-editing-so-horrible-today/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><main id="genesis-content"><article itemscope="" itemtype="https://schema.org/CreativeWork"><div itemprop="text"><p>Reading Time: 5 minutes read</p>




<p>In the last three months, I have done more video post-production than I have done in the past 12 years. Surprisingly, in these years, nothing seems to have changed. Considering how much media is now machine analyzable content, such as audio and visual, I‚Äôm surprised there aren‚Äôt more patterns that make navigating and arranging video content faster. Beyond that, I‚Äôm surprised there isn‚Äôt more process for programmatically composing video in a polished complimentary way to the existing manual methods of arranging.</p>



<p>In 1918, when the video camera was created, if you filmed something and wanted to edit it, you took your footage, cut it and arranged it according to how you wanted it to look. Today, if you want to edit a video, you have to import the source assets into a specialty program (such as Adobe Premiere), and then manually view each item to watch/listen for the portion that you want. Once you have the sections of each imported asset, you have to manually arrange each item on a timeline. Of course a ton has changed, but the general workflow feels the same.</p>



<div><figure><img src="https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/editing._D18377.jpg?resize=379%2C395&amp;ssl=1" alt="Should Critics and Festivals Give Editing Awards? Yes, and Here's Why |  IndieWire" width="379" height="395" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/editing._D18377.jpg?resize=379%2C395&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>Real life photo of me navigating my Premiere assets folders</figcaption></figure></div>



<p>How did video production and editing not get its digital-first methods of creation? Computing power has skyrocketed. Access to storage is generally infinite. And our computers are networked around the world. How is it that the workflow of import, edit, and export take so long?</p>



<p>The consumerization of video editing has simplified certain elements by abstracting away seemingly important but complicated components, such as the linearity of time. Things like Tiktok seem to be the most dramatic shift in video creation, in that the workflow shifts from immediate review and reshooting of video. Over the years, the iMovies and such have moved timelines, from horizontal representation of elapsed time into general blocks of ‚Äúscenes‚Äù or clips. The simplification through abstraction is important for the general consumer, but reduces the attention to detail. This creates an aesthetic of its own, which seems to be the result of the changing of tools. </p>



<p>Where are all the things I take for granted in developer tools, like autocomplete or class-method search, in the video equivalent? What is autocomplete look like in editing a video clip? Where are the repeatable ‚Äúpatterns‚Äù I can write once, and reuse everywhere? Why does each item on a video canvas seem to live in isolation from one another, with no awareness of other elements or an ability to interact with each other?</p>



<div><figure><img src="https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.15.56-PM-1.png?resize=352%2C175&amp;ssl=1" alt="" width="352" height="175" srcset="https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.15.56-PM-1.png?resize=1024%2C513&amp;ssl=1 1024w, https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.15.56-PM-1.png?resize=300%2C150&amp;ssl=1 300w, https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.15.56-PM-1.png?resize=768%2C385&amp;ssl=1 768w, https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.15.56-PM-1.png?zoom=2&amp;resize=352%2C175&amp;ssl=1 704w" sizes="(max-width: 352px) 100vw, 352px" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.15.56-PM-1.png?resize=1024%2C513&amp;ssl=1 1024w, https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.15.56-PM-1.png?resize=300%2C150&amp;ssl=1 300w, https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.15.56-PM-1.png?resize=768%2C385&amp;ssl=1 768w, https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.15.56-PM-1.png?zoom=2&amp;resize=352%2C175&amp;ssl=1 704w" data-lazy-src="https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.15.56-PM-1.png?resize=352%2C175&amp;is-pending-load=1#038;ssl=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>My code editor searches my files and tried to ‚Äúimport‚Äù the methods when I start typing.</figcaption></figure></div>



<p>As someone who studied film and animation exclusively for multiple years, I‚Äôm generally surprised that the overall ways of producing content are largely the same as they have been 10 years ago, but also seemingly for the past 100.</p>



<p>I understand that the areas of complexity have become more niche, such as in VFX or multi-media. I have no direct experience with any complicated 3D rendering and I haven‚Äôt tried any visual editing for non-traditional video displays, so its a stretch to say film hasn‚Äôt changed at all. I haven‚Äôt touched the surface in new video innovation, but all considering, I wish some basic things were much easier.</p>



<p>For one, when it comes to visual layout, I would love something like the Figma ‚Äúautolayout‚Äù functionality. If I have multiple items in a canvas, I‚Äôd like them to self-arrange based on some kind of box model. There should be a way to assign the equivalent of styles as ‚Äúclasses‚Äù, such as with CSS, and multiple text elements should be able to inherit/share padding/margin definitions. Things like flexbox and relative/absolute positioning would make visual templates significantly much easier and faster for developing fresh video content.</p>



<div><figure><img src="https://i1.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.10.22-PM-1.png?resize=368%2C157&amp;ssl=1" alt="" width="368" height="157" srcset="https://i1.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.10.22-PM-1.png?resize=1024%2C438&amp;ssl=1 1024w, https://i1.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.10.22-PM-1.png?resize=300%2C128&amp;ssl=1 300w, https://i1.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.10.22-PM-1.png?resize=768%2C328&amp;ssl=1 768w, https://i1.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.10.22-PM-1.png?resize=1536%2C656&amp;ssl=1 1536w, https://i1.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.10.22-PM-1.png?resize=2048%2C875&amp;ssl=1 2048w" sizes="(max-width: 368px) 100vw, 368px" data-recalc-dims="1" data-lazy-srcset="https://i1.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.10.22-PM-1.png?resize=1024%2C438&amp;ssl=1 1024w, https://i1.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.10.22-PM-1.png?resize=300%2C128&amp;ssl=1 300w, https://i1.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.10.22-PM-1.png?resize=768%2C328&amp;ssl=1 768w, https://i1.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.10.22-PM-1.png?resize=1536%2C656&amp;ssl=1 1536w, https://i1.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.10.22-PM-1.png?resize=2048%2C875&amp;ssl=1 2048w" data-lazy-src="https://i1.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.10.22-PM-1.png?resize=368%2C157&amp;is-pending-load=1#038;ssl=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>Currently I make visual frames in Figma, then export them because its so much easier than fumbling through the 2D translations in Premiere</figcaption></figure></div>



<p>I would love to have a ‚Äúsmarter‚Äù timeline that can surface ‚Äúcues‚Äù that I may want to hook into for visual changes. The cues could make use of machine analyzable features in the audio and video, based on features detected in the available content. This is filled with lots of hairy areas, and definitely sounds nicer than it might be in actuality. At a basic example, the timeline could look at audio or a transcript and know when a certain speaker is talking. There are already services, such as Descript, that make seamless use of speaker detection. That should find some expression in video editing software. Even if the software itself doesn‚Äôt detect this information, the metadata from other software should be made use of.</p>



<figure><img src="https://i2.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.18.45-PM.png?resize=1024%2C786&amp;ssl=1" alt="" srcset="https://i2.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.18.45-PM.png?resize=1024%2C786&amp;ssl=1 1024w, https://i2.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.18.45-PM.png?resize=300%2C230&amp;ssl=1 300w, https://i2.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.18.45-PM.png?resize=768%2C589&amp;ssl=1 768w, https://i2.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.18.45-PM.png?w=1256&amp;ssl=1 1256w" sizes="(max-width: 1000px) 100vw, 1000px" data-recalc-dims="1" data-lazy-srcset="https://i2.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.18.45-PM.png?resize=1024%2C786&amp;ssl=1 1024w, https://i2.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.18.45-PM.png?resize=300%2C230&amp;ssl=1 300w, https://i2.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.18.45-PM.png?resize=768%2C589&amp;ssl=1 768w, https://i2.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.18.45-PM.png?w=1256&amp;ssl=1 1256w" data-lazy-src="https://i2.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.18.45-PM.png?resize=1024%2C786&amp;is-pending-load=1#038;ssl=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>The two basic views in Zoom. Grid or speaker.</figcaption></figure>



<p>More advanced would be to know when certain exchanges between multiple people are a self-encompassed ‚Äúpoint‚Äù. Identifying when a ‚Äúexchange‚Äù takes place, or when a ‚Äúquestion‚Äù is ‚Äúanswered‚Äù, would be useful for title slides or lower-thirds with complimentary text.</p>



<div><figure><img src="https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.16.57-PM.png?resize=350%2C255&amp;ssl=1" alt="" width="350" height="255" srcset="https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.16.57-PM.png?resize=1024%2C746&amp;ssl=1 1024w, https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.16.57-PM.png?resize=300%2C218&amp;ssl=1 300w, https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.16.57-PM.png?resize=768%2C559&amp;ssl=1 768w, https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.16.57-PM.png?w=1450&amp;ssl=1 1450w" sizes="(max-width: 350px) 100vw, 350px" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.16.57-PM.png?resize=1024%2C746&amp;ssl=1 1024w, https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.16.57-PM.png?resize=300%2C218&amp;ssl=1 300w, https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.16.57-PM.png?resize=768%2C559&amp;ssl=1 768w, https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.16.57-PM.png?w=1450&amp;ssl=1 1450w" data-lazy-src="https://i0.wp.com/blog.rememberlenny.com/wp-content/uploads/2020/09/Screen-Shot-2020-09-15-at-12.16.57-PM.png?resize=350%2C255&amp;is-pending-load=1#038;ssl=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>Descript will identify speakers and color code the transcript.</figcaption></figure></div>



<p>If there are multiple shots of the same take, it would be nice to have the clips note where the beginning and end based on lining up the audio. Reviewing content shouldn‚Äôt be done in a linear fashion if there are ways to distinguish content of video/audio clip and compare it to itself or other clips.</p>



<p>In line with ‚Äúcues‚Äù, I would like to ‚Äúsearch‚Äù my video in a much more comprehensive way. My iPhone photos app lets me search by faces or location. How about that in my video editor? All the video clips with a certain face or background?</p>



<p>Also, it would be nice to generate these ‚Äúfeatures‚Äù with some ease. I personally dont know what it would take to train a feature detector by viewing some parts of a clip, labeling it, and then using the labeled example to find the other instances of similar kinds of visual content. I do know its possible, and that would be very useful for speeding up the editing process.</p>



<p>In my use case, I‚Äôm seeing a lot of video recordings of Zoom calls or webinars. This is another example of video content that generally looks the ‚Äúsame‚Äù and could be analyzed for certain content types. I would be able to quickly navigate through clips if I could be able to filter video by when the video is a screen of many faces viewed at once, or when only one speaker is featured at a time. </p>



<p>All of this to say, there is a lot of gaps in the tools available at the moment.</p>

</div></article></main></div></div></div>]]>
            </description>
            <link>https://blog.rememberlenny.com/2020/09/15/why-is-video-editing-so-horrible-today/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24512292</guid>
            <pubDate>Fri, 18 Sep 2020 02:20:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Data Oriented Programming in Python]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24511966">thread link</a>) | @brilee
<br/>
September 17, 2020 | https://www.moderndescartes.com/essays/data_oriented_python/ | <a href="https://web.archive.org/web/*/https://www.moderndescartes.com/essays/data_oriented_python/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div>
	

<p> Originally posted 2020-09-13</p>
<p> Tagged: <a href="https://www.moderndescartes.com/essays/tags/optimization">optimization</a>, <a href="https://www.moderndescartes.com/essays/tags/computer_science">computer_science</a>, <a href="https://www.moderndescartes.com/essays/tags/python">python</a></p>
<p> <em>Obligatory disclaimer: all opinions are mine and not of my employer </em></p>
<hr>

<p>Many users of Python deprioritize performance in favor of soft benefits like ergonomics, business value, and simplicity. Users who prioritize performance typically end up on faster compiled languages like C++ or Java.</p>
<p>One group of users is left behind, though. The scientific computing community has lots of raw data they need to process, and would very much like performance. Yet, they struggle to move away from Python, because of network effects, and because Python‚Äôs beginner-friendliness is appealing to scientists for whom programming is not a first language. So, how can Python users achieve some fraction of the performance that their C++ and Java friends enjoy?</p>
<p>In practice, scientific computing users rely on the NumPy family of libraries e.g.&nbsp;NumPy, SciPy, TensorFlow, PyTorch, CuPy, JAX, etc.. The sheer proliferation of these libraries suggests that the NumPy model is getting something right. In this essay, I‚Äôll talk about what makes NumPy so effective, and where the next generation of Python numerical computing libraries (e.g.&nbsp;TensorFlow, PyTorch, JAX) seems to be headed.</p>
<h2 id="data-good-pointers-bad">Data good, pointers bad</h2>
<p>A pesky fact of computing is that computers can compute far faster than we can deliver data to compute on. In particular, data transfer <em>latency</em> is the Achille‚Äôs heel of data devices (both RAM and storage). Manufacturers disguise this weakness by emphasizing improvements in data transfer <em>throughput</em>, but latency continues to stagnate. Ultimately, this means that any chained data access patterns, where one data retrieval must be completed before the next may proceed, are the worst case for computers.</p>
<p>These worst-case chained data access patterns are unfortunately quite common ‚Äì so common that they have a name you may be familiar with: a pointer.</p>
<p>Pointers have always been slow. In the ‚Äô80s and ‚Äô90s, our hard drives were essentially optimized record players, with a read head riding on top of a spinning platter. These hard drives had physical limitations: The disk could only spin so fast without shattering, and the read head was also mechanical, limiting its movement speed. Disk seeks were slow, and the programs that were most severely affected were databases. Some ways that databases dealt with these physical limitations are:</p>
<ul>
<li>Instead of using binary trees (requiring <span>\(\log_2 N\)</span> disk seeks), B-trees with a much higher branching factor <span>\(k\)</span> were used, only requiring <span>\(\log_k N\)</span> disk seeks.</li>
<li>Indices were used to query data without having to read the full contents of each row.</li>
<li>Vertically-oriented databases optimized for read-heavy workloads (e.g.&nbsp;summary statistics over one field, across entire datasets), by reorganizing from <a href="https://en.wikipedia.org/wiki/AoS_and_SoA">arrays of structs to structs of arrays</a>. This maximized effective disk throughput, since no extraneous data was loaded.</li>
</ul>
<p>Today, compute speed is roughly <span>\(10^5 - 10^6\)</span> times faster than in 1990. Today, RAM is roughly <span>\(10^5\)</span> times faster than HDDs from 1990. I was amused and unsurprised to find that Raymond Hettinger‚Äôs <a href="https://www.youtube.com/watch?v=npw4s1QTmPg">excellent talk on the evolution of Python‚Äôs in-memory <code>dict</code> implementation</a> plays out like a brief history of early database design. Time, rather than healing things, has only worsened the compute-memory imbalance.</p>
<h2 id="numpys-optimizations">NumPy‚Äôs optimizations</h2>
<h3 id="boxing-costs">Boxing costs</h3>
<p>In many higher-level languages, raw data comes in boxes containing metadata and a pointer to the actual data. In Python, the PyObject box holds reference counts, so that the garbage collector can operate generically on all Python entities.</p>
<p>Boxing creates two sources of inefficiency:</p>
<ul>
<li>The metadata bloats the data, reducing the data density of our expensive memory.</li>
<li>The pointer indirection creates another round trip of memory retrieval latency.</li>
</ul>
<p>A NumPy array can hold many raw data within a single PyObject box, <em>provided that all of those data are of the same type</em> (int32, float32, etc.). By doing this, NumPy amortizes the cost of boxing over multiple data.</p>
<p>In <a href="https://www.moderndescartes.com/essays/deep_dive_mcts">my previous investigations into Monte Carlo tree search</a>, a naive UCT implementation performed poorly because it instantiated millions of UCTNode objects whose sole purpose was to hold a handful of float32 values. In the optimized UCT implementation, these nodes were replaced with NumPy arrays, reducing memory usage by a factor of 30.</p>
<h3 id="attribute-lookup-function-dispatch-costs">Attribute lookup / function dispatch costs</h3>
<p>Python‚Äôs language design forces an unusually large amount of pointer chasing. I mentioned boxing as one layer of pointer indirection, but really it‚Äôs just the tip of the iceberg.</p>
<p>Python has no problem handling the following code, even though each of these multiplications invokes a completely different implementation.</p>
<pre><code>&gt;&gt;&gt; mixed_list = [1, 1.0, 'foo', ('bar',)]
&gt;&gt;&gt; for obj in mixed_list:
...     print(obj * 2)

2
2.0
'foofoo'
('bar', 'bar')</code></pre>
<p>Python accomplishes this with a minimum of two layers of pointer indirection:</p>
<ol type="1">
<li>Look up the type of the object.</li>
<li>Look up and execute the <code>__mul__</code> function from that type‚Äôs operation registry.</li>
</ol>
<p>Additional layers of pointer indirection may be required if the <code>__mul__</code> method is defined on a superclass: the chain of superclasses must be traversed, one pointer at a time, until an implementation is found.</p>
<p>Attribute lookup is similarly fraught; <code>@property</code>, <code>__getattr__</code>, and <code>__getattribute__</code> provide users with flexibility that incurs pointer chasing overhead with something as simple as executing <code>a.b</code>. Access patterns like <code>a.b.c.d</code> create exactly the chained data access patterns that are a worst-case for data retrieval latency.</p>
<p>To top it all off, merely <em>resolving</em> the object is expensive: there‚Äôs a stack of lexical scopes (local, nonlocal, then global) that are checked in order to find the variable name. Each check requires a dictionary lookup, another source of pointer indirection.</p>
<p>As the saying goes: ‚ÄúWe can solve any problem by introducing an extra level of indirection‚Ä¶ except for the problem of too many levels of indirection‚Äù. The NumPy family of libraries deals with this indirection, not by removing it, but again by sharing its cost over multiple data.</p>
<pre><code>&gt;&gt;&gt; homogenous_array = np.arange(5, dtype=np.float32)
&gt;&gt;&gt; multiply_by_two = homogenous_array * 2
&gt;&gt;&gt; print(multiply_by_two)
array([ 0.,  2.,  4.,  6.,  8.], dtype=float32)</code></pre>
<p>Sharing a single box for multiple data allows NumPy to retain the expressiveness of Python while minimizing the cost of the dynamism. As before, this works because of the additional constraint that all data in a NumPy array must have identical type.</p>
<h2 id="the-frontier-jit">The Frontier: JIT</h2>
<p>So far, we‚Äôve seen that NumPy doesn‚Äôt solve any of Python‚Äôs fundamental problems when it comes to pointer overhead. Instead, it merely puts a bandaid on the problem by sharing those costs across multiple data. It‚Äôs a pretty successful strategy ‚Äì in my hands (<a href="https://www.moderndescartes.com/essays/vectorized_pagerank">1</a>, <a href="https://www.moderndescartes.com/essays/deep_dive_mcts">2</a>), I find that NumPy can typically achieve 30-60x speedups over pure Python solutions to dense numerical code. However, given that C code typically achieves <a href="https://www.moderndescartes.com/essays/data_oriented_python/(https://benchmarksgame-team.pages.debian.net/benchmarksgame/fastest/python3-gcc.html)">100-200x performance</a> over pure Python on dense numerical code (common in scientific computing), it would be nice if we could further reduce the Python overhead.</p>
<p>Tracing <a href="https://en.wikipedia.org/wiki/Just-in-time_compilation">JITs</a> promise to do exactly this. Roughly, the strategy is to trace the execution of the code and record the pointer chasing outcomes. Then, when you call the same code snippet, reuse the recorded outcomes! NumPy amortizes Python overhead over multiple data, and JIT amortizes Python overhead over multiple function calls.</p>
<p>(I should note that I‚Äôm most familiar with the tracing JITs used by TensorFlow and JAX. <a href="https://doc.pypy.org/en/latest/">PyPy</a> and <a href="https://numba.pydata.org/">Numba</a> are two alternate JIT implementations that have a longer history, but I don‚Äôt know enough about them to treat them fairly, so my apologies to readers.)</p>
<p>Tracing unlocks many wins typically reserved for compiled languages. For example, once you have the entire trace in one place, operations can be fused together (e.g., to make use of the <a href="https://en.wikipedia.org/wiki/FMA_instruction_set">fused multiply-add instructions</a> common to most modern computers), memory layouts can be optimized, and so on. TensorFlow‚Äôs <a href="https://www.tensorflow.org/guide/graph_optimization">Grappler</a> is one such implementation of this idea. Traces can also be <a href="https://en.wikipedia.org/wiki/Backpropagation">walked backwards</a> to automatically compute derivatives. Traces can be compiled for different hardware configurations, so that the same Python code executes on CPU, GPU, and TPU. JAX can <a href="https://jax.readthedocs.io/en/latest/notebooks/quickstart.html#Auto-vectorization-with-vmap">autovectorize traces</a>, adding a batch dimension to all operations. Finally, a trace can be exported in a language-agnostic manner, allowing a program defined in Python to be executed in <a href="https://www.tensorflow.org/js">Javascript</a>, <a href="https://www.tensorflow.org/tfx/guide/serving">C++</a>, or more.</p>
<p>Unsurprisingly, there‚Äôs a catch to all this. NumPy can amortize Python overhead over multiple data, but only if that data is the same type. JIT can amortize Python overhead over multiple function calls, but only if the function calls would have resulted in the same pointer chasing outcomes. Retracing the function to verify this would defeat the purpose of JIT, so instead, TensorFlow/JAX JIT uses array shape and dtype to guess at whether a trace is reusable. This heuristic is necessarily conservative, rules out otherwise legal programs, often requires unnecessarily specific shape information, and doesn‚Äôt make any guarantees against mischievous tinkering. Furthermore, data-dependent tracing is a known issue (<a href="https://pytorch.org/docs/stable/generated/torch.jit.trace.html">1</a>, <a href="https://jax.readthedocs.io/en/latest/notebooks/Common_Gotchas_in_JAX.html#python-control-flow-+-JIT">2</a>). I worked on <a href="https://blog.tensorflow.org/2018/07/autograph-converts-python-into-tensorflow-graphs.html">AutoGraph</a>, a tool to address data-dependent tracing. Still, the engineering benefits of a shared tracing infrastructure are too good to pass up. I expect to see JIT-based systems flourish in the future and iron out their user experience.</p>
<h2 id="conclusion">Conclusion</h2>
<p>The NumPy API‚Äôs specifically addresses Python‚Äôs performance problems for the kinds of programs that scientific computing users want to write. It encourages users to write code in ways that minimize pointer overhead. Coincidentally, this way of writing code is a fruitful abstraction for tracing JITs targeting vastly parallel computing architectures like GPU and TPU. (Some people argue that <a href="https://dl.acm.org/citation.cfm?id=3321441">machine learning is stuck in a rut</a> due to this NumPy monoculture.) In any case, tracing JITs built on top of ‚Ä¶</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.moderndescartes.com/essays/data_oriented_python/">https://www.moderndescartes.com/essays/data_oriented_python/</a></em></p>]]>
            </description>
            <link>https://www.moderndescartes.com/essays/data_oriented_python/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24511966</guid>
            <pubDate>Fri, 18 Sep 2020 01:22:15 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Secure your boot process: UEFI and Secureboot and EFISTUB and Luks2 and lvm]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24511852">thread link</a>) | @zdw
<br/>
September 17, 2020 | https://nwildner.com/posts/2020-07-04-secure-your-boot-process/ | <a href="https://web.archive.org/web/*/https://nwildner.com/posts/2020-07-04-secure-your-boot-process/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>This tutorial isn‚Äôt a basic setup how-to in a way you will learn how to install Arch Linux, neither is intended to replace the <a href="https://wiki.archlinux.org/index.php/Installation_guide">Installation Guide</a>, This is a guide for those who want a laptop with data-at-rest encryption and a verified boot process using SecureBoot.</p>
<p>I‚Äôll not be arrogant saying that this setup is ‚Äútampering-proof‚Äù since this also depends on your firmware manufacturer, but I believe that this is a notebook setup with good enough security.</p>

<ul>
<li>Arch Linux setup overview.</li>
<li>Basic secureboot explanation.</li>
<li>Luks2+lvm setup for encrypted partitions at boot time.</li>
<li><code>/home</code> disk setup with crypttab.</li>
<li>EFISTUB to make Linux ‚Äúit‚Äôs own bootloader‚Äù avoiding the entire <code>/boot</code> to be mounted on your ESP.</li>
</ul>

<p>UEFI is the new standard for boot and firmware management and it isn‚Äôt perfect, but is a natural answer to the old BIOS standard that has it‚Äôs limitations and is not aging well considering those limits and all workarounds involved to break them. You can find more information <a href="https://uefi.org/faq">here</a>. BIOS standard first appeared in IBM computers in 1976 and should (hopefully) die soon.</p>
<p>To keep words/concepts best alligned with what is correct, i‚Äôll not call your basic computer program BIOS but firmware from now on during this reading.</p>
<p>I bought a laptop and wanted to encrypt all my data and thought: ‚ÄúHey, i can do a full disk encryption but what if someone tamper my <a href="https://en.wikipedia.org/wiki/Master_boot_record">MBR/Boot Sector</a>? So, using secureboot whas the best alternative (even with efi having a plain <code>FAT32</code> partition on it‚Äôs standard).</p>
<p>There‚Äôs a lot of drama around secureboot, most of it related to Microsoft and the way they demand deploying their keys on OEM vendor equipments. That doesn‚Äôt mean that secureboot is bad.</p>
<p>Pretty simple ‚Äúexplain like i‚Äôm five‚Äù secureboot concept: A Root of Trust combination with keys and certificates. Using SecureBoot your firmware will check if the operating system you are trying to boot and your bootloader are trusted by you. On each boot-up UEFI firmware will inspect what you are trying to boot and if it‚Äôs not trusted a security violation will be triggered.</p>
<p>There are four main EFI ‚Äúvariables‚Äù used to create a basic secureboot Root of Trust environment:</p>
<ul>
<li>PK: The Platform Key, the master one, the <a href="https://en.wikipedia.org/wiki/One_Ring">ring to rule them all</a>. The holder of a PK can install a new PK and update the KEK.</li>
<li>KEK: Key Exchange Key is a secondary key used to sign EFI executables directly or a key used to signd the db and dbx databases.</li>
<li>db: The signature databse is a list with all allowed signing certificates or criptografy hashes to allowed binaries. We will use THIS db key to sign our Linux Kernel.</li>
<li>dbx: The dark side of the db. Inverse db. ‚Äúnot-good-db‚Äù. You name it. It‚Äôs the list containing all keys that are not allowed.</li>
</ul>
<p>I would like to highlight the following points of this setup:</p>
<ul>
<li>Your signing keys are stored inside an encrypted disk.</li>
<li>Kernel signing will only happend after you have booted and running an already signed kernel.</li>
<li>Most notebooks today don‚Äôt have an exposed CMOS to keep configurations but instead they have nvram modules that will store firmware and configurations.
<ul>
<li>So, put a passord on your firmware to avoid secureboot being disabled.</li>
<li>Putting a password on your firmware will almost invalidate any chance of boot option change or secureboot disable.</li>
<li>In my case there is no ‚Äúreset bios password‚Äù option and losing it will require contacting Lenovo to replace the main board.</li>
</ul>
</li>
<li>Even with secureboot disabled, and attacker will not be able to decrypt your root partition without knowing your password</li>
<li>If you are worried about keys being accessed after booting, you have other issues to solve and disk encryption + secureboot will not be the answer.</li>
<li>Modern processors have <code>aes-ni</code> instuction that will help on disk decryption avoiding high cpu usage for this task.</li>
<li>Using a key to unlock luks <code>/home</code> partition is a way to increase convenience without sacrificing security. That key is stored inside another encrypted partition so, there is no much to worry about.</li>
<li>lvm inside a luks container gives you a lot of flexibility. This will also remove any visibility if someone steal you equipment since lvs will be inside one container.
<ul>
<li>Less error prone setup while manipulating <code>UUID</code>s is also an implicit feature.</li>
</ul>
</li>
</ul>
<p>With that in mind, lets install ArchLinux, first boot it and create the Root of Trust of your notebook.</p>

<p>There‚Äôs a plenty of ‚Äúefi how-tos‚Äù for Arch Linux on the internet, and some of the instructions here will be just an overview of what you dear reader will have to execute</p>
<p><strong>Step 01</strong>: Download Arch Linux <a href="https://www.archlinux.org/download/">here</a> and write it to a pendrive using <code>dd bs=4M if=path/to/archlinux.iso of=/dev/sdx status=progress oflag=sync</code> where<code>sdx</code> is your pendrive. If you are using Windows to create your bootable pendrive <a href="https://sourceforge.net/projects/win32diskimager/">Win32 Disk Imager</a> will help you.</p>
<p><strong>Step 02</strong>: Configure your firmware to boot using UEFI, but keep secure boot disabled. Allow boot from usb and change it to be your first boot device. These instructions are pretty much vendor dependent and can change depending on your equipment.</p>
<p><strong>Step 03</strong>: Boot Arch Linux live usb, and after getting a shell change your keybord layout with the following command: <code>loadkeys br-abnt2</code></p>
<p>After that, connect to your wifi using <code>wifi-menu -o your_device</code>. There is an issue with the latest Arch Linux iso(06/2020) and <code>wifi-menu</code> is not working as expected. If you are using ethernet just ignore this step. Enable ntp sync with <code>timedatectl set-ntp true</code>.</p>
<p><strong>Step 04</strong>: Create <code>luks2</code> containers and <code>lvm2</code> volumes on the first disk. On my laptop i have 2 drives: <code>sda</code> is a ssd while <code>sdb</code> is a spinning disk. Use <code>cgdisk /dev/sda</code> and create a 256MB(i‚Äôm using 512MB but noticed that is way too much) partition for EFI (<a href="https://wiki.archlinux.org/index.php/EFI_system_partition">ESP</a>) code <code>ef00</code> and the rest of your disk space create a partition with code <code>8309</code>(Linux Luks).</p>
<p>Create your luks container and open it. Default block cipher and block encyption mode should be good enough so there is no need of changing it with <code>-c</code> parameter:</p>
<pre><code>cryptsetup -y -v --use-random luksFormat /dev/sda2
cryptsetup luksOpen /dev/sda2 crypt
</code></pre>
<p>Create your lvm infraesturucture on top of it. I‚Äôll create swap and root logical volumes</p>
<pre><code>pvcreate /dev/mapper/crypt
vgcreate vg0 /dev/mapper/crypt
lvcreate --size 4G vg0 --name swap
lvcreate --size 30G vg0 --name root
</code></pre>
<p>Format your ESP, root and swap partitions/volumes</p>
<pre><code>mkfs.vfat -F32 /dev/sda1
mkfs.ext4 /dev/mapper/vg0-root
mkswap /dev/mapper/vg0-swap
</code></pre>
<p><strong>Step 05</strong> Now create a <code>luks2</code> container without lvm on it cause we will use the full disk just for <code>/home</code> and automatically map/mount it using <code>crypttab+fstab</code> here. Instead of typing a password 2 times during boot(one for root, another for home), we will just type the password for the root partition and host a key inside this encrypted partition to open the home luks container. Using a key to open a luks device has the same risks as typing a password and storing it into your ram. <code>cgdisk /dev/sdb</code> and create an all-disk partition using <code>8309</code> partition code.</p>
<pre><code>cryptsetup -y -v --use-random luksFormat /dev/sdb1
cryptsetup luksOpen /dev/sda1 crypthome
mkfs.ext4 /dev/mapper/crypthome
</code></pre>
<p><strong>Step 06</strong> Mount all and start to install:</p>
<pre><code>mount /dev/mapper/vg0-root /mnt
mkdir /mnt/efi
mkdir /mnt/home
mount /dev/sda1 /mnt/efi
mount /dev/mapper/crypthome /mnt/home
pacstrap /mnt base base-devel vim efibootmgr linux linux-firmware lvm2 mkinitcpio networkmanager intel-ucode git
</code></pre>
<p>Do not install <code>intel-ucode</code> if you are using an AMD processor.</p>
<p><strong>Step 07</strong>: Create your <code>fstab</code> and change root to your new system</p>
<pre><code>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
arch-chroot /mnt
</code></pre>
<p><strong>Step 08</strong>: Change your fstab <code>/home</code> mount point to use the device mapper name. If you try to mount it using <code>UUID</code> it will fail cause it needs to be decrypted first.</p>
<pre><code># /home
/dev/mapper/crypthome	/home     	ext4      	rw,relatime	0 2
</code></pre>
<p>Create a key to automatically open the home luks container. Change the ‚Äúsecretfolder‚Äù path example as you please.</p>
<pre><code>mkdir /root/secretfolder
chmod 700 /root/secretfolder
dd bs=512 count=4 if=/dev/urandom of=/root/secretfolder/crypto_keyfile.bin
</code></pre>
<p>Find the UUID of your home luks container(<code>sdb1</code> not <code>crypthome</code>) and add it to your <code>/etc/crypttab</code>. Crypttab columns are: mapping name(crypthome), luks partition UUID, key path and luks. You can check disks UUID by issuing <code>blkid /dev/yyy</code> where <code>yyy</code> could be a partition or a disk. In this case, use <code>sdb1</code>.</p>
<pre><code>crypthome UUID=29d3555d-cccc-yyyy-xxxx-xxxxxxxxxxxx /root/secretfolder/crypto_keyfile.bin luks
</code></pre>
<p><strong>Step 09</strong>: Configure the rest of the system. Remember, this is just an overview of the Arch Linux installation and the focus here is on the secureboot aspect of this setup. In this step we will configure locale, localtime, keymap, hostname and user. I‚Äôm configuring a setup for a Brazilian Portuguese user so, change this info to reflect your language.</p>
<pre><code>ln -s /usr/share/zoneinfo/America/Sao_Paulo /etc/localtime
hwclock --systohc
echo LANG=pt_BR.UTF-8 &gt; /etc/locale.conf
echo KEYMAP=bt-abnt2 &gt; /etc/vconsole.conf
echo hostname_i_want &gt; /etc/hostname
</code></pre>
<p>Uncomment the <code>pt_BR.UTF-8 UTF-8</code> line inside <code>/etc/locale.gen</code> and generate this localization with:</p>
<pre><code>locale-gen
</code></pre>
<p>Create a password for root, and the basic info for your user(change <code>myuser</code> to your login):</p>
<pre><code>passwd
useradm -m -g users -G wheel myuser
passwd myuser
</code></pre>
<p><strong>Step 10</strong>: Edit your <code>mkinitcpio.conf</code> and include the <code>HOOKS</code> <code>keyboard</code>, <code>keymap</code>, <code>lvm2</code> and <code>resume</code>. Include <code>ext4</code> on <code>MODULES</code> and change <code>COMPRESSION</code> to <code>cat</code>. You can check my config file <a href="https://gitlab.com/nwildner/dotfiles/-/blob/master/etc/mkinitcpio.conf">here</a>. Recreate your initd:</p>
<pre><code>mkinitcpio -p linux
</code></pre>
<p>You may have noticed the <code>i915</code> module on my <code>mkinitcpio.conf</code>. That‚Äôs how you avoid video flickering during the boot process if you are a user of an Intel Integrated graphics card.</p>
<p><strong>Step 11</strong>: Lets check if your motherboard is able to handle EFI entries using the following command:</p>
<pre><code>bootctl status| grep -i "sets"
       ‚úì Boot loader sets ESP partition information
</code></pre>
<p>If this option is marked with <code>‚úì</code> you will be able to set boot information on your motherboard directly. Otherwise, you‚Äôll have to rely on a bootloader like <code>systemd-boot</code>. You could obviously use the default EFI fallback option (<code>EFI/BOOT/BOOX64.EFI</code>) but the sofware we will use to automatically create ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://nwildner.com/posts/2020-07-04-secure-your-boot-process/">https://nwildner.com/posts/2020-07-04-secure-your-boot-process/</a></em></p>]]>
            </description>
            <link>https://nwildner.com/posts/2020-07-04-secure-your-boot-process/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24511852</guid>
            <pubDate>Fri, 18 Sep 2020 01:00:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[My Experience Interviewing with Stripe]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24511838">thread link</a>) | @lpolovets
<br/>
September 17, 2020 | https://daeyoungchoi.com/stripe-interview/ | <a href="https://web.archive.org/web/*/https://daeyoungchoi.com/stripe-interview/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
	
<p>Interviewing for a job often is a daunting experience. It may commonly be described as a two-way selection process, one in which the candidate is evaluating the company as much as the company is the candidate, but the sober truth is that outside of the most highly sought-after segments of the talent pool, the balance of power resides squarely with the hiring company and the candidate has little leverage until the moment a job offer is presented. This seemingly is especially true in Silicon Valley, where each job opening routinely attracts hundreds of applicants and it is not uncommon that the candidate simply never hears back from the company in the case the interview is deemed unsuccessful at any point along the process, without even a notice of rejection, let alone being provided an explanation or feedback of any kind. Basic decency and decorum can seem to fly out the window once the company makes the determination you are ‚Äúnot a fit,‚Äù which effectively translates to ‚Äúhenceforth a waste of time,‚Äù simply an undesired byproduct of an essential process, to be discarded as quickly as possible.</p>



<p>But every once in a while, as is the case with life in general, an exception comes along that runs against the grain of your learned expectations. It shows you the extraordinary does exist and offers a reminder that much of what happens in this world lies on a distribution, despite the seeming tyranny of what occupy the regions of central tendency. While it won‚Äôt negate the broadly observed norms, the reminder that excellence exists in almost all domains of human activity sometimes is enough to sustain one in a journey that is full of pitfalls and trials, providing the inspiration that helps keep alive hopes and aspirations even when the objective and dispassionate prognosis appears far from welcoming. Interviewing with Stripe, the payment startup, for me, was such an example.</p>



<p>My very first interview with Stripe started off quite inauspiciously. It was a phone interview with the recruiter, and after spending some time to explore and discuss both my background and that of the job, he let me know that my skill set probably was not as good a match for what the hiring team was looking for as initially thought. In retrospect that sort of upfront candor might have been an early indication of the caliber of the organization that was to be revealed more fully later on. But the remarkable thing that happened after he uttered that assessment was that he wanted to refer me to another recruiter, for a different role which he thought presented a better match. This was something that quite literally had never happened in my experience, admittedly a small sample as it may be ‚Äì a recruiter that not only was well-versed enough in another position for which he was not recruiting, was empowered enough by the organization to make that kind of an autonomous referral decision without consultation, but also, probably most impressively, cared enough to take on such an initiative when I was deemed no longer useful for his immediate need, which was to fill the position at hand.</p>



<p>The subsequent interviews, for the new role, went more smoothly, uneventfully in the best sense. Over the course of the ensuing few weeks, in succession, I had a phone call with the new recruiter, a Zoom video call with the head of the business unit for the role (who was based overseas), a writing assignment, and in-person coffee shop chats in San Francisco with the said head of the business unit who happened to be in town that week and also with the hiring manager. All of that led to culminate in an on-site round of interviews with 7 individuals that lasted over 4 hours in January of this year at the San Francisco headquarters of Stripe.</p>



<p>In retrospect, it is clear I did not perform as well on the on-site interviews as I should have. What was unique about Stripe was the interview questions were actually provided in advance ‚Äì the recruiter arranged a call with me prior to the scheduled date to go over the questions one by one. Gripped by the notion, somehow, that interviews are just conversations, however, I did not spend a lot of time preparing specific answers for those questions. Looking back, I now think a big part of the reason why was hubris; I have a tendency to think I enjoy all conversations, and proceeded to draw the conclusion in my mind that conversations I enjoy in an interview setting must be good interviews. The mere fact that I was ready to enjoy the interviews, in their natural, unscripted, conversational formulation, was, in a way, enough preparation. But once the on-site interviews began it became apparent the interviewers were pressing for a higher level of specificity in the answers than I was prepared to give in the courses of casual conversations. I could feel the inadequacy of my answers resulting from the lack of deeper considerations given them in advance, and I simply was not good enough to get to the level of detailed thoughtfulness on the spot. As I was ushered out of the building after the interviews concluded, I recall feeling a sense of regretful uneasiness creeping in. Almost compulsively, I remained hopeful, but far from confident. And surely enough, a few days later I was informed that I didn‚Äôt get the job. </p>



<p>I was devastated, but this is the point from which I was led to Stripe revealing itself to be a truly unique, unconventional company in the most unexpectedly wonderful ways. First, the recruiter offered to schedule a call so we could review the decision. I was pleasantly surprised to be given such an unusual opportunity, so I took him up on it. During the call he relayed some useful feedback, though it is clear in retrospect that I got too excited to be on such a call and spent way more time talking than listening to what he had to say. But importantly, the conversation helped me come to a realization, in concrete ways, that I was a much worse interviewee than had previously believed myself to be. It prompted me to ex-examine my natural tendencies in the ways I think, talk, and engage with others in conversations. When I shared the revelation with my wife, she was more than happy to supply additional pointers in areas of my failing.</p>



<p>The fact that the recruiter, and by extension the company, was willing to engage with and spend the time and effort on someone deemed to be ‚Äúnot wanted‚Äù was an enormous departure from everything I had experienced previously. Frankly, it was the kind of thoughtfulness and generosity of goodwill that I never expected any corporate entity to possess or display. I knew I had been rejected, but now I wanted Stripe even more, and I couldn‚Äôt let myself just give up. So I did something quite silly: I sent an email to the CEO. Fortunately Patrick Collison, Stripe‚Äôs CEO, lists his email address on his personal website. But I had no idea if the email would actually reach him, or if he would read it if it got to him, or if he would respond in any way. The overwhelmingly realistic outcome was that nothing would happen, and I knew it. It was a desperation move, one you are able to make only because you have nothing to lose.</p>



<p>Then, I got an email from the recruiter. He asked if I wanted to speak with the company‚Äôs chief risk officer ‚Äì the job I interviewed for was a risk function ‚Äì for reasons that were not entirely clear. He mentioned I might want ‚Äúa bit more closure,‚Äù but I didn‚Äôt want closure; if anything, I wanted to keep the door ajar as much and as long as possible. He also said that the meeting was optional, with ‚Äúno pressure.‚Äù Perplexed yet intrigued, I took up the opportunity to speak with the executive. She began the call with something to the effect of ‚ÄúI know you reached out to Patrick.‚Äù I had reached out to everyone I had interviewed with to solicit feedback, and since the name ‚ÄúPatrick‚Äù didn‚Äôt register right away I processed it to mean one of the interviewers. But about 5 seconds later I realized there was no one named Patrick that I had met, and then it hit me that it must be Patrick Collison, the CEO. My email to him was why this call was happening, which the chief risk officer confirmed when I asked her in disbelief. I was stunned. Having taken place almost a half year ago, much of the details of the call is a blur. But I recall distinctly her asking why Stripe should hire someone like myself. Most improbably, it seemed, this might be a second chance.</p>



<p>I had written to Patrick the CEO with a proposition: I offered myself to be a counterfactual data point in an evaluation of Stripe‚Äôs hiring process, after learning that Stripe‚Äôs credit card fraud detection system lets through some transactions which its algorithms flag as likely frauds in order to determine whether they turn out to be true positives or false positives ‚Äì thereby evaluating the algorithms themselves ‚Äì in a process called ‚Äúcounterfactual evaluation.‚Äù When the chief risk officer asked why I should be hired, I reiterated that proposition: the case I was making was not about my merits, but the willingness on Stripe‚Äôs part to apply counterfactual evaluation to its hiring process, to determine whether I was a false positive (incorrectly rejected) or a true positive (truly no good) by letting me join Stripe, without a bias to either outcome. I couldn‚Äôt tell if I was making any headway with the argument, but we soon ran out of time and she had to go to another meeting.</p>



<p>In the end, the outcome of my interviews did not change and I remain not an employee of Stripe. But out of all the job interview experiences I‚Äôve had in my life, the one with Stripe stands out as singularly remarkable. When I shared my story with a friend she was so impressed that even though she wasn‚Äôt looking for a new job, she said she still might apply to Stripe just for the experience. Today Stripe has earned a reputation as one of the best embodiments of the ideals of Silicon Valley ‚Äì a place of inventive and ambitious companies that not only come up ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://daeyoungchoi.com/stripe-interview/">https://daeyoungchoi.com/stripe-interview/</a></em></p>]]>
            </description>
            <link>https://daeyoungchoi.com/stripe-interview/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24511838</guid>
            <pubDate>Fri, 18 Sep 2020 00:57:45 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[CCP announces plan to take control of China's private sector]]>
            </title>
            <description>
<![CDATA[
Score 21 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24511672">thread link</a>) | @apsec112
<br/>
September 17, 2020 | https://www.asiatimesfinancial.com/ccp-announces-plan-to-take-control-of-chinas-private-sector | <a href="https://web.archive.org/web/*/https://www.asiatimesfinancial.com/ccp-announces-plan-to-take-control-of-chinas-private-sector">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
        
        
        
      
        <h3>(ATF)√Ç&nbsp;Chinese President Xi Jinping and the Communist Party's Central Committee have laid out a plan for a √¢‚Ç¨Àúnew era√¢‚Ç¨‚Ñ¢ in which the party has better control over private business in China. </h3><p><a href="http://www.xinhuanet.com/fortune/2020-09/15/c_1126497384.htm">The plan</a> was detailed in a 5,000-word statement √¢‚Ç¨‚Äú and all regions and departments in the country have been told to follow the new guidelines.</p><p><span>This was the top story on Wednesday's CCTV Evening News √¢‚Ç¨‚Äú how the president had issued √¢‚Ç¨≈ìimportant instructions√¢‚Ç¨ÔøΩ.</span></p><p><span>It had a long-winded title: "Opinion on Strengthening the United Front Work of the Private Economy in the New Era".</span></p><p><span>The ultimate goal is for the party to have ideological leadership of private enterprise.</span></p><p><span>The statement seeks to improve CCP control over private enterprise and entrepreneurs through United Front Work √¢‚Ç¨≈ìto better focus the wisdom and strengthen of the private businesspeople on the goal and mission to realise the great rejuvenation of the Chinese nation.√¢‚Ç¨ÔøΩ</span></p><p><span>Xi's instructions were issued ahead of a conference today on this very topic.√Ç&nbsp;</span>The party wants to see a "united front" between private enterprise and government business.</p><h3><figure><iframe frameborder="0" scrolling="no" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" mozallowfullscreen="" webkitallowfullscreen="" oallowfullscreen="" msallowfullscreen="" allowtransparency="true" src="//player.vimeo.com/video/459459469"></iframe></figure>100 ways to rein in the private sector</h3><p>Since the 18th National Congress in May, members of the party's Central Committee and Comrade Xi have proposed a series of new concepts and strategies, and adopted a series of major measures to guide and promote private economic 'united front' work. They say these moves have achieved "remarkable results". </p><p>As China√¢‚Ç¨‚Ñ¢s private economy has grown and diversified, the statement says "these measures will bring about a great rejuvenation of the Chinese nation under Xi Jinping thought".</p><p>Overall, there are more than 100 measures, including guidance on selection of personnel to implement the measures. </p><p>"We must also see that socialism with Chinese characteristics has entered a new era, [as] the scale of the private economy has continued to expand, risks and challenges have increased significantly, the values and interests of the private economy have become increasingly diverse, and the united front work of the private economy is facing new situations and tasks," the statement says.</p><p>"In order to thoroughly implement the major decisions and deployments of the Party Central Committee, to further strengthen the Party's leadership of the private economic united front work, and to better integrate the wisdom and strength of private economic personnel to the goal and task of achieving the great rejuvenation of the Chinese nation, the following opinions are hereby offered."</p><p>The primary stated significance of the measures is √¢‚Ç¨≈ìenhancement of the party√¢‚Ç¨‚Ñ¢s leadership over the private economy √¢‚Ç¨‚Äú private economic figures are to be more closely united around the party.√¢‚Ç¨ÔøΩ</p><h3>More CCP involvement in business</h3><p>This is quite a turnaround. Previously, private business was not considered very worthy for party membership or influence, but it has gradually entered the heart of the regime.</p><p>According to the new provisions, private firms will need a certain amount of CCP registered employees, which is already a long-term practise in large private firms but not smaller ones. </p><p>These cadres will make sure businesses follow the guiding ideology√Ç&nbsp;√¢‚Ç¨≈ìGuided by Xi Jinping√¢‚Ç¨‚Ñ¢s Thought on Socialism with Chinese Characteristics for a New Era.√¢‚Ç¨ÔøΩ </p><p>They will also guide private business people to enhance the latest CCP catchphrases √¢‚Ç¨‚Äú √¢‚Ç¨≈ìfour consciousnesses√¢‚Ç¨ÔøΩ, strengthen the √¢‚Ç¨≈ìfour self-confidences√¢‚Ç¨ÔøΩ, and achieve the √¢‚Ç¨≈ìtwo safeguards.√¢‚Ç¨ÔøΩ</p><p>Duties of cadres will include the duties of strengthening ideological guidance,√Ç&nbsp;guiding private economic figures to increase their awareness of self-discipline, build a strong line of ideological and moral defence, strictly regulate their own words and deeds, cultivate a healthy lifestyle, and create a good public image.√Ç&nbsp;</p><p>They will also need to continuously improve law abidance and moral standards of private citizens.√Ç&nbsp;</p><p>Communication channels will be set up between private business and the party to report back on progress and other matters.</p>
      
      
        <p>Tags:</p>
      
      </article></div>]]>
            </description>
            <link>https://www.asiatimesfinancial.com/ccp-announces-plan-to-take-control-of-chinas-private-sector</link>
            <guid isPermaLink="false">hacker-news-small-sites-24511672</guid>
            <pubDate>Fri, 18 Sep 2020 00:33:21 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The End of the Arab-Israeli Conflict]]>
            </title>
            <description>
<![CDATA[
Score 28 | Comments 7 (<a href="https://news.ycombinator.com/item?id=24511291">thread link</a>) | @brandonlc
<br/>
September 17, 2020 | https://ottomansandzionists.com/2020/09/17/the-end-of-the-arab-israeli-conflict/ | <a href="https://web.archive.org/web/*/https://ottomansandzionists.com/2020/09/17/the-end-of-the-arab-israeli-conflict/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

					
						<div>

							
<p>Tuesday‚Äôs ceremony on the White House lawn formalizing the normalization of relations between Israel and the United Arab Emirates, along with an agreement for Israel and Bahrain to do the same, marks the end of the Arab-Israeli conflict. The agreements do not create a new Middle East, as some have maintained, but cement that what had arrived haltingly and in fits and starts is here to stay. The Arab-Israeli conflict was already over in practice, and the Abraham Accord put a significant stamp on a process that had been underway for years. This does not lessen that it is something to be celebrated, and it should be clear to everyone without blinders on why Israelis are rightly happy. The Abraham Accord also brings with it another significant consequence, one that is perhaps unintended, in that the end of the Arab-Israeli conflict will put the focus on the Israeli-Palestinian conflict in an unavoidable way.</p>



<p>&nbsp;The Abraham Accord is a positive development for Israel, the UAE, and Bahrain, and nobody should pretend otherwise. Like nearly everything in foreign policy, it will bring some downsides along with it, but that doesn‚Äôt alter the cost-benefit analysis. It is a true Jared Kushner accomplishment, and credit should be given where credit is due. While Kushner and the Trump team‚Äôs vision for an ‚Äúultimate deal‚Äù when they took office was clearly intended to be one between Israelis and Palestinians, the decision to recognize Jerusalem as Israel‚Äôs capital without any reciprocal gesture toward the Palestinians and ‚Äì crucially ‚Äì the Palestinian reaction in the aftermath very obviously shifted their focus. Their vision ultimately became one of isolating and bypassing the Palestinians in order to craft agreements between Israel and Arab states and demonstrate to the Palestinians that they would not be able to exercise a veto over Israel‚Äôs place in the region writ large. Whether you agree with this approach or not ‚Äì and previous administrations did not ‚Äì the Trump administration succeeded in carrying it out.&nbsp;</p>



<p>&nbsp;While the way to the agreement was paved by the UAE publicly setting forth that normalization could not coexist with annexation, the text of the agreement itself demonstrates how well the Trump administration managed to divorce the Palestinian issue from the wider regional context. The agreement does not explicitly mention the Arab Peace Initiative or the 1967 lines, does not mention annexation, does not mention two states, does not mention past UN agreements, does not mention the Palestinians themselves, and the only reference to the conflict is an open-ended commitment to ‚Äúrealize a negotiated solution to‚Äù it ‚Äúthat meets the legitimate needs and aspirations of both people, and to advance comprehensive Middle East peace, stability and prosperity.‚Äù For anyone looking to demonstrate to the Palestinians just how little they matter in this new reality, you could not come up with a clearer statement of just that.</p>



<p>&nbsp;That Israel and Arab states have been moving closer together for years due to a confluence of shared interests and a desire to benefit economically, militarily, and technologically does not mean that Kushner‚Äôs success was accidental. He was able to come up with the right set of incentives for the UAE to formalize what had been informal, and was also able to make the case that any concerns about breaking the Arab Peace Initiative approach ‚Äì no normalization before an agreement with the Palestinians ‚Äì would not carry any real consequences for states willing to do so. For all of the years of talk about secret relations underneath the table, things are now out in the open, and that is indeed a big deal.</p>



<p>&nbsp;But just as it is hollow to argue that the Israel-UAE deal does not matter, it is also hollow to argue that it is the only thing that matters. In the past few weeks, there has been a strange phenomenon of simultaneously embarking on a new path while turning back the clock. In the decades after Israel‚Äôs founding, its battles for survival and struggle for acceptance were collectively known as the Arab-Israeli conflict, which accurately reflected the primary threats and challenges that Israel faced. Following repeated Israeli military victories against Egypt, Syria, Jordan, and others, and the subsequent acknowledgement of Israeli military superiority and permanence in the region, the Arab-Israeli conflict transformed into the Israeli-Palestinian conflict. That conflict remains, yet many this week want to pretend that we are back in Arab-Israeli conflict territory. Acting as if peace between Israel and Gulf states, and only peace between Israel and Gulf states, was the terminal goal all along is absurd. It does not detract from the actual accomplishment to describe it accurately and put it in the wider context, or to point out that this is an important and consequential deal but not the ultimate one that President Trump initially sought.</p>



<p>&nbsp;The fact that the Israeli-Palestinian conflict is what remains means that there will be a true return to it in a more crystallized and concentrated way. For some, that will make it even easier to ignore, because left on its own and severed from the prospect of it being the gateway to normal relations with other states, it will seem even less important and relevant. For others, it will mean even greater awareness, as it will be easier to see all of the ways in which it is different from past Israeli conflicts and how it is not going to disappear one day on its own. Whether or not one wants to minimize the Israeli-Palestinian conflict‚Äôs importance, it is far harder in the wake of the Israel-UAE accord ‚Äì one that does not explicitly recognize Israel as a Jewish state but does explicitly recognize Jews‚Äô place in the region and rebuts the charge that Israeli Jews are colonialist interlopers ‚Äì to maintain the posture that ‚Äúthey will always hate Jews and never accept Israel‚Äù and thus no deal can ever be struck. And if you argue that there is something qualitatively different about the Palestinians, it is also harder to simultaneously insist that they are not a distinct nationality and that they should be satisfied going to one of twenty two other Arab countries.</p>



<p>&nbsp;Most saliently, leaving the Arab-Israeli conflict behind while the Israeli-Palestinian conflict remains will create an ever starker contrast between a situation where Israeli actions and control do not have a direct impact on the parties across the table ‚Äì such as the Emiratis and the Bahrainis ‚Äì and the glaring situation with the Palestinians, where they do. This is also a Trump administration accomplishment, albeit an unintended one. When Arab states that were not directly impacted by Israeli actions in the West Bank would not engage with Israel, it was easy to criticize and point out the unfair standard involved and lump everyone together. With the Palestinians standing alone in every way, not only in how they relate to Israel but in how Israel relates to them, it is going to be ever clearer why and how the Israeli-Palestinian conflict is not the same as the Arab-Israeli conflict, why and how it cannot be reduced to economic or security interests, and why and how the Palestinians are not going to be overcome by U.S. inducements or the promise of access to Israeli benefits quite so easily.</p>
			
			
			
							
						</div>

					
					

				</div></div>]]>
            </description>
            <link>https://ottomansandzionists.com/2020/09/17/the-end-of-the-arab-israeli-conflict/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24511291</guid>
            <pubDate>Thu, 17 Sep 2020 23:41:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Universal flu vaccine finishes Phase 3 trial, results expected before December]]>
            </title>
            <description>
<![CDATA[
Score 41 | Comments 4 (<a href="https://news.ycombinator.com/item?id=24510293">thread link</a>) | @apsec112
<br/>
September 17, 2020 | https://www.biondvax.com/2020/07/last-of-12400-participants-completes-final-visit-in-biondvaxs-m-001-universal-flu-vaccine-pivotal-phase-3-clinical-trial/ | <a href="https://web.archive.org/web/*/https://www.biondvax.com/2020/07/last-of-12400-participants-completes-final-visit-in-biondvaxs-m-001-universal-flu-vaccine-pivotal-phase-3-clinical-trial/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
				<p>Jerusalem, Israel ‚Äì July 1, 2020 ‚Äì <strong>BiondVax Pharmaceuticals Ltd. (Nasdaq: BVXV)</strong> today announced that all participants in the placebo-controlled, blinded, pivotal, clinical efficacy, Phase 3 trial of BiondVax‚Äôs M‚Äë001 universal influenza vaccine candidate have now completed their site visits. In total, over 12,400 volunteers aged 50+ (with half aged 65+) were enrolled in the trial over the past two flu seasons in 83 sites across seven European countries. The purpose of the study is to assess M-001‚Äôs ability as a standalone non-adjuvanted vaccine to provide clinical protection from circulating influenza strains as measured by reduction of influenza illness rate (as a primary endpoint) and severity (as a secondary endpoint), as well as to assess M-001‚Äôs safety.</p>
<p>Seasonal influenza annually infects approximately <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5596521/">10-20% of the world‚Äôs population</a> resulting in up to about <a href="https://www.who.int/en/news-room/fact-sheets/detail/influenza-(seasonal)">five million cases of severe illness and 650,000 deaths</a>. In addition, pandemic influenza, such as the H1N1 Swine Flu pandemic of 2009, is a constant global threat. However, current influenza vaccines, which target frequently mutating parts of the flu virus and therefore must be updated annually in the hope they will match the next flu season‚Äôs circulating strains, achieve on average only about <a href="https://www.cdc.gov/flu/vaccines-work/effectiveness-studies.htm">40% vaccine effectiveness</a> in the general population and as low as <a href="https://www.cdc.gov/flu/vaccines-work/2018-2019.html">12% in older adults</a>.</p>
<p>BiondVax‚Äôs M-001 is a single recombinant protein of highly conserved influenza epitopes. Consequently:</p>
<ul>
<li>M-001 does not need to be updated and therefore can be manufactured and distributed year-round.</li>
<li>M-001 is designed to provide protection to both existing and future seasonal A and B strains, as well as emerging pandemic strains.</li>
</ul>
<p><a href="http://www.biondvax.com/about-us/management/tamar-ben-yedidia-cso/"><strong>Dr. Tamar Ben-Yedida</strong></a>, BiondVax‚Äôs Chief Scientist, commented, ‚Äú<em>We are pleased that despite the ongoing COVID-19 pandemic, and the challenge of conducting the trial across 83 sites and seven countries, thanks to all the people involved ‚Äì including the CRO, investigators, and thousands of participants ‚Äì we have maintained the planned timelines of our pivotal Phase 3 trial. In light of the ongoing COVID-19 pandemic, the need for improved influenza vaccines has arguably never been clearer. To better protect lives and economies, influenza vaccines must be more effective in reducing illness rates and severity. Needless to say, we are eagerly anticipating results of our trial by the end of this year.</em>‚Äù</p>
<p>Participants in the trial‚Äôs second cohort were enrolled prior to the 2019/20 flu season and monitored for influenza-like illness (ILI) symptoms throughout the flu season. Swabs samples were collected from those participants with ILI, and influenza confirmation is currently being conducted by a qualified laboratory. Analysis will continue in the coming months, and results are expected by the end of 2020.</p>
<p>As part of this Phase 3 study, cell-mediated immunogenicity markers of M-001 will be evaluated in a subset of participants. The recently completed clinical study report (CSR) of a U.S. National Institute of Allergy and Infectious Diseases (NIAID) supported Phase 2 clinical trial of M-001 concluded that, ‚Äú<em><a href="http://www.biondvax.com/2020/06/nih-report-on-phase-2-clinical-trial-of-biondvaxs-m-001-universal-influenza-vaccine-candidate-concludes-both-primary-endpoints-achieved/">M-001 induced significant polyfunctional T cell responses</a>.</em>‚Äù</p>
<p>In addition to the ongoing pivotal, clinical efficacy, Phase 3 trial, equipment installation and manufacturing process scale-up in BiondVax‚Äôs pilot facility in Jerusalem are in progress. The facility has planned annual capacity of up to between 10 and 20 million doses in bulk.</p>
<p><strong>About BiondVax </strong><br>
BiondVax (NASDAQ: BVXV) is a Phase 3 clinical stage biopharmaceutical company developing a universal flu vaccine. The vaccine candidate, called M-001, is designed to provide multi-strain and multi-season protection against current and future, seasonal and pandemic influenza. BiondVax‚Äôs proprietary technology utilizes a unique combination of conserved and common influenza virus peptides intended to stimulate both arms of the immune system for a cross-protecting and long-lasting effect. In a total of seven completed Phase 1/2 and Phase 2 clinical trials enrolling 818 participants, the vaccine has been shown to be safe, well-tolerated, and immunogenic. The ongoing pivotal Phase 3 clinical trial aims to assess safety and effectiveness of M-001 in reducing flu illness and severity. For more information, please visit <a href="http://www.biondvax.com/">www.biondvax.com</a>.</p>
<p><strong>Contact Details</strong><br>
Joshua E. Phillipson<strong> | </strong>+972 8 930 2529<strong> | </strong>j.phillipson@biondvax.com</p>
<p><strong>Forward Looking Statements</strong><br>
<em>This press release contains forward-looking statements within the meaning of the Private Litigation Reform Act of 1995. Words such as ‚Äúexpect,‚Äù ‚Äúbelieve,‚Äù ‚Äúintend,‚Äù ‚Äúplan,‚Äù ‚Äúcontinue,‚Äù ‚Äúmay,‚Äù ‚Äúwill,‚Äù ‚Äúanticipate,‚Äù and similar expressions are intended to identify forward-looking statements. These forward-looking statements reflect the management‚Äôs current views with respect to certain current and future events and are subject to various risks, uncertainties and assumptions that could cause the results to differ materially from those expected by the management of BiondVax Pharmaceuticals Ltd. Risks and uncertainties include, but are not limited to, risks relating to the COVID-19 (coronavirus) pandemic, including a risk of delay in the availability of the top line results from our pivotal clinical efficacy Phase 3 trial for M-001, the prosecution, timing and results of the ongoing Phase 2 and Phase 3 trials and any subsequent trials; timing of receipt of regulatory approval of our manufacturing facility in Jerusalem; ability to demonstrate the efficacy and safety of the vaccine; the timing of clinical trials and marketing approvals; the risk that drug development involves a lengthy and expensive process with uncertain outcome; the ability of the Company to maintain, preserve and defend its intellectual property and patents granted; whether our&nbsp; vaccine candidate will successfully advance through the clinical trial process on a timely basis, or at all, and receive approval from the U.S. Food and Drug Administration or equivalent foreign regulatory agencies; the adequacy of available cash resources and the ability to raise additional capital when needed. More detailed information about the risks and uncertainties affecting the Company is contained under the heading ‚ÄúRisk Factors‚Äù in our Annual Report on Form 20-F for the year ended December 31, 2019 filed with the U.S. Securities and Exchange Commission, or SEC, which is available on the SEC‚Äôs website, www.sec.gov. We undertake no obligation to revise or update any forward-looking statement for any reason.</em></p>
<p>###</p>
							</div></div>]]>
            </description>
            <link>https://www.biondvax.com/2020/07/last-of-12400-participants-completes-final-visit-in-biondvaxs-m-001-universal-flu-vaccine-pivotal-phase-3-clinical-trial/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24510293</guid>
            <pubDate>Thu, 17 Sep 2020 21:41:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[BQN: Finally, an APL for your flying saucer]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24510182">thread link</a>) | @todsacerdoti
<br/>
September 17, 2020 | https://mlochbaum.github.io/BQN/index.html | <a href="https://web.archive.org/web/*/https://mlochbaum.github.io/BQN/index.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">

<p><em>Try it online below or <a href="https://mlochbaum.github.io/BQN/try.html">here</a>, and see <a href="https://mlochbaum.github.io/BQN/running.html">running.md</a> for more options.</em></p>

<p><strong>BQN</strong> is a new programming language in the APL lineage, which aims to remove inconsistent and burdensome aspects of the APL tradition and put the great ideas on a firmer footing. BQN is aimed at existing and aspiring APL-family programmers, and using it requires a solid understanding of functions and multidimensional arrays. However, because of its focus on providing simple, consistent, and powerful array operations, BQN should also be a good language for learning array programming and building stronger array intuition.</p>
<p>BQN maintains many of the ideas that made APL\360 revolutionary in 1966:</p>
<ul>
<li>Human-friendly <strong>infix notation</strong> with no precedence rules to remember.</li>
<li><strong>Built-in array operations</strong> handle any number of dimensions easily.</li>
<li><strong>Higher-order functions</strong> allow basic functions to be applied in more powerful ways.</li>
</ul>
<p>It incorporates concepts developed over years of APL practice:</p>
<ul>
<li>The <a href="https://mlochbaum.github.io/BQN/doc/leading.html"><strong>leading axis model</strong></a>, which allows for simpler built-in functions.</li>
<li>Trains and combinators for <strong>tacit programming</strong>.</li>
<li>Lightweight <a href="https://mlochbaum.github.io/BQN/doc/block.html"><strong>anonymous functions</strong></a> (like <a href="https://aplwiki.com/wiki/Dfn">dfns</a>).</li>
</ul>
<p>But BQN is redesigned from the ground up, with brand new ideas to make these paradigms easier to use and less likely to fail.</p>
<ul>
<li>The <a href="https://mlochbaum.github.io/BQN/doc/based.html"><strong>based array model</strong></a> makes non-arrays (called atoms) a fundamental part of the language, and removes the surprise of floating arrays and the hassle of explicit boxes. New <strong>array notation</strong> eliminates the gotchas of <a href="https://aplwiki.com/wiki/Strand_notation">stranding</a>.</li>
<li>A <a href="https://mlochbaum.github.io/BQN/doc/context.html"><strong>context-free grammar</strong></a> where a value's syntactic role is determined by its spelling makes it easier for machines and humans to understand code.</li>
<li>Oh, and it naturally leads to <a href="https://mlochbaum.github.io/BQN/doc/functional.html"><strong>first-class functions</strong></a>, a feature often missed in APL.</li>
<li>The <strong>new symbols</strong> for built-in functionality allow the syntactic role of a primitive to be distinguished at a glance, and aim to be more consistent and intuitive.</li>
</ul>
<h2 id="what-kind-of-name-is-bqn">What kind of name is "BQN"?</h2>
<p>It's three letters, that happen to match the capitals in "Big Questions Notation". You can pronounce it "bacon", but are advised to avoid this unless there's puns.</p>
<h2 id="what-does-bqn-look-like">What does BQN look like?</h2>
<p>Rather strange, most likely:</p>
<a title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4oqRK2DiiJjijL3ijZ8xMuKGlTIgICMgVGhlIDEydGggRmlib25hY2NpIG51bWJlcg==&amp;run">√¢‚Ä†‚Äî√Ø¬∏ÔøΩ</a><pre>    <span>√¢≈†‚Äò+</span><span>`</span><span>√¢ÀÜÀú</span><span>√¢≈í¬Ω</span><span>√¢ÔøΩ≈∏</span><span>12</span><span>√¢‚Ä†‚Ä¢</span><span>2</span>  144
</pre>
<p>For longer samples, you can <a href="https://github.com/mlochbaum/BQN/blob/master/src/c.bqn">gaze into the abyss</a> that is the self-hosted compiler, or the <a href="https://github.com/mlochbaum/BQN/blob/master/src/r.bqn">shallower but wider abyss</a> of the runtime, or take a look at the friendlier <a href="https://github.com/mlochbaum/BQN/blob/master/md.bqn">markdown processor</a> used to format and highlight documentation files. There are also <a href="https://github.com/mlochbaum/BQN/blob/master/examples/fifty.bqn">some translations</a> from <a href="https://www.jsoftware.com/papers/50/">"A History of APL in 50 Functions"</a> here.</p>
<h2 id="how-do-i-work-with-the-character-set">How do I work with the character set?</h2>
<p>I enter the special characters using a backslash prefix, so that, for example, <code><span>\z</span></code> is translated to <code><span>√¢¬•≈†</span></code> (the backslash character itself is not used by BQN). The online REPL supports this method out of the box, and this repository also has <a href="https://github.com/mlochbaum/BQN/tree/master/editors">scripts</a> to support it, along with the standard syntax highlighting and indentation, in Vim and <a href="https://kakoune.org/">Kakoune</a>. When starting out, it may be easier to use the bar above the REPL: hover over a character to see a short description, and click to insert it into the editor. Finally, on Linux <a href="https://github.com/mlochbaum/BQN/blob/master/editors/bqn">this configuration file</a> for <a href="https://en.wikipedia.org/wiki/X_keyboard_extension">XKB</a> can be used to allow typing glyphs with a modifier key system-wide.</p>
<p>Few existing monospace fonts support all the BQN characters (double-struck letters like <code><span>√∞ÔøΩ‚Ä¢¬©</span></code> are a particular sticking point), which can cause these characters to be rendered with a fallback font and have the wrong width or look inconsistent. Two fonts modified to support BQN are available currently. This site uses a <a href="https://github.com/mlochbaum/BQN/blob/master/docs/DejaVuBQNSansMono.ttf">modified DejaVu Sans Mono</a>, and another, more playful option is <a href="https://github.com/dzaima/BQN386">BQN386</a>, based on <a href="https://abrudz.github.io/APL386/">APL386</a>.</p>
<h2 id="how-do-i-get-started">How do I get started?</h2>
<p>Read the <a href="https://mlochbaum.github.io/BQN/doc/index.html">documentation</a>!</p>
<p>BQN documentation is currently written primarily for array programmers and is not comprehensive, with aspects of the language that are shared with APL poorly documented. If you're not an array programmer, it would probably be better to start with another language, or wait a few weeks. But if you're a serious language enthusiast, the <a href="https://mlochbaum.github.io/BQN/spec/index.html">specification</a> is fairly complete and might be enough to fill the gaps in the documentation.</p>
<p>If you're an array programmer, then you're in much better shape. However, you should be aware of two key differences between BQN and existing array languages beyond just the changes of <a href="https://mlochbaum.github.io/BQN/doc/primitive.html">primitives</a>√¢‚Ç¨‚Äùif these differences don't seem important to you then you don't understand them! BQN's <a href="https://mlochbaum.github.io/BQN/doc/based.html">based array model</a> is different from both a flat array model like J and a nested one like APL2, Dyalog, or GNU APL in that it has true non-array values (plain numbers and characters) that are different from depth-0 scalars. BQN also uses <a href="https://mlochbaum.github.io/BQN/doc/context.html">syntactic roles</a> rather than dynamic type to determine how values interact, that is, what's an argument or operand and so on. This system, along with lexical closures, means BQN fully supports Lisp-style <a href="https://mlochbaum.github.io/BQN/doc/functional.html">functional programming</a>.</p>



</div>]]>
            </description>
            <link>https://mlochbaum.github.io/BQN/index.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24510182</guid>
            <pubDate>Thu, 17 Sep 2020 21:29:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Things I wish I knew at the beginning, after 11 years of coding]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24509879">thread link</a>) | @windy-topology
<br/>
September 17, 2020 | https://www.lifetechpsych.com/lessons-for-junior-dev/ | <a href="https://web.archive.org/web/*/https://www.lifetechpsych.com/lessons-for-junior-dev/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-reactid="8"><p>I initially wrote this post for new coders and junior devs on Reddit and <a href="https://reddit.com/r/learnprogramming/comments/itbw45/lessons_for_beginners_and_junior_developers_after/">it blew up with over 50 awards.</a> So I‚Äôve decided to upgrade parts of it based on people‚Äôs reactions.</p>
<p>Some of these are things I wish I knew at the beginning of my journey so I could stress less.</p>
<p>Let‚Äôs get to it.</p>
<h2>All tutorials are not created equal.</h2>
<p>Imagine yourself as a lab rat. </p>
<p>As you learn and experiment, pay attention to the kinds of tutorials that work for you. Many will not work. That‚Äôs fine. In fact, that‚Äôs exactly how experiments work until you find a solution.</p>
<p>But the moment you strike gold, stick to it, consume it voraciously and then find similar tutorials like that to continue rapid growth.</p>
<p>
  <a href="https://www.lifetechpsych.com/static/coding-on-a-mac-8784cb962b0593b5efb51100b12ec2ed-8754b.jpg" target="_blank" rel="noopener">
  
  <span>
    <span>
      <img alt="Image of coding on a mac" title="" src="https://www.lifetechpsych.com/static/coding-on-a-mac-8784cb962b0593b5efb51100b12ec2ed-f8fb9.jpg" srcset="https://www.lifetechpsych.com/static/coding-on-a-mac-8784cb962b0593b5efb51100b12ec2ed-e8976.jpg 148w,
https://www.lifetechpsych.com/static/coding-on-a-mac-8784cb962b0593b5efb51100b12ec2ed-63df2.jpg 295w,
https://www.lifetechpsych.com/static/coding-on-a-mac-8784cb962b0593b5efb51100b12ec2ed-f8fb9.jpg 590w,
https://www.lifetechpsych.com/static/coding-on-a-mac-8784cb962b0593b5efb51100b12ec2ed-85e3d.jpg 885w,
https://www.lifetechpsych.com/static/coding-on-a-mac-8784cb962b0593b5efb51100b12ec2ed-d1924.jpg 1180w,
https://www.lifetechpsych.com/static/coding-on-a-mac-8784cb962b0593b5efb51100b12ec2ed-9452e.jpg 1770w,
https://www.lifetechpsych.com/static/coding-on-a-mac-8784cb962b0593b5efb51100b12ec2ed-8754b.jpg 3882w" sizes="(max-width: 590px) 100vw, 590px">
    </span>
  </span>
  
  </a>
    
&nbsp; &nbsp; <em>Photo by <a href="https://unsplash.com/@cgower">Christopher Gower</a> on <a href="https://unsplash.com/">Unsplash</a></em></p>
<p>When I started, I used to bang my head against <em>Head First Java</em>, the book. But after studying for many hours, I just wasn‚Äôt getting anywhere. Yet, everyone online said it was the best book ever. But TheNewBoston youtube tutorials did it for me back then even though people don‚Äôt recommend him anymore.</p>
<p>I wish I could say this stopped after my 1st year. </p>
<p>Fast forward 2 years down the line when I started learning algorithms and ALL the blog tutorials I followed just didn‚Äôt make sense until I watched Youtube videos on Hungarian folk dance teaching algorithms.</p>
<p>And it just clicked. </p>
<p>Since then, my approach to learning has been to <strong>learn the same thing from multiple places</strong> until I find the instructor and style that works for me.</p>
<h2>Work within fear; not against it.</h2>
<p>I‚Äôll admit: this one is easier said than done. </p>
<p>But you have to master this if you want to last long.</p>
<p>There‚Äôs this temptation to fix your fear first before you continue to learn. Unfortunately, it doesn‚Äôt work like that.</p>
<p>In fact, you‚Äôll spend a lot of time trying to make your fear disappear that it‚Äôll only double your anxiety. You have to find a way ‚Äì your way ‚Äì to acknowledge that you‚Äôre afraid, and frankly will continue to be afraid for a long time, then work within that realization. No need to fight it.</p>
<p>Sometimes, this fear disappears as you become more proficient. </p>
<p>Other times, it vanishes for a while and comes back when you get into a new environment, work with smart people, or move to a completely new stack.</p>
<p>It‚Äôs okay.</p>
<p><strong>This <em>IS</em> the life.</strong></p>
<p>It‚Äôs a sinusoidal wave ‚Äì endlessly going up and down. Don‚Äôt take it too seriously or you‚Äôll lose yourself.</p>
<h2>You‚Äôll forget a lot of things.</h2>
<p>Deeply understanding this will change how you learn. </p>
<p>I can‚Äôt can‚Äôt the number of times I took <em>Introduction to Python Programming</em> on Udacity, Coursera, etc and still forgot everything.</p>
<p>It‚Äôs so annoying. </p>
<p>But I‚Äôve since learned that you‚Äôll forget anything you learn in isolated exercises because they are stored in short term memory. Neuroscience research shows that this is just how the brain works. </p>
<p>If you don‚Äôt want to forget, test your knowledge using spaced repetitions. To do this, build projects. </p>
<p>I‚Äôll give you a concrete example: <em>len(myList)</em> will give you the length of a list in Python. You‚Äôll learn this in Udacity‚Äôs intro course. </p>
<p>Come back a month later and you might not remember if it‚Äôs <em>len, length( ) or myList.size( )</em>. </p>
<p>But with spaced repetition through a project, the outcome is different. For example, you work on a 2-month long Django app for new coders where you need to count multiple times the number of users, the number of exercises done, the number of chats, etc. Imagine doing this throughout the span of the project, for two months. it‚Äôs hard to forget what len( ) does.</p>
<p>This is a trivial example, but hopefully you get the idea. </p>
<p>New learners can start with simple, isolated examples. </p>
<p>But <strong>if you‚Äôre not practicing within the scope of a project that makes you use and reuse what you‚Äôve learned, nothing is going into your long term memory</strong>; it‚Äôs all short-term. And you‚Äôll forget.</p>
<h2>Consistency &gt; hard work.</h2>
<p>Consistency is king. </p>
<p>When you start learning,  you lay down neural pathways that make it easier to retrieve information. According to Neuroscience research, these pathways only get strong through frequency of use, not just intensity.</p>
<p>This means 30 minutes a day, for 5 days a week is way better than 2.5 hours one day, only once a week. </p>
<p>Same hours; Different impact.</p>
<p>Don‚Äôt just work hard, apply wisdom here.</p>
<h2>Talent = hidden practice.</h2>
<p>It‚Äôs easy to dismiss progress as talent.</p>
<p>My first programming class was in C++ and my classmates refused to believe I had never coded before because I was just-so-talented. </p>
<p>But what they also refused to accept was that right after class, I would spend five hours typing <em>cout &lt;&lt; ‚Äúthis is my first program‚Äù</em>, realize it didn‚Äôt run because I forgot a semicolon; retype it and realize it didn‚Äôt print out my statement on a new line because I didn‚Äôt add endl.</p>
<p> This deliberate practice built perceived talent.</p>
<p><strong>Talent is sexier than hustle</strong> so no one wants to hear that you worked hard and got here. Just tell me you were born this way - it‚Äôs more believable.</p>
<p>But becoming a proficient developer is like playing an instrument. </p>
<p>
  <a href="https://www.lifetechpsych.com/static/talent-vs-hustle-chart-123bae5a1fc3df6d4580211126653fe9-e402a.png" target="_blank" rel="noopener">
  
  <span>
    <span>
      <img alt="Chart showing talent vs. hustle" title="" src="https://www.lifetechpsych.com/static/talent-vs-hustle-chart-123bae5a1fc3df6d4580211126653fe9-fb8a0.png" srcset="https://www.lifetechpsych.com/static/talent-vs-hustle-chart-123bae5a1fc3df6d4580211126653fe9-1a291.png 148w,
https://www.lifetechpsych.com/static/talent-vs-hustle-chart-123bae5a1fc3df6d4580211126653fe9-2bc4a.png 295w,
https://www.lifetechpsych.com/static/talent-vs-hustle-chart-123bae5a1fc3df6d4580211126653fe9-fb8a0.png 590w,
https://www.lifetechpsych.com/static/talent-vs-hustle-chart-123bae5a1fc3df6d4580211126653fe9-e402a.png 812w" sizes="(max-width: 590px) 100vw, 590px">
    </span>
  </span>
  
  </a>
    
&nbsp; &nbsp; <em>Talent vs. Hustle - The majority of us mostly hustle our way through it.</em></p>
<p>Only a tiny few are born talented. </p>
<p>The majority can only get as good as the amount of practice they put in. And you can immediately tell a student hasn‚Äôt been practicing the moment they sit at the keyboard.</p>
<h2>You‚Äôll meet a**holes!</h2>
<p>Every field has its dose of horrible people. </p>
<p>No doubt.</p>
<p>But I‚Äôm not sure what it is about software dev that attracts a**holes in droves. Maybe because coding gives the feeling of having a super-power or a rare skill. If you‚Äôre a newbie, you‚Äôll meet those who‚Äôve been coding for years and think no one else should come in.</p>
<p>A windows developer only? You‚Äôll meet linux fanatics that think you‚Äôre mediocre. </p>
<p>If you‚Äôre a woman, you‚Äôll immediately be dismissed because of your gender. I know this from personal stories from colleagues over the years.</p>
<p>If you‚Äôre a minority, you‚Äôll meet people who think you should only fetch coffee; not code. </p>
<p>If you‚Äôre coming from another field (particularly not STEM), you‚Äôll meet people who automatically make themselves gatekeepers of the programming community. </p>
<blockquote>
<p><em>‚ÄúWe don‚Äôt want social scientists here; we‚Äôre purists!‚Äù</em> </p>
</blockquote>
<p>They‚Äôre online. </p>
<p>At work. </p>
<p>And sadly sometimes in your family. </p>
<p>It‚Äôs not <em>if</em> you‚Äôll meet them, it‚Äôs <em>when</em>.</p>
<p><strong>Learn to move on.</strong></p>
<p>Things are getting better but there‚Äôs still a lot to do to educate people. </p>
<p>But don‚Äôt let this deter you. Build your resilience so you don‚Äôt quit after you meet these people. </p>
<p>And when you get to the top don‚Äôt be an a**hole!</p>
<h2>Master 1 thing.</h2>
<p>New devs tend to jump around learning a lot of things. </p>
<p>Okay, it‚Äôs not just new devs; it‚Äôs also experienced folks. </p>
<p>You learned React for one week.</p>
<p>Then Django for two weeks.</p>
<p>Laravel for three. </p>
<p><strong>Stop.</strong></p>
<p>You need to wake up and realize that the harsh truth is that you‚Äôre simply extending the time it‚Äôll take you to truly learn anything. </p>
<blockquote>
<p><em>‚ÄúIf one is a master of one thing and understands one thing well, one has at the same time, insight into and understanding of many things.‚Äù</em> - Vincent Van Gogh</p>
</blockquote>
<p>Pick one thing. </p>
<p>Stick with it for a few months ‚Äì ideally 6 to 12 months before you move to something else. </p>
<p>This has two benefits: </p>
<ul>
<li>You‚Äôll go deep enough and hit critical mass that moves you towards mastery.</li>
<li>After you master one domain, you can transfer knowledge to another. Learn Flask and you can easily walk into Django. Learn React deeply, and you can quickly identify the pros and cons of Laravel within a few days. </li>
</ul>
<p>This doesn‚Äôt mean learn HTML alone for six months then only CSS for 1 year; rather, it means don‚Äôt mix up learning Django, with React, with Gaming Development, and iOS. </p>
<p>You might get a lot done in a short time.</p>
<p>But you‚Äôll master nothing!</p>
<h2>Software dev is an ever evolving field.</h2>
<p>It‚Äôs exciting.
It‚Äôs frustrating.
It‚Äôs intimidating.</p>
<p>But if I had to, I‚Äôd do it all over again.</p>
<h2>Thanks for reading.</h2>
<p>If you enjoyed this and you‚Äôre on Twitter, <a href="https://twitter.com/LifeTechPsych/status/1306588995313438722?s=20">like and retweet this</a> to help spread the word. I know it sounds trivial but it actually really helps.</p>
<p>I‚Äôm trying out a new initiative to help new coders and junior devs feel less overwhelmed, manage imposter syndrome and learn smarter. </p>
<p>To be honest, I‚Äôm not sure what this looks like yet. But I‚Äôm putting together some resources and write-ups based on what people need the most help with. </p>
<p><strong>If you‚Äôre interested, <a href="https://ctt.ac/I1f33">let me know on Twitter</a>. If you prefer sending a direct message, <a href="https://twitter.com/LifeTechPsych">my DM is open.</a></strong></p>
<p><em>Heads Up</em> - I love research so I tend to back my advice and approach with concepts from Behavioral Psychology and Neuroscience.</p></div></div>]]>
            </description>
            <link>https://www.lifetechpsych.com/lessons-for-junior-dev/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24509879</guid>
            <pubDate>Thu, 17 Sep 2020 20:59:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What Is Stealth Address Technology?]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24509865">thread link</a>) | @crecker
<br/>
September 17, 2020 | https://serhack.me/articles/what-is-stealth-address-technology-monero/ | <a href="https://web.archive.org/web/*/https://serhack.me/articles/what-is-stealth-address-technology-monero/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><img src="https://serhack.me/images/stealthaddress/0_header_800px.png" alt="Monero Stealth Address"></p><p><a href="https://getmonero.org/">Monero</a> is based on the CryptoNote protocol and utilizes the most powerful cryptographic techniques in an effort to protect the privacy of the sender, recipient, and obfuscate the amount transacted.</p><p>To protect the sender‚Äôs privacy, Ring Signatures has been implemented to prevent transaction inputs from being distinguishable from one another. Ring Confidential Transactions (RingCT), which hides transaction amounts, was implemented in block <a href="https://xmrchain.net/block/1220516">#1220516</a> during January 2017 and since September 2017, this feature became mandatory for all transactions on the Monero network. In addition to these two key cryptographic techniques that Monero utilizes to ensure the privacy of every Monero user during the transaction process, Stealth Addresses ensure the privacy of the recipient. This article will focus on how Stealth Addresses work, why they were introduced, and discuss some details not commonly known about this essential feature of Monero.</p><p>Let‚Äôs imagine that you have to buy a product on an e-commerce platform from a merchant. The payment system will return a public address, so that the payment can be sent to the merchant. In the case where you use a transparent blockchain, such as <a href="https://bitcoin.org/">Bitcoin</a> or <a href="https://ethereum.org/en/">Ethereum</a>, the link between your address and the address of the merchant is obvious. So, on transparent blockchains, a third-party from outside of the transaction has the potential to track how and where your funds are spent.</p><p><img src="https://serhack.me/images/stealthaddress/1_bitcoin_800px.png" alt="Bitcoin Transparent Ledger"></p><p>Thanks to Ring Signatures and RingCT, your privacy as the sender is protected and the transaction amount is unknown. To further prevent any potential transaction analysis and, more importantly, to ensure the privacy of the recipient (or, simply put, how and where you spend your funds), Monero uses Stealth Addresses.</p><p><img src="https://serhack.me/images/stealthaddress/2_monero_800px.png" alt="Hidden connection between Stealth Address and Wallet"></p><p>A Stealth Address is an automatically generated, one-time public key (otherwise known as a random, one-time address) that is created by the sender, on behalf of the recipient, when a transaction on the Monero network is initiated ‚Äï think of this as a <strong>‚Äúburning address‚Äù</strong>. This one-time public key is recorded as part of each transaction and designates who can spend an output in a future transaction. While observing the blockchain, third parties (such as a government or a company that performs in-depth transaction analysis) are not able to link your wallet address and the merchant‚Äôs wallet address; therefore, it is not possible to tell if Monero is being sent from you to the merchant. Through the use of Stealth Addresses, when you send Monero to a merchant, the output received by the merchant is not publicly associated with the merchant‚Äôs wallet address. If you are in a position where you need proof that you sent Monero to the merchant, your wallet will be able to verify that the transaction was indeed sent. In addition, Stealth Addresses ensure that the merchant can always know that a third-party will not be able to see if or when any Monero has been sent and received. This unique feature of a Monero transaction is especially attractive to merchants, because it serves as a way to protect sensitive financial and operational information.</p><p>To better understand the concept of Stealth Addresses, let‚Äôs consider an example where you send a parcel to your friend via the postal system ‚Äï where every movement of the parcel, from sender to recipient, is tracked. At the beginning of this exchange, your friend tells you the home address. From there, you bring the parcel to the post office and send it along to your friend‚Äôs home address that was provided. During the course of this transfer, via the tracking code that was provided by the postal system, you can see the movement of the parcel between you and your friend, including your friend‚Äôs home addresses. This is analogous to Bitcoin ‚Äï where every movement of the transaction, from sender to recipient, is traceable. However, if you told your friend to use a temporary post box, no one would associate the movement of the parcel to your friend, since finding the owner of a temporary box is difficult.</p><p>How are these one-time addresses generated? Your Monero wallet‚Äôs public address is a 95-character string, which incorporates two public keys (public view key and public send key) that are mathematically derived from your seed. When a customer sends Monero to a merchant, the customer will use the public keys in the merchant‚Äôs address along with some random data to generate a unique one-time public key for the merchant‚Äôs new output. While observers of the blockchain can see the one-time public key, the customer and the merchant are the only parties who definitively know that, in fact, the customer sent the Monero to the merchant. While the merchant‚Äôs wallet is scanning or syncing, the wallet‚Äôs private view key is being used to check all transactions and accompanying outputs on the blockchain in an effort to locate the output destined for its wallet. Once the output is detected and received by the merchant‚Äôs wallet, the merchant is now able to calculate a one-time private key that corresponds with the one-time public key and, if the merchant chooses, spend the relevant output with the wallet‚Äôs private spend key. Thanks to Stealth Addresses, this transaction process occurs without publicly linking any transaction to the merchant‚Äôs wallet address.</p><p><img src="https://serhack.me/images/stealthaddress/3_burn_800px.png" alt="One stealth address and one payment"></p><p>Simply put, a Stealth Address is a powerful cryptographic technique that prevents outputs from being linked to a recipient‚Äôs public address. As described above, this is accomplished through the use of one-time public keys. Only the recipient has the ability to identify their designated output while scanning the blockchain and, once received, the output can only be spent by the recipient. Seeing that outputs are unlinkable, the recipient‚Äôs privacy is secured.</p><p>While the concept of Stealth Addresses can seem quite technical to some, one of the user-friendly features of this technology is that the sender and recipient do not need to take any further steps outside the normal process of performing a transaction, because Stealth Addresses are implemented by default. Despite being a key feature of a Monero transaction, and through being implemented by default, Stealth Addresses can fly under the radar and be considered just another cog in the well-oiled machine.</p><p>A commonly asked question is: ‚ÄúBut if they‚Äôre randomly generated, is it possible a collision could occur?‚Äù Luigi1111, collaborator and member of the Monero Core Team, gives us an estimate. Using the birthday paradox for the calculation, it would take about 2^126 Stealth Addresses generated to have a 50% collision occur. You would need 85,070,591,730,234,615,865,843,651,857,942,052,864 transactions, when at the time of writing, the transactions within the Monero network are approximately 8 million. For comparison, there are far fewer grains of sand in the world than the number of transactions that would be needed for such a collision. This is an impressive number that confirms the security of this powerful cryptographic technique.</p><p><img src="https://serhack.me/images/stealthaddress/4_birthdays_800px.png" alt="Many stealth addresses are linked to wallet"></p><p>Lastly, an important point to make is what Stealth Addresses are not. With payment systems that accept Bitcoin or Ethereum, you might find a different payment address that is generated randomly. This is not a Stealth Address, because at the blockchain level, analysis and tracking tools would be able to find a link between the two different addresses, along with what these addresses have received and sent.</p></div></div>]]>
            </description>
            <link>https://serhack.me/articles/what-is-stealth-address-technology-monero/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24509865</guid>
            <pubDate>Thu, 17 Sep 2020 20:57:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Deep Learning in Clojure with Fewer Parentheses Than Keras and Python]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24509374">thread link</a>) | @dragandj
<br/>
September 17, 2020 | https://dragan.rocks/articles/20/Deep-Diamond-Deep-Learning-in-Clojure-Fewer-Parentheses-Python-Keras | <a href="https://web.archive.org/web/*/https://dragan.rocks/articles/20/Deep-Diamond-Deep-Learning-in-Clojure-Fewer-Parentheses-Python-Keras">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="text-org5455e07">
<p>
How about the number of dreaded parentheses, <code>(</code> and <code>)</code>?
</p>

<table>


<colgroup>
<col>

<col>

<col>
</colgroup>
<thead>
<tr>
<th scope="col">&nbsp;</th>
<th scope="col">Python</th>
<th scope="col">Clojure</th>
</tr>
</thead>
<tbody>
<tr>
<td>( and )</td>
<td>48</td>
<td>28</td>
</tr>

<tr>
<td>(, ), [, and ]</td>
<td>50</td>
<td>48</td>
</tr>

<tr>
<td>Grouped (())</td>
<td>8</td>
<td>2</td>
</tr>

<tr>
<td>)))</td>
<td>2</td>
<td>1</td>
</tr>

<tr>
<td>,</td>
<td>17</td>
<td>0</td>
</tr>

<tr>
<td>model.add</td>
<td>8</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>
As we can see from the table, on every punctuation metric that I could think
of, Deep Diamond and Clojure fare better than Keras &amp; Python.
</p>

<p>
Keras uses almost twice as much parentheses than Deep Diamond. Clojure uses <code>[]</code>
for vector literals, which Deep Diamond uses as tensor shapes. You will note that
there are more than a few of these, and argue that these are parentheses, too.
Fine. Add them up, and Clojure fares slightly better than Python!
</p>

<p>
A parenthesis here and there is not a problem, but there are horror tales of
<code>(((((((</code> and <code>)))))))</code> in Lisps. Not in Clojure. See that there is not a
single <code>((</code> in the Clojure example, and only two occurances of <code>))</code>.
In Python - there are 8.
</p>

<p>
Then we come to all additional assorted punctuation in Python: commas, dots, etc.
In Clojure, there are none, while in Python there are dozens.
</p>

<p>
Python is also riddled with redundant stuff such as <code>model.add()</code>.
</p>

<p>
Etc., etc. You get my point.
</p>
</div></div>]]>
            </description>
            <link>https://dragan.rocks/articles/20/Deep-Diamond-Deep-Learning-in-Clojure-Fewer-Parentheses-Python-Keras</link>
            <guid isPermaLink="false">hacker-news-small-sites-24509374</guid>
            <pubDate>Thu, 17 Sep 2020 20:11:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Normalize.css: A modern, HTML5-ready alternative to CSS resets]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24509235">thread link</a>) | @animationwill
<br/>
September 17, 2020 | http://necolas.github.io/normalize.css/ | <a href="https://web.archive.org/web/*/http://necolas.github.io/normalize.css/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        <div>
          <p><img src="http://necolas.github.io/normalize.css/logo.svg" alt="Normalize.css"></p>
          <h2>A modern, HTML5-ready alternative to CSS resets</h2>
        </div>

        <p><a href="https://github.com/necolas/normalize.css/">Normalize.css</a> makes browsers render all elements more consistently and in line with modern standards. It precisely targets only the styles that need normalizing.</p>

        <div>
          <p><a href="https://necolas.github.io/normalize.css/8.0.1/normalize.css">
            <strong>Download</strong>
            <span>v8.0.1</span>
          </a></p><p>Chrome, Edge, Firefox ESR+, IE 10+, Safari 8+, Opera</p>
          <p><a href="https://github.com/necolas/normalize.css/blob/8.0.1/CHANGELOG.md">See the CHANGELOG</a>
        </p></div>

        <div>
          <pre><code><a href="https://www.npmjs.org/package/normalize.css/">npm</a> install normalize.css</code></pre>
        </div>

        
      </div></div>]]>
            </description>
            <link>http://necolas.github.io/normalize.css/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24509235</guid>
            <pubDate>Thu, 17 Sep 2020 19:59:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How Algorithms discern our mood from what we write online]]>
            </title>
            <description>
<![CDATA[
Score 43 | Comments 4 (<a href="https://news.ycombinator.com/item?id=24508610">thread link</a>) | @sinapticasblog
<br/>
September 17, 2020 | https://sinapticas.com/2020/09/17/how-algorithms-discern-our-mood-from-what-we-write-online/ | <a href="https://web.archive.org/web/*/https://sinapticas.com/2020/09/17/how-algorithms-discern-our-mood-from-what-we-write-online/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		
<p>Researchers&nbsp;and companies are harnessing computers to identify the emotions behind our written words. While sentiment analysis is far from perfect, it manages to distill meaning from huge amounts of data ‚Äî and could one day even monitor mental health.</p>



<p>By Dana Mackenzie</p>



<p>9.14.2020</p>



<p>Many people have declared 2020 the worst year ever. While such a description may seem hopelessly subjective, according to one measure, it‚Äôs true.</p>



<p>That yardstick is the Hedonometer, a computerized way of assessing both our happiness and our despair. It runs day in and day out on computers at the University of Vermont (UVM), where it scrapes some 50 million tweets per day off Twitter and then gives a quick-and-dirty read of the public‚Äôs mood. According to the Hedonometer, 2020 has been by far the most horrible year since it began keeping track in 2008.</p>



<p>The <a rel="noreferrer noopener" href="http://hedonometer.org/timeseries/en_all/" target="_blank">Hedonometer</a> is a relatively recent incarnation of a task computer scientists have been working on for more than 50 years: using computers to assess words‚Äô emotional tone. To build the Hedonometer, UVM computer scientist Chris Danforth had to teach a machine to understand the emotions behind those tweets ‚Äî no human could possibly read them all. This process, called sentiment analysis, has made major advances in recent years and is finding more and more uses.</p>



<div><figure><img loading="lazy" data-attachment-id="2008" data-permalink="https://sinapticas.com/g-hedonometer/" data-orig-file="https://sinapticas.files.wordpress.com/2020/09/g-hedonometer.png" data-orig-size="1179,600" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="g-hedonometer" data-image-description="" data-medium-file="https://sinapticas.files.wordpress.com/2020/09/g-hedonometer.png?w=300" data-large-file="https://sinapticas.files.wordpress.com/2020/09/g-hedonometer.png?w=672" src="https://sinapticas.files.wordpress.com/2020/09/g-hedonometer.png?w=1024" alt="" width="720" height="366" srcset="https://sinapticas.files.wordpress.com/2020/09/g-hedonometer.png?w=1024 1024w, https://sinapticas.files.wordpress.com/2020/09/g-hedonometer.png?w=720 720w, https://sinapticas.files.wordpress.com/2020/09/g-hedonometer.png?w=150 150w, https://sinapticas.files.wordpress.com/2020/09/g-hedonometer.png?w=300 300w, https://sinapticas.files.wordpress.com/2020/09/g-hedonometer.png?w=768 768w, https://sinapticas.files.wordpress.com/2020/09/g-hedonometer.png 1179w" sizes="(max-width: 720px) 100vw, 720px"><figcaption>The Hedonometer tracks the sentiments expressed in tweets, an effort underway since late 2008. This screenshot shows data from mid-August 2019 to the present and reveals a record low in early March of this year coinciding with the Covid-19 pandemic going global; that record was shattered in May after George Floyd‚Äôs killing. Portion of scale shown at right goes from 1 (extremely negative) to 9 (extremely positive). Gray at bottom shows total volume of Twitter posts.<br>CREDIT: COMPUTATIONAL STORY LAB AT THE UNIVERSITY OF VERMONT</figcaption></figure></div>



<p>In addition to taking Twitter user‚Äôs emotional temperature, researchers are employing sentiment analysis to gauge people‚Äôs perceptions of climate change and to test conventional wisdom such as, in music, whether a minor chord is sadder than a major chord (and by how much). Businesses who covet information about customers‚Äô feelings are harnessing sentiment analysis to assess reviews on platforms like Yelp. Some are using it to measure employees‚Äô moods on the internal social networks at work. The technique might also have medical applications, such as identifying depressed people in need of help.</p>



<p>Sentiment analysis is allowing researchers to examine a deluge of data that was previously time-consuming and difficult to collect, let alone study, says Danforth. ‚ÄúIn social science we tend to measure things that are easy, like gross domestic product. Happiness is an important thing that is hard to measure.‚Äù</p>



<h2>Deconstructing the ‚Äòword stew‚Äô</h2>



<p>You might think the first step in sentiment analysis would be teaching the computer to understand what humans are saying. But that‚Äôs one thing that computer scientists cannot do; understanding language is one of the most notoriously difficult problems in artificial intelligence. Yet there are abundant clues to the emotions behind a written text, which computers can recognize even without understanding the meaning of the words.</p>



<p>The earliest approach to sentiment analysis is word-counting. The idea is simple enough: Count the number of positive words and subtract the number of negative words. An even better measure can be obtained by weighting words: ‚ÄúExcellent,‚Äù for example, conveys a stronger sentiment than ‚Äúgood.‚Äù These weights are typically assigned by human experts and are part of creating the word-to-emotion dictionaries, called lexicons, that sentiment analyses often use.</p>



<p>But word-counting has inherent problems. One is that it ignores word order, treating a sentence as a sort of word stew. And word-counting can miss context-specific cues. Consider this product review: ‚ÄúI‚Äôm so happy that my iPhone is nothing like my old ugly Droid.‚Äù The sentence has three negative words (‚Äúnothing,‚Äù ‚Äúold,‚Äù ‚Äúugly‚Äù) and only one positive (‚Äúhappy‚Äù). While a human recognizes immediately that ‚Äúold‚Äù and ‚Äúugly‚Äù refer to a different phone, to the computer, it looks negative. And comparisons present additional difficulties: What does ‚Äúnothing like‚Äù mean? Does it mean the speaker is <em>not</em> comparing the iPhone with the Android? The English language can be so confusing.</p>



<p>To address such issues, computer scientists have increasingly turned to more sophisticated approaches that take humans out of the loop entirely. They are using machine learning algorithms that teach a computer program to recognize patterns, such as meaningful relationships between words. For example, the computer can learn that pairs of words such as ‚Äúbank‚Äù and ‚Äúriver‚Äù often occur together. These associations can give clues to meaning or to sentiment. If ‚Äúbank‚Äù and ‚Äúmoney‚Äù are in the same sentence, it is probably a different kind of bank.</p>



<div><figure><img data-attachment-id="2010" data-permalink="https://sinapticas.com/captura-de-pantalla-2020-09-17-a-las-15-44-31/" data-orig-file="https://sinapticas.files.wordpress.com/2020/09/captura-de-pantalla-2020-09-17-a-las-15.44.31.png" data-orig-size="577,396" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="captura-de-pantalla-2020-09-17-a-las-15.44.31" data-image-description="" data-medium-file="https://sinapticas.files.wordpress.com/2020/09/captura-de-pantalla-2020-09-17-a-las-15.44.31.png?w=300" data-large-file="https://sinapticas.files.wordpress.com/2020/09/captura-de-pantalla-2020-09-17-a-las-15.44.31.png?w=577" src="https://sinapticas.files.wordpress.com/2020/09/captura-de-pantalla-2020-09-17-a-las-15.44.31.png?w=577" alt="" srcset="https://sinapticas.files.wordpress.com/2020/09/captura-de-pantalla-2020-09-17-a-las-15.44.31.png 577w, https://sinapticas.files.wordpress.com/2020/09/captura-de-pantalla-2020-09-17-a-las-15.44.31.png?w=150 150w, https://sinapticas.files.wordpress.com/2020/09/captura-de-pantalla-2020-09-17-a-las-15.44.31.png?w=300 300w" sizes="(max-width: 577px) 100vw, 577px"><figcaption>A computer using a shallow neural network can easily be trained for the task of next-word prediction ‚Äî a familiar example is the suggested words featured while typing on a smartphone. Here, a neural network-trained language model calculates the probability that various words will follow ‚ÄúThou shalt.‚Äù Once the network is fully trained, it can be reverse-engineered to generate the mathematical constructs called ‚Äúword embeddings,‚Äù which link words that tend to go together. These, in turn, are used as an input to more difficult language-processing tasks, including sentiment analysis.</figcaption></figure></div>



<p>A major step in such methods came in 2013, when Tomas Mikolov of Google Brain applied machine learning to construct a tool called word embeddings. These convert each word into a list of 50 to 300 numbers, called a vector. The numbers are like a fingerprint that <a href="https://jalammar.github.io/illustrated-word2vec/" target="_blank" rel="noreferrer noopener">describes a word</a>, and particularly the other words it tends to hang out with.</p>



<p>To obtain these descriptors, Mikolov‚Äôs program looked at millions of words in newspaper articles and tried to predict the next word of text, given the previous words. Mikolov‚Äôs embeddings recognize synonyms: Words like ‚Äúmoney‚Äù and ‚Äúcash‚Äù have very similar vectors. More subtly, word embeddings capture elementary analogies ‚Äî that king is to queen as boy is to girl, for example ‚Äî even though it cannot define those words (a remarkable feat given that such analogies were part of how SAT exams assessed performance).</p>



<p>Mikolov‚Äôs word embeddings were generated by what‚Äôs called a neural network with one hidden layer. Neural networks, which are loosely modeled on the human brain, have <a href="https://www.knowablemagazine.org/article/technology/2020/why-some-artificial-intelligence-smart-until-its-dumb" target="_blank" rel="noreferrer noopener">enabled stunning advances in machine learning</a>, including AlphaGo (which learned to play the game of Go better than the world champion). Mikolov‚Äôs network was a deliberately shallower network, so it could be a useful for a variety of tasks, such as translation and topic analysis.</p>



<p><a href="https://www.knowablemagazine.org/article/technology/2020/synthetic-media-real-trouble-deepfakes" target="_blank" rel="noreferrer noopener">Deeper neural networks</a>, with more layers of ‚Äúcortex,‚Äù can extract even more information about a word‚Äôs sentiment in the context of a particular sentence or document. A common reference task is for the computer to read a movie review on the Internet Movie Database and predict whether the reviewer gave it a thumbs up or thumbs down. The earliest lexicon methods achieved about 74 percent accuracy. The most sophisticated ones got up to 87 percent. The very first neural nets, in 2011, scored 89 percent. Today they perform with upwards of 94 percent accuracy ‚Äî approaching that of a human. (Humor and sarcasm remain big stumbling blocks, because the written words may literally express the opposite of the intended sentiment.)</p>



<p><a href="https://www.knowablemagazine.org/collection/coronavirus-0" target="_blank" rel="noreferrer noopener">Explore&nbsp;<em>Knowable</em>‚Äôs coronavirus coverage</a></p>



<p>Despite the benefits of neural networks, lexicon-based methods are still popular; the Hedonometer, for instance, uses a lexicon, and Danforth has no intention to change it. While neural nets may be more accurate for some problems, they come at a cost. The training period alone is one of the most computationally intensive tasks you can ask a computer to do.</p>



<p>‚ÄúBasically, you‚Äôre limited by how much electricity you have,‚Äù says the Wharton School‚Äôs Robert Stine, who covers the <a href="https://www.annualreviews.org/doi/10.1146/annurev-statistics-030718-105242" target="_blank" rel="noreferrer noopener">evolution of sentiment analysis</a> in the 2019 <em>Annual Review of Statistics and Its Application</em>. ‚ÄúHow much electricity did Google use to train AlphaGo? The joke I heard was, enough to boil the ocean,‚Äù Stine says.</p>



<p>In addition to the electricity needs, neural nets require expensive hardware and technical expertise, and there‚Äôs a lack of transparency because the computer is figuring out how to tackle the task, rather than following a programmer‚Äôs explicit instructions. ‚ÄúIt‚Äôs easier to fix errors with a lexicon,‚Äù says Bing Liu of the University of Illinois at Chicago, one of the pioneers of sentiment analysis.</p>



<h2>Measuring mental health</h2>



<p>While sentiment analysis often falls under the purview of computer scientists, it has <a href="https://www.cs.cmu.edu/~ylataus/files/TausczikPennebaker2010.pdf" target="_blank" rel="noreferrer noopener">deep roots in psychology</a>. In 1962, Harvard psychologist Philip Stone developed the General Inquirer, the first computerized general purpose text analysis program for use in psychology; in the 1990s, social psychologist James Pennebaker developed an early program for sentiment analysis (the Linguistic Inquiry and Word Count) as a view into people‚Äôs psychological worlds. These earlier assessments revealed and confirmed patterns that experts had long-observed: Patients diagnosed with depression had distinct <a href="https://journals.sagepub.com/doi/abs/10.1177/0261927x09351676" target="_blank" rel="noreferrer noopener">writing styles</a>, such as using pronouns ‚ÄúI‚Äù and ‚Äúme‚Äù more often. They used more words with negative affect, and sometimes more death-related words.</p>



<p>Researchers are now probing mental health‚Äôs expression in speech and writing by <a rel="noreferrer noopener" href="https://www.annualreviews.org/doi/full/10.1146/annurev-biodatasci-030320-040844" target="_blank">analyzing social media posts</a>. Danforth and Harvard psychologist Andrew Reece, for example, analyzed the Twitter posts of people with formal diagnoses of depression or post-traumatic stress disorder that were written <em>prior</em> to the diagnosis (with consent of participants). <a rel="noreferrer noopener" href="https://www.nature.com/articles/s41598-017-12961-9" target="_blank">Signs of depression began to appear</a> as many as nine months earlier. And Facebook has an algorithm to detect users who seem to be at risk of suicide; human experts ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://sinapticas.com/2020/09/17/how-algorithms-discern-our-mood-from-what-we-write-online/">https://sinapticas.com/2020/09/17/how-algorithms-discern-our-mood-from-what-we-write-online/</a></em></p>]]>
            </description>
            <link>https://sinapticas.com/2020/09/17/how-algorithms-discern-our-mood-from-what-we-write-online/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24508610</guid>
            <pubDate>Thu, 17 Sep 2020 19:03:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Prefect ‚Äì A modern, Python-native data workflow engine]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24507710">thread link</a>) | @gilad
<br/>
September 17, 2020 | https://makeitnew.io/prefect-a-modern-python-native-data-workflow-engine-7ece02ceb396 | <a href="https://web.archive.org/web/*/https://makeitnew.io/prefect-a-modern-python-native-data-workflow-engine-7ece02ceb396">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><div><div><p id="c726">In the following example (<a href="https://github.com/ludwigm/prefect-demo-flow" rel="noopener">https://github.com/ludwigm/prefect-demo-flow</a>), I want to run you through how a potential Prefect flow may look like. This is a simplified example and in reality, you probably have more complex flows with more and bigger tasks. It should still give you the possibility to see what you can do with this tool. The example contains classical parts you see in many ETL flows consisting of different steps for Gathering of data (Extract), preparing and aggregation of data (Transform), and providing them somewhere as an output (Load).</p><figure><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/776/1*xOynELMPA867ESFQw5Y33g.png" width="388" height="632" srcset="https://miro.medium.com/max/552/1*xOynELMPA867ESFQw5Y33g.png 276w, https://miro.medium.com/max/776/1*xOynELMPA867ESFQw5Y33g.png 388w" sizes="388px" data-old-src="https://miro.medium.com/max/36/1*xOynELMPA867ESFQw5Y33g.png?q=20"></p></div></div><figcaption>DAG of the flow created with flow.visualize()</figcaption></figure><p id="8e29">This example is taking daily world-wide <a href="https://data.europa.eu/euodp/en/data/dataset/covid-19-coronavirus-data/resource/ce379c1d-066a-4de8-a195-1d5e8338142a" rel="noopener">COVID data</a>, filters them by requested countries, aggregates them up on a monthly level, and finally uploads them as a human-readable CSV on AWS S3. On the left, you can see a DAG representation of the flow as it is created by Prefect.</p><p id="4d9f">The input data is in the following format provided as JSON files via an HTTP endpoint:</p><pre><span id="93a5">{<br>   "records" : [<br>      {<br>         "dateRep" : "07/09/2020",<br>         "day" : "07",<br>         "month" : "09",<br>         "year" : "2020",<br>         "cases" : 74,<br>         "deaths" : 2,<br>         "countriesAndTerritories" : "Afghanistan",<br>         "geoId" : "AF",<br>         "countryterritoryCode" : "AFG",<br>         "popData2019" : 38041757,<br>         "continentExp" : "Asia",<br>         "Cumulative_number_for_14_days_of_COVID-19_cases_per_100000" : "1.04884745"<br>      },<br>   ... many more records<br>  ]<br>}</span></pre><p id="6c95">The final output in CSV format is looking like this:</p><pre><span id="4f76">year_month,cases,deaths<br>2019_12,0,0<br>2020_01,5,0<br>2020_02,52,0<br>2020_03,61856,583<br>2020_04,97206,5705<br>2020_05,22363,2212<br>2020_06,12777,473<br>2020_07,14439,168<br>2020_08,33683,157</span></pre><p id="58ac">In Prefect a flow is defined in arbitrary Python code. Following you see how the functions are wired together to produce the DAG:</p><figure><div></div><figcaption>Flow definition</figcaption></figure><p id="8f4a">The context manager (<em>with</em> statement) for <em>Flow</em> is creating the space to wire tasks together. Such a task can be an arbitrary python function that is annotated with <em>@task </em>or is inherited from <em>Task</em>. Both of these <a href="https://docs.prefect.io/core/concepts/tasks.html#overview" rel="noopener">constructs</a> are from Prefect. A special kind of task is a <em>Parameter</em> which acts as inputs to your flow. In this case, it is a selection in which countries your interested in for analysis and how the AWS S3 bucket is named where you want to export your data. In the following example, we will go into detail how these task functions are built.</p><p id="bd89">Let‚Äôs start with the gathering of the data and the function <em>download_data</em>. This task is the most ‚Äúheavy‚Äù task as it needs to download a comparable large chunk of data (around 25 MB) and we don‚Äôt want to repeat this over and over again e.g. when re-executing the flow. Out of this reason, there are some special Prefect settings set to store the result with a daily cache key.</p><figure><div></div><figcaption>Cachable task</figcaption></figure><p id="5fe7"><em>donwload_data</em> seems like an arbitrary Python function you would find in many data projects but it has the <em>@task </em>annotation so that Prefect knows that this is a unit of work to place in the DAG. Prefect is using <a href="https://docs.prefect.io/core/advanced_tutorials/dask-cluster.html" rel="noopener">Dask</a> as a framework to execute and distribute work which means that these tasks themselves can do also quite some heavy-lifting. You could also imagine doing the heavy work outside of Prefect like executing a SQL on the <a href="https://docs.prefect.io/api/latest/tasks/snowflake.html#snowflakequery" rel="noopener">data warehouse</a> or submitting a <a href="https://docs.prefect.io/api/latest/tasks/databricks.html#databrickssubmitrun" rel="noopener">Spark job</a> on an external Big Data cluster instead of passing this to Dask.</p><p id="fcc0">In this case, we want the data to be cached so we specify that we want to checkpoint the data and that we are going to use a <a href="https://docs.prefect.io/api/latest/engine/results.html#localresult" rel="noopener"><em>LocalResult</em></a> which stores the data on the local disk with <em>cloudpickle</em>. It is also possible to specify different serializers in case you want to cache it in <a href="https://docs.prefect.io/api/latest/engine/serializers.html#jsonserializer" rel="noopener">JSON</a> or your own format. The <em>target</em> is the cache key which should be used and in this case, uses some templating variables provided by Prefect. The resulting cached file on disk will be saved in the following format:</p><pre><span id="5714">download_data-2020-09-08</span></pre><p id="6591">In a more production-like setup, you can also use S3 to store the data and would therefore exchange <em>LocalResult</em> with <a href="https://docs.prefect.io/api/latest/engine/results.html#s3result" rel="noopener"><em>S3Result</em></a>. You can use any Python datatype that cloudpickle can serialize and instead of passing the real data, it is also an option to only forward references to data e.g. paths in S3.</p><p id="a439">The rest of the task functions are like the following:</p><figure><div></div><figcaption>Simple tasks &amp; pre-defined task</figcaption></figure><p id="e03d">If you know <a href="https://pandas.pydata.org/" rel="noopener">Pandas</a> this code probably looks very familiar. The only important part here is that all the unique functions are having the <em>@task </em>decorator.</p><p id="2b60">The thing unique here is <em>upload_to_s3</em> as it is not using these decorators but a pre-defined task from the Prefect <a href="https://docs.prefect.io/core/task_library/" rel="noopener">task library</a> called <em>S3Upload</em> which allows uploading data to an S3 bucket. There are many other pre-defined tasks e.g. for submitting a Databricks job, dbt job, or executing an AWS Lambda function. It is also possible to write your own reusable and generic tasks. We were doing this in the past for a task submission to AWS ECS Fargate to do the heavy-lifting like machine learning externally from Prefect/Dask.</p><p id="780d">If you want to run this flow you can run it with <strong>Prefect Core </strong>locally on your computer or with <strong>Prefect Cloud</strong> to have a nice UI for your flow and inspect logs and task failures much nicer. In this example project, I showcase the two different options. In both cases, my flow is executed locally but in the later case, it also registered in the UI of Prefect Cloud. The annotations on the functions are not needed and in this case coming from the <a href="https://click.palletsprojects.com/en/7.x/" rel="noopener">click framework</a> to allow to easily build a nice CLI for your Python applications.</p><figure><div></div><figcaption>Two methods of executing flows</figcaption></figure><p id="53b7">I will go into details about deployment and how your flows are run in the next section.</p><p id="d04d">After running this flow a CSV file with the results should be visible in the specified S3 bucket:</p><pre><span id="a43a">aws s3 ls s3://ludwigm-bucket<br>2020-09-08 16:57:05        187 covid-monthly-2020-09-08T16:57:00.282974.csv<br>2020-09-08 18:03:31        187 covid-monthly-2020-09-08T18:03:26.231616.csv</span></pre></div></div></section><section><div><div><p id="bd9e">To get a better understanding of the different moving parts I will go into more detail on how you would deploy such flows with Prefect Cloud.</p><p id="d133">If you check out the repository for this blog article you can register the flow in Prefect cloud and run it with a local in-process agent like in the following code snippet. I use <a href="https://python-poetry.org/" rel="noopener">poetry</a> as Python package manager as an alternative to pip.</p><pre><span id="f757">poetry install<br>prefect auth login -t &lt;personal-access-token&gt;<br>export PREFECT__CLOUD__AGENT__AUTH_TOKEN=&lt;runner-token&gt;<br>export PREFECT__FLOWS__CHECKPOINTING=true<br>poetry run demo-flow run-with-cloud --bucket &lt;s3-bucket&gt;</span></pre><p id="6f15">Keep in mind to setup some things in Prefect Cloud beforehand to make this work:</p><ul><li id="33a4"><strong>Project:</strong> Home ‚Üí Team ‚Üí Projects ‚Üí Add project (‚ÄúDemo‚Äù)</li><li id="d57c"><strong>Agent runner token:</strong> Home ‚Üí Team ‚Üí API tokens ‚Üí Create token (‚ÄúRUNNER‚Äù)</li><li id="32eb"><strong>Personal access token:</strong> Home ‚Üí User ‚Üí Personal Access token -&gt; Create token</li></ul><p id="4296">What is noteworthy is that your flow is monitored and displayed in the UI but it is still running locally on your computer (<a href="https://docs.prefect.io/api/latest/agent/local.html#localagent" rel="noopener"><em>LocalAgent</em></a>). This is the <a href="https://medium.com/the-prefect-blog/the-prefect-hybrid-model-1b70c7fd296" rel="noopener">hybrid execution model</a> of Prefect which means that you potentially can use their cloud offering but the real execution is happening securely in your own infrastructure without your data being transferred to the Prefect cloud. How this would look like from an architecture standpoint can be seen in the next picture. For a more production-like setup, your flows are usually <a href="https://docs.prefect.io/orchestration/recipes/configuring_storage.html" rel="noopener">dockerized</a> and loaded from a private docker registry like AWS ECR and executed for example with the <a href="https://docs.prefect.io/api/latest/agent/fargate.html#fargateagent" rel="noopener"><em>FargateAgent</em></a>. Other options like loading flows from GitHub or S3 are also possible.</p><figure><div><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/2310/1*94GyNwN0HYXf8SjHJLCDFQ.png" width="1155" height="577" srcset="https://miro.medium.com/max/552/1*94GyNwN0HYXf8SjHJLCDFQ.png 276w, https://miro.medium.com/max/1104/1*94GyNwN0HYXf8SjHJLCDFQ.png 552w, https://miro.medium.com/max/1280/1*94GyNwN0HYXf8SjHJLCDFQ.png 640w, https://miro.medium.com/max/1400/1*94GyNwN0HYXf8SjHJLCDFQ.png 700w" sizes="700px" data-old-src="https://miro.medium.com/max/60/1*94GyNwN0HYXf8SjHJLCDFQ.png?q=20"></p></div></div></div><figcaption>Simplified architecture with multiple environments and hybrid execution model</figcaption></figure><p id="b6ad">In the following screenshots, you can see how this example flow looks like in the UI. You have possibilities to drill down in the DAG, run your flow with different input parameters, see a Gantt chart to see what executes when, and how parallel, or investigate task failures to see specific logs for that issue.</p></div></div><div><div><div><figure><div><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/3828/1*B2A_z9Ko5MKOveGnW1gLmg.png" width="1914" height="1085" srcset="https://miro.medium.com/max/552/1*B2A_z9Ko5MKOveGnW1gLmg.png 276w, https://miro.medium.com/max/1104/1*B2A_z9Ko5MKOveGnW1gLmg.png 552w, https://miro.medium.com/max/1280/1*B2A_z9Ko5MKOveGnW1gLmg.png 640w, https://miro.medium.com/max/1456/1*B2A_z9Ko5MKOveGnW1gLmg.png 728w, https://miro.medium.com/max/1632/1*B2A_z9Ko5MKOveGnW1gLmg.png 816w, https://miro.medium.com/max/1808/1*B2A_z9Ko5MKOveGnW1gLmg.png 904w, https://miro.medium.com/max/1984/1*B2A_z9Ko5MKOveGnW1gLmg.png 992w, https://miro.medium.com/max/2000/1*B2A_z9Ko5MKOveGnW1gLmg.png 1000w" sizes="1000px" data-old-src="https://miro.medium.com/max/60/1*B2A_z9Ko5MKOveGnW1gLmg.png?q=20"></p></div></div></div><figcaption>All Projects dashboard</figcaption></figure><figure><div><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/3836/1*ggwa529l0mytlzSYSZps0g.png" width="1918" height="1094" srcset="https://miro.medium.com/max/552/1*ggwa529l0mytlzSYSZps0g.png 276w, https://miro.medium.com/max/1104/1*ggwa529l0mytlzSYSZps0g.png 552w, https://miro.medium.com/max/1280/1*ggwa529l0mytlzSYSZps0g.png 640w, https://miro.medium.com/max/1456/1*ggwa529l0mytlzSYSZps0g.png 728w, https://miro.medium.com/max/1632/1*ggwa529l0mytlzSYSZps0g.png 816w, https://miro.medium.com/max/1808/1*ggwa529l0mytlzSYSZps0g.png 904w, https://miro.medium.com/max/1984/1*ggwa529l0mytlzSYSZps0g.png 992w, https://miro.medium.com/max/2000/1*ggwa529l0mytlzSYSZps0g.png 1000w" sizes="1000px" data-old-src="https://miro.medium.com/max/60/1*ggwa529l0mytlzSYSZps0g.png?q=20"></p></div></div></div><figcaption>Flow group overview</figcaption></figure><figure><div><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/3836/1*dSJ4YRQDwo9YU8eh2fKeFA.png" width="1918" height="1096" srcset="https://miro.medium.com/max/552/1*dSJ4YRQDwo9YU8eh2fKeFA.png 276w, https://miro.medium.com/max/1104/1*dSJ4YRQDwo9YU8eh2fKeFA.png 552w, https://miro.medium.com/max/1280/1*dSJ4YRQDwo9YU8eh2fKeFA.png 640w, https://miro.medium.com/max/1456/1*dSJ4YRQDwo9YU8eh2fKeFA.png 728w, https://miro.medium.com/max/1632/1*dSJ4YRQDwo9YU8eh2fKeFA.png 816w, https://miro.medium.com/max/1808/1*dSJ4YRQDwo9YU8eh2fKeFA.png 904w, https://miro.medium.com/max/1984/1*dSJ4YRQDwo9YU8eh2fKeFA.png 992w, https://miro.medium.com/max/2000/1*dSJ4YRQDwo9YU8eh2fKeFA.png 1000w" sizes="1000px" data-old-src="https://miro.medium.com/max/60/1*dSJ4YRQDwo9YU8eh2fKeFA.png?q=20"></p></div></div></div><figcaption>Flow schematic for DAG</figcaption></figure><figure><div><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/3836/1*4hoq6KBF1XcSXxJpFujmEg.png" width="1918" height="1096" srcset="https://miro.medium.com/max/552/1*4hoq6KBF1XcSXxJpFujmEg.png 276w, https://miro.medium.com/max/1104/1*4hoq6KBF1XcSXxJpFujmEg.png 552w, https://miro.medium.com/max/1280/1*4hoq6KBF1XcSXxJpFujmEg.png 640w, https://miro.medium.com/max/1456/1*4hoq6KBF1XcSXxJpFujmEg.png 728w, https://miro.medium.com/max/1632/1*4hoq6KBF1XcSXxJpFujmEg.png 816w, https://miro.medium.com/max/1808/1*4hoq6KBF1XcSXxJpFujmEg.png 904w, https://miro.medium.com/max/1984/1*4hoq6KBF1XcSXxJpFujmEg.png 992w, https://miro.medium.com/max/2000/1*4hoq6KBF1XcSXxJpFujmEg.png 1000w" sizes="1000px" data-old-src="https://miro.medium.com/max/60/1*4hoq6KBF1XcSXxJpFujmEg.png?q=20"></p></div></div></div><figcaption>Task detail view</figcaption></figure><figure><div><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/3832/1*jI18CsA16erreJUnU83Pxg.png" width="1916" height="1093" srcset="https://miro.medium.com/max/552/1*jI18CsA16erreJUnU83Pxg.png 276w, https://miro.medium.com/max/1104/1*jI18CsA16erreJUnU83Pxg.png 552w, https://miro.medium.com/max/1280/1*jI18CsA16erreJUnU83Pxg.png 640w, https://miro.medium.com/max/1456/1*jI18CsA16erreJUnU83Pxg.png 728w, https://miro.medium.com/max/1632/1*jI18CsA16erreJUnU83Pxg.png 816w, https://miro.medium.com/max/1808/1*jI18CsA16erreJUnU83Pxg.png 904w, https://miro.medium.com/max/1984/1*jI18CsA16erreJUnU83Pxg.png 992w, https://miro.medium.com/max/2000/1*jI18CsA16erreJUnU83Pxg.png 1000w" sizes="1000px" data-old-src="https://miro.medium.com/max/60/1*jI18CsA16erreJUnU83Pxg.png?q=20"></p></div></div></div><figcaption>Logs for a single task</figcaption></figure><figure><div><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/3836/1*1trZLAtqjm1H2ipPNJmBag.png" width="1918" height="1096" srcset="https://miro.medium.com/max/552/1*1trZLAtqjm1H2ipPNJmBag.png 276w, https://miro.medium.com/max/1104/1*1trZLAtqjm1H2ipPNJmBag.png 552w, https://miro.medium.com/max/1280/1*1trZLAtqjm1H2ipPNJmBag.png 640w, https://miro.medium.com/max/1456/1*1trZLAtqjm1H2ipPNJmBag.png 728w, https://miro.medium.com/max/1632/1*1trZLAtqjm1H2ipPNJmBag.png 816w, https://miro.medium.com/max/1808/1*1trZLAtqjm1H2ipPNJmBag.png 904w, https://miro.medium.com/max/1984/1*1trZLAtqjm1H2ipPNJmBag.png 992w, https://miro.medium.com/max/2000/1*1trZLAtqjm1H2ipPNJmBag.png 1000w" sizes="1000px" data-old-src="https://miro.medium.com/max/60/1*1trZLAtqjm1H2ipPNJmBag.png?q=20"></p></div></div></div><figcaption>Gantt visualization for timings</figcaption></figure></div></div></div><div><div><p id="c4ca">Other interesting things are the possibility to define <a href="https://docs.prefect.io/core/concepts/schedules.html#overview" rel="noopener">schedules</a> for your flow for periodic execution or the configuration of <a href="https://docs.prefect.io/orchestration/concepts/cloud_hooks.html#cloud-hooks" rel="noopener">CloudHooks</a> to enable e.g. an alerting for failed flows to Slack. Prefect also brings functionality to use and manages <a href="https://docs.prefect.io/core/concepts/secrets.html#secrets" rel="noopener">secrets</a> for your flow, e.g. for a database or API access.</p><p id="01d4">To make your flow run daily at a certain time it is as simple as adding the following code snippet to your flow creation.</p><pre><span id="231a">flow.schedule = CronSchedule("00 13 * * *")</span></pre></div></div></section></div>]]>
            </description>
            <link>https://makeitnew.io/prefect-a-modern-python-native-data-workflow-engine-7ece02ceb396</link>
            <guid isPermaLink="false">hacker-news-small-sites-24507710</guid>
            <pubDate>Thu, 17 Sep 2020 17:50:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Slacking Off?]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24507679">thread link</a>) | @gbasin
<br/>
September 17, 2020 | https://garybasin.com/slacking-off/ | <a href="https://web.archive.org/web/*/https://garybasin.com/slacking-off/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-2061">
		<div>
		<!-- .entry-header -->

		<div>
			
<p>Ten years ago, a slick new chat app called Slack was announced. It was exactly what my startup needed at the time ‚Äî a chat tool that didn‚Äôt suck.&nbsp;</p>



<p>Fast forward to today. Slack has essentially the same features. You send messages. You search channels. You communicate with your team. But not everything is like it used to be.</p>



<p>Sometimes, notifications don‚Äôt work. Other times, I‚Äôll get stale indicators of unread messages. Occasionally, messages disappear when I use Slack on my phone.</p>



<p><strong>What happened? It doesn‚Äôt do anything differently, but now it works like shit.</strong></p>



<p>Building a software company and scaling it is‚Ä¶ hard. It‚Äôs a struggle to keep your product working like it used to, especially if it gets bloated with complex features.</p>



<p>Make something scalable that solves a big problem. It should be simple, but it won‚Äôt be easy.</p>
					</div><!-- .entry-content -->

		<!-- .entry-meta -->
	</div>

	
</article></div>]]>
            </description>
            <link>https://garybasin.com/slacking-off/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24507679</guid>
            <pubDate>Thu, 17 Sep 2020 17:48:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Marker ‚Äì open source hand-drawn illustrations]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 6 (<a href="https://news.ycombinator.com/item?id=24507433">thread link</a>) | @alokepillai
<br/>
September 17, 2020 | https://usepastel.com/marker-illustrations | <a href="https://web.archive.org/web/*/https://usepastel.com/marker-illustrations">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://usepastel.com/marker-illustrations</link>
            <guid isPermaLink="false">hacker-news-small-sites-24507433</guid>
            <pubDate>Thu, 17 Sep 2020 17:29:47 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Almanack of Naval Ravikant: A Guide to Wealth and Happiness (Free eBook)]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24507281">thread link</a>) | @yarapavan
<br/>
September 17, 2020 | https://www.navalmanack.com/almanack-of-naval-ravikant/table-of-contents | <a href="https://web.archive.org/web/*/https://www.navalmanack.com/almanack-of-naval-ravikant/table-of-contents">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site">

      <div id="headerAnnouncementWrapper">
        <header id="header" role="banner">
          <a id="navToggle" data-controller="NavToggle">
            <svg viewBox="0 0 26 18">
              <use xlink:href="/assets/ui-icons.svg#hamburger-icon--even"></use>
            </svg>
          </a>

          <div>
          
            
              <div data-content-field="site-title"><p><a href="https://www.navalmanack.com/"><span>Almanack of Naval Ravikant</span> <span>|| A guide to wealth and happiness</span></a></p></div>
            
          
          </div>

          

          <div>
            <div>
              <!--
               
             --><a href="https://www.navalmanack.com/search" rel="search" data-controller="SearchToggle">
                <svg viewBox="0 0 20 20" shape-rendering="geometricPrecision">
                  <use xlink:href="/assets/ui-icons.svg#search-icon"></use>
                </svg>
                <svg viewBox="0 0 18 18">
                  <use xlink:href="/assets/ui-icons.svg#close-icon-line"></use>
                </svg>
               </a>
              </div><!--
              --><!--
              -->
          </div>
        </header>
      </div>

      <main id="page" role="main" data-content-field="main-content" data-controller="FadeInContent">

        <div data-content-field="main-content" data-item-id="5f581d48e81c0c5f1355fa26">
  
  <div>
    <p><time datetime="2020-09-17" pubdate="">
      <p><span>Sep </span><span>17</span>
      </p>
    </time></p><h2 data-content-field="title"><time datetime="2020-09-17" pubdate="">Sep 17 </time>TABLE OF CONTENTS</h2>

    <div>
      <div><p><a href="https://www.navalmanack.com/almanack-of-naval-ravikant?author=5d23ae6aedbe6a0001bcfd4c">Eric Jorgenson</a> </p></div><!--

      -->
    </div>
  </div>
  

  <div>
    <article id="article-5f581d48e81c0c5f1355fa26">
      
      
      <div data-controller="BlogProgressBar">
        
        <div id="pieWrapper">
          
          
          
          
        </div>
        <div><div data-layout-label="Post Body" data-type="item" data-updated-on="1599610592445" id="item-5f581d48e81c0c5f1355fa26"><div><div><div data-block-type="2" id="block-9641db619cdf777af32d"><div><h3><a href="https://www.navalmanack.com/almanack-of-naval-ravikant/important-notes-on-this-book-disclaimer">IMPORTANT NOTES ON THIS BOOK (DISCLAIMER)</a> <br><a href="https://www.navalmanack.com/almanack-of-naval-ravikant/foreword">FOREWORD </a><br><a href="https://www.navalmanack.com/almanack-of-naval-ravikant/erics-note-about-this-book">ERIC‚ÄôS NOTE (ABOUT THIS BOOK) </a><br><a href="https://www.navalmanack.com/almanack-of-naval-ravikant/timeline-of-naval-ravikant">TIMELINE OF NAVAL RAVIKANT</a> <br><a href="https://www.navalmanack.com/almanack-of-naval-ravikant/now-here-is-naval-in-his-own-words">NOW, HERE IS NAVAL IN HIS OWN WORDS... </a></h3><h3><strong>PART I: WEALTH <br></strong>BUILDING WEALTH<br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/understanding-how-wealth-is-created">Understand How Wealth Is Created</a>  <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/find-and-build-specific-knowledge">Find and Build Specific Knowledge</a>  <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/play-long-term-games-with-long-term-people">Play Long-Term Games with Long-Term People</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/take-on-accountability">Take on Accountability</a><br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/build-or-buy-equity-in-a-business">Build or Buy Equity in a Business</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/find-a-position-of-leverage">Find a Position of Leverage</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/get-paid-for-your-judgment">Get Paid for Your Judgment</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/prioritize-and-focus">Prioritize and Focus</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/find-work-that-feels-like-play">Find Work That Feels Like Play</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/how-to-get-lucky">How to Get Lucky</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/be-patient">Be Patient</a> <br>BUILDING JUDGMENT <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/judgment">Judgment</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/how-to-think-clearly">How to Think Clearly</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/shed-your-identity-to-see-reality">Shed Your Identity to See Reality</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/learn-the-skills-of-decision-making">Learn the Skills of Decision-Making</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/collect-mental-models">Collect Mental Models</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/learn-to-love-to-read">Learn to Love to Read</a> 	 		 	 	 		</h3><h3><strong>PART II: HAPPINESS <br></strong>LEARNING HAPPINESS <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/happiness-is-learned">Happiness Is Learned</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/happiness-is-a-choice">Happiness Is a Choice</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/happiness-requires-presence">Happiness Requires Presence</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/happiness-requires-peace">Happiness Requires Peace</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/every-desire-is-a-chosen-unhappiness">Every Desire Is a Chosen Unhappiness</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/success-does-not-earn-happiness">Success Does Not Earn Happiness</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/envy-is-the-enemy-of-happiness">Envy Is the Enemy of Happiness</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/happiness-is-built-by-habits">Happiness Is Built by Habits</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/find-happiness-in-acceptance">Find Happiness in Acceptance</a><br> SAVING YOURSELF <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/choosing-to-be-yourself">Choosing to Be Yourself</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/choosing-to-care-for-yourself">Choosing to Care for Yourself</a><br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/meditation-mental-strength">Meditation + Mental Strength</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/choosing-to-build-yourself">Choosing to Build Yourself</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/choosing-to-grow-yourself">Choosing to Grow Yourself</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/choosing-to-free-yourself">Choosing to Free Yourself</a> <br>PHILOSOPHY <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/the-meanings-of-life">The Meanings of Life </a><br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/live-by-your-values">Live by Your Values</a><br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/rational-buddhism">Rational Buddhism</a> <br>          <a href="https://www.navalmanack.com/almanack-of-naval-ravikant/the-present-is-all-we-have">The Present Is All We Have</a> </h3><h3><strong>BONUS<br></strong><a href="https://www.navalmanack.com/almanack-of-naval-ravikant/navals-recommended-reading">NAVAL‚ÄôS RECOMMENDED READING <br></a>          Books <br>          Other Recommendations <br><a href="https://www.navalmanack.com/almanack-of-naval-ravikant/navals-writing">NAVAL‚ÄôS WRITING</a> <br><a href="https://www.navalmanack.com/almanack-of-naval-ravikant/next-on-naval">NEXT ON NAVAL </a><br><a href="https://www.navalmanack.com/almanack-of-naval-ravikant/appreciation">APPRECIATION</a> <br><a href="https://www.navalmanack.com/almanack-of-naval-ravikant/sources">SOURCES </a><br><a href="https://www.navalmanack.com/almanack-of-naval-ravikant/about-the-author">ABOUT THE AUTHOR </a></h3></div></div></div></div></div></div>

        

        

        <section>
          <div>
            
          </div>
        </section>
      </div>
      

    </article>
  </div>



<section>
  <!--
  --><a href="https://www.navalmanack.com/almanack-of-naval-ravikant/foreword">
    
    <span>
      
      <h2><time datetime="2020-09-16" pubdate="">Sep 16 </time>FOREWORD</h2>
    </span>
  </a>
</section>



  
</div>

      </main>

      

    </div></div>]]>
            </description>
            <link>https://www.navalmanack.com/almanack-of-naval-ravikant/table-of-contents</link>
            <guid isPermaLink="false">hacker-news-small-sites-24507281</guid>
            <pubDate>Thu, 17 Sep 2020 17:17:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[An Introduction to Data Oriented Design with Rust]]>
            </title>
            <description>
<![CDATA[
Score 398 | Comments 134 (<a href="https://news.ycombinator.com/item?id=24506744">thread link</a>) | @headalgorithm
<br/>
September 17, 2020 | https://jamesmcm.github.io/blog/2020/07/25/intro-dod/ | <a href="https://web.archive.org/web/*/https://jamesmcm.github.io/blog/2020/07/25/intro-dod/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>In the post we will investigate the main concepts of <a href="https://en.wikipedia.org/wiki/Data-oriented_design">Data-oriented
Design</a> using Rust.</p>

<p>The source code for this example is <a href="https://github.com/jamesmcm/data-oriented-example">available on Github</a>.</p>

<!--more-->

<h2 id="what-is-data-oriented-design">What is data-oriented design?</h2>

<p>Data-oriented design is an approach to optimising programs by carefully
considering the memory layout of data structures, and their implications
for auto-vectorisation and use of the CPU cache. I highly recommend
watching Mike Acton‚Äôs <a href="https://www.youtube.com/watch?v=rX0ItVEVjHc">‚ÄúData-Oriented Design and C++‚Äù</a> talk
if you haven‚Äôt seen it already.</p>

<p>In this post we will cover 4 cases, using <a href="https://docs.rs/criterion/0.3.3/criterion/">criterion</a> for
benchmarking. The cases are:</p>

<ul>
  <li>Struct of arrays vs. array of structs</li>
  <li>The cost of branching inside a hot loop</li>
  <li>Linked List vs. Vector iteration</li>
  <li>The cost of dynamic dispatch vs. monomorphisation</li>
</ul>

<h2 id="struct-of-arrays-vs-array-of-structs">Struct of Arrays vs. Array of Structs</h2>

<p>The <a href="https://en.wikipedia.org/wiki/AoS_and_SoA">Struct of Arrays vs. Array of Structs</a> 
refers to two contrasting ways of organising entity data to be operated
over.</p>

<p>For example, imagine we are writing a video game and we would like to
have a Player struct with the following fields:</p>

<div><div><pre><code><span>pub</span> <span>struct</span> <span>Player</span> <span>{</span>
    <span>name</span><span>:</span> <span>String</span><span>,</span>
    <span>health</span><span>:</span> <span>f64</span><span>,</span>
    <span>location</span><span>:</span> <span>(</span><span>f64</span><span>,</span> <span>f64</span><span>),</span>
    <span>velocity</span><span>:</span> <span>(</span><span>f64</span><span>,</span> <span>f64</span><span>),</span>
    <span>acceleration</span><span>:</span> <span>(</span><span>f64</span><span>,</span> <span>f64</span><span>),</span>
<span>}</span>
</code></pre></div></div>

<p>Then at each frame, we want to update the locations and velocities of all
Players. We could write something like:</p>

<div><div><pre><code><span>pub</span> <span>fn</span> <span>run_oop</span><span>(</span><span>players</span><span>:</span> <span>&amp;</span><span>mut</span> <span>Vec</span><span>&lt;</span><span>Player</span><span>&gt;</span><span>)</span> <span>{</span>
    <span>for</span> <span>player</span> <span>in</span> <span>players</span><span>.iter_mut</span><span>()</span> <span>{</span>
        <span>player</span><span>.location</span> <span>=</span> <span>(</span>
            <span>player</span><span>.location</span><span>.</span><span>0</span> <span>+</span> <span>player</span><span>.velocity</span><span>.</span><span>0</span><span>,</span>
            <span>player</span><span>.location</span><span>.</span><span>1</span> <span>+</span> <span>player</span><span>.velocity</span><span>.</span><span>1</span><span>,</span>
        <span>);</span>
        <span>player</span><span>.velocity</span> <span>=</span> <span>(</span>
            <span>player</span><span>.velocity</span><span>.</span><span>0</span> <span>+</span> <span>player</span><span>.acceleration</span><span>.</span><span>0</span><span>,</span>
            <span>player</span><span>.velocity</span><span>.</span><span>1</span> <span>+</span> <span>player</span><span>.acceleration</span><span>.</span><span>1</span><span>,</span>
        <span>);</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>This would be the usual object-oriented approach to this problem. The
issue here is that in memory the structs are stored as follows (assuming
no field re-ordering i.e. <code>#[repr(C)]</code>), on a 64-bit architecture each field will be 64
bits (8 bytes, so each Player is 64 bytes):</p>

<div><div><pre><code>-- Vec&lt;Player&gt;
name  (pointer to heap)  -- Player 1
health    
location0  (tuple split for clarity) 
location1
velocity0
velocity1
acceleration0
acceleration1
name  (pointer to heap)  -- Player 2
location0    
location1
velocity0
velocity1
acceleration0
acceleration1
...
</code></pre></div></div>

<p>Note the parts we want to operate on (locations, velocities and
accelerations) are not stored contiguously across different Players.
This prevents us from using vector operations to operate on multiple
players at once (since they cannot be loaded in the same CPU cache
line, usually ~64 bytes).</p>

<p>In contrast, the data-oriented approach is to design around this
limitation and optimise for auto-vectorisation. Instead of using a
struct per Player, we now use one struct for all Players and each Player
has their values stored at their index in the separate attribute Vectors:</p>

<div><div><pre><code><span>pub</span> <span>struct</span> <span>DOPlayers</span> <span>{</span>
    <span>names</span><span>:</span> <span>Vec</span><span>&lt;</span><span>String</span><span>&gt;</span><span>,</span>
    <span>health</span><span>:</span> <span>Vec</span><span>&lt;</span><span>f64</span><span>&gt;</span><span>,</span>
    <span>locations</span><span>:</span> <span>Vec</span><span>&lt;</span><span>(</span><span>f64</span><span>,</span> <span>f64</span><span>)</span><span>&gt;</span><span>,</span>
    <span>velocities</span><span>:</span> <span>Vec</span><span>&lt;</span><span>(</span><span>f64</span><span>,</span> <span>f64</span><span>)</span><span>&gt;</span><span>,</span>
    <span>acceleration</span><span>:</span> <span>Vec</span><span>&lt;</span><span>(</span><span>f64</span><span>,</span> <span>f64</span><span>)</span><span>&gt;</span><span>,</span>
<span>}</span>
</code></pre></div></div>

<p>Now we can do the same calculation as in the OOP case as follows:</p>

<div><div><pre><code><span>pub</span> <span>fn</span> <span>run_dop</span><span>(</span><span>world</span><span>:</span> <span>&amp;</span><span>mut</span> <span>DOPlayers</span><span>)</span> <span>{</span>
    <span>for</span> <span>(</span><span>pos</span><span>,</span> <span>(</span><span>vel</span><span>,</span> <span>acc</span><span>))</span> <span>in</span> <span>world</span>
        <span>.locations</span>
        <span>.iter_mut</span><span>()</span>
        <span>.zip</span><span>(</span><span>world</span><span>.velocities</span><span>.iter_mut</span><span>()</span><span>.zip</span><span>(</span><span>world</span><span>.acceleration</span><span>.iter</span><span>()))</span>
    <span>{</span>
        <span>*</span><span>pos</span> <span>=</span> <span>(</span><span>pos</span><span>.</span><span>0</span> <span>+</span> <span>vel</span><span>.</span><span>0</span><span>,</span> <span>pos</span><span>.</span><span>1</span> <span>+</span> <span>vel</span><span>.</span><span>1</span><span>);</span>
        <span>*</span><span>vel</span> <span>=</span> <span>(</span><span>vel</span><span>.</span><span>0</span> <span>+</span> <span>acc</span><span>.</span><span>0</span><span>,</span> <span>vel</span><span>.</span><span>1</span> <span>+</span> <span>acc</span><span>.</span><span>1</span><span>);</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>In this case the memory layout is as follows:</p>
<div><div><pre><code>-- DOPlayers
name1    -- names
name2
...
health1    -- health
health2
...
location1    -- locations
location2
...
</code></pre></div></div>

<p>The relevant fields are now stored contiguously. Given that each
location tuple will be 16 bytes, we could now feasibly load 4 location
tuples on the same cache line to operate on them simultaneously with
SIMD instructions.</p>

<h3 id="benchmark">Benchmark</h3>

<p>Here are the results of the criterion benchmark for the above code (the
full code and benchmark code is available <a href="https://github.com/jamesmcm/data-oriented-example">in the Github repo</a>):</p>

<p><img src="https://jamesmcm.github.io/images/soa.svg" alt="AoS vs. SoA benchmark" title="AoS vs. SoA benchmark"></p>

<p>Overall, we see that the data-oriented approach finishes in half the
time. This would seem to be due to the data-oriented case operating on
two Players at a time - we can confirm this by reviewing the compiled
assembly.</p>

<p>Reviewing the <a href="https://godbolt.org/z/d8bjMb">output on Godbolt</a> we see the following:</p>

<pre><code>// Relevant OOP loop
.LBB0_2:
        movupd  xmm0, xmmword ptr [rax + rdx + 32]
        movupd  xmm1, xmmword ptr [rax + rdx + 48]
        movupd  xmm2, xmmword ptr [rax + rdx + 64]
        addpd   xmm0, xmm1
        movupd  xmmword ptr [rax + rdx + 32], xmm0
        addpd   xmm2, xmm1
        movupd  xmmword ptr [rax + rdx + 48], xmm2
        add     rdx, 80
        cmp     rcx, rdx
        jne     .LBB0_2

// ...
// Relevant DOP loop
.LBB1_7:
        movupd  xmm0, xmmword ptr [rcx + rdx - 16]
        movupd  xmm1, xmmword ptr [rax + rdx - 16]
        addpd   xmm1, xmm0
        movupd  xmmword ptr [rcx + rdx - 16], xmm1
        movupd  xmm0, xmmword ptr [r9 + rdx - 16]
        movupd  xmm1, xmmword ptr [rax + rdx - 16]
        addpd   xmm1, xmm0
        movupd  xmm0, xmmword ptr [rax + rdx]
        movupd  xmmword ptr [rax + rdx - 16], xmm1
        add     rdi, 2
        movupd  xmm1, xmmword ptr [rcx + rdx]
        addpd   xmm1, xmm0
        movupd  xmmword ptr [rcx + rdx], xmm1
        movupd  xmm0, xmmword ptr [rax + rdx]
        movupd  xmm1, xmmword ptr [r9 + rdx]
        addpd   xmm1, xmm0
        movupd  xmmword ptr [rax + rdx], xmm1
        add     rdx, 32
        cmp     rsi, rdi
        jne     .LBB1_7
        test    r8, r8
        je      .LBB1_5
</code></pre>

<p>We can see in the data-oriented case, the loop is unrolled to operate on
two elements at once - resulting in the 50% speed up overall!</p>

<p><strong>Addendum</strong>: As noted by <a href="https://www.reddit.com/r/rust/comments/hxqwom/an_introduction_to_data_oriented_design_with_rust/fz8lxcq/">/u/five9a2 on Reddit</a>
the above output is specifically for the default target, which is
misleading since <code>cargo bench</code> uses the native target by default (i.e.
all possible features on your CPU), so our benchmarks are not using the
above assembly code.</p>

<p>By setting the compiler flag to <code>-C target-cpu=skylake-avx512</code> to enable 
Skylake features, we get the <a href="https://godbolt.org/z/PEPdvn">following output</a>:</p>

<pre><code>// OOP loop
.LBB0_2:
        vmovupd ymm0, ymmword ptr [rax + rdx + 32]
        vaddpd  ymm0, ymm0, ymmword ptr [rax + rdx + 48]
        vmovupd ymmword ptr [rax + rdx + 32], ymm0
        add     rdx, 80
        cmp     rcx, rdx
        jne     .LBB0_2

...
// DOP loop
.LBB1_19:
        vmovupd zmm0, zmmword ptr [rsi + 4*rax - 64]
        vaddpd  zmm0, zmm0, zmmword ptr [rcx + 4*rax - 64]
        vmovupd zmmword ptr [rsi + 4*rax - 64], zmm0
        vmovupd zmm0, zmmword ptr [rcx + 4*rax - 64]
        vaddpd  zmm0, zmm0, zmmword ptr [r10 + 4*rax - 64]
        vmovupd zmmword ptr [rcx + 4*rax - 64], zmm0
        vmovupd zmm0, zmmword ptr [rsi + 4*rax]
        vaddpd  zmm0, zmm0, zmmword ptr [rcx + 4*rax]
        vmovupd zmmword ptr [rsi + 4*rax], zmm0
        vmovupd zmm0, zmmword ptr [rcx + 4*rax]
        vaddpd  zmm0, zmm0, zmmword ptr [r10 + 4*rax]
        vmovupd zmmword ptr [rcx + 4*rax], zmm0
        add     r11, 8
        add     rax, 32
        add     rdi, 2
        jne     .LBB1_19
        test    r9, r9
        je      .LBB1_22
</code></pre>

<p>Here we see the OOP loop making use of the 256-bit ymm registers for the
position tuple and velocity tuple, and another for the velocity tuple
and acceleration tuple. This is possible because they are adjacent in
memory (due to the ordering of the fields). In the DOP loop,
the 512-bit zmm register is used.</p>

<p>It seems the performance differences comes from the bandwidth between
cache levels, since the performance is identical for the small examples.
This can be demonstrated further by removing the extra fields from the
struct - in this case we see only a 25% performance difference (<a href="https://godbolt.org/z/Th91Wa">godbolt
link</a>), and this
corresponds to Player struct now being 384 bits (and so 1/4 of the
512-bit read/write is unused).</p>

<p>This emphasises how important it is to consider your deployment target,
and if deploying performance-sensitive code, to consider setting the
target-cpu explicitly to benefit from all of its features.</p>

<p>It also demonstrates how the ordering of fields can be important to
performance. By default Rust will re-order fields automatically, but you can set
<code>#[repr(C)]</code> to disable this (necessary for C interoperability for
example).</p>

<h3 id="summary">Summary</h3>

<p>This example demonstrates the importance of considering memory layout
when aiming for performant code and auto-vectorisation.</p>

<p>Note that the same logic can also apply when working with arrays of
structs - making your struct smaller will allow you to load more
elements on the same cache line and possibly lead to autovectorisation.
<a href="https://github.com/Rene-007/flake_growth/blob/master/src/helpers.rs">Here is an example</a> of
a crate (which was shared on the <a href="https://www.reddit.com/r/rust/comments/hmqjvs/growing_gold_with_rust/">Rust subreddit</a>) that achieved a 40% performance
improvement by doing just that.</p>

<p>This particular re-organisation has a direct analogue in database design. A
major difference between databases aimed at transactional (OLTP)
workloads and analytical (OLAP) workloads is that the latter tend to use
columnar-based storage. Just like the case above, this means that
operations on one column can take advantage of the contiguous storage
and use vector operations, which tends to be the main access pattern for
analytical workloads (e.g. calculate the average purchase size across all rows,
rather than updating and retrieving entire, specific rows).</p>

<p>In the case of analytical databases this is actually a double win, since it also
applies to the serialisation of the data to disk, where compression can
now be applied along the column (where the data is guaranteed to be of the
same type) leading to much better compression ratios.</p>

<p>If you are working on a problem that might benefit from the struct of
arrays approach, and want to run a quick benchmark, you might be
interested in the <a href="https://github.com/lumol-org/soa-derive">soa-derive</a>
crate that will allow you to derive the struct of arrays from your
struct.</p>

<h2 id="branching-in-a-hot-loop">Branching in a hot loop</h2>

<p>Another optimisation tactic is to avoid branching in any ‚Äúhot‚Äù parts of
the code (i.e. any part that will be executed many, many times).</p>

<p>Branching can arise in subtle ways, often by trying to use one struct for many
different cases. For example, we might define some general Node type ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://jamesmcm.github.io/blog/2020/07/25/intro-dod/">https://jamesmcm.github.io/blog/2020/07/25/intro-dod/</a></em></p>]]>
            </description>
            <link>https://jamesmcm.github.io/blog/2020/07/25/intro-dod/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24506744</guid>
            <pubDate>Thu, 17 Sep 2020 16:34:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Speeding Tesla driver caught napping behind the wheel on Alberta highway]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 5 (<a href="https://news.ycombinator.com/item?id=24506649">thread link</a>) | @mtr
<br/>
September 17, 2020 | https://www.cbc.ca/news/canada/edmonton/tesla-driver-autopilot-alberta-ponoka-speeding-dangerous-driving-1.5727828 | <a href="https://web.archive.org/web/*/https://www.cbc.ca/news/canada/edmonton/tesla-driver-autopilot-alberta-ponoka-speeding-dangerous-driving-1.5727828">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>A 20-year-old B.C. motorist who who found reclining behind the wheel of a Tesla while the electric vehicle was on autopilot has been charged by the RCMP in Alberta with speeding.</p><div><figure><div><p><img alt="" srcset="" sizes="" src="https://i.cbc.ca/1.5727840.1600356254!/fileImage/httpImage/image.JPG_gen/derivatives/16x9_780/tesla-speeding-alberta.JPG"></p></div><figcaption>The 20-year-old B.C. driver of this Tesla Model S has been charged with speeding and dangerous driving, a criminal offence. The incident occurred on July 9 on Highway 2 near Ponoka, about 100 kilometres south of Edmonton.<!-- --> <!-- -->(Alberta RCMP)</figcaption></figure><p><span><p>The RCMP&nbsp;in Alberta have charged a&nbsp;20-year-old British Columbia man with&nbsp;speeding while he was asleep at the wheel of a Tesla electric car.</p>  <p>The RCMP&nbsp;received&nbsp;a call at about&nbsp;4 p.m. on July 9 concerning&nbsp;a 2019 Tesla Model S speeding south on Highway 2 near Ponoka, about 100&nbsp;kilometres south of Edmonton.</p>  <p>Both front seats were fully&nbsp;reclined, and both the driver and passenger&nbsp;appeared to be sound asleep, police say.&nbsp;</p>  <p>The car appeared to be driving on&nbsp;autopilot at more than 140 km/h, RCMP&nbsp;Sgt. Darrin Turnbull&nbsp;told CBC News on Thursday. The speed limit on that stretch of highway is 110 km/h.</p>  <p>"Nobody was looking out the windshield to see where the car was going," he&nbsp;said.&nbsp;</p>  <p>"I've been in policing for over 23 years&nbsp;and the&nbsp;majority of that in traffic&nbsp;law enforcement, and I'm speechless.</p>  <p>"I've never, ever seen anything like this before, but of course the technology wasn't there."&nbsp;</p>  <p>Tesla Model S sedans have autopilot functions, including auto-steer and "traffic-aware" cruise control, and both functions appeared to be activated.</p>  <p>"We believe the vehicle&nbsp;was operating on the autopilot system, which is really just an advanced driver safety system, a driver assist program. You still need to be driving the vehicle," Turnbull said.&nbsp;</p>  <p>"But of course, there are after-market things that can be done to a vehicle against the manufacturer's recommendations to change or circumvent the safety system."&nbsp;</p>  <p>After the responding officer activated emergency lights on their vehicle, the Tesla automatically began to accelerate, Turnbull said, even as those vehicles that were ahead of the Tesla on the highway moved out of the way.</p>  <p>"Nobody appeared to be in the car, but the vehicle sped up because the line was clear in front."</p>  <ul>  </ul>  <p>The responding officer obtained radar readings on the vehicle, confirming that it had automatically accelerated to exactly 150 km/h.</p>  <p>The RCMP charged the driver with speeding and issued a 24-hour licence suspension for fatigue.&nbsp;</p>  <p>After further investigation and consultation with the Crown, a Criminal Code charge of dangerous driving was laid against the driver, police said.</p>  <p>The driver was served with a summons for court in December.</p>  <ul>   <li><strong><a href="https://www.cbc.ca/news/business/tesla-s-self-driving-autopilot-system-under-scrutiny-1.5413931" target="_blank">Tesla's self-driving Autopilot system under scrutiny after 3 deadly crashes</a></strong></li>   <li><strong><a href="https://www.cbc.ca/news/canada/british-columbia/driverless-tesla-richmond-b-c-1.5349855" target="_blank">Driverless Tesla coasting along mall parking lot raises questions, causes confusion</a></strong></li>  </ul>  <p>Autonomous cars are in their early stages in much of Canada, with Ontario and Quebec approving pilot projects as long as a vigilant driver is present to take control of the vehicle when needed.</p>  <p>There have not been any reported self-driving car crashes in Canada, but several have been reported in the United States, putting Tesla's autopilot driving system functions&nbsp;under scrutiny.</p>  <p>On Dec. 29, 2019, a Tesla Model S sedan left a freeway in Gardena, Calif., at high speed, ran a red light and struck a Honda Civic, killing two people inside, police said. On the same day, a Tesla Model 3 hit a parked firetruck on an Indiana freeway, killing a passenger in the Tesla.</p>  <p>On Dec. 7, a Model 3 struck a police cruiser on a Connecticut highway, but&nbsp;no one was hurt.</p>  <p>Tesla's autopilot function is designed to keep a car in its lane and at a safe distance from other vehicles. Autopilot also can change lanes on its own.</p>  <ul>  </ul>  <h2>'It&nbsp;gives all of us a bad name'</h2>  <p>Angie Dean, president of the Tesla Owners Club of Alberta, said the incident is troubling for the 300 paying members of her group&nbsp;and the more than 1,000 active members of the club's online Facebook group.&nbsp;</p>  <p>Dean said the driver-assist functions in Tesla vehicles are designed to enhance safety, not detract from it.</p>  <p>"This type of story is sort of next to&nbsp;a worst-case scenario," she&nbsp;said. "The only thing that would be worse than this is if someone had got hurt.&nbsp;Everyone that I've spoken with is just so disappointed and so frustrated because it's abuse of the system.</p>  <p>"It&nbsp;gives all of us a bad name, and the vast majority of us would never do something like this. We bought these cars because we want to be safer."</p>  <p>The driver-assist program&nbsp;requires&nbsp;regular input from the driver to function,&nbsp;Dean said. If the driver's hands come off the wheel, warnings begin going off every 15 seconds, she said.</p>  <p>"It asks you to put your hands on the wheel&nbsp;and&nbsp;turn it a little bit so that it knows that your hands are on the wheel," Dean said.&nbsp;</p>  <p>"If you don't, it starts beeping at you. And if you still don't, it gets even louder. And&nbsp;if you still don't, it actually turns the hazard lights on, slows the vehicle down and it pulls it over. It turns the car off and autopilot will not engage for the rest of that drive."</p>  <p><strong><em>WATCH | Is the technology behind driverless cars ready for the road?</em></strong></p>  <p><span><span><span></span><span>The technology behind self-driving cars is available and in use, but there are examples showing it may not be fully ready for the real world.<!-- --> <!-- -->2:09</span></span></span></p>  <p>Despite the built-in safeguards, videos&nbsp;circulating online instruct drivers on ways to "hack" and override&nbsp;these systems, Dean&nbsp;said.</p>  <p>"There are a lot of systems that are in place that are really, really trying not to make this possible. But if there's a will, there's a way, I suppose. "&nbsp;</p>  <p>Just because some vehicles can drive themselves, it doesn't mean they should, the RCMP said.&nbsp;</p>  <p>&nbsp;"Although manufacturers of new vehicles have built in safeguards to prevent drivers from taking advantage of the new safety systems in vehicles, those systems are just that ‚Äî supplemental safety systems," said Supt. Gary Graham of Alberta RCMP Traffic Services.&nbsp;</p>  <p>"They are not self-driving systems, they still come with the responsibility of driving."</p></span></p></div></div>]]>
            </description>
            <link>https://www.cbc.ca/news/canada/edmonton/tesla-driver-autopilot-alberta-ponoka-speeding-dangerous-driving-1.5727828</link>
            <guid isPermaLink="false">hacker-news-small-sites-24506649</guid>
            <pubDate>Thu, 17 Sep 2020 16:28:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The untold history of macOS System Preferences]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24506591">thread link</a>) | @ddrmaxgt37
<br/>
September 17, 2020 | https://www.arun.is/blog/system-preferences/ | <a href="https://web.archive.org/web/*/https://www.arun.is/blog/system-preferences/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p><img src="https://www.arun.is/static/bcd87d10064d4d4dadd22884565ba04d/cover.jpg" alt="feature"></p><section><div><p><span><span>Published September 17, 2020</span></span></p></div><div><h2 id="history">History</h2><p>The current version of macOS descended from Mac OS X, announced at Macworld in
2000 by Steve Jobs<sup><a href="#footnote_1">[1]</a></sup>. Since then,
including the Public Beta of version 10.0, there have been 17 different releases
till now. The next one, version 11.0, titled Big Sur, is coming later this year.</p><p>In the intervening two decades, a lot has changed. In 2002, Steve Jobs famously
dropped support for OS 9 by staging a funeral at WWDC. Macs transitioned from
PowerPC to Intel chips and later to 64-bit only. Apple switched from naming
releases after big cats like Panther and Jaguar to naming releases after
California locations. It also renamed Mac OS X to macOS to conform better with
iOS and later iPadOS.</p><p>The interface started glassy and skeuomorphic, mimicking the materials used on
Macs. Over the decades, it went through significant
revisions<sup><a href="#footnote_2">[2]</a></sup>.</p><p>One thing that seems to have remained relatively unchanged over the years is the
System Preferences screen.</p><p><span><iframe src="https://player.vimeo.com/video/457568483?background=1" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="" title="vimeo video"></iframe></span></p><p>But, at a closer glance, we‚Äôll see that this mundane part of the operating
system has changed quite a bit and hides some fun easter eggs and surprises.</p><h2 id="how-things-have-changed">How things have changed</h2><h3 id="favorites-bar">Favorites bar</h3><p>Early versions of OS X until 10.3 included a favorites bar at the top where
users could drag and drop their favorite settings. In 10.4, this was removed and
replaced with the search feature that highlights matching icons as you type a
query.</p><p><span>
      <span></span>
  <img alt="favorites" title="favorites" src="https://www.arun.is/static/313d3074bcdaeda86ea3b9f9141a3695/20801/favorites.jpg" srcset="https://www.arun.is/static/313d3074bcdaeda86ea3b9f9141a3695/98e5d/favorites.jpg 180w,https://www.arun.is/static/313d3074bcdaeda86ea3b9f9141a3695/543cd/favorites.jpg 360w,https://www.arun.is/static/313d3074bcdaeda86ea3b9f9141a3695/20801/favorites.jpg 720w,https://www.arun.is/static/313d3074bcdaeda86ea3b9f9141a3695/b37e7/favorites.jpg 1080w,https://www.arun.is/static/313d3074bcdaeda86ea3b9f9141a3695/33266/favorites.jpg 1440w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
    </span></p><h3 id="mouse">Mouse</h3><p>The first mouse to appear System Preferences is the black translucent Apple Pro
Mouse<sup><a href="#footnote_3">[3]</a></sup>. Between the Public Beta and the
10.0 release, an optical sensor‚Äôs red glow was added to reflect how the mouse
looks when in use. Following that is the white iteration of that mouse, the
short-lived Mighty Mouse, and then finally the Magic Mouse, which has undergone
only minor updates till today.</p><p><span>
      <span></span>
  <img alt="mouse" title="mouse" src="https://www.arun.is/static/6bdfc8a50d309f652a522878c13db51d/20801/mouse.jpg" srcset="https://www.arun.is/static/6bdfc8a50d309f652a522878c13db51d/98e5d/mouse.jpg 180w,https://www.arun.is/static/6bdfc8a50d309f652a522878c13db51d/543cd/mouse.jpg 360w,https://www.arun.is/static/6bdfc8a50d309f652a522878c13db51d/20801/mouse.jpg 720w,https://www.arun.is/static/6bdfc8a50d309f652a522878c13db51d/b37e7/mouse.jpg 1080w,https://www.arun.is/static/6bdfc8a50d309f652a522878c13db51d/33266/mouse.jpg 1440w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
    </span></p><h3 id="keyboard">Keyboard</h3><p>Similarly, the keyboard icons have represented the keyboard available at the
given time. In 10.0, it‚Äôs an Apple Pro Keyboard. From 10.1 to 10.5, it‚Äôs only a
single command key, but then in 10.6, a full keyboard is shown again.</p><p><span>
      <span></span>
  <img alt="keyboard" title="keyboard" src="https://www.arun.is/static/78d4d3feef83c2e4c287773597512d65/20801/keyboard.jpg" srcset="https://www.arun.is/static/78d4d3feef83c2e4c287773597512d65/98e5d/keyboard.jpg 180w,https://www.arun.is/static/78d4d3feef83c2e4c287773597512d65/543cd/keyboard.jpg 360w,https://www.arun.is/static/78d4d3feef83c2e4c287773597512d65/20801/keyboard.jpg 720w,https://www.arun.is/static/78d4d3feef83c2e4c287773597512d65/b37e7/keyboard.jpg 1080w,https://www.arun.is/static/78d4d3feef83c2e4c287773597512d65/33266/keyboard.jpg 1440w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
    </span></p><p>Peculiarly, in 10.3, 10.4, and 10.5, the Mouse and Keyboard settings were
combined into one, but then in 10.6, they were split up again.</p><h3 id="displays">Displays</h3><p>Unsurprisingly, the Displays icon has always reflected the latest Apple display
starting with the transparent polycarbonate Cinema Displays until today‚Äôs Pro
Display XDR. The small size allocated to the icons has meant that they usually
look a little cartoonish and out of proportion, but still consistent with the
rest of the icon set. However, in Big Sur, the display icon‚Äôs proportions were
adjusted much closer to how Pro Display XDR looks in reality.</p><p><span>
      <span></span>
  <img alt="displays" title="displays" src="https://www.arun.is/static/a6c12ca730ff1a899d96e58507288b58/20801/displays.jpg" srcset="https://www.arun.is/static/a6c12ca730ff1a899d96e58507288b58/98e5d/displays.jpg 180w,https://www.arun.is/static/a6c12ca730ff1a899d96e58507288b58/543cd/displays.jpg 360w,https://www.arun.is/static/a6c12ca730ff1a899d96e58507288b58/20801/displays.jpg 720w,https://www.arun.is/static/a6c12ca730ff1a899d96e58507288b58/b37e7/displays.jpg 1080w,https://www.arun.is/static/a6c12ca730ff1a899d96e58507288b58/33266/displays.jpg 1440w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
    </span></p><h3 id="print--fax">Print &amp; Fax</h3><p>10.3 introduced the Print &amp; Fax setting. Then in 10.7, amidst the waning use of
fax machines, it was renamed Print and Scan. Finally, in 10.9, it was renamed
again to the nouns Printers &amp; Scanners to fit grammatically with everything
else.</p><p><span>
      <span></span>
  <img alt="print" title="print" src="https://www.arun.is/static/8ed1948be22758a9f7b6c010946d6b0f/20801/print.jpg" srcset="https://www.arun.is/static/8ed1948be22758a9f7b6c010946d6b0f/98e5d/print.jpg 180w,https://www.arun.is/static/8ed1948be22758a9f7b6c010946d6b0f/543cd/print.jpg 360w,https://www.arun.is/static/8ed1948be22758a9f7b6c010946d6b0f/20801/print.jpg 720w,https://www.arun.is/static/8ed1948be22758a9f7b6c010946d6b0f/b37e7/print.jpg 1080w,https://www.arun.is/static/8ed1948be22758a9f7b6c010946d6b0f/33266/print.jpg 1440w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
    </span></p><h3 id="energy-saver">Energy Saver</h3><p>In the first OS X Public Beta, a shade drawn over a window represented Energy
Saver. Before release, the now recognizable light bulb took its place.</p><p>Over the years, the icon has represented the most efficient light bulb
technology of the time. So, in 10.5, the icon changed from an incandescent bulb
to a more efficient compact fluorescent. Then, in 10.10, the light bulb changed
again to an LED design.</p><p><span>
      <span></span>
  <img alt="energy saver" title="energy saver" src="https://www.arun.is/static/eb20a5f38d91edd23aa9f792463f7503/20801/energy_saver.jpg" srcset="https://www.arun.is/static/eb20a5f38d91edd23aa9f792463f7503/98e5d/energy_saver.jpg 180w,https://www.arun.is/static/eb20a5f38d91edd23aa9f792463f7503/543cd/energy_saver.jpg 360w,https://www.arun.is/static/eb20a5f38d91edd23aa9f792463f7503/20801/energy_saver.jpg 720w,https://www.arun.is/static/eb20a5f38d91edd23aa9f792463f7503/b37e7/energy_saver.jpg 1080w,https://www.arun.is/static/eb20a5f38d91edd23aa9f792463f7503/33266/energy_saver.jpg 1440w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
    </span></p><p>Big Sur will make away with the Energy Saver setting altogether for MacBooks
(they are keeping it for desktops), replacing it with the more intuitively
named‚ÄùBattery setting. Oh, light bulb icon, you will be missed.</p><h3 id="network">Network</h3><p>In the Public Beta, Network was a globe focused on the western hemisphere, with
lines drawn as if connecting cities. Just three releases later in 10.3, that was
changed over to the abstract glass ball with circular lines, a variation of
which we still see today.</p><p><span>
      <span></span>
  <img alt="network" title="network" src="https://www.arun.is/static/8a0e9801d57bf94c8ca81bc92fb91d7e/20801/network.jpg" srcset="https://www.arun.is/static/8a0e9801d57bf94c8ca81bc92fb91d7e/98e5d/network.jpg 180w,https://www.arun.is/static/8a0e9801d57bf94c8ca81bc92fb91d7e/543cd/network.jpg 360w,https://www.arun.is/static/8a0e9801d57bf94c8ca81bc92fb91d7e/20801/network.jpg 720w,https://www.arun.is/static/8a0e9801d57bf94c8ca81bc92fb91d7e/b37e7/network.jpg 1080w,https://www.arun.is/static/8a0e9801d57bf94c8ca81bc92fb91d7e/33266/network.jpg 1440w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
    </span></p><h3 id="date--time">Date &amp; Time</h3><p>Since the Public Beta, the calendar in the icon has shown an 18. 10.10 added the
month of July to the icon. July 18 likely refers to the day that the Mac OS X
Public Beta was first announced at Macworld New York.</p><p><span>
      <span></span>
  <img alt="date" title="date" src="https://www.arun.is/static/b1d9e4e3b1929a516259d4ba8fef1079/20801/date.jpg" srcset="https://www.arun.is/static/b1d9e4e3b1929a516259d4ba8fef1079/98e5d/date.jpg 180w,https://www.arun.is/static/b1d9e4e3b1929a516259d4ba8fef1079/543cd/date.jpg 360w,https://www.arun.is/static/b1d9e4e3b1929a516259d4ba8fef1079/20801/date.jpg 720w,https://www.arun.is/static/b1d9e4e3b1929a516259d4ba8fef1079/b37e7/date.jpg 1080w,https://www.arun.is/static/b1d9e4e3b1929a516259d4ba8fef1079/33266/date.jpg 1440w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
    </span></p><p>In Big Sur, after 20 years of showing July 18, that icon has changed to July 17,
likely to conform with the Calendar app icon. iCal, as the Calendar app was
previously known, was first shown to the public on July 17, 2002.</p><h3 id="language--region">Language &amp; Region</h3><p>At first, this one was called International, then renamed to Language &amp; Text and
finally Language and Region. The icon was a flag bearing the logo of the United
Nations. In 10.13, a banal globe icon replaced the UN logo.</p><p><span>
      <span></span>
  <img alt="international" title="international" src="https://www.arun.is/static/cb007953e65e9f977f6d3a848d74e61a/20801/international.jpg" srcset="https://www.arun.is/static/cb007953e65e9f977f6d3a848d74e61a/98e5d/international.jpg 180w,https://www.arun.is/static/cb007953e65e9f977f6d3a848d74e61a/543cd/international.jpg 360w,https://www.arun.is/static/cb007953e65e9f977f6d3a848d74e61a/20801/international.jpg 720w,https://www.arun.is/static/cb007953e65e9f977f6d3a848d74e61a/b37e7/international.jpg 1080w,https://www.arun.is/static/cb007953e65e9f977f6d3a848d74e61a/33266/international.jpg 1440w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
    </span></p><h2 id="looking-forward-to-big-sur">Looking forward to Big Sur</h2><p>Mac UI has evolved considerably, yet gradually over the last two decades. Big
Sur takes this further<sup><a href="#footnote_4">[4]</a></sup> and tones down
the three-dimensional aspects of the interface such as gradients, shadows, and
borders.</p><p>The icons in System Preferences, on the other hand, have gone the complete
opposite direction. The Sound icon now emits transparent sound waves. Screen
Time is now a realistic, clear hourglass. Spotlight is now a realistic
magnifying glass.</p><p><span><iframe src="https://player.vimeo.com/video/458835318?background=1" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="" title="vimeo video"></iframe></span></p><p>I welcome these changes and can‚Äôt wait to use them once Big Sur launches.</p><hr><ol><li><span id="footnote_1"><a href="https://www.youtube.com/watch?v=Ko4V3G4NqII"><i>Macworld San Francisco 2000</i></a>&nbsp;<a href="#1">‚Ü©Ô∏é</a></span></li><li><span id="footnote_2"><a href="https://512pixels.net/2014/04/aqua-past-future/"><i>On the Past, Present and Future of Apple‚Äôs Aqua User Interface </i></a> ¬∑ 512 Pixels<!-- -->&nbsp;<a href="#2">‚Ü©Ô∏é</a></span></li><li><span id="footnote_3"><a href="http://www.minimallyminimal.com/blog/apple-pro-mouse"><i>Apple (Pro) Mouse</i></a> ¬∑ Minimally Minimal<!-- -->&nbsp;<a href="#3">‚Ü©Ô∏é</a></span></li><li><span id="footnote_4"><a href="https://www.andrewdenty.com/blog/2020/07/01/a-visual-comparison-of-macos-catalina-and-big-sur.html"><i>A visual comparison of macOS Catalina and Big Sur</i></a> ¬∑ Andrew Denty<!-- -->&nbsp;<a href="#4">‚Ü©Ô∏é</a></span></li></ol><hr><p>Thanks to Q for reading drafts of this. Thanks to
<a href="https://twitter.com/gruber">John Gruber</a> and
<a href="https://twitter.com/siracusa">John Siracusa</a> for helping me track down the
significance of July 18. Thanks to Stephen Hackett at
<a href="https://512pixels.net/">512 Pixels</a> and
<a href="https://guidebookgallery.org/">GUIdebook</a> for screenshots of older versions of
macOS.</p><p><strong>Update:</strong> I previously mistakenly said that Energy Saver would be replaced by
the Battery setting, but I have learned that it only applies to MacBook laptops.
Enegy Saver will remain on desktops.</p></div></section><div><div><p><span>Subscribe to the newsletter</span></p></div></div></div></div></div>]]>
            </description>
            <link>https://www.arun.is/blog/system-preferences/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24506591</guid>
            <pubDate>Thu, 17 Sep 2020 16:24:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Nvidia‚Äôs Ultimate Play]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24506521">thread link</a>) | @swalsh
<br/>
September 17, 2020 | https://www.mooreslawisdead.com/post/nvidia-s-ultimate-play | <a href="https://web.archive.org/web/*/https://www.mooreslawisdead.com/post/nvidia-s-ultimate-play">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-hook="post-description"><article><div><div data-rce-version="7.19.2"><div dir="ltr"><div><h2 id="viewer-ebfdg"><strong><u>Introduction ‚Äì Let Them Eat Cake</u></strong></h2><div id="viewer-2bpaj"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.mooreslawisdead.com/post/nvidia-s-ultimate-play" data-pin-media="https://static.wixstatic.com/media/cd85b6_51a7a8cabef947ee8ce323812f17b2fd~mv2.png/v1/fit/w_503,h_282,al_c,q_80/file.png" src="https://static.wixstatic.com/media/cd85b6_51a7a8cabef947ee8ce323812f17b2fd~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png"></p></div></div></div></div><p id="viewer-3agot"><em><strong>9/16/20 Update: As covered in a recent MLID video, I have been made aware of an ~$50 Rebate being provided to AIBs during September for each card sold. This expires in October.</strong></em></p><p id="viewer-3ijv9">I will start this post by getting straight to the point ‚Äì I have evidence that suggests <strong>Nvidia is trying to have their cake and eat it too </strong>when it comes to the perceived price/performance of their new Ampere RTX 30-Series lineup. They are attempting to <strong>appear</strong> to be launching a lineup that is priced lower than their much maligned Turing generation, but in reality these things will cost<strong> far more </strong>than they are letting on for the overwhelming majority of shoppers this fall.</p><p id="viewer-aktp7">To be clear ‚Äì <strong>most</strong> of my information comes from an industry veteran. This is a source who has<strong> never </strong>given me information that wasn‚Äôt eventually proven right, but it is still just one person who provided <strong>most</strong> of the information in this expose. I want to be honest about that with my readers from the start, but be rest assured that I did <strong>independently verify</strong> some of the details with other provenly reliable sources before this was published. I did dig into select details myself for verification, and every time I dug - nothing from the original source turned up false, and no red flags were raised. So, I am publishing this info, and making sure to do so before Ampere reviews go live. I believe <strong>this is information PC Gamers need to know as soon as possible</strong>.</p><h2 id="viewer-5pkbh"><strong><u>Nvidia‚Äôs Low Volume Loss Leaders</u></strong></h2><div id="viewer-6u1d0"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.mooreslawisdead.com/post/nvidia-s-ultimate-play" data-pin-media="https://static.wixstatic.com/media/cd85b6_f3194379ae844f0aaa35a0d02c902c3b~mv2.jpg/v1/fit/w_1221,h_774,al_c,q_80/file.png" src="https://static.wixstatic.com/media/cd85b6_f3194379ae844f0aaa35a0d02c902c3b~mv2.jpg/v1/fit/w_300,h_300,al_c,q_5/file.jpg"></p></div></div></div></div><p id="viewer-fueup">In June, <em>Igor‚Äôs Lab</em> ran a story alleging he had sources confirming the Founders Edition coolers cost more than $150 to manufacture. My source concurs with Igor, even going as far as to say that Igor‚Äôs number may be<strong> a lowball</strong> based on what this individual has been told. Additionally, AIBs have confirmed to my source that Nvidia forced them to provide BOM (Bill of Materials) cost-downs in order for their cooling designs to be approved for sale. This is far from a normal requirement for Nvidia, and in fact it gets weirder when you learn that supposedly most AIB BOM‚Äôs detailed margins below 40% if sold even close to MSRP. Some of you probably just connected the dots to what is going on here.</p><p id="viewer-ako0d">For those who don‚Äôt know - Nvidia usually likes margins above 60%, and Nvidia‚Äôs cooler definitely costs far more to manufacture than most GPU cooler designs that will be hitting the market on Ampere cards this fall. However, they don‚Äôt plan to actually sell many of those Founders cards‚Ä¶</p><p id="viewer-8vlo8">I now need to mention another of <em>Igor‚Äôs Lab‚Äôs</em> published findings. According to Igor, Samsung‚Äôs 8nm node is not having bad yields. In fact, the limited launch availability is due to a shortage of Founders Edition coolers. But the truth according to my main source is that <strong>there isn‚Äôt</strong> <strong>a shortage of coolers per se</strong>. If Nvidia wanted more of them, they could have had more of them ‚Äì it‚Äôs <strong>scarcity by design.</strong></p><p id="viewer-er01m">Now let me spell out the real purpose of Nvidia‚Äôs extravagant Founders Edition: making sure reviewers have the best samples, with the best coolers, and at an <strong>alluring price</strong> most gamers won‚Äôt be able to obtain <strong>by design</strong>. They are accepting lower margins than usual on their FE cards with the knowledge that these published results will set unrealistic expectations for gamers. Unrealistic expectations that will stand the test of time in Day One Reviews that will be referenced for years‚Ä¶</p><p id="viewer-8io8c">But this story goes much further than simply ‚Äúputting your best foot forward‚Äù with Day One Review Cards most people can‚Äôt buy. Both Founders and AIB cards will be in short supply in September, <strong>but AIB cards will stuff the channels by the end of October.</strong></p><p id="viewer-fa61a">Therefore, I think this is Nvidia‚Äôs <em>Ultimate Play: </em><strong>Intentionally </strong>causing an initial dearth of Ampere stock, allowing ‚Äúsupply and demand‚Äù to <strong>inflate the street price </strong>of Ampere when those beautiful $699 Founders cards <strong>instantly</strong> sell out, and then ultimately forcing AIBs to sell most of their models well above MSRP due to the required BOM Cost-Downs‚Ä¶that will be in ample supply once the street price is elevated.</p><h2 id="viewer-1b4gs"><strong><u>The Ultimate Play</u></strong></h2><div id="viewer-a3gi1"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.mooreslawisdead.com/post/nvidia-s-ultimate-play" data-pin-media="https://static.wixstatic.com/media/cd85b6_c73584cea2734af194348297df12dd12~mv2.png/v1/fit/w_1427,h_803,al_c,q_80/file.png" src="https://static.wixstatic.com/media/cd85b6_c73584cea2734af194348297df12dd12~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png"></p></div></div></div></div><p id="viewer-fj4qs">Nvidia knows that RADEON will be more competitive this year than they have been for the past 5 years. This means they need to go hard with aggressive marketing and <strong>perceived</strong> price/performance than they have had to for quite some time. At the same time, Nvidia‚Äôs stock price is sitting at an all-time high, above $450 as of this writing. That is<strong> over double </strong>where it was just one year ago. If what this source alleges is true, Nvidia is seemingly attempting to <strong>keep margins elevated</strong> for another killer earnings season, and yet at the same time trying not to be perceived as the ‚Äúbad guy‚Äù anymore. I will now completely lay out what I am saying, and provide the remaining details:</p><ol><li id="viewer-omb6"><p>Nvidia wants to keep their 50%+ <strong>average</strong> margins while pretending they are offering good value.</p></li><li id="viewer-caq6f"><p>They seek to accomplish this by selling incredible Founders Editions with low margins (at MSRP) from their website, but with painfully limited stock <strong>by design</strong>. </p></li><li id="viewer-e9m14"><p>Nvidia knows that if they get stellar Day One reviews <strong>praising</strong> Ampere for its performance <strong>and value</strong>, they will win back the hearts of gamers ‚Äì which they lost with Turing ‚Äì before RDNA 2 launches. Most people only read and remember the Day One reviews.</p></li><li id="viewer-9eudd"><p>There should be AIB models available day 1, but I am told <strong>only ~20% of the stock</strong> is required to be <strong>near</strong> MSRP, and likely in models with <strong>far inferior</strong> coolers to the FE design. Already a glance at some of the announced AIB cards <strong>shows</strong> that indeed, these are <strong>not</strong> going to be sold at MSRP: <a href="https://www.techspot.com/news/86681-aftermarket-rtx-3080-rtx-3090-card-prices-revealed.html" target="_blank" rel="noopener">https://www.techspot.com/news/86681-aftermarket-rtx-3080-rtx-3090-card-prices-revealed.html</a></p></li><li id="viewer-5tlea"><p>Additionally, Nvidia is allegedly causing supply of all Ampere models (<strong>including AIB</strong>) to be artificially limited during the first month of sales. Nvidia is supposedly doing so by controlling some key components AIBs need. I was able to <strong>independently verify</strong> this with an AIB who said ‚ÄúThere will be low stock at launch, but <strong>it‚Äôs just propaganda</strong>.‚Äù </p></li><li id="viewer-6pj5b"><p>Ampere demand will outstrip the initial stock, and so the <strong>price will balloon </strong>by October.</p></li><li id="viewer-66ptu"><p>Eventually, this stock issue will suddenly disappear, much sooner than we have been led to believe with rumors about bad yields.</p></li><li id="viewer-5c742"><p>If all of this is true, Nvidia could state that the elevated prices <strong>aren‚Äôt</strong> their doing, and they could do so while pointing to a very limited number of cards that sell for MSRP every week. Likely models with the cheapest coolers.</p></li><li id="viewer-6nu4e"><p>The double memory versions of cards (RTX 3080 20GB, RTX 3070 16GB) should land roughly around when Nvidia stuffs the inventory in October. These will also come with<strong> a far higher price </strong>than the original models.</p></li><li id="viewer-3vnk2"><p>I can confirm that the double memory cards will <strong>not</strong> be sold from Nvidia‚Äôs website, and thus they will be able to <strong>claim </strong>AIBs are behind the price hike. These marked up cards are likely what Nvidia<strong> really </strong>wants you all to buy, and yet all those Day One reviews will say the 3080 is ‚ÄúJust $700.‚Äù <strong>Having your cake and eating it too.</strong></p></li><li id="viewer-eejt7"><p>Samsung‚Äôs 8nm node sounds<strong> much more </strong>able than previously reported by MLID. It doesn‚Äôt sound like there are ‚Äúyield‚Äù problems on Samsung‚Äôs glorified 10nm node in 2020. At least not problems big enough to cause Ampere stock to be as low as it will be artificially at launch.</p></li></ol><p id="viewer-crqr8">I will be honest. The logical side of my brain has tortured me into admitting this plan is <strong>brilliant,</strong> if true. AMD may compete with Nvidia in price, performance, and especially efficiency this fall ‚Äì but Nvidia is<strong> the master </strong>of winning mindshare and keeping margins high <strong>at the same time. </strong>In this writer‚Äôs eyes, the plan could absolutely allow Jensen to send golden samples, the best of the best, to reviewers, with a <strong>stunningly effective cooler</strong> that garners universal acclaim next to their aggressive (and mostly fake) MSRPs.</p><p id="viewer-c1534"><strong>This could go down in history as Jensen‚Äôs <em>Ultimate Play</em></strong>, and I am honestly not sure what we can do about it. But I do concur with my source that gamers deserved to know.</p><h2 id="viewer-7ug0v"><strong><u>Epilogue: A Word on Big Navi, and Some Advice for Gamers This Fall</u></strong></h2><div id="viewer-6o80q"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.mooreslawisdead.com/post/nvidia-s-ultimate-play" data-pin-media="https://static.wixstatic.com/media/cd85b6_b652a7e0f704478bba33c61b37de91ad~mv2.png/v1/fit/w_947,h_532,al_c,q_80/file.png" src="https://static.wixstatic.com/media/cd85b6_b652a7e0f704478bba33c61b37de91ad~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png"></p></div></div></div></div><p id="viewer-80j5f">Finally, I would like to provide some updates ‚Äì or more accurately <strong>adjustments</strong> - to what I expect from AMD‚Äôs (Always Massive Delays') ‚ÄúBig Navi.‚Äù I am confident that RADEON <strong>will</strong> release a Navi 21-derived card that is the following:</p><ul><li id="viewer-btai4"><p><strong><u>At least</u></strong> within spitting distance of the RTX 3080 in rasterization performance. If AMD doesn‚Äôt ‚Äúbeat‚Äù the 3080, they will assuredly <strong>crush</strong> the RTX 3070.</p></li><li id="viewer-5us83"><p>Substantially <strong>more efficient</strong> at originally intended clocks than Ampere, although they may <strong>push some models a bit</strong> to more directly compete with the 3080. Even when pushed, I do not expect these models to be power hogs.</p></li><li id="viewer-dgil8"><p>Potentially smaller than many people seem to expect, at least relative to Ampere. The specs I have just been made aware of are close to what I had <strong>incorrectly</strong> <strong>assumed</strong> must be Navi 22. This is made possible by incredible improvements to how RDNA <strong>manages memory and bandwidth</strong>. It should (for the first time since before GCN) make due with <strong>less bandwidth</strong> than Nvidia counterparts.</p></li><li id="viewer-7ukvn"><p>Provides Ray Tracing capabilities that overall <strong>exceed Turing</strong>, but likely <strong>underperform Ampere</strong>.</p></li><li id="viewer-e0m9m"><p><strong>No </strong>confirmation on what AMD‚Äôs answer to DLSS will be, but they<strong> are </strong>‚Äútaking it seriously.‚Äù The software stack is simply not confirmed yet.</p></li></ul><p id="viewer-1p0rt">AMD is <strong>unlikely to match</strong> Nvidia in die size, but it sounds like <strong>they won‚Äôt need to</strong> in order to have RADEON cards roughly competing (or maybe even exceeding) the 3080, while using <strong>far less energy</strong>. This in some ways will disappoint those that were <strong>unrealistically</strong> hoping ‚ÄúNavi 2X‚Äù is secretly ‚ÄúNavi 2.5X‚Äù, but it should come as good news for the majority of gamers that just want a <strong>decent $400-$600 card</strong> that doesn‚Äôt require a new power supply. I have stopped <strong>just short</strong> of saying the exact specs and performance I expect out of ‚ÄúBig Navi,‚Äù and that‚Äôs because I should be able to provide real &amp; tested performance numbers <strong>incredibly soon</strong>. So just stay tuned for more info from MLID on this.</p><p id="viewer-fbrpi">Some advice to leakers too ‚Äì many of the widely accepted ‚ÄúBig Navi‚Äù CU &amp; Memory Bus estimates sound <strong>entirely incorrect </strong>to me at this point. Even ‚Ä¶</p></div></div></div></div></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.mooreslawisdead.com/post/nvidia-s-ultimate-play">https://www.mooreslawisdead.com/post/nvidia-s-ultimate-play</a></em></p>]]>
            </description>
            <link>https://www.mooreslawisdead.com/post/nvidia-s-ultimate-play</link>
            <guid isPermaLink="false">hacker-news-small-sites-24506521</guid>
            <pubDate>Thu, 17 Sep 2020 16:17:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Adding Auth to a Flask App with Azure Active Directory and Oso]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24506252">thread link</a>) | @todsacerdoti
<br/>
September 17, 2020 | https://www.osohq.com/post/oso-azure | <a href="https://web.archive.org/web/*/https://www.osohq.com/post/oso-azure">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p>Securing application resources usually consists of two security processes: authentication and authorization. <em>Authentication</em> determines the identity of a user, and is often accomplished by some kind of sign-in process. <em>Authorization</em> determines whether or not a user is allowed to access a resource, typically based on their authenticated identity but often based on other factors as well, like having a certain role, being in a group, having specific attributes or meeting other criteria relevant to the use case.</p>
<p>A common authentication pattern involves the application exchanging information with an <em>Identity Provider,</em> or "IdP", to confirm the identity of the user. Well-known IdPs include Facebook, Google, and GitHub.</p>
<p>This post will show how to add authentication and authorization to a simple Flask app, using Azure Active Directory B2C as an IdP, and oso's <code>oso-flask</code> library to authorize requests.</p>
<h3>Summary of what we'll cover:</h3>
<ul>
<li>Sign in users with Azure AD B2C</li>
<li>Use oso to restrict access to signed-in users</li>
<li>Add custom user attributes to our user profile</li>
<li>Write a policy to control access based on user attributes, like job title or team</li>
<li>Access Microsoft user data, like groups and managers, with the Graph API</li>
<li>Write an oso policy to implement role-based access control using Microsoft groups</li>
</ul>
<h3><strong>Background</strong></h3>
<p>This post uses an example application that's written in Python with Flask. You can find the source code <a href="https://github.com/osohq/oso-azure-ad-example">here</a>.</p>
<p><strong>Azure Active Directory</strong> ("AD") is Microsoft's cloud-based identity management service. We'll use it to sign in users and store user data. This example uses a newer variant of Active Directory called "<a href="https://docs.microsoft.com/en-us/azure/active-directory-b2c/overview">B2C</a>", which is designed for business-to-consumer apps to manage customer identities.</p>
<p><strong>oso</strong> is an open-source policy engine for authorization that is embedded in your application. We'll use oso to authorize user access to our application's resources. Since our example application uses Flask, we're using the <code>oso-flask</code> <a href="https://docs.osohq.com/using/frameworks/flask.html">integration</a>, which includes middleware for authorizing Flask requests.</p>
<p>The example we'll use in this post is a very simple application that stores and displays documents. Its authorization model is as follows:</p>
<ul>
<li>Users can always view documents that they are the owner of</li>
<li>Documents can belong to user groups</li>
<li>Public documents can be viewed by anyone</li>
<li>Private documents can only be viewed by users that belong to one of the document's groups</li>
</ul>
<h2>Authentication with Azure AD B2C</h2>
<p>We used a <a href="https://github.com/Azure-Samples/ms-identity-python-webapp">sample app</a> provided by Microsoft as the starting point for our example. Following Microsoft's <a href="https://docs.microsoft.com/en-us/azure/active-directory-b2c/tutorial-web-app-python?tabs=app-reg-ga">tutorial</a> on setting up authentication in their sample application will get you to the same starting point (you may have to complete a few prerequisite steps as well).</p>
<p>By the end of the tutorial, you should have <a href="https://docs.microsoft.com/en-us/azure/active-directory-b2c/tutorial-register-applications?tabs=app-reg-ga">registered the application</a> with your Azure AD <a href="https://docs.microsoft.com/en-us/azure/active-directory-b2c/tutorial-create-tenant">B2C tenant</a>. We've registered ours as "python-webapp":</p>
<p><img alt="Adding%20auth%20to%20a%20Flask%20App%20with%20Azure%20Active%20Direc%20e4020384c5a348e499250ae95d24e0d1/Untitled.png" src="https://images.osohq.com/oso-azure/Adding%20auth%20to%20a%20Flask%20App%20with%20Azure%20Active%20Direc%20e4020384c5a348e499250ae95d24e0d1/Untitled.png"></p>
<p>You should also have set up several <a href="https://docs.microsoft.com/en-us/azure/active-directory-b2c/tutorial-create-user-flows">User Flows</a> in the Azure portal for signing in, profile editing, and logging out:</p>
<p><img alt="Adding%20auth%20to%20a%20Flask%20App%20with%20Azure%20Active%20Direc%20e4020384c5a348e499250ae95d24e0d1/Untitled%201.png" src="https://images.osohq.com/oso-azure/Adding%20auth%20to%20a%20Flask%20App%20with%20Azure%20Active%20Direc%20e4020384c5a348e499250ae95d24e0d1/Untitled%201.png"></p>
<p>When you set up the user flows, make sure that you check the following boxes in "User Attributes" and "Application Claims":</p>
<ul>
<li>Email</li>
<li>Given name</li>
<li>Surname</li>
<li>Display Name</li>
<li>Job Title</li>
<li>Object ID (Application Claims only)</li>
</ul>
<p>Once you've reached the end of the tutorial, your app should be able to sign users in with an email and password, allow them to edit their profile, and log them out. Each of these user flows should return an <code>id_token</code> JWT to your app's redirect handler that stores the above attributes as claims. If you use Microsoft's provided JWT decoder, <a href="https://jwt.ms/">https://jwt.ms</a>, to test your user flow, you should see something like this:</p>
<p><img alt="Adding%20auth%20to%20a%20Flask%20App%20with%20Azure%20Active%20Direc%20e4020384c5a348e499250ae95d24e0d1/Untitled%202.png" src="https://images.osohq.com/oso-azure/Adding%20auth%20to%20a%20Flask%20App%20with%20Azure%20Active%20Direc%20e4020384c5a348e499250ae95d24e0d1/Untitled%202.png"></p>
<p>Once you've completed the tutorial, the application can be run with the following command from the root directory:</p>
<pre><code>flask run --host localhost --port 5000
</code></pre>

<p>If you'd like to run our <a href="https://github.com/osohq/oso-azure-ad-example">sample application</a>, make sure to update the information in <a href="https://github.com/osohq/oso-azure-ad-example/blob/11aa2c113b7802b3136575e9900420511089834d/app_config.py#L3-L17">app_config.py</a>:</p>
<pre><code># app_config.py

b2c_tenant = "your-tenant-name"
signupsignin_user_flow = "B2C_1_signupsignin1"
editprofile_user_flow = "B2C_1_profileediting1"
resetpassword_user_flow = "B2C_1_passwordreset1"
authority_template = (
    "https://{tenant}.b2clogin.com/{tenant}.onmicrosoft.com/{user_flow}"
)

CLIENT_ID = (
    "Enter_the_Application_Id_here"  # Application (client) ID of app registration
)

CLIENT_SECRET = (
    "Enter_the_Client_Secret_Here"  # Placeholder - for use ONLY during testing.
)
</code></pre>

<h3>Creating the User model</h3>
<p>Microsoft's sample app stores a raw dictionary of the <code>id_token</code> claims globally in <code>session["user"]</code>. In our app, we created a User <a href="https://github.com/osohq/oso-azure-ad-example/blob/11aa2c113b7802b3136575e9900420511089834d/user.py#L13-L20">class</a> to store the user data, which we'll add to later on:</p>
<pre><code># user.py

class User:
    def __init__(self, id_token_claims):
        self.id = id_token_claims.get("oid")
        self.display_name = id_token_claims.get("name")
        self.first_name = id_token_claims.get("given_name")
        self.surname = id_token_claims.get("family_name")
        self.emails = id_token_claims.get("emails")
        self.job_title = id_token_claims.get("jobTitle")
</code></pre>

<p>In <a href="https://github.com/osohq/oso-azure-ad-example/blob/11aa2c113b7802b3136575e9900420511089834d/app.py#L60-L61">our redirect handler</a>, we construct an instance of the current <code>User</code> from the <code>id_token_claims</code> dictionary, and store it on the <code>session</code> object:</p>
<pre><code># app.py

@app.route(app_config.REDIRECT_PATH)
def authorized():
    # ...
    user = User(id_token_result.get("id_token_claims"))
    session["user"] = user
</code></pre>

<p>We've successfully added authentication to our app. Now let's use oso to authorize our authenticated users' requests.</p>
<h2>Adding oso</h2>
<p>Since we're building a Flask app, we're going to use the <code>flask-oso</code> package to add oso to our application. <code>flask-oso</code> is an even lighter weight form of the <code>oso</code> package that provides convenient middleware for authorizing Flask requests. You can find a helpful guide to using <code>flask-oso</code> in our <a href="https://docs.osohq.com/using/frameworks/flask.html">docs</a>.</p>
<p>We followed three steps to add oso to the application:</p>
<ol>
<li>Create a <code>.polar</code> policy file</li>
<li>Initialize the global oso instance by loading the policy and registering relevant application classes</li>
<li>Add calls to <code>flask_oso.FlaskOso.authorize()</code> at authorization enforcement points</li>
</ol>
<h3>Writing a policy</h3>
<p>oso policies are written in a declarative policy language called Polar, and are stored in files with the <code>.polar</code> extension. Take a look at <a href="https://docs.osohq.com/getting-started/policies/index.html">Writing Policie</a>s for an overview of how to use oso policies.</p>
<p>The policy file in this example is called <a href="https://github.com/osohq/oso-azure-ad-example/blob/11aa2c113b7802b3136575e9900420511089834d/authorization.polar#L1-L3">authorization.polar</a>. We started with a simple rule to allow any logged-in user to get a public document:</p>
<pre><code># authorization.polar

# allow anyone to get public documents
allow(_actor: User, "GET", doc: Document) if
    not doc.is_private;
</code></pre>

<p>This rule works by specializing the <code>_actor</code> on the <code>User</code> class, which means that only actors of type <code>User</code> are allowed to take any action on any resource. Since <code>get_current_user()</code>, which is used to get the default actor, returns <code>None</code> when the current user is not logged in, the rule only applies when the current user is authenticated. The <code>doc</code> argument is specialized on the <code>Document</code> class, which allows us to safely access the <code>is_private</code> field.</p>
<h3>Initializing oso</h3>
<p>We wrote a function called <code>init_oso()</code>, which we put in a file called <a href="https://github.com/osohq/oso-azure-ad-example/blob/master/oso_auth.py">oso_auth.py</a>:</p>
<pre><code># oso_auth.py

from oso import Oso
from flask_oso import FlaskOso

from document import Document
import user
from user import User

def init_oso(app):
    """ set up the `Oso` and `FlaskOso` objects, and add them to the global `app` instance."""
    oso = Oso()
    oso.register_class(Document)
    oso.register_class(User)
    oso.load_file("authorization.polar")

    flask_oso = FlaskOso(app=app, oso=oso)
    flask_oso.set_get_actor(user.get_current_user)

    app.oso = oso
    app.flask_oso = flask_oso
</code></pre>

<p>The <code>init_oso()</code> function creates an <code>Oso</code> instance, on which it registers the <code>User</code> class and the <code>Document</code> class that represents the app's document resources (registering Python classes with oso lets us reference them in our oso policies).</p>
<p>The function then uses the <code>Oso</code> instance to create the <code>FlaskOso</code> instance that we'll use to authorize requests. We call the <code>set_get_actor()</code> method to set the default actor to the current user. This default is used when we make calls to <code>flask_oso.authorize()</code> later on. The <a href="https://github.com/osohq/oso-azure-ad-example/blob/11aa2c113b7802b3136575e9900420511089834d/user.py#L56-L57">method</a> we pass in, <code>get_current_user()</code> looks up the user on the session object:</p>
<pre><code># user.py

from flask import session

def get_current_user():
    return session.get("user")
</code></pre>

<h3>Authorizing requests</h3>
<p>We're now ready to use the oso library to authorize requests. In this example application, the resources we want to secure are documents, represented by the <code>Document</code> <a href="https://github.com/osohq/oso-azure-ad-example/blob/11aa2c113b7802b3136575e9900420511089834d/document.py#L11-L46">class</a> in <code>document.py</code>:</p>
<pre><code># document.py

@dataclass
class Document:
    id: int
    owner_id: str
    groups: list
    is_private: bool
    content: str

def find_by_id(id):
    return DOCUMENTS.get(id)

DOCUMENTS = {
    1: Document(
        id=1,
        owner_id="5890e32a-c2ac-4aa0-902d-0717017d1bc3",
        groups=["engineering"],
        is_private=True,
        content="This is a private engineering doc.",
    ),
    2: Document(
        id=2,
        owner_id="273dd85f-0728-44c0-8588-c130f39c900b",
        groups=["marketing"],
        is_private=True,
        content="This is a private marketing doc.",
    ),
    3: Document(
        id=3,
        owner_id="273dd85f-0728-44c0-8588-c130f39c900b",
        groups=["admin"],
        is_private=False,
        content="This is a public admin doc.",
    ),
}
</code></pre>

<p>For this example we've simply hardcoded the document data, but this data would normally be stored in a database.</p>
<p><code>document.py</code> has a <a href="https://github.com/osohq/oso-azure-ad-example/blob/11aa2c113b7802b3136575e9900420511089834d/document.py#L55-L59">route</a> for viewing the documents, to which we've added a call to <code>flask_oso.FlaskOso.authorize()</code>:</p>
<pre><code># document.py

@bp.route("/docs/&lt;int:id&gt;", methods=["GET"])
def get_doc(id):
    doc = find_by_id(id)
    current_app.flask_oso.authorize(resource=doc)
    return str(doc)
</code></pre>

<p>The <code>authorize()</code> method accepts the same arguments as the <code>is_allowed()</code> method of the <code>oso</code> package (actor, action, and resource), but provides sensible defaults for working with Flask. With our call to <code>set_get_actor()</code>, we set the default actor to the current user. The action defaults to the method of the current request, <code>flask.request.method</code>. We have to provide the resource we want to authorize; in this case, we pass in the <code>Document</code> instance that is being ‚Ä¶</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.osohq.com/post/oso-azure">https://www.osohq.com/post/oso-azure</a></em></p>]]>
            </description>
            <link>https://www.osohq.com/post/oso-azure</link>
            <guid isPermaLink="false">hacker-news-small-sites-24506252</guid>
            <pubDate>Thu, 17 Sep 2020 15:59:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Thinking Clearly About Correlations and Causation (2018) [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 61 | Comments 10 (<a href="https://news.ycombinator.com/item?id=24506243">thread link</a>) | @Anon84
<br/>
September 17, 2020 | https://dacemirror.sci-hub.tw/journal-article/7fe084d6885f9339910bf080b718c012/rohrer2018.pdf?download=true | <a href="https://web.archive.org/web/*/https://dacemirror.sci-hub.tw/journal-article/7fe084d6885f9339910bf080b718c012/rohrer2018.pdf?download=true">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://dacemirror.sci-hub.tw/journal-article/7fe084d6885f9339910bf080b718c012/rohrer2018.pdf?download=true</link>
            <guid isPermaLink="false">hacker-news-small-sites-24506243</guid>
            <pubDate>Thu, 17 Sep 2020 15:58:52 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Live debug Go in prod using eBPF]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24505862">thread link</a>) | @imukherjee
<br/>
September 17, 2020 | https://blog.pixielabs.ai/blog/ebpf-function-tracing/post/ | <a href="https://web.archive.org/web/*/https://blog.pixielabs.ai/blog/ebpf-function-tracing/post/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><p>This is the first in a series of posts describing how we can debug applications in production using eBPF, without recompilation/redeployment. This post describes how to use <a href="https://github.com/iovisor/gobpf" target="_blank" rel="noopener noreferrer">gobpf</a> and uprobes to build a function argument tracer for Go applications. This technique is also extendable to other compiled languages such as C++, Rust, etc. The next sets of posts in this series will discuss using eBPF for tracing HTTP/gRPC data, SSL, etc.</p><p>When debugging, we are typically interested in capturing the state of a program. This allows us to examine what the application is doing and determine where the bug is located in our code. A simple way to observe state is to use a debugger to capture function arguments. For Go applications, we often use Delve or gdb.</p><p>Delve and gdb work well for debugging in a development environment, but they are not often used in production. The features that make these debuggers powerful can also make them undesirable to use in production systems. Debuggers can cause significant interruption to the program and even allow mutation of state which might lead to unexpected failures of production software.</p><p>To more cleanly capture function arguments, we will explore using enhanced BPF (<a href="https://ebpf.io/" target="_blank" rel="noopener noreferrer">eBPF</a>), which is available in Linux 4.x+, and the higher level Go library <a href="https://github.com/iovisor/gobpf" target="_blank" rel="noopener noreferrer">gobpf</a>.</p><p>Extended BPF (eBPF) is a kernel technology that is available in Linux 4.x+. You can think of it as a lightweight sandboxed VM that runs inside of the Linux kernel and can provide verified access to kernel memory.</p><p>As shown in the overview below, eBPF allows the kernel to run BPF bytecode. While the front-end language used can vary, it is often a restricted subset of C. Typically the C code is first compiled to the BPF bytecode using Clang, then the bytecode is verified to make sure it's safe to execute. These strict verifications guarantee that the machine code will not intentionally or accidentally compromise the Linux kernel, and that the BPF probe will execute in a bounded number of instructions every time it is triggered. These guarantees enable eBPF to be used in performance-critical workloads like packet filtering, networking monitoring, etc.</p><p>Functionally, eBPF allows you to run restricted C code upon some event (eg. timer, network event or a function call). When triggered on a function call we call these functions probes and they can be used to either run on a function call within the kernel (kprobes), or a function call in a userspace program (uprobes). This post focuses on using uprobes to allow dynamic tracing of function arguments.</p><p>Uprobes allow you to intercept a userspace program by inserting a debug trap instruction (<code>int3</code> on an x86) that triggers a soft-interrupt . This is also <a href="https://eli.thegreenplace.net/2011/01/27/how-debuggers-work-part-2-breakpoints" target="_blank" rel="noopener noreferrer">how debuggers work</a>. The flow for an uprobe is essentially the same as any other BPF program and is summarized in the diagram below. The compiled and verified BPF program is executed as part of a uprobe, and the results can be written into a buffer.</p><div><figure>
    <span>
      <span></span>
  <p><img alt="BPF for tracing (from Brendan Gregg)" title="BPF for tracing (from Brendan Gregg)" src="https://blog.pixielabs.ai/static/a11d6d9cb78e055d59136a97665907d3/073a0/bpf-tracing.jpg" srcset="https://blog.pixielabs.ai/static/a11d6d9cb78e055d59136a97665907d3/8356d/bpf-tracing.jpg 259w,https://blog.pixielabs.ai/static/a11d6d9cb78e055d59136a97665907d3/bc760/bpf-tracing.jpg 518w,https://blog.pixielabs.ai/static/a11d6d9cb78e055d59136a97665907d3/073a0/bpf-tracing.jpg 610w" sizes="(max-width: 610px) 100vw, 610px" loading="lazy"></p>
    </span>
    <figcaption>BPF for tracing (from Brendan Gregg)</figcaption>
  </figure></div><p>Let's see how uprobes actually function. To deploy uprobes and capture function arguments, we will be using <a href="https://github.com/pixie-labs/pixie/blob/main/demos/simple-gotracing/app.go" target="_blank" rel="noopener noreferrer">this</a> simple demo application. The relevant parts of this Go program are shown below.</p><p><code>main()</code> is a simple HTTP server that exposes a single <em>GET</em> endpoint on <em>/e</em>, which computes Euler's number (<strong>e</strong>) using an iterative approximation. <code>computeE</code> takes in a single query param(<em>iters</em>), which specifies the number of iterations to run for the approximation. The more iterations, the more accurate the approximation, at the cost of compute cycles. It's not essential to understand the math behind the function. We are just interested in tracing the arguments of any invocation of <code>computeE</code>.</p><pre><div><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4zMzYgNUg4LjA0OEM2LjkxNjQ4IDUgNiA1LjkxNjQ4IDYgNy4wNDhWMjEuMzg0SDguMDQ4VjcuMDQ4SDIwLjMzNlY1Wk0yMy40MDggOS4wOTZIMTIuMTQ0QzExLjAxMjUgOS4wOTYgMTAuMDk2IDEwLjAxMjUgMTAuMDk2IDExLjE0NFYyNS40OEMxMC4wOTYgMjYuNjExNSAxMS4wMTI1IDI3LjUyOCAxMi4xNDQgMjcuNTI4SDIzLjQwOEMyNC41Mzk1IDI3LjUyOCAyNS40NTYgMjYuNjExNSAyNS40NTYgMjUuNDhWMTEuMTQ0QzI1LjQ1NiAxMC4wMTI1IDI0LjUzOTUgOS4wOTYgMjMuNDA4IDkuMDk2Wk0xMi4xNDQgMjUuNDhIMjMuNDA4VjExLjE0NEgxMi4xNDRWMjUuNDhaIiBmaWxsPSIjNEE0QzRGIi8+Cjwvc3ZnPgo=" alt="" title="Copy to clipboard" aria-label="copy"></p></div></pre><p>To understand how uprobes work, let's look at how symbols are tracked inside binaries. Since uprobes work by inserting a debug trap instruction, we need to get the address where the function is located. Go binaries on Linux use ELF to store debug info. This information is available, even in optimized binaries, unless debug data has been stripped. We can use the command <code>objdump</code> to examine the symbols in the binary:</p><pre><div><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4zMzYgNUg4LjA0OEM2LjkxNjQ4IDUgNiA1LjkxNjQ4IDYgNy4wNDhWMjEuMzg0SDguMDQ4VjcuMDQ4SDIwLjMzNlY1Wk0yMy40MDggOS4wOTZIMTIuMTQ0QzExLjAxMjUgOS4wOTYgMTAuMDk2IDEwLjAxMjUgMTAuMDk2IDExLjE0NFYyNS40OEMxMC4wOTYgMjYuNjExNSAxMS4wMTI1IDI3LjUyOCAxMi4xNDQgMjcuNTI4SDIzLjQwOEMyNC41Mzk1IDI3LjUyOCAyNS40NTYgMjYuNjExNSAyNS40NTYgMjUuNDhWMTEuMTQ0QzI1LjQ1NiAxMC4wMTI1IDI0LjUzOTUgOS4wOTYgMjMuNDA4IDkuMDk2Wk0xMi4xNDQgMjUuNDhIMjMuNDA4VjExLjE0NEgxMi4xNDRWMjUuNDhaIiBmaWxsPSIjNEE0QzRGIi8+Cjwvc3ZnPgo=" alt="" title="Copy to clipboard" aria-label="copy"></p></div></pre><p>From the output, we know that the function <code>computeE</code> is located at address <code>0x6609a0</code>. To look at the instructions around it, we can ask <code>objdump</code> to disassemble to binary (done by adding <code>-d</code>). The disassembled code looks like:</p><pre><div><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4zMzYgNUg4LjA0OEM2LjkxNjQ4IDUgNiA1LjkxNjQ4IDYgNy4wNDhWMjEuMzg0SDguMDQ4VjcuMDQ4SDIwLjMzNlY1Wk0yMy40MDggOS4wOTZIMTIuMTQ0QzExLjAxMjUgOS4wOTYgMTAuMDk2IDEwLjAxMjUgMTAuMDk2IDExLjE0NFYyNS40OEMxMC4wOTYgMjYuNjExNSAxMS4wMTI1IDI3LjUyOCAxMi4xNDQgMjcuNTI4SDIzLjQwOEMyNC41Mzk1IDI3LjUyOCAyNS40NTYgMjYuNjExNSAyNS40NTYgMjUuNDhWMTEuMTQ0QzI1LjQ1NiAxMC4wMTI1IDI0LjUzOTUgOS4wOTYgMjMuNDA4IDkuMDk2Wk0xMi4xNDQgMjUuNDhIMjMuNDA4VjExLjE0NEgxMi4xNDRWMjUuNDhaIiBmaWxsPSIjNEE0QzRGIi8+Cjwvc3ZnPgo=" alt="" title="Copy to clipboard" aria-label="copy"></p></div></pre><p>From this we can see what happens when <code>computeE</code> is called. The first instruction is <code>mov 0x8(%rsp),%rax</code>. This moves the content offset <code>0x8</code> from the <code>rsp</code> register to the <code>rax</code> register. This is actually the input argument <code>iterations</code> above; Go's arguments are passed on the stack.</p><p>With this information in mind, we are now ready to dive in and write code to trace the arguments for <code>computeE</code>.</p><p>To capture the events, we need to register a uprobe function and have a userspace function that can read the output. A diagram of this is shown below. We will write a binary called <code>tracer</code> that is responsible for registering the BPF code and reading the results of the BPF code. As shown, the uprobe will simply write to a perf-buffer, a linux kernel data structure used for perf events.</p><div><figure><img src="https://blog.pixielabs.ai/static/9f8b26f88f9b132440ef1b9d48b5a341/app-tracer.svg"><figcaption>High-level overview showing the Tracer binary listening to perf events generated from the App</figcaption></figure></div><p>Now that we understand the pieces involved, let's look into the details of what happens when we add an uprobe. The diagram below shows how the binary is modified by the Linux kernel with an uprobe. The soft-interrupt instruction (<code>int3</code>) is inserted as the first instruction in <code>main.computeE</code>. This causes a soft-interrupt, allowing the Linux kernel to execute our BPF function. We then write the arguments to the perf-buffer, which is asynchronously read by the tracer.</p><div><figure><img src="https://blog.pixielabs.ai/static/87301c7282e8f8270fee2afb9fe85c81/app-trace.svg"><figcaption>Details of how a debug trap instruction is used call a BPF program</figcaption></figure></div><p>The BPF function for this is relatively simple; the C code is shown below. We register this function so that it's invoked every time <code>main.computeE</code> is called. Once it's called, we simply read the function argument and write that the perf buffer. Lots of boilerplate is required to set up the buffers, etc. and this can be found in the complete example <a href="https://github.com/pixie-labs/pixie/blob/main/demos/simple-gotracing/trace_example/trace.go" target="_blank" rel="noopener noreferrer">here</a>.</p><pre><div><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4zMzYgNUg4LjA0OEM2LjkxNjQ4IDUgNiA1LjkxNjQ4IDYgNy4wNDhWMjEuMzg0SDguMDQ4VjcuMDQ4SDIwLjMzNlY1Wk0yMy40MDggOS4wOTZIMTIuMTQ0QzExLjAxMjUgOS4wOTYgMTAuMDk2IDEwLjAxMjUgMTAuMDk2IDExLjE0NFYyNS40OEMxMC4wOTYgMjYuNjExNSAxMS4wMTI1IDI3LjUyOCAxMi4xNDQgMjcuNTI4SDIzLjQwOEMyNC41Mzk1IDI3LjUyOCAyNS40NTYgMjYuNjExNSAyNS40NTYgMjUuNDhWMTEuMTQ0QzI1LjQ1NiAxMC4wMTI1IDI0LjUzOTUgOS4wOTYgMjMuNDA4IDkuMDk2Wk0xMi4xNDQgMjUuNDhIMjMuNDA4VjExLjE0NEgxMi4xNDRWMjUuNDhaIiBmaWxsPSIjNEE0QzRGIi8+Cjwvc3ZnPgo=" alt="" title="Copy to clipboard" aria-label="copy"></p></div></pre><p>Now we have a fully functioning end-to-end argument tracer for the <code>main.computeE</code> function! The results of this are shown in the video clip below.</p><div><figure><img src="https://blog.pixielabs.ai/static/4de8713a5b05e1f9132350f333572174/e2e-demo.gif"><figcaption>End-to-End demo</figcaption></figure></div><p>One of the cool things is that we can actually use GDB to see the modifications made to the binary. Here we dump out the instructions at the <code>0x6609a0</code> address, before running our tracer binary.</p><pre><div><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4zMzYgNUg4LjA0OEM2LjkxNjQ4IDUgNiA1LjkxNjQ4IDYgNy4wNDhWMjEuMzg0SDguMDQ4VjcuMDQ4SDIwLjMzNlY1Wk0yMy40MDggOS4wOTZIMTIuMTQ0QzExLjAxMjUgOS4wOTYgMTAuMDk2IDEwLjAxMjUgMTAuMDk2IDExLjE0NFYyNS40OEMxMC4wOTYgMjYuNjExNSAxMS4wMTI1IDI3LjUyOCAxMi4xNDQgMjcuNTI4SDIzLjQwOEMyNC41Mzk1IDI3LjUyOCAyNS40NTYgMjYuNjExNSAyNS40NTYgMjUuNDhWMTEuMTQ0QzI1LjQ1NiAxMC4wMTI1IDI0LjUzOTUgOS4wOTYgMjMuNDA4IDkuMDk2Wk0xMi4xNDQgMjUuNDhIMjMuNDA4VjExLjE0NEgxMi4xNDRWMjUuNDhaIiBmaWxsPSIjNEE0QzRGIi8+Cjwvc3ZnPgo=" alt="" title="Copy to clipboard" aria-label="copy"></p></div></pre><p>Here it is after we run the tracer binary. We can clearly see that the first instruction is now <code>int3</code>.</p><pre><div><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4zMzYgNUg4LjA0OEM2LjkxNjQ4IDUgNiA1LjkxNjQ4IDYgNy4wNDhWMjEuMzg0SDguMDQ4VjcuMDQ4SDIwLjMzNlY1Wk0yMy40MDggOS4wOTZIMTIuMTQ0QzExLjAxMjUgOS4wOTYgMTAuMDk2IDEwLjAxMjUgMTAuMDk2IDExLjE0NFYyNS40OEMxMC4wOTYgMjYuNjExNSAxMS4wMTI1IDI3LjUyOCAxMi4xNDQgMjcuNTI4SDIzLjQwOEMyNC41Mzk1IDI3LjUyOCAyNS40NTYgMjYuNjExNSAyNS40NTYgMjUuNDhWMTEuMTQ0QzI1LjQ1NiAxMC4wMTI1IDI0LjUzOTUgOS4wOTYgMjMuNDA4IDkuMDk2Wk0xMi4xNDQgMjUuNDhIMjMuNDA4VjExLjE0NEgxMi4xNDRWMjUuNDhaIiBmaWxsPSIjNEE0QzRGIi8+Cjwvc3ZnPgo=" alt="" title="Copy to clipboard" aria-label="copy"></p></div></pre><p>Although we hardcoded the tracer for this particular example, it's possible to make this process generalizable. Many aspects of Go, such as nested pointers, interfaces, channels, etc. make this process challenging, but solving these problems allows for another instrumentation mode not available in existing systems. Also, since this process works at the binary level, it can be used with natively compiled binaries for other languages (C++, Rust, etc.). We just need to account for the differences in their respective ABI's.</p><p>BPF tracing using uprobes comes with its own set of pros and cons. It's beneficial to use BPF when we need observability into the binary state, even when running in environments where attaching a debugger will be problematic or harmful (ex. production binaries). The biggest downside is the code required to get even trivial visibility into the application state. While BPF code is relatively accessible, it's complex to write and maintain. Without substantial high-level tooling, it's unlikely this can be used for generic debugging.</p><div><figure><img src="https://blog.pixielabs.ai/static/12645e1cb582041085ede1877e97c812/wavingnaut.svg"><figcaption></figcaption></figure></div><p>Go dynamic logging is something we are working on at Pixie. You can checkout <a href="https://docs.pixielabs.ai/tutorials/simple-go-tracing/" target="_blank" rel="noopener noreferrer">this</a> to see how Pixie traces Go applications running on K8s clusters. If this post's contents are interesting, please give <a href="https://pixielabs.ai/" target="_blank" rel="noopener noreferrer">Pixie</a> a try, or check out our <a href="https://pixielabs.ai/career" target="_blank" rel="noopener noreferrer">open positions</a>.</p><h2>References</h2><ul><li><a href="https://github.com/iovisor/gobpf" target="_blank" rel="noopener noreferrer">iovisor/gobpf</a></li><li><a href="https://github.com/iovisor/bcc" target="_blank" rel="noopener noreferrer">iovisor/bcc</a></li><li>GoPoland Meetup <a href="https://www.youtube.com/watch?v=SlcBq3xDc7I" target="_blank" rel="noopener noreferrer">Video</a> + <a href="https://www.slideshare.net/ZainAsgar/go-logging-using-ebpf" target="_blank" rel="noopener noreferrer">Slides</a></li><li>GoBangalore Meetup <a href="https://www.youtube.com/watch?v=0mxUU_--dDM&amp;feature=youtu.be" target="_blank" rel="noopener noreferrer">Video</a>. Checkout Below:</li></ul><iframe width="560" height="315" src="https://www.youtube.com/embed/0mxUU_--dDM?start=15" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div></div></div>]]>
            </description>
            <link>https://blog.pixielabs.ai/blog/ebpf-function-tracing/post/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24505862</guid>
            <pubDate>Thu, 17 Sep 2020 15:30:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[My Favorite Rust Function Signature]]>
            </title>
            <description>
<![CDATA[
Score 234 | Comments 111 (<a href="https://news.ycombinator.com/item?id=24505436">thread link</a>) | @brundolf
<br/>
September 17, 2020 | https://www.brandonsmith.ninja/blog/favorite-rust-function | <a href="https://web.archive.org/web/*/https://www.brandonsmith.ninja/blog/favorite-rust-function">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article itemprop="articleBody">
      

      

      

      


      <p>I've gotten really into writing parsers lately, and Rust has turned out to be
        the perfect language for that. In the course of my adventures, I came up with
        the following:</p>
      <pre><code><span>fn</span> tokenize<span>&lt;</span><span>'a</span><span>&gt;</span><span>(</span>code<span>:</span> <span>&amp;</span><span>'a</span> str<span>)</span> <span>-&gt;</span> <span>impl</span> Iterator<span>&lt;</span>Item<span>=</span><span>&amp;</span><span>'a</span> str<span>&gt;</span> <span>{</span>
  <span>...</span>
<span>}</span>
</code></pre>
      <p>and it really deepened my appreciation for Rust.</p>
      <h2 id="what-does-this-function-do%3F">What does this function do? </h2>
      <p>For those not familiar with parsing, tokenization is the first step of the
        process. It takes a raw code string, like this:</p>
      <pre><code>let a = "foo";
</code></pre>
      <p>and turns it into a linear series of meaningful tokens, like so:</p>
      <pre><code>["let", "a", "=", "\"foo\"", ";"]
</code></pre>
      <p>This phase isn't terribly complicated, but it simplifies the mental model for
        the next pass: constructing an "abstract syntax tree". It removes whitespace
        from the equation, bundles up segments like strings and numbers, and just
        generally makes the code in the next pass cleaner.</p>
      <p>The downside is that, if you perform this as a separate pass, your parser now
        has to iterate over all of the source code <em>twice</em>. This may not be the end of
        the world: tokenizing isn't the most expensive operation. But it isn't ideal,
        so some parsers combine the two passes into a single one, saving cycles at the
        expense of readability.</p>
      <h2 id="what's-going-on-in-the-rust-version%3F">What's going on in the Rust version? </h2>
      <p>I'll copy the signature here again for reference:</p>
      <pre><code><span>fn</span> tokenize<span>&lt;</span><span>'a</span><span>&gt;</span><span>(</span>code<span>:</span> <span>&amp;</span><span>'a</span> str<span>)</span> <span>-&gt;</span> <span>impl</span> Iterator<span>&lt;</span>Item<span>=</span><span>&amp;</span><span>'a</span> str<span>&gt;</span> <span>{</span>
  <span>...</span>
<span>}</span>
</code></pre>
      <p>There are several things going on here.</p>
      <p><code>&amp;str</code>, in Rust, is a "string slice". It's effectively a character pointer and a
        length. The contents of the slice are guaranteed to be in valid, alive memory.
        <code>&amp;'a str</code> is a string slice <em>with a lifetime</em>. The lifetime <code>'a</code>, to be
        exact. This lifetime describes a limited span of time in which the
        reference (and the full contents of the slice) are guaranteed to be in valid,
        alive memory. More on this later.</p>
      <p><code>Iterator&lt;Item=&amp;'a str&gt;</code> is an iterator over elements of type <code>&amp;'a str</code>. This
        is a <em>trait</em>, though, not a concrete type. Rust needs a concrete type with a
        fixed size when you're defining something like a function, but luckily we can
        say <code>impl Iterator&lt;Item=&amp;'a str&gt;</code>, which tells Rust, "fill in some type that
        implements <code>Iterator&lt;Item=&amp;'a str&gt;</code>, to be inferred at compile-time". This is
        very helpful because in Rust there are lots and lots of different concrete types
        for <code>Iterator</code>; applying something like a <code>map()</code> or a <code>filter()</code> returns a whole
        new concrete type. So this way, we don't have to worry about keeping the
        function signature up to date as we work on the logic.</p>
      <h2 id="so-what's-so-great-about-all-this%3F">So what's so great about all this? </h2>
      <p>Okay, so we have a function that takes a reference to a string slice and returns
        an iterator over string slices. Why's that special? There are two reasons.</p>
      <h3 id="iterators-let-you-treat-one-pass-like-it's-two">Iterators let you treat one pass like it's two </h3>
      <p>Remember how I said you traditionally have to pick between doing a separate
        tokenization pass, and doing a single pass with all the logic interleaved? With
        an iterator, you can have the best of both worlds.</p>
      <p>When this function completes, it hasn't yet iterated over the string. It hasn't
        allocated any kind of collection in memory. It returns a structure that's
        <em>prepared</em> to iterate over the input string slice and produce a sequence of new
        slices. When this value later gets <code>map()</code>ed into something else, or
        <code>filter()</code>ed, or any other <code>Iterator</code> transformations get applied, the stages
        of the process get interleaved, and the "loops" effectively get folded into a
        single one. By doing this, we're able to get the clean abstraction of a
        tokenizing "pass" without the runtime overhead of a second loop!</p>
      <p>But other languages have iterators. Rust's may be extra powerful and ergonomic,
        but they aren't a totally unique feature. The next part is very much unique to
        Rust.</p>
      
      <p>The <code>tokenize()</code> function doesn't allocate any new memory for a collection of
        tokens. That's great. But what may be less obvious is that it <em>also</em> doesn't
        allocate any memory for the tokens themselves! Each string slice representing a
        token is a <em>direct pointer to part of the original string</em>.</p>
      <p>You can do this in C/C++, of course, but there's a danger: if those tokens are
        ever accessed after the original code string has been freed, you'll have a
        memory error.</p>
      <p>For example: let's say you open a file and load the source code from it, and
        store the result in a local variable. Then you <code>tokenize()</code> it and send the
        tokens on to somewhere else outside of the function where the original string
        lived. Voil√†, you've got a <a href="https://en.wikipedia.org/wiki/Dangling_pointer">use-after-free error</a>.</p>
      <p>One way to guard against this is by copying each string segment into a <em>new</em>
        string, allocated on the heap, which allows you to safely pass it on after the
        original string is gone. But this comes with a cost: creating, copying, and
        eventually disposing of each of those new strings takes time (and memory). Code
        down the line also has to be aware that it's responsible for de-allocating those
        strings, otherwise they'll leak.</p>
      <p>This is where the magic of lifetimes comes into play.</p>
      <p>Rust prevents the above situation entirely. Normally, though, to accomplish this
        a <code>&amp;str</code> coming into a function from elsewhere must be assumed to be <em>static</em>,
        or to be alive for the entire duration of the program's execution. This is the
        status assigned to, for example, a string literal that you've manually entered
        into your Rust code. Rust doesn't know, in the context of the function, how
        long that reference will be valid, so it must be pessimistic.</p>
      <p><strong>But.</strong> That little <code>'a</code> says: "these things all live for the same span of time". We
        can <em>assert</em> that the original source code string lives at least as long as the
        <em>tokens</em> that reference it. By doing so, Rust can reason about whether or not
        those resulting token references are valid at a given point, and therefore
        doesn't have to assume them to be static! We can do <em>whatever we want</em> with
        those tokens and the compiler will guarantee that they always point to something
        valid, even if the source code is loaded in dynamically at runtime (from a file
        or otherwise). If we find out later via a compiler error that they really do
        need to outlive the source string, then we can copy them ("take ownership") at
        that point. If the compiler doesn't force us to do so, we know we're safe,
        and we know we can continue using the most efficient possible approach,
        <em>fearlessly</em>.</p>
      <p>What we've effectively done is written the most optimistic possible function
        (in terms of memory safety), with no downsides, because the Rust compiler will
        tell us if we're misusing it and force us to then "step down" to whatever level
        of extra accommodation is needed.</p>
      <h2 id="conclusion">Conclusion </h2>
      <p>I've been using (and loving) Rust for about a year and a half now. And there are
        many things to love, but when I got this function working I immediately saw it
        as a microcosm of what really sets the language apart. This is something that
        you <strong>cannot do</strong> both a) this safely and b) this efficiently <strong>in any other
language</strong>. This is the power of Rust.</p>


    </article></div>]]>
            </description>
            <link>https://www.brandonsmith.ninja/blog/favorite-rust-function</link>
            <guid isPermaLink="false">hacker-news-small-sites-24505436</guid>
            <pubDate>Thu, 17 Sep 2020 15:00:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The stories we tell ourselves]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24505291">thread link</a>) | @ochronus
<br/>
September 17, 2020 | https://ochronus.online/stories-we-tell-ourselves/ | <a href="https://web.archive.org/web/*/https://ochronus.online/stories-we-tell-ourselves/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="text">
<p>We have a mechanism that can conceive unhappiness, difficulty changing habits, relationship problems, frustration, anger, and disappointment. We are usually not aware, but it‚Äôs happening continuously and in all of us.</p>
<h2>It‚Äôs the stories we tell ourselves.</h2>
<blockquote><p>‚ÄúWe tell ourselves stories in order to live‚Ä¶We look for the sermon in the suicide, for the social or moral lesson in the murder of five. We interpret what we see, select the most workable of the multiple choices. We live entirely, especially if we are writers, by the imposition of a narrative line upon disparate images, by the ‚Äúideas‚Äù with which we have learned to freeze the shifting phantasmagoria which is our actual experience.‚Äù </p><cite><em>&nbsp;<strong>Joan Didion</strong>, The White Album</em></cite></blockquote>
<p>A good story can entertain, motivate, teach valuable lessons, and solidify good habits.</p>
<p>A bad story can demotivate, cause frustration and anger, and curb our capability to be fully ourselves.</p>
<p>These stories are not necessarily false but usually, they don‚Äôt tell the entire truth ‚Äî just one perspective. Another person could look at the same situation and tell a very different story. Telling ourselves stories is natural ‚Äî we all do it, all the time. There‚Äôs nothing inherently wrong with it. That said&nbsp;<strong><em>if we aren‚Äôt aware of this happening, we won‚Äôt understand how they shape our mood, actions, happiness, and relationships.</em></strong></p>
<h3 id="an-example-of-such-a-story">An example of such a story:</h3>
<p><strong>The event:</strong>&nbsp;You submitted a pull request for review after half a day of work. Another engineer asked you to change half of your code and to increase your test coverage.</p>
<p><strong><em>Your story:</em></strong>&nbsp;A nitpicking a**hole commented on every single thing I did in that pull request; I guess he has nothing better to do. I wish people stopped blocking me from making progress. Why are they always making game of me?!</p>
<p><strong><em>The other engineer‚Äôs story:</em></strong>&nbsp;Some terrible code almost went live today; thank god I checked that pull request! Why does it always have to be me to watch quality? It‚Äôs so sad it‚Äôs only important to me in this whole company‚Ä¶</p>
<p><strong><em>A bystander‚Äôs story:</em></strong>&nbsp;Whoa, that was some tense back-and-forth in the comments of that pull request. I wish people were just nicer to each other; we all want to do a good job at the end of the day, right?</p>
<h2 id="roots-of-these-stories">Roots of these stories</h2>
<p>The most common origins of these stories are cognitive biases, our self-image made by / combined with our limiting beliefs, and our fears.</p>
<h3 id="our-self-image-and-limiting-beliefs"><strong>Our self-image and limiting beliefs</strong></h3>
<div><figure><img loading="lazy" src="https://cdn.ochronus.online/wp-content/uploads/2020/09/self-image-1024x370.jpeg" alt="" width="596" height="215" srcset="https://cdn.ochronus.online/wp-content/uploads/2020/09/self-image-1024x370.jpeg 1024w, https://cdn.ochronus.online/wp-content/uploads/2020/09/self-image-300x108.jpeg 300w, https://cdn.ochronus.online/wp-content/uploads/2020/09/self-image-768x278.jpeg 768w, https://cdn.ochronus.online/wp-content/uploads/2020/09/self-image.jpeg 1284w" sizes="(max-width: 596px) 100vw, 596px" data-old-src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1OTYiIGhlaWdodD0iMjE1IiB2aWV3Qm94PSIwIDAgNTk2IDIxNSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==" data-src="https://cdn.ochronus.online/wp-content/uploads/2020/09/self-image-1024x370.jpeg" data-srcset="https://cdn.ochronus.online/wp-content/uploads/2020/09/self-image-1024x370.jpeg 1024w, https://cdn.ochronus.online/wp-content/uploads/2020/09/self-image-300x108.jpeg 300w, https://cdn.ochronus.online/wp-content/uploads/2020/09/self-image-768x278.jpeg 768w, https://cdn.ochronus.online/wp-content/uploads/2020/09/self-image.jpeg 1284w"></figure></div>
<p>Ultimately we all have an idea about what kind of a person we are. This idea subconsciously influences how we think, react, and make decisions. The image is usually closely tied to our fundamental values and worldview. Most of us want to be&nbsp;<em>good persons</em>&nbsp;in the end. What ‚Äòright‚Äô is is defined by these very values and core beliefs. Our self-image influences the stories we tell ourselves because we‚Äôre looking for ways to find justification in our day-to-day experience.</p>
<p>Thus this image can limit our perceived set of options and understanding of the world around us.</p>
<p>Related to the personas in the previous example:</p>
<ul><li>I‚Äôm the guy who gets things done (<em>might imply that I think others are slowpokes</em>)</li><li>As a professional software engineer I am the sole guardian of quality in the company (<em>might imply that I think others are careless or unprofessional</em>)</li><li>I‚Äôm the kind of person who cares for others‚Äô feelings (<em>might imply that I think others have lower EQ</em>)</li></ul>
<p>Of course these are simply bits and pieces of the whole image.</p>
<p>In all of the narratives above there are (hopefully unfounded) assumptions, lots of jumping to conclusions and unproductive, limiting language. In this particular situation, this locks the actors in the status quo, lowering the hope for change. It feels like a stalemate unless someone is willing to be more open.</p>
<p>By the way I‚Äôve written a bit about this earlier in the post titled&nbsp;<a href="https://ochronus.online/this-is-how-i-am/"><em>This is how I am</em></a></p>
<h3 id="our-fears"><strong>Our fears</strong></h3>
<div><figure><img loading="lazy" src="https://cdn.ochronus.online/wp-content/uploads/2020/09/fear.jpg" alt="" width="158" height="158" srcset="https://cdn.ochronus.online/wp-content/uploads/2020/09/fear.jpg 630w, https://cdn.ochronus.online/wp-content/uploads/2020/09/fear-300x300.jpg 300w, https://cdn.ochronus.online/wp-content/uploads/2020/09/fear-150x150.jpg 150w" sizes="(max-width: 158px) 100vw, 158px" data-old-src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNTgiIGhlaWdodD0iMTU4IiB2aWV3Qm94PSIwIDAgMTU4IDE1OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==" data-src="https://cdn.ochronus.online/wp-content/uploads/2020/09/fear.jpg" data-srcset="https://cdn.ochronus.online/wp-content/uploads/2020/09/fear.jpg 630w, https://cdn.ochronus.online/wp-content/uploads/2020/09/fear-300x300.jpg 300w, https://cdn.ochronus.online/wp-content/uploads/2020/09/fear-150x150.jpg 150w"></figure></div>
<p>Fear also changes the kind of stories you tell yourself. Living in fear means giving up agency, seeing yourself as a passive spectator or a victim. It means seeing yourself as being controlled by circumstances, the actions of others, or your own emotions. And once the story you tell yourself becomes the story of a victim, you will be more and more likely to think and behave like a victim.</p>
<p>In the story above, you might be consciously or subconsciously afraid to seem incompetent or even fear losing your job regardless of how unrealistic that sounds. These fears are sometimes tightly coupled with your self image and automatically take control when that image gets endangered by the situation. These unresolved fears usually present themselves in the form of narratives or stories we hold in our minds about who we are and what we deserve.&nbsp;</p>
<h3 id="cognitive-biases"><strong>Cognitive biases</strong></h3>
<div><figure><img loading="lazy" src="https://cdn.ochronus.online/wp-content/uploads/2020/09/Bias_Beliefs-1024x334.jpg" alt="" width="622" height="202" srcset="https://cdn.ochronus.online/wp-content/uploads/2020/09/Bias_Beliefs-1024x334.jpg 1024w, https://cdn.ochronus.online/wp-content/uploads/2020/09/Bias_Beliefs-300x98.jpg 300w, https://cdn.ochronus.online/wp-content/uploads/2020/09/Bias_Beliefs-768x251.jpg 768w, https://cdn.ochronus.online/wp-content/uploads/2020/09/Bias_Beliefs.jpg 1268w" sizes="(max-width: 622px) 100vw, 622px" data-old-src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MjIiIGhlaWdodD0iMjAyIiB2aWV3Qm94PSIwIDAgNjIyIDIwMiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==" data-src="https://cdn.ochronus.online/wp-content/uploads/2020/09/Bias_Beliefs-1024x334.jpg" data-srcset="https://cdn.ochronus.online/wp-content/uploads/2020/09/Bias_Beliefs-1024x334.jpg 1024w, https://cdn.ochronus.online/wp-content/uploads/2020/09/Bias_Beliefs-300x98.jpg 300w, https://cdn.ochronus.online/wp-content/uploads/2020/09/Bias_Beliefs-768x251.jpg 768w, https://cdn.ochronus.online/wp-content/uploads/2020/09/Bias_Beliefs.jpg 1268w"></figure></div>
<p>A cognitive bias is a systematic pattern of deviation from norm or rationality in judgment. They are basically ‚Äòshortcuts‚Äô our brains take so it can increase our mental efficiency by enabling us to make quick decisions without any conscious deliberation. Cognitive biases impact us in many areas of life, including social situations, memory recall, what we believe, and our behavior.</p>
<p>Some relevant and common cognitive biases from the staggering list of more than 180:</p>
<h4 id="self-serving-bias">Self-serving bias</h4>
<p>Self-serving bias is our tendency to blame external forces when bad things happen and give ourselves credit when good things happen. Although it can mean evading personal responsibility for your actions, self-serving bias is a defense mechanism that protects your self-esteem. In the example above, this means that if your pull request gets thumbs up from everyone, you attribute that to you being a fantastic engineer. On the other hand, if you get three comments asking you to change things, you might see others as nitpickers or your environment to be non-supportive instead of realizing you might have some room for improvement.</p>
<h4 id="confirmation-bias">Confirmation bias</h4>
<p>Confirmation bias, also known as confirmatory bias or the ‚Äúmyside bias,‚Äù is people‚Äôs tendency to seek out information that supports something they already believe. This type of bias affects our critical thinking, causing people to remember the hits and forget the misses ‚Äî a flaw in human reasoning. People will often cue into things that matter to them (the things that support their own beliefs) and dismiss those that don‚Äôt. Think about the other engineer overly obsessed with test coverage.</p>

<p>The tendency to attribute greater weight and accuracy to an authority figure‚Äôs opinion is at play here. Authority bias is the tendency to blindly follow or believe the instructions and views of a person in authority. We have a deeply rooted sense of duty to obey authority. How do you react when you get a comment on your pull request from a senior engineer you respect? How about if you get the same comment from a junior who just recently started at the company?</p>
<h2 id="so-what-can-we-do-about-it">So what can we do about it?</h2>
<p>Don‚Äôt forget that&nbsp;<em>we are the storytellers</em>&nbsp;‚Äì we have full control over the stories we make up. Everything starts with&nbsp;<strong>awareness</strong>. Stories are part of the software of our brains. They influence how we act, what‚Äôs important, and what to do when something goes wrong. But every software program has bugs. Awareness is your first step towards debugging.</p>
<p>Stop from time to time and think about the possibility that the story you‚Äôve just created is nothing more than a story. Consider alternative stories. Try telling the same story from other characters‚Äô side, think about what their narrative would look like.</p>
<p>Next time you find yourself in an upsetting situation, consider changing your story. Try this exercise: Recognize and acknowledge any feelings of fear. Hint: you may need to look underneath your anger! Ask yourself, what is it about this situation that is so upsetting? What do you believe to be ‚Äútrue‚Äù about it that feels threatening to you? As pretty much anything else, fear can be tackled one step at a time. There are ways to re-learn to say what you mean and to do what you feel is right. The good news here is that self-reinforcement works both ways. Once you‚Äôve practiced a bit and proven to yourself that it works (and that it‚Äôs less complicated than you thought), it gets easier to continue doing it.</p>
<p>We also must&nbsp;<strong>allow ourselves to be wrong.</strong>&nbsp;If we want to get closer to objective truths, we have to be able and ready to admit we were wrong, especially in the face of new data. If we can‚Äôt admit defeat, it makes us less capable of making discoveries in this world. We can avoid biases by being aware of our belief systems, whether our belief is for a religion, a political ideology, a cultural worldview, etc.. Let‚Äôs be open to disconfirmation, and allow ourselves to be wrong.</p>
<p>Self-compassion is an instrumental skill for reducing defensiveness and increasing your self-improvement motivation. It involves being kind and forgiving towards yourself, understanding that you are human and that other humans experience the same sort of experiences and failure and being able to identify uncomfortable thoughts without judging them.</p>
<blockquote><p>‚ÄúWho are we but the stories we tell ourselves, about ourselves, and believe?‚Äú </p><cite><em><strong>Scott Turow</strong></em></cite></blockquote>
<h2 id="some-fuel-for-further-thoughts">Some fuel for further thoughts</h2>
<p>How do you look like as a character in others‚Äô stories? Do you like that character? What can you do so that character goes through some positive development?</p>
<h2 id="in-case-you-want-to-read-more-about-the-topics-in-this-article">In case you want to read more about the topics in this article:</h2>
<ul><li>I highly recommend&nbsp;<a href="http://www.ericberne.com/games-people-play/" target="_blank" rel="noopener">‚ÄòGames People Play‚Äô by Eric Berne</a>&nbsp;from 1964 and it‚Äôs sequel&nbsp;<a href="http://www.ericberne.com/what-do-you-say-after-you-say-hello/" target="_blank" rel="noopener">‚ÄòWhat Do You Say After You Say Hello?‚Äô</a>&nbsp;from 1970. The book didn‚Äôt age particularly well regarding some topics but the basic principle holds.</li><li>About cognitive bias: check out this beautiful&nbsp;<a href="https://www.visualcapitalist.com/wp-content/uploads/2017/09/cognitive-bias-infographic.html" target="_blank" rel="noopener">visual map of cognitive biases</a>&nbsp;or if you like textual data more browse&nbsp;<a href="https://en.wikipedia.org/wiki/List_of_cognitive_biases" target="_blank" rel="noopener">the relevant Wikipedia article</a>&nbsp;The book&nbsp;<a href="https://www.rickhanson.net/books/buddhas-brain/" target="_blank" rel="noopener">‚ÄòBuddha‚Äôs Brain: The Practical Neuroscience of Happiness, Love, and Wisdom.‚Äô</a>&nbsp;‚Äì I know, such clickbaity title, but trust me, this book is pure gold.</li></ul>
 </div></div>]]>
            </description>
            <link>https://ochronus.online/stories-we-tell-ourselves/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24505291</guid>
            <pubDate>Thu, 17 Sep 2020 14:49:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Shutting Down NavHere]]>
            </title>
            <description>
<![CDATA[
Score 52 | Comments 31 (<a href="https://news.ycombinator.com/item?id=24505232">thread link</a>) | @jermaustin1
<br/>
September 17, 2020 | https://jeremyaboyd.com/post/shutting-down-navhere | <a href="https://web.archive.org/web/*/https://jeremyaboyd.com/post/shutting-down-navhere">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
        <div>
            <div>
                <div>
                    <p>So over the last few weeks and months, I have made the not-so-easy decision to shut down NavHere. It was a product both birthed and killed by a change to GoDaddy's domain forwarding service.</p>
<p>GoDaddy, for all it's faults had a really decent domain/link forwarding and masking product, and best of all it was FREE. This all changed in 2018 with a series of changes that eventually broke domain forwarding. If you forwarded your domain, you would lose your path, if you had link forwarding enabled, you couldn't forward the domain, and if you had domain masking, you would again, lose the path.</p>
<p>I had multiple domains utilizing this, and my buddy's Austin's domain stopped forwarding to his university professor page.</p>
<p>When we realized what happened, we built NavHere, a "highly available" (failover-able with floating IP, but not balanced), vanity domain and link forwarding service. </p>
<p>I built out the infrastructure on Digital Ocean </p>
<ul>
<li>1 web application server (for the domain administration)</li>
<li>2 forwarding servers (1 primary - 1 failover with floating IP - and it was imaged so spinning up a new one took 30 seconds)</li>
<li>a 3-node cluster of database servers. </li>
</ul>
<p>All together it only cost about $55/mo to host, so figuring I only need 10 signups a month to cover the cost, I went off to the GoDaddy support forums where everyone was complaining to start letting people know... and got banned ALMOST immediately. A handful of people did see those posts, though and were the first to sign up. A couple of them even PAID! I just KNEW I was on my way to a million dollars in ARR. Then silence.</p>
<p>A couple of weeks after launching, I decided to reach out to a former manager and sell them on it. I knew they were paying around $15k per month for a similar service, and secured an "SMS of Intent" from my former manager stating they would switch over to us providing we gave them an API to manage their domains and links. </p>
<p><strong>Yes! Profitability here we come!</strong></p>
<p>In the couple of weeks from that initial enthusiasm to when I finally secured and exposed the internal API, my former manager left the company. There had been a series layoffs, budget freezes, and an emphases on outsourcing. So even though NavHere would have saved them $162k/year, there was no one there who would/could approve it. Again back to square one. With only a few paying customers, and still losing around $40/mo (a tiny rounding error, no doubt, but still, a loss).</p>
<p>By the end of  2018, we had hundreds of free-trial users, and were serving 100s of thousands of forwarding requests each day. But we had only converted a few paying customers (it was in the low 10s of paying customers), and most of those sales were VERY hands on. I was having to explain DNS to small business owners who all they know is their GoDaddy stopped working. It would some times take over a week from when they first contacted to when they had finally set up their DNS records, and another week before they would set up their DNS records <strong>correctly</strong>, and all of that for only $9/year. It wasn't sustainable. </p>
<p><strong>It wasn't fun.</strong></p>
<p>And then, <strong>as quickly as they broke it</strong>, in mid 2019, GoDaddy decided they were tired of people complaining and fixed/reverted/whatever the breaking changes they made, and since then, we have not had a single new paying customer sign up (rightly so, I feel). And now, all but a couple of paying customers have left - I hope back to GoDaddy's free domain forwarding.</p>
<p>So with that, I have decided to shut down NavHere effective 2020-10-31. </p>
<p>I know I said it wasn't fun, but <strong>that is a lie</strong>. Anytime you build something that is useful to someone, it <strong>IS</strong> fun. What becomes less fun is the after-building part of running the business.</p>
<p>It <strong>was</strong> fun; it <strong>was</strong> exciting; but NavHere is <strong>no longer needed</strong>. And that <strong>is</strong> sad.</p>

                </div>
            </div>
        </div>
    </article></div>]]>
            </description>
            <link>https://jeremyaboyd.com/post/shutting-down-navhere</link>
            <guid isPermaLink="false">hacker-news-small-sites-24505232</guid>
            <pubDate>Thu, 17 Sep 2020 14:45:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[SuperAnnotate Desktop: A better alternative to free annotation tools]]>
            </title>
            <description>
<![CDATA[
Score 30 | Comments 4 (<a href="https://news.ycombinator.com/item?id=24505211">thread link</a>) | @tigranhakobian
<br/>
September 17, 2020 | https://blog.superannotate.com/superannotate-desktop-a-better-alternative-to-free-annotation-tools | <a href="https://web.archive.org/web/*/https://blog.superannotate.com/superannotate-desktop-a-better-alternative-to-free-annotation-tools">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p><span id="hs_cos_wrapper_post_body" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text">
<p><img src="https://blog.superannotate.com/hs-fs/hubfs/SuperAnnotate%20OpenCV%20partnership-1.png?width=1200&amp;name=SuperAnnotate%20OpenCV%20partnership-1.png" alt="SuperAnnotate OpenCV partnership-1" width="1200" srcset="https://blog.superannotate.com/hs-fs/hubfs/SuperAnnotate%20OpenCV%20partnership-1.png?width=600&amp;name=SuperAnnotate%20OpenCV%20partnership-1.png 600w, https://blog.superannotate.com/hs-fs/hubfs/SuperAnnotate%20OpenCV%20partnership-1.png?width=1200&amp;name=SuperAnnotate%20OpenCV%20partnership-1.png 1200w, https://blog.superannotate.com/hs-fs/hubfs/SuperAnnotate%20OpenCV%20partnership-1.png?width=1800&amp;name=SuperAnnotate%20OpenCV%20partnership-1.png 1800w, https://blog.superannotate.com/hs-fs/hubfs/SuperAnnotate%20OpenCV%20partnership-1.png?width=2400&amp;name=SuperAnnotate%20OpenCV%20partnership-1.png 2400w, https://blog.superannotate.com/hs-fs/hubfs/SuperAnnotate%20OpenCV%20partnership-1.png?width=3000&amp;name=SuperAnnotate%20OpenCV%20partnership-1.png 3000w, https://blog.superannotate.com/hs-fs/hubfs/SuperAnnotate%20OpenCV%20partnership-1.png?width=3600&amp;name=SuperAnnotate%20OpenCV%20partnership-1.png 3600w" sizes="(max-width: 1200px) 100vw, 1200px"></p>

<h3><strong>As part of our partnership with OpenCV, we are launching the best free annotation tool for the computer vision community.</strong></h3>

<p><em>In this post, I will be introducing SuperAnnotate‚Äôs new free-to-use desktop app, discuss some of the reasons why we built it, and share more about many of the features which we feel will dramatically increase the speed, accuracy, and efficiency of annotation projects. There is a massive functionality gap between free and commercial image annotation tools. SuperAnnotate Desktop is closing this gap by providing the fastest all-inclusive software tool for computer vision engineers to complete their annotation tasks.&nbsp;</em></p>
<!--more-->
<h3><strong><span>Outline</span></strong></h3>
<ul>
<li>The world of free image annotation tools</li>
<li>Introducing SuperAnnotate Desktop‚Ää</li>
<li>Eight reasons why you should use SuperAnnotate Desktop‚Ää</li>
<li>Importing annotations from other platforms</li>
<li>The future of SuperAnnotate Desktop</li>
</ul>
<h2><strong>1. The World of Free Image Annotation Tools</strong></h2>
<p>Instead of writing a rather long introduction on the universe of free image annotation tools, I will quickly summarize many of the well-written articles, blogs, and websites covering the topic. Probably the most informative website discussing free tools is <a href="https://awesomeopensource.com/"><span>https://awesomeopensource.com/</span></a>, which ranks open source tools based on the number of&nbsp; GitHub stars each tool has received. The list for image annotation tools can be found<a href="https://awesomeopensource.com/projects/annotation-tool"> <span>here</span></a>. According to the list, it becomes apparent that CVAT (managed by Intel) and VOTT (managed by Microsoft) are among the most popular free tools for image annotation. There are several other interesting articles that include CVAT and VOTT among the best annotation tools available for free. Here are a few examples:<a href="https://bohemian.ai/blog/image-annotation-tools-which-one-pick-2020/"> <span>Bohemian.ai</span></a>,<a href="https://www.sicara.ai/blog/2019-09-01-top-five-open-source-annotation-tools-computer-vision"> <span>Sicara.ai</span></a>,<a href="https://en.wikipedia.org/wiki/List_of_manual_image_annotation_tools"> <span>Wikipedia</span></a>.</p>
<p>These articles are wonderful resources, and I strongly recommend reading them to learn about the different tools available and even try some of them if you have the time. However, what you soon start to realize is that free tools are lacking in many areas resulting in slow speeds, disjointed project management, and an overall non-intuitive user experience - especially when you consider what we‚Äôve come to expect from software today.&nbsp;</p>

<h2><strong>2. </strong><strong>Introducing SuperAnnotate Desktop‚Ää</strong><strong>‚Ää</strong></h2>
<p>The founding team of SuperAnnotate (my brother and I) were PhD students in biomedical imaging and computer vision, respectively. During the course of our PhDs, we spent a considerable amount of time working with images, particularly with annotations. In 2018, free annotation tools were as incredibly inconvenient as they are today, and it was quite painful using them. They were not only extremely slow and clunky, but also lacked many key annotation functionalities. These pains led us to launch SuperAnnotate.&nbsp;</p>
<p>Since founding SuperAnntotate, we have always been focused on releasing software that is lightning-fast, easy to use, and extremely functional for all types of computer vision tasks. Over the last two years, we‚Äôve worked hard to build what we think is the fastest and most efficient annotation platform for computer vision pipelines. And, as we came from academia, we also wanted to make a version of our platform easily installable and free for anyone, to help eliminate many of the pains my brother and I faced as PhD students.&nbsp;</p>
<p>Back in June we announced our partnership with OpenCV to bring a free annotation tool to the broader computer vision community that is a significant upgrade over the current free tools available.</p>
<p>A few days ago we released software for <strong>Mac</strong>, <strong>Windows</strong> and <strong>Linux</strong> users. Despite being the initial release, the software already provides multiple advanced features that will accelerate your labeling process by 3‚Äì5x.</p>
<p><!--HubSpot Call-to-Action Code --><span id="hs-cta-wrapper-d65647e7-d436-4d5f-831c-82dae9c73cef"><span id="hs-cta-d65647e7-d436-4d5f-831c-82dae9c73cef"><!--[if lte IE 8]><div id="hs-cta-ie-element"></div><![endif]--><a href="https://cta-redirect.hubspot.com/cta/redirect/7839526/d65647e7-d436-4d5f-831c-82dae9c73cef"><img id="hs-cta-img-d65647e7-d436-4d5f-831c-82dae9c73cef" src="https://no-cache.hubspot.com/cta/default/7839526/d65647e7-d436-4d5f-831c-82dae9c73cef.png" alt="Download SuperAnnotate Desktop"></a></span></span><!-- end HubSpot Call-to-Action Code --></p>
<p>We will keep updating our desktop app on a monthly basis and would love to get the community‚Äôs feedback on features you all like, as well as the ones that are missing. We‚Äôre excited to be a bigger part of the OpenCV community, and to help provide the best computer vision tools to its members.</p>

<p><img src="https://lh3.googleusercontent.com/yWBnNCxg3fqyUsM_kxoSPxZ2ELSDlAGx2q4y_xKmqHYZBBc2IceePuyJbsjzCXyYCDtVm8-66hTbIXoqCS01eJC8RiINmUJqolVcOyu2IBLmFCFPM6t2dG6WgtIzwt397BGsNv9i" width="624" height="391" alt="SuperAnnotate Desktop free annotation tool"></p>

<h2><strong>3. Eight reasons why you should use SuperAnnotate Desktop&nbsp;</strong></h2>
<p>In this section, I will do a deeper dive into some of the features that make our app unique compared to some of the most popular alternatives. As I mentioned above, the paid version of our platform is focused on delivering lightning-fast speed, robust workflows, and a delightful user experience. We tried to bring that focus (and a few of the features) into our desktop app. Here we go:&nbsp;</p>
<p><em>Note: I strongly recommend watching the video below which summarizes all these components.</em></p>

<div data-service="youtube" data-responsive="true"><div><p data-mce-style="position: relative; overflow: hidden; max-width: 100%; padding-bottom: 56.25%; margin: 0px;"><iframe width="480" height="270" src="https://www.youtube.com/embed/_wFYtQY3v14?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" xml="lang" data-mce-src="https://www.youtube.com/embed/_wFYtQY3v14?feature=oembed" data-mce-style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; border: none;"></iframe></p></div></div>

<p><strong>3.1 Born out of SuperAnnotate‚Äôs Core Platform</strong>&nbsp;‚Äî‚Ää We‚Äôve spent the last two years and we have invested hundreds of thousands of engineering hours and millions of dollars on the core web version of SuperAnnotate, building what we feel is the fastest and most efficient annotation platform for computer vision. It incorporates feedback from annotators working hundreds of thousands of hours in the web version of our platform as well. This has allowed us to deliver our desktop editor with some of the designs, features, and refinements from our core product offering. We hope the result is a 100% free product that is delightful, feature-rich, and professional grade.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p><strong>3.2 Advanced polygon tool‚Ää</strong>‚Äî‚ÄäPolygon annotation is often the most time-consuming annotation task. Anyone who has tried free annotation tooling knows how poor the experience can be. We made several additions to traditional polygon tools in order to make manual polygon creation and editing much faster. Some of these features include:</p>
<ul>
<li><em>Pen-polygon tool ‚Ää</em>‚Äî‚Ääuse the polygon as a pen making curved annotations much faster</li>
<li><em>Point addition/removal </em>‚Äî<em> Add</em> <em>and remove</em> polygon points with just a couple of clicks<strong>&nbsp;</strong></li>
<li><em>Edit polygon</em>‚Ää‚Äî‚Ää Substantially increase the speed of editing polygons with our pen polygon tool&nbsp;</li>
<li><em>Share polygon boundaries</em>‚Ää‚Äî‚Äädraw polygons with shared boundaries 2x faster than traditional tools</li>
<li><em>Polygon move</em><span>/group/delete ‚Äî‚Ääselect, drag, drop, or delete individual or groups of polygons wherever you want</span></li>
</ul>
These are just some of the features that allow us to reduce polygon annotation times by 20-60% while making polygon annotations significantly more accurate.&nbsp;
<p><strong>3.3 Filtering </strong>‚Ää‚Äî‚Ää Most annotation tools lack the ability to filter images. Yet we have found that class filtering has a dramatic impact on speeding up the annotation review process. Through SuperAnnotate‚Äôs filtering menu, users can display only images with certain classes they are interested in reviewing, avoiding the need to comb through all of the images and saving tremendous amounts of time.&nbsp;</p>
<p><strong>3.4 Tracking multiple objects between frames</strong>‚Ää‚Äî‚Ää Tracking multiple objects between consecutive frames can dramatically improve the annotation experience while also making annotating much faster. Our desktop app allows users to select multiple objects and perform operations such as move, delete, group, copy, paste, and duplicate. Users can copy and duplicate annotations in successive frames while keeping the same attribute ID so that a particular attribute can be tracked through multiple frames easily.&nbsp;</p>
<p><strong>3.5 Huge list of shortcuts</strong>‚Ää‚Äî Gamers and power users of tools like excel and photoshop know how a robust list of shortcuts can both improve the user experience and add considerable speed. That was why we made a huge list of shortcuts for actions like tool selection, on-screen navigation, copy/paste/group/ungroup objects, switching between frames, and others. All shortcuts take place on the left side of the keyboard (similar to gaming), so your right hand can stay focused on the mouse, and your left hand does not have to move while finding the right shortcut.&nbsp;</p>
<p><strong>3.6 Labeling Flexibility</strong> ‚Ää‚Äî‚ÄäCurrent platforms (both free and paid) limit you to one labeling workflow: you set the attributes and then draw the shapes. Oftentimes, it can be significantly more efficient to have different workflows such as drawing shapes first, or copying classes between instances. With SuperAnnotate, we allow for a wide range of labeling workflows, giving users the flexibility they need to be most efficient.</p>
<p><strong>3.7 Classes/attributes/point labels ‚Ää</strong>‚Äî‚ÄäCreating, adding, or deleting classes and attributes is made very simple in the SuperAnnotate desktop app. Users can easily import classes from previous projects saving the time needed to define projects. In addition, we allow users to annotate individual points with free text. This can have multiple uses such as, describing the object by a sentence, giving a tag to the object, or describing the specific point in the polygon (e.g. rear-right wheel).</p>
<p><strong>3.8 Leveling up your annotations</strong>‚Ää‚Äî‚ÄäAs your annotation needs increase, you will likely find yourself looking for things like increased automations, ML features, more robust project management, detailed quality assurance, team collaboration, and user roles. You might also find yourself needing outsourced annotation teams. At SuperAnnotate, we can satisfy all of these needs and much more via our core platform. <span>Our core platform leverages ML and workflow-based features to help computer vision teams increase annotation speed by up to 10x, while dramatically improving the quality of training data and increasing the efficiency of managing annotation projects. We also have integrated services on the platform, giving customers the ability to access thousands of professionally managed outsourced annotators armed with our lightning-fast tooling. If you are interested in learning more about our core platform and services, please fill out </span><a href="https://www.superannotate.com/contacts?utm_source=blog&amp;utm_medium=article&amp;utm_campaign=SuperAnnotate_Desktop_Launch" rel="noopener"><span>this form</span></a><span>.&nbsp;</span></p>

<h2><strong>4. Importing annotations from other platforms or open-source tools</strong></h2>
<p>Migrating to SuperAnnotate from other software is something important to our customers. This was a common request from our users as many of them wanted to use our platform to quality check their previous work and transition over from other tools. We‚Äôve made it super easy to import annotated data from other annotation tools using only a few lines of code, which I‚Äôve described below. Then, once in our platform, users can leverage features described above like filtering and advanced ‚Ä¶</p></span></p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.superannotate.com/superannotate-desktop-a-better-alternative-to-free-annotation-tools">https://blog.superannotate.com/superannotate-desktop-a-better-alternative-to-free-annotation-tools</a></em></p>]]>
            </description>
            <link>https://blog.superannotate.com/superannotate-desktop-a-better-alternative-to-free-annotation-tools</link>
            <guid isPermaLink="false">hacker-news-small-sites-24505211</guid>
            <pubDate>Thu, 17 Sep 2020 14:43:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[UK government‚Äôs plans to regulate the internet are a threat to free speech]]>
            </title>
            <description>
<![CDATA[
Score 225 | Comments 176 (<a href="https://news.ycombinator.com/item?id=24505074">thread link</a>) | @timthorn
<br/>
September 17, 2020 | https://freespeechunion.org/why-the-governments-plans-to-regulate-the-internet-are-a-threat-to-free-speech/ | <a href="https://web.archive.org/web/*/https://freespeechunion.org/why-the-governments-plans-to-regulate-the-internet-are-a-threat-to-free-speech/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-17831" itemtype="https://schema.org/CreativeWork" itemscope="itemscope">

	
	
<div>

	
	<!-- .entry-header -->

	
	<div itemprop="text">

		
		
<p>Dr Radomir Tylecote</p>



<p>September 2020</p>



<p><a href="https://freespeechunion.org/fsu-briefing-online-harms/">Full Report</a><br><a href="https://www.gofundme.com/f/the-free-speech-union-fighting-fund">GoFundMe appeal</a></p>



<figure><div>
<p><iframe title="How the Government‚Äôs plans to regulate the internet are a threat to free speech" width="1200" height="675" src="https://www.youtube.com/embed/CQac6mzC444?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>
</div></figure>







<h3>The Government‚Äôs proposed new internet regulator will infringe free speech</h3>



<p>The Government published the Online Harms White Paper in April 2019 and intends to put a Bill before Parliament next year. The proposals aim to make the UK ‚Äúthe safest place in the world to go online‚Äù, but they will seriously infringe free speech.</p>



<p>Some of the harms the White Paper identifies are real, including distributing images of child abuse and online activities by terrorists. But these would be better dealt with by simpler legislation and more resources for law enforcement.</p>



<p>However, some of the harms the White Paper describes are vague, such as ‚Äúunacceptable content‚Äù and ‚Äúdisinformation‚Äù. These are not fixed but would be determined by a future regulator. This will lead to sweeping censorship. Online Harms does not even properly define ‚Äúharm‚Äù, so the definition risks being outsourced to activists and lobby groups.</p>



<p>A proposed new regulator will even have the power to censor lawful content: the government says new regulation should prohibit material ‚Äúthat may directly or indirectly cause harm‚Äù even if ‚Äúnot necessarily illegal‚Äù. The Government also singled out ‚Äúoffensive material‚Äù, as if giving offence is a harm the public should be protected from by the state.</p>



<h3>The proposals move the UK towards the internet laws of China, Russia and Belarus</h3>



<p>The Government‚Äôs proposals are partly inspired by Germany‚Äôs 2017 ‚ÄúNetzDG‚Äù internet law, but Human Rights Watch has called for Germany to scrap the law, saying it ‚Äúturns internet companies into censors‚Äù. President Lukashenko of Belarus, Vladimir Putin‚Äôs United Russia Party and the Venezuelan government have cited NetzDG as the model for their online laws.</p>



<p>Our government‚Äôs plans also bear a worrying similarity to Beijing‚Äôs internet censorship policies. Beijing censors ‚Äúrumours‚Äù because they cause ‚Äúsocial harms‚Äù. Our government‚Äôs proposals describe ‚Äúdisinformation‚Äù as ‚Äúharmful‚Äù, and will make ‚Äúcontent which has been disputed by reputable fact-checking services less visible to users‚Äù, forcing companies to promote ‚Äúauthoritative news sources‚Äù. This contradicts our government‚Äôs claim that ‚Äúthe regulator will not be responsible for policing truth and accuracy online‚Äù.</p>



<p>While the authors of the White Paper believe their proposals will mean more ‚Äútolerance‚Äù and less ‚Äúhate‚Äù, they will likely have the opposite effect, as people respond angrily to censorship and conspiracy theorists enjoy the cachet of being banned by the state.</p>



<p>In this briefing we outline the Government‚Äôs Online Harms plans and explain why they are a danger to freedom of speech. Later this year, the Free Speech Union will propose alternative regulation to protect the vulnerable without jeopardising free speech.</p>



<p><a href="https://freespeechunion.org/fsu-briefing-online-harms/">Full Report</a><br><a href="https://www.gofundme.com/f/the-free-speech-union-fighting-fund">GoFundMe appeal</a></p>



<p><em>FSU research papers are designed to promote discussion of free speech issues. As with all FSU publications, the views expressed are those of the author(s) and not those of the FSU, its directors, Advisory Councils or other senior staff.</em></p>

		
		
			</div><!-- .entry-content .clear -->
</div>

	
</article></div>]]>
            </description>
            <link>https://freespeechunion.org/why-the-governments-plans-to-regulate-the-internet-are-a-threat-to-free-speech/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24505074</guid>
            <pubDate>Thu, 17 Sep 2020 14:31:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[It Depresses Me That There Are More Books Than I Can Read in a Lifetime]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24505069">thread link</a>) | @NYCHomosapien
<br/>
September 17, 2020 | https://homosapien.nyc/it-depresses-me-that-there-are-more-books-than-i-could-ever-read-in-a-lifetime/ | <a href="https://web.archive.org/web/*/https://homosapien.nyc/it-depresses-me-that-there-are-more-books-than-i-could-ever-read-in-a-lifetime/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <div>

            <p><a href="https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-scaled.jpg" data-caption=""><img width="696" height="696" src="https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-696x696.jpg" srcset="https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-696x696.jpg 696w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-300x300.jpg 300w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-1024x1024.jpg 1024w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-150x150.jpg 150w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-768x768.jpg 768w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-1536x1536.jpg 1536w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-2048x2048.jpg 2048w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-1068x1068.jpg 1068w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-1920x1920.jpg 1920w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-420x420.jpg 420w" sizes="(max-width: 696px) 100vw, 696px" alt="" title="bookshome" data-srcset="https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-696x696.jpg 696w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-300x300.jpg 300w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-1024x1024.jpg 1024w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-150x150.jpg 150w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-768x768.jpg 768w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-1536x1536.jpg 1536w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-2048x2048.jpg 2048w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-1068x1068.jpg 1068w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-1920x1920.jpg 1920w, https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-420x420.jpg 420w" data-src="https://homosapien.nyc/wp-content/uploads/2020/09/bookshome-696x696.jpg" data-old-src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></a></p>            </div>

            
<p>Within the past few years I‚Äôve really ramped up the number of books I‚Äôve read. There was a lull after university where I had just finished four years worth of studying and wanted nothing more just to relax, but the demands of starting a new career and moving to a new city kept me more busy than ever. During the evenings of the first couple years of my first job I spent them working towards qualifications that I needed to advance in my field. This bled into the weekend, and I found myself with little time to do much else.</p>



<p>But then I finished all that. Suddenly, outside of the occasional late day at the office, I had a lot of free time outside my 9-5. I spent a lot of time just sitting on Reddit and YouTube. Way too much time. It was a bit ridiculous, to be honest ‚Äì I live in New York City and had every opportunity at my fingertips. Once I realized this, I started readapting my habits to things that I actually enjoyed. The first novel that I read (and probably the first I had read voluntarily in years) was George Orwell‚Äôs 1984. I was inspired to read it based on the current events of the world, and found it ominously on point.</p>



<p>I find it curious how so many people are anti-ebook for reasons like ‚Äúreal books are just better!‚Äù. Ironically a significant portion of people sharing this opinion that I‚Äôve spoken to struggle to name the last real book that they read. I say this lovingly, as I was absolutely one of those people. One day while walking through the SoHo Amazon 4-Star store, I bought a Kindle Oasis on a whim. It was close to my birthday and I thought it might be easier to haul around with me through the city and on the subway. For once, an impulse purchase was the right choice. I now bring my Kindle everywhere I with a full with a library the width of a single book and a fifth of the thickness.&nbsp;</p>



<p>Between the discounted $2 books from Amazon‚Äôs daily newsletters and the Libby service through the New York Public Library, I always have a story on the go. I downloaded Kurt Vonnegut‚Äôs Slaughterhouse Five before a long flight and was immersed until I landed. Periodically I receive a push notification from Libby on my phone letting me know the high demand book I put on hold two weeks ago is available to borrow ‚Äì usually requiring me to hit the ‚Äúdeliver later‚Äù button because I‚Äôm already engulfed in something else.</p>



<p>Herein lies the subject of this post. As the books build up and the GoodReads wishlist expands, I‚Äôm finding myself more distraught about when am I ever going read all these books! I was forced to send a large chunk of my physical books to Goodwill when I moved into a cramped NY studio apartment, but I still have a couple shelves worth of books bought years ago that still have perfect spines from never being open.&nbsp;</p>



<p>Most of the books I‚Äôve read lately can be found on those listicles of ‚Äú250 of the Best Classic/Modern/Fiction/Whatever Books‚Äù you see online. Even if I were to read a book a week, it would be years before there weren‚Äôt any titles left that people would say ‚ÄúI can‚Äôt believe you haven‚Äôt read _____!‚Äù to me. And while reading all those books, there would be at least a few books to enter the public zeitgeist that everyone was talking about while I was reading the classics. I haven‚Äôt yet read The Catcher in the Rye, a book that has been on my reading list for years, and who knows when I‚Äôll get to it.</p>



<p>One of my favorite parts about finishing a book is getting to join in on the discussions on Reddit, Goodreads or even in person in the rare case. It‚Äôs like getting into an exclusive club, if you‚Äôre like me an avoid spoilers at all costs before reading or watching something new. While it‚Äôs always nice to have some of my opinions reaffirmed by others, it‚Äôs also interesting to see situations where I totally despised a character that apparently everyone else loved and vice versa. Adding to distress is knowing there are countless threads and discussions that I will avoid until the end of time solely because I‚Äôll never read the books in their title.</p>



<p>I enjoy reading books because it‚Äôs rewarding. It feels like a much more productive hobby than aimlessly refreshing social media or doom scrolling through the news. It‚Äôs an escape from everyday life and it‚Äôs amazing how words on a page can evoke emotions in you as you connect with characters and settings. I‚Äôve been forced to consider perspectives or situations that I would never come across in real life and I feel like a more well rounded person for it. I‚Äôm sad to think about all the ‚Äúunknown unknowns‚Äù that exist in the minds of the world‚Äôs greatest authors which I‚Äôll never be exposed to.&nbsp;</p>



<p>There are worse problems in the world to have. But it‚Äôs still something that irks me each time I finish a book and start scrolling through my Kindle library for the next one. Even if I were to quit my job and laze at the beach reading all day, I‚Äôd hardly put a dent in the vast expanse of available literature before I went broke or dried up into a raisin in the sun. I‚Äôm writing this to look back on. I‚Äôm writing this so that the next time I find myself an hour into a YouTube hole I might consider jumping back into my current read instead. I‚Äôm writing this to make a positive change in behavior, however slight, and appreciate the free time I do have to read books that much more.</p>
        </div></div>]]>
            </description>
            <link>https://homosapien.nyc/it-depresses-me-that-there-are-more-books-than-i-could-ever-read-in-a-lifetime/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24505069</guid>
            <pubDate>Thu, 17 Sep 2020 14:31:03 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Amazon and Alibaba in talks to buy the Brazilian Postal Service]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24505048">thread link</a>) | @reese_john
<br/>
September 17, 2020 | https://labsnews.com/en/news/business/amazon-vs-alibaba-the-global-giants-could-fight-for-the-brazilian-post-office-in-case-of-privatization/ | <a href="https://web.archive.org/web/*/https://labsnews.com/en/news/business/amazon-vs-alibaba-the-global-giants-could-fight-for-the-brazilian-post-office-in-case-of-privatization/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
					
<p>The intent of the <a href="https://labsnews.com/en/keywords/brazil/">Brazilian</a> President, Jair Bolsonaro, of privatizing the Brazilian post office is known for a while now. But if it was looking like just a far away idea until some weeks ago, could be closer than ever to get out of the paper after the nomination of a new president for the Correios last week. </p>



<p>Understand the whole story about the change of presidency in Correios:</p>



<ul><li>‚Äú<a href="https://labsnews.com/en/ecommerce/correios-president-exits-the-organization/">Correio‚Äôs President exits the organization</a>‚Äú</li><li>‚Äú<a href="https://labsnews.com/en/economy/bolsonaro-announces-new-correios-president/">Bolsonaro announces new Correio‚Äôs president</a>‚Äú</li></ul>



<p>While the ex-president didn‚Äôt agree with the privatization idea, the General Floriano Peixoto, the new president in charge of the Brazilian post office, is more opened to the possibility, and that‚Äôs what is keeping Amazon and <a href="https://labsnews.com/en/articles/business/why-the-nine-year-rise-of-aliexpress-means-big-plans-for-latin-american-ecommerce/">Alibaba‚Äôs</a> attention. </p>



<p>According to the Brazilian news site O Dia, the global giants are already studying the possibility to buy the Correios if it really happens someday.  The main reason for the two companies is very simple: <strong>to improve logistics in Brazil</strong>. </p>



<p>Since the companies are not interested in the postal service offered by Correios, another possibility on the table is that they could buy it in a partnership with some national bank, according to O Dia. </p>



<p>The end of this story we cannot know for now, but an important new chapter for cross-border e-commerce in Brazil can be just about to begin. </p>



<p>Know more about Amazon and AliExpress in Brazil: </p>



<ul><li>‚Äú<a href="https://labsnews.com/en/ebanx-dashboard/what-makes-amazon-amazon-unraveling-the-secret-of-the-ecommerce-giant/">What Makes Amazon‚Ä¶ Amazon? Unraveling the Secret of the Ecommerce Giant</a>‚Äú</li><li>‚Äú<a href="https://labsnews.com/en/ecommerce/how-aliexpress-became-brazils-largest-ecommerce-store/">How AliExpress Became Brazil‚Äôs Largest Ecommerce Store</a>‚Äú</li></ul>
				</div></div>]]>
            </description>
            <link>https://labsnews.com/en/news/business/amazon-vs-alibaba-the-global-giants-could-fight-for-the-brazilian-post-office-in-case-of-privatization/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24505048</guid>
            <pubDate>Thu, 17 Sep 2020 14:29:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[An Inside Look at Zhenhua Data, a Chinese Data Collection and Intelligence Firm]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24504951">thread link</a>) | @yashkadakia
<br/>
September 17, 2020 | https://shadowmap.com/security-research/investigating-chinese-intelligence-firm-zhenhua-data/ | <a href="https://web.archive.org/web/*/https://shadowmap.com/security-research/investigating-chinese-intelligence-firm-zhenhua-data/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<div>
<p><span><img src="https://shadowmap.com/wp-content/uploads/2020/09/Zhenhua-Data-Internet-Big-Data-Military-Intelligence-System.png" alt="Zhenhua Data Internet Big Data Military Intelligence System" title="Zhenhua Data Internet Big Data Military Intelligence System" srcset="https://shadowmap.com/wp-content/uploads/2020/09/Zhenhua-Data-Internet-Big-Data-Military-Intelligence-System.png 1924w, https://shadowmap.com/wp-content/uploads/2020/09/Zhenhua-Data-Internet-Big-Data-Military-Intelligence-System-1280x651.png 1280w, https://shadowmap.com/wp-content/uploads/2020/09/Zhenhua-Data-Internet-Big-Data-Military-Intelligence-System-980x499.png 980w, https://shadowmap.com/wp-content/uploads/2020/09/Zhenhua-Data-Internet-Big-Data-Military-Intelligence-System-480x244.png 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) and (max-width: 1280px) 1280px, (min-width: 1281px) 1924px, 100vw"></span></p><div>
<p><h4>Investigating Chinese Intelligence Firm Zhenhua Data</h4></p></div></div><div>
<div>
<div><p>Sign up for our Security Research Newsletter to be the first to know about our latest research publications.</p></div></div></div></div><div>
<div>
<div>
<p>Stories of Chinese Intelligence Firms leveraging <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3691999">Big Data Analysis</a>, <a href="https://www.theatlantic.com/politics/archive/2019/08/inside-us-china-espionage-war/595747/">Social Media Platforms</a>, <a href="https://www.bbc.com/news/world-asia-53544505">LinkedIn, </a><a href="https://www.theatlantic.com/magazine/archive/2020/09/china-ai-surveillance/614197/">Mobile Devices</a>, <a href="https://www.uscc.gov/sites/default/files/2019-11/Chapter%202,%20Section%203%20-%20China's%20Intelligence%20Services%20and%20Espionage%20Threats%20to%20the%20United%20States.pdf">SIGINT, </a>etc are all over the internet.&nbsp; However the recent stories about the Zhenhua Data Leak in the <a href="https://indianexpress.com/article/express-exclusive/china-watching-big-data-president-kovind-pm-narendra-modi-opposition-leaders-chief-justice-of-india-zhenhua-data-information-technology-6594861/">Indian Express</a> caught our attention and we decided to leverage our ShadowMap platform to get some more insight on the Zhenhua Data operation.</p>
<p>After spending several days deep into this rabbit hole of vague corporations, a wide range of collection systems, some really interesting correlation use-cases ‚Äì we‚Äôve been able to put together a fairly comprehensive image of the Zhenhua Data operation.</p>
<p>While on the surface Zhenhua Data seems to be ‚Äújust another‚Äù firm capturing, processing and selling publicly available information, the story changes rapidly once you look beyond the surface.</p>
<p>This blog post covers four key sections: <strong>Data Collection</strong>, <strong>Data Correlation</strong>, <strong>Identified</strong> <strong>Targets</strong>, <strong>Conclusion.</strong></p>
<h3>Zhenhua Data &amp; Affiliates</h3>
<p>According to the Zhenhua Data website (which has been taken offline, but is still accessible via ShadowMap) ‚Äì ‚ÄúZhenhua Data focuses on integrating overseas data and information to provide services for domestic institutions‚Äù. In-addition to Shenzhen Zhenhua Data Information Technology Co., Ltd. (china-revival.com) that has already received wide-spread coverage, we also found the involvement of Weiju (aggso.com) &amp; SocialDataMax (socialdatamax.com).</p>
<p>Weiju, started out as a ‚Äúlocation-based, instant messaging application that enables users to chat with nearby strangers.‚Äù, however the last update on its website (in 2015) mentions ‚ÄúPublic opinion monitoring and early warning‚Äù, ‚ÄúCommunication analysis statistics‚Äù, etc.</p>
<p>There are also several mentions of the underlying platforms being developed by ‚ÄúBeijing Juwei Hezhi Information Technology Co., Ltd.‚Äù, which has a very limited public presence but is listed online as ‚ÄúJuwei Hezhi is a company that analyzes social media big data‚Äù.</p>
<h3>Data Collection</h3>
<p>Zhenhua Data has a large number of platforms that are used for data collection. These include platforms monitoring your standard social media platforms such as Twitter, LinkedIn, Facebook, TikTok, VK, Instagram etc. They also monitor a wide range of media outlets, news websites, news aggregators such as Reddit, etc.</p>
<p>In-addition to this, they also seem to have private sources of data such as near real-time movement of warships, satellite tracking, troop movements, etc. More so we were able to find references to private feeds that have access to data from ‚Äúaffiliate apps &amp; websites‚Äù, but have not been able to discover or access these portals directly.</p>
<p>Some examples of the public data collection systems that are publicly accessible:</p>
<p><b>LinkedIn ‚Äì </b>This particular system is configured to continuously search LinkedIn for a range of keywords and then downloads the matching profiles, photos, etc.</p>
<div id="attachment_2138"><p><a href="https://shadowmap.com/wp-content/uploads/2020/09/Downloading-LinkedIn-Profiles-By-Keywords.png"><img aria-describedby="caption-attachment-2138" loading="lazy" src="https://shadowmap.com/wp-content/uploads/2020/09/Downloading-LinkedIn-Profiles-By-Keywords-1024x551.png" alt="Downloading LinkedIn Profiles By Keywords" width="1024" height="551" srcset="https://shadowmap.com/wp-content/uploads/2020/09/Downloading-LinkedIn-Profiles-By-Keywords-980x527.png 980w, https://shadowmap.com/wp-content/uploads/2020/09/Downloading-LinkedIn-Profiles-By-Keywords-480x258.png 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) 1024px, 100vw"></a></p><p id="caption-attachment-2138">Downloading LinkedIn Profiles By Keywords</p></div><p><b>TikTok ‚Äì </b>This particular system is configured to monitor specific target accounts and download all videos, comments, user relationships, etc in near real time. Another interesting note here, a lot of the accounts being monitored are related to US Army recruitment and active duty forces.</p>
<div id="attachment_2139"><p><a href="https://shadowmap.com/wp-content/uploads/2020/09/Monitoring-TikTok-Videos-Comments-for-Target-Accounts.png"><img onload="Wpfcll.r(this,true);" src="https://shadowmap.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" aria-describedby="caption-attachment-2139" loading="lazy" data-wpfc-original-src="https://shadowmap.com/wp-content/uploads/2020/09/Monitoring-TikTok-Videos-Comments-for-Target-Accounts-1024x550.png" alt="blank" width="1024" height="550" data-wpfc-original-srcset="https://shadowmap.com/wp-content/uploads/2020/09/Monitoring-TikTok-Videos-Comments-for-Target-Accounts-980x527.png 980w, https://shadowmap.com/wp-content/uploads/2020/09/Monitoring-TikTok-Videos-Comments-for-Target-Accounts-480x258.png 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) 1024px, 100vw"></a></p><p id="caption-attachment-2139">Monitoring TikTok Videos and Comments for Target Accounts</p></div><p><b>Reddit ‚Äì </b>This particular system is configured to monitor specific subreddits such as /r/politics to continuously track news stories, upvotes, users, etc.</p>
<div id="attachment_2140"><p><a href="https://shadowmap.com/wp-content/uploads/2020/09/Reddit-News-Politics-Monitoring.png"><img onload="Wpfcll.r(this,true);" src="https://shadowmap.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" aria-describedby="caption-attachment-2140" loading="lazy" data-wpfc-original-src="https://shadowmap.com/wp-content/uploads/2020/09/Reddit-News-Politics-Monitoring-1024x549.png" alt="Reddit News Politics Monitoring" width="1024" height="549" data-wpfc-original-srcset="https://shadowmap.com/wp-content/uploads/2020/09/Reddit-News-Politics-Monitoring-980x525.png 980w, https://shadowmap.com/wp-content/uploads/2020/09/Reddit-News-Politics-Monitoring-480x257.png 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) 1024px, 100vw"></a></p><p id="caption-attachment-2140">Reddit News Politics Monitoring</p></div><p><b>Forum Discussions ‚Äì </b>This particular system is configured to monitor a wide range of internet forum discussions, actively scraping all posts being made, data about users along with the sentiment of the post.</p>
<div id="attachment_2141"><p><a href="https://shadowmap.com/wp-content/uploads/2020/09/Forums-BBS-Monitoring.png"><img onload="Wpfcll.r(this,true);" src="https://shadowmap.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" aria-describedby="caption-attachment-2141" loading="lazy" data-wpfc-original-src="https://shadowmap.com/wp-content/uploads/2020/09/Forums-BBS-Monitoring-1024x525.png" alt="Forum &amp; BBS Monitoring" width="1024" height="525" data-wpfc-original-srcset="https://shadowmap.com/wp-content/uploads/2020/09/Forums-BBS-Monitoring-980x502.png 980w, https://shadowmap.com/wp-content/uploads/2020/09/Forums-BBS-Monitoring-480x246.png 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) 1024px, 100vw"></a></p><p id="caption-attachment-2141">Forum &amp; BBS Monitoring</p></div><p><b>Databases of Key Individuals &amp; Organisations ‚Äì </b>This particular system maintains a real-time list of key Mobile Applications, Media Organisations, Think Tanks, Social Media accounts, etc.</p>
<div id="attachment_2170"><p><a href="https://shadowmap.com/wp-content/uploads/2020/09/Zenhua-Data-Databases.png"><img onload="Wpfcll.r(this,true);" src="https://shadowmap.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" aria-describedby="caption-attachment-2170" loading="lazy" data-wpfc-original-src="https://shadowmap.com/wp-content/uploads/2020/09/Zenhua-Data-Databases-1024x584.png" alt="Zenhua Data - Database of Key Targets" width="1024" height="584" data-wpfc-original-srcset="https://shadowmap.com/wp-content/uploads/2020/09/Zenhua-Data-Databases-980x559.png 980w, https://shadowmap.com/wp-content/uploads/2020/09/Zenhua-Data-Databases-480x274.png 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) 1024px, 100vw"></a></p><p id="caption-attachment-2170">Zenhua Data ‚Äì Database of Key Targets</p></div><p><strong>Tracking Global Risk Events ‚Äì </strong>This particular system is configured to track a number of global risk events such as Weapons of Mass Destruction, Extreme weather events, Climate change mitigation and response, Network Attack, etc.</p>
<div id="attachment_2156"><p><a href="https://shadowmap.com/wp-content/uploads/2020/09/Global-Risk-Event-Data-Center.png"><img onload="Wpfcll.r(this,true);" src="https://shadowmap.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" aria-describedby="caption-attachment-2156" loading="lazy" data-wpfc-original-src="https://shadowmap.com/wp-content/uploads/2020/09/Global-Risk-Event-Data-Center-1024x551.png" alt="Global Risk Event Data Center" width="1024" height="551" data-wpfc-original-srcset="https://shadowmap.com/wp-content/uploads/2020/09/Global-Risk-Event-Data-Center-980x528.png 980w, https://shadowmap.com/wp-content/uploads/2020/09/Global-Risk-Event-Data-Center-480x258.png 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) 1024px, 100vw"></a></p><p id="caption-attachment-2156">Global Risk Event Data Center</p></div><h3><strong>Data Correlation</strong></h3>
<p>While some of the Data Collection systems may seem like they would be part of the scope of any average social media big data company, the use-cases and correlations that we have been able to discover are where it really gets interesting.</p>
<p><strong>Internet Big Data Military Intelligence System</strong></p>
<p>One of the early systems that our platform discovered that is directly linked to Zhenhua Data. This platform certainly tells a different story from the ‚Äúsocial media monitoring‚Äù cover that has been used. The platform seems to have 4 modules: <strong>Internet Information Collection System</strong>, <strong>Big Data Cleaning &amp; Processing System</strong>, <strong>Foreign Army Internet Intelligence System</strong> &amp; <strong>Key Group Monitoring and Analysis System</strong>.</p>
<div id="attachment_2137"><p><a href="https://shadowmap.com/wp-content/uploads/2020/09/Zhenhua-Data-Internet-Big-Data-Military-Intelligence-System.png"><img onload="Wpfcll.r(this,true);" src="https://shadowmap.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" aria-describedby="caption-attachment-2137" loading="lazy" data-wpfc-original-src="https://shadowmap.com/wp-content/uploads/2020/09/Zhenhua-Data-Internet-Big-Data-Military-Intelligence-System-1024x521.png" alt="Zhenhua Data Internet Big Data Military Intelligence System" width="1024" height="521" data-wpfc-original-srcset="https://shadowmap.com/wp-content/uploads/2020/09/Zhenhua-Data-Internet-Big-Data-Military-Intelligence-System-980x499.png 980w, https://shadowmap.com/wp-content/uploads/2020/09/Zhenhua-Data-Internet-Big-Data-Military-Intelligence-System-480x244.png 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) 1024px, 100vw"></a></p><p id="caption-attachment-2137">Zhenhua Data Internet Big Data Military Intelligence System</p></div><p>On digging further, we discovered another platform that leverages several of the private and public data collection systems to create actionable military intelligence.</p>
<p><strong>Real-time War Ship Monitoring &amp; Correlation Platform</strong></p>
<p>This platform allows for tracking near real-time movements of both commercial and military naval ships. In-addition, it can correlate a wide range of information such as Social Media information of the crew on-board each vessel, photos and videos from individuals and official social media accounts, news stories, weapons manifests, historical location data, etc.</p>
<p>The strike chain functionality tracks key personnel as well, which are in-turn related with the much talked about OKIDB (Overseas Key Information Database), which allows you to get more relevant and correlated data about each individual target.</p>
<div id="attachment_2149"><p><a href="https://shadowmap.com/wp-content/uploads/2020/09/zenhua-data-warship-monitoring.png"><img onload="Wpfcll.r(this,true);" src="https://shadowmap.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" aria-describedby="caption-attachment-2149" loading="lazy" data-wpfc-original-src="https://shadowmap.com/wp-content/uploads/2020/09/zenhua-data-warship-monitoring-1024x515.png" alt="Zenhua Data Warship Monitoring" width="1024" height="515" data-wpfc-original-srcset="https://shadowmap.com/wp-content/uploads/2020/09/zenhua-data-warship-monitoring-1024x515.png 1024w, https://shadowmap.com/wp-content/uploads/2020/09/zenhua-data-warship-monitoring-980x493.png 980w, https://shadowmap.com/wp-content/uploads/2020/09/zenhua-data-warship-monitoring-480x242.png 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) 1024px, 100vw"></a></p><p id="caption-attachment-2149">Zenhua Data Warship Monitoring</p></div>

<div id="attachment_2155"><p><a href="https://shadowmap.com/wp-content/uploads/2020/09/Strike-Chain-Key-Personnel.png"><img onload="Wpfcll.r(this,true);" src="https://shadowmap.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" aria-describedby="caption-attachment-2155" loading="lazy" data-wpfc-original-src="https://shadowmap.com/wp-content/uploads/2020/09/Strike-Chain-Key-Personnel-e1600311890142-1024x520.png" alt="Strike Chain - Tracking Key Personnel" width="1024" height="520" data-wpfc-original-srcset="https://shadowmap.com/wp-content/uploads/2020/09/Strike-Chain-Key-Personnel-e1600311890142-980x498.png 980w, https://shadowmap.com/wp-content/uploads/2020/09/Strike-Chain-Key-Personnel-e1600311890142-480x244.png 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) 1024px, 100vw"></a></p><p id="caption-attachment-2155">Strike Chain ‚Äì Tracking Key Personnel</p></div><p><strong>Correlating Social Media Data with OKIDB</strong></p>
<p>Zenhua Data also has Social Media Relationship Query tools available to analyse target social media accounts, their relationships with other individuals and further allows you to access additional data stored about each individual in the OKIDB.</p>
<p>Each of the millions of members (a sample shown in the excel), have a ‚ÄúCharacter ID‚Äù and have a page in the OKIDB that contains more details about themselves, their social media accounts, their families, their businesses, their relationships, etc. The OKIDB contains data about politicians, royalty, business leaders, journalists, members of think tanks, research scientists, etc.</p>
<div id="attachment_2157"><p><a href="https://shadowmap.com/wp-content/uploads/2020/09/Zhenhua-Data-PMO-India-Social-Relationship-Query-Tool.png"><img onload="Wpfcll.r(this,true);" src="https://shadowmap.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" aria-describedby="caption-attachment-2157" loading="lazy" data-wpfc-original-src="https://shadowmap.com/wp-content/uploads/2020/09/Zhenhua-Data-PMO-India-Social-Relationship-Query-Tool-1024x199.png" alt="Zhenhua Data PMO India Social Media Relationship Query Tool" width="1024" height="199" data-wpfc-original-srcset="https://shadowmap.com/wp-content/uploads/2020/09/Zhenhua-Data-PMO-India-Social-Relationship-Query-Tool-980x190.png 980w, https://shadowmap.com/wp-content/uploads/2020/09/Zhenhua-Data-PMO-India-Social-Relationship-Query-Tool-480x93.png 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) 1024px, 100vw"></a></p><p id="caption-attachment-2157">Zhenhua Data PMO India Social Media Relationship Query Tool</p></div><div id="attachment_2158"><p><a href="https://shadowmap.com/wp-content/uploads/2020/09/Zenhua-Data-OKIDB-User-Data.png"><img onload="Wpfcll.r(this,true);" src="https://shadowmap.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" aria-describedby="caption-attachment-2158" loading="lazy" data-wpfc-original-src="https://shadowmap.com/wp-content/uploads/2020/09/Zenhua-Data-OKIDB-User-Data-1024x514.png" alt="Zenhua Data OKIDB User Data" width="1024" height="514" data-wpfc-original-srcset="https://shadowmap.com/wp-content/uploads/2020/09/Zenhua-Data-OKIDB-User-Data-980x492.png 980w, https://shadowmap.com/wp-content/uploads/2020/09/Zenhua-Data-OKIDB-User-Data-480x241.png 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) 1024px, 100vw"></a></p><p id="caption-attachment-2158">Zenhua Data OKIDB User Data</p></div><p>In-addition to these systems, there are hundreds of other such systems online that are secured behind login pages or have been taken offline since the media attention started and as such have not been accessed by ShadowMap.</p>
<p><b>Some of the other systems which are online but not accessible since they are behind login pages:</b></p>

<h3><strong>Identified</strong> <strong>Targets</strong></h3>
<p>The OKIDB has been covered in-depth by <a href="https://indianexpress.com/article/express-exclusive/china-watching-indian-politicians-big-data-hybrid-cyber-warfare-shenzhen-information-technology-6594805/">several</a> <a href="https://www.washingtonpost.com/world/asia_pacific/chinese-firm-harvests-social-media-posts-data-of-prominent-americans-and-military/2020/09/14/b1f697ce-f311-11ea-8025-5d3489768ac8_story.html">media</a> <a href="https://www.theguardian.com/world/2020/sep/14/zhenhua-data-full-list-leak-database-personal-details-millions-china-tech-company">organisations</a> that have dissected the list of targets in detail. Generally speaking the OKIDB seems to contain information about anybody that has any level of influence or is affiliated with any such person. The influence is determined on the basis of social media relationships, news mentions, face recognition in public photographs, etc.</p>
<p>We also found several target keyword lists that are actively being used as part of the data collection platforms and seem to be focusing on a wide range of keywords related to Hong Kong. These include key events such as ‚Äú2019 Prince Edward station attack‚Äù, famous protestors such as ‚ÄúBlack super brother‚Äù, phrases such as ‚ÄúTrying to decrypt‚Äù and hundreds of political individuals on both sides.</p>

<h3><b>Conclusion to the Zhenhua Data Story</b></h3>
<p>After studying the ShadowMap reports for&nbsp;Zhenhua Data, we are reasonably certain that everything we have seen so far is only scratching the surface of the Data Collection and Internet Intelligence Systems in place.</p>
<p>While most folks brush off concerns around social media monitoring, as the ‚Äúprice of admission‚Äù, privacy and security professionals understand the true risks and have been raising warnings for years. From something as simple as when <a href="https://www.theguardian.com/world/2018/jan/28/fitness-tracking-app-gives-away-location-of-secret-us-army-bases">Fitbit tracking app Strava disclosed the location of secret US army bases</a>, to modernising and automating the process of gaining ‚Äúkompromat‚Äù on a target.</p>
<p>The technology and capabilities we have seen with Zhenhua Data show us that the dystopian future that George Orwell‚Äôs 1984 warned us about, is here to stay. From silencing political opponents, quashing protests, spreading misinformation to influence elections or attacking enemy militaries ‚Äì Big Data Surveillance systems will continue to have a significant role to play in geo-politics.</p></div></div></div></div>]]>
            </description>
            <link>https://shadowmap.com/security-research/investigating-chinese-intelligence-firm-zhenhua-data/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24504951</guid>
            <pubDate>Thu, 17 Sep 2020 14:21:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Postgres Tips and Tricks]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24504948">thread link</a>) | @i_have_to_speak
<br/>
September 17, 2020 | http://pgdash.io/blog/postgres-tips-and-tricks.html?hh | <a href="https://web.archive.org/web/*/http://pgdash.io/blog/postgres-tips-and-tricks.html?hh">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        <div>
          
          <p>SQL snippets to increase your Postgres productivity
</p>
        </div>
      </div><div>
        <div>
          <div>
            <p>Do you work with Postgres on a daily basis? Write application code that talks
to Postgres? Then check out the bite-sized SQL snippets below that can help
you work faster!</p>

<h3 id="insert-multiple-rows-in-one-statement">Insert Multiple Rows In One Statement</h3>

<p>The INSERT statement can insert more than one row in a single statement:</p>

<figure><pre><code data-lang="sql"><span>INSERT</span> <span>INTO</span> <span>planets</span> <span>(</span><span>name</span><span>,</span> <span>gravity</span><span>)</span>
     <span>VALUES</span> <span>(</span><span>'earth'</span><span>,</span>    <span>9</span><span>.</span><span>8</span><span>),</span>
            <span>(</span><span>'mars'</span><span>,</span>     <span>3</span><span>.</span><span>7</span><span>),</span>
            <span>(</span><span>'jupiter'</span><span>,</span> <span>23</span><span>.</span><span>1</span><span>);</span></code></pre></figure>

<p>Read more about what INSERT can do <a href="http://pgdash.io/blog/postgres-insert.html">here</a>.</p>

<h3 id="insert-a-row-and-return-automatically-assigned-values">Insert a Row and Return Automatically-assigned Values</h3>

<p>Values auto-generated with DEFAULT/serial/IDENTITY constructs can be returned
by the INSERT statement using the RETURNING clause. From the application
code perspective, such an INSERT is executed like a SELECT that returns a
recordset.</p>

<figure><pre><code data-lang="sql"><span>-- table with 2 column values auto-generated on INSERT</span>
<span>CREATE</span> <span>TABLE</span> <span>items</span> <span>(</span>
    <span>slno</span>       <span>serial</span>      <span>PRIMARY</span> <span>KEY</span><span>,</span>
    <span>name</span>       <span>text</span>        <span>NOT</span> <span>NULL</span><span>,</span>
    <span>created_at</span> <span>timestamptz</span> <span>DEFAULT</span> <span>now</span><span>()</span>
<span>);</span>

<span>INSERT</span> <span>INTO</span> <span>items</span> <span>(</span><span>name</span><span>)</span>
     <span>VALUES</span> <span>(</span><span>'wooden axe'</span><span>),</span>
            <span>(</span><span>'loom'</span><span>),</span>
            <span>(</span><span>'eye of ender'</span><span>)</span>
  <span>RETURNING</span> <span>name</span><span>,</span> <span>slno</span><span>,</span> <span>created_at</span><span>;</span>

<span>-- returns:</span>
<span>--      name     | slno |          created_at</span>
<span>-- --------------+------+-------------------------------</span>
<span>--  wooden axe   |    1 | 2020-08-17 05:35:45.962725+00</span>
<span>--  loom         |    2 | 2020-08-17 05:35:45.962725+00</span>
<span>--  eye of ender |    3 | 2020-08-17 05:35:45.962725+00</span></code></pre></figure>

<h3 id="autogenerated-uuid-primary-keys">Autogenerated UUID Primary Keys</h3>

<p>UUIDs are sometimes used instead of primary keys for various reasons. Here is
how you can use an UUID instead of a serial or IDENTITY:</p>

<figure><pre><code data-lang="sql"><span>CREATE</span> <span>EXTENSION</span> <span>IF</span> <span>NOT</span> <span>EXISTS</span> <span>"uuid-ossp"</span><span>;</span>

<span>CREATE</span> <span>TABLE</span> <span>items</span> <span>(</span>
    <span>id</span>    <span>uuid</span> <span>DEFAULT</span> <span>uuid_generate_v4</span><span>(),</span>
    <span>name</span>  <span>text</span> <span>NOT</span> <span>NULL</span>
<span>);</span>

<span>INSERT</span> <span>INTO</span> <span>items</span> <span>(</span><span>name</span><span>)</span>
     <span>VALUES</span> <span>(</span><span>'wooden axe'</span><span>),</span>
            <span>(</span><span>'loom'</span><span>),</span>
            <span>(</span><span>'eye of ender'</span><span>)</span>
  <span>RETURNING</span> <span>id</span><span>,</span> <span>name</span><span>;</span>
  
<span>-- returns:</span>
<span>--                   id                  |     name</span>
<span>-- --------------------------------------+--------------</span>
<span>--  1cfaae8c-61ff-4e82-a656-99263b7dd0ae | wooden axe</span>
<span>--  be043a89-a51b-4d8b-8378-699847113d46 | loom</span>
<span>--  927d52eb-c175-4a97-a0b2-7b7e81d9bc8e | eye of ender</span></code></pre></figure>

<h3 id="insert-if-not-existing-update-otherwise">Insert If Not Existing, Update Otherwise</h3>

<p>In Postgres 9.5 and later, you can <em>upsert</em> directly using the ON CONFLICT
construct:</p>

<figure><pre><code data-lang="sql"><span>CREATE</span> <span>TABLE</span> <span>parameters</span> <span>(</span>
    <span>key</span>   <span>TEXT</span> <span>PRIMARY</span> <span>KEY</span><span>,</span>
    <span>value</span> <span>TEXT</span>
<span>);</span>

<span>-- when "key" causes a constraint violation, update the "value"</span>
<span>INSERT</span> <span>INTO</span> <span>parameters</span> <span>(</span><span>key</span><span>,</span> <span>value</span><span>)</span> 
     <span>VALUES</span> <span>(</span><span>'port'</span><span>,</span> <span>'5432'</span><span>)</span>
<span>ON</span> <span>CONFLICT</span> <span>(</span><span>key</span><span>)</span> <span>DO</span>
            <span>UPDATE</span> <span>SET</span> <span>value</span><span>=</span><span>EXCLUDED</span><span>.</span><span>value</span><span>;</span></code></pre></figure>

<h3 id="copy-rows-from-one-table-into-another">Copy Rows From One Table Into Another</h3>

<p>The INSERT statement has a form where the values can be supplied by a SELECT
statement. Use this to copy rows from one table into another:</p>

<figure><pre><code data-lang="sql"><span>-- copy between tables with similar columns </span>
  <span>INSERT</span> <span>INTO</span> <span>pending_quests</span>
<span>SELECT</span> <span>*</span> <span>FROM</span> <span>quests</span>
        <span>WHERE</span> <span>progress</span> <span>&lt;</span> <span>100</span><span>;</span>

<span>-- supply some values from another table, some directly</span>
  <span>INSERT</span> <span>INTO</span> <span>archived_quests</span>
       <span>SELECT</span> <span>now</span><span>()</span> <span>AS</span> <span>archival_date</span><span>,</span> <span>*</span>
         <span>FROM</span> <span>quests</span>
        <span>WHERE</span> <span>completed</span><span>;</span></code></pre></figure>

<p>If you‚Äôre looking to bulk-load tables, also check out the <a href="https://www.postgresql.org/docs/current/sql-copy.html">COPY command</a>,
which can be used to insert rows from a text or CSV file.</p>

<h3 id="delete-and-return-deleted-information">Delete and Return Deleted Information</h3>

<p>You can use the <code>RETURNING</code> clause to return values from the rows that were
deleted using a bulk-delete statement:</p>

<figure><pre><code data-lang="sql"><span>-- return the list of customers whose licenses were deleted after expiry</span>
<span>DELETE</span> <span>FROM</span> <span>licenses</span>
      <span>WHERE</span> <span>now</span><span>()</span> <span>&gt;</span> <span>expiry_date</span>
  <span>RETURNING</span> <span>customer_name</span><span>;</span></code></pre></figure>

<h3 id="move-rows-from-one-table-into-another">Move Rows From One Table Into Another</h3>

<p>You can move rows from one table to another in a single statement, by using CTEs
with <em>DELETE .. RETURNING</em>:</p>

<figure><pre><code data-lang="sql"><span>-- move yet-to-start todo items from 2020 to 2021</span>
<span>WITH</span> <span>ah_well</span> <span>AS</span> <span>(</span>
    <span>DELETE</span> <span>FROM</span> <span>todos_2020</span>
          <span>WHERE</span> <span>NOT</span> <span>started</span>
      <span>RETURNING</span> <span>*</span>
<span>)</span>
<span>INSERT</span> <span>INTO</span> <span>todos_2021</span>
            <span>SELECT</span> <span>*</span> <span>FROM</span> <span>ah_well</span><span>;</span></code></pre></figure>

<h3 id="update-rows-and-return-updated-values">Update Rows and Return Updated Values</h3>

<p>The RETURNING clause can be used in UPDATEs too. Note that only the new
values of the updated columns can be returned this way.</p>

<figure><pre><code data-lang="sql"><span>-- grant random amounts of coins to eligible players</span>
   <span>UPDATE</span> <span>players</span>
      <span>SET</span> <span>coins</span> <span>=</span> <span>coins</span> <span>+</span> <span>(</span><span>100</span> <span>*</span> <span>random</span><span>())::</span><span>integer</span>
    <span>WHERE</span> <span>eligible</span>
<span>RETURNING</span> <span>id</span><span>,</span> <span>coins</span><span>;</span></code></pre></figure>

<p>If you need the original value of the updated columns: it is possible through a
self-join, but there is no guarantee of atomicity. Try using a <code>SELECT .. FOR
UPDATE</code> instead.</p>

<h3 id="update-a-few-random-rows-and-return-the-updated-ones">Update a Few Random Rows and Return The Updated Ones</h3>

<p>Here‚Äôs how you can choose a few random rows from a table, update them and
return the updated ones, all in one go:</p>

<figure><pre><code data-lang="sql"><span>WITH</span> <span>lucky_few</span> <span>AS</span> <span>(</span>
    <span>SELECT</span> <span>id</span>
      <span>FROM</span> <span>players</span>
  <span>ORDER</span> <span>BY</span> <span>random</span><span>()</span>
     <span>LIMIT</span> <span>5</span>
<span>)</span>
   <span>UPDATE</span> <span>players</span>
      <span>SET</span> <span>bonus</span> <span>=</span> <span>bonus</span> <span>+</span> <span>100</span> 
    <span>WHERE</span> <span>id</span> <span>IN</span> <span>(</span><span>SELECT</span> <span>id</span> <span>FROM</span> <span>lucky_few</span><span>)</span>
<span>RETURNING</span> <span>id</span><span>;</span></code></pre></figure>

<h3 id="create-a-table-just-like-another-table">Create a Table Just Like Another Table</h3>

<p>Use the CREATE TABLE .. LIKE construct to create a table with the same columns
as another:</p>

<figure><pre><code data-lang="sql"><span>CREATE</span> <span>TABLE</span> <span>to_be_audited</span> <span>(</span><span>LIKE</span> <span>purchases</span><span>);</span></code></pre></figure>

<p>By default this does not create similar indexes, constraints, defaults etc. To
do that, ask Postgres explicitly:</p>

<figure><pre><code data-lang="sql"><span>CREATE</span> <span>TABLE</span> <span>to_be_audited</span> <span>(</span><span>LIKE</span> <span>purchases</span> <span>INCLUDING</span> <span>ALL</span><span>);</span></code></pre></figure>

<p>See the full syntax <a href="https://www.postgresql.org/docs/current/sql-createtable.html">here</a>.</p>

<h3 id="extract-a-random-set-of-rows-into-another-table">Extract a Random Set of Rows Into Another Table</h3>

<p>Since Postgres 9.5, the TABLESAMPLE feature is available to extract a sample of
rows from a table. There are two sampling methods currently, and <em>bernoulli</em> is
usually the one you want:</p>

<figure><pre><code data-lang="sql"><span>-- copy 10% of today's purchases into another table</span>
<span>INSERT</span> <span>INTO</span> <span>to_be_audited</span>
     <span>SELECT</span> <span>*</span>
       <span>FROM</span> <span>purchases</span>
<span>TABLESAMPLE</span> <span>bernoulli</span><span>(</span><span>10</span><span>)</span>
      <span>WHERE</span> <span>transaction_date</span> <span>=</span> <span>CURRENT_DATE</span><span>;</span></code></pre></figure>

<p>The <em>system</em> tablesampling method is faster, but does not return a uniform
distribution. See the <a href="https://www.postgresql.org/docs/current/sql-select.html#SQL-FROM">docs</a>
for more info.</p>

<h3 id="create-a-table-from-a-select-query">Create a Table From a Select Query</h3>

<p>You can use the CREATE TABLE .. AS construct to create the table and populate
it from a SELECT query, all in one go:</p>

<figure><pre><code data-lang="sql"><span>CREATE</span> <span>TABLE</span> <span>to_be_audited</span> <span>AS</span>
      <span>SELECT</span> <span>*</span>
        <span>FROM</span> <span>purchases</span>
 <span>TABLESAMPLE</span> <span>bernoulli</span><span>(</span><span>10</span><span>)</span>
       <span>WHERE</span> <span>transaction_date</span> <span>=</span> <span>CURRENT_DATE</span><span>;</span></code></pre></figure>

<p>The resultant table is like a materialized view without a query associated with
it. Read more about <a href="https://www.postgresql.org/docs/current/sql-createtable.html">CREATE TABLE .. AS here</a>.</p>

<h3 id="create-unlogged-tables">Create Unlogged Tables</h3>

<p><em>Unlogged</em> tables are not backed by WAL records. This means that updates and
deletes to such tables are faster, but they are not crash-tolerant and cannot
be replicated.</p>

<figure><pre><code data-lang="sql"><span>CREATE</span> <span>UNLOGGED</span> <span>TABLE</span> <span>report_20200817</span> <span>(</span><span>LIKE</span> <span>report_v3</span><span>);</span></code></pre></figure>

<h3 id="create-temporary-tables">Create Temporary Tables</h3>

<p><em>Temporary</em> tables are implicitly unlogged tables, with a shorter lifetime. They
automatically self-destruct at the end of a session (default), or at the end
of the transaction.</p>

<p>Data within temporary tables cannot be shared across sessions. Multiple sessions
can create temporary tables with the same name.</p>

<figure><pre><code data-lang="sql"><span>-- temp table for duration of the session</span>
<span>CREATE</span> <span>TEMPORARY</span> <span>TABLE</span> <span>scratch_20200817_run_12</span> <span>(</span><span>LIKE</span> <span>report_v3</span><span>);</span>

<span>-- temp table that will self-destruct after current transaction</span>
<span>CREATE</span> <span>TEMPORARY</span> <span>TABLE</span> <span>scratch_20200817_run_12</span>
                      <span>(</span><span>LIKE</span> <span>report_v3</span><span>)</span>
                      <span>ON</span> <span>COMMIT</span> <span>DROP</span><span>;</span>

<span>-- temp table that will TRUNCATE itself after current transaction</span>
<span>CREATE</span> <span>TEMPORARY</span> <span>TABLE</span> <span>scratch_20200817_run_12</span>
                       <span>(</span><span>LIKE</span> <span>report_v3</span><span>)</span>
                       <span>ON</span> <span>COMMIT</span> <span>DELETE</span> <span>ROWS</span><span>;</span></code></pre></figure>



<p>Comments can be added to any object in the database. Many tools, including
pg_dump, understand these. A useful comment might just avoid a ton of trouble
during cleanup!</p>

<figure><pre><code data-lang="sql"><span>COMMENT</span> <span>ON</span> <span>INDEX</span> <span>idx_report_last_updated</span>
        <span>IS</span> <span>'needed for the nightly report app running in dc-03'</span><span>;</span>

<span>COMMENT</span> <span>ON</span> <span>TRIGGER</span> <span>tgr_fix_column_foo</span>
        <span>IS</span> <span>'mitigates the effect of bug #4857'</span><span>;</span></code></pre></figure>

<h3 id="advisory-locks">Advisory Locks</h3>

<p>Advisory locks can be used to co-ordinate actions between two apps connected to
the <em>same</em> database. You can use this feature to implement a global, distributed
mutex for a certain operation, for example. Read all about it <a href="https://www.postgresql.org/docs/current/explicit-locking.html#ADVISORY-LOCKS">here in the
docs</a>.</p>

<figure><pre><code data-lang="sql"><span>-- client 1: acquire a lock </span>
<span>SELECT</span> <span>pg_advisory_lock</span><span>(</span><span>130</span><span>);</span>
<span>-- ... do work ...</span>
<span>SELECT</span> <span>pg_advisory_unlock</span><span>(</span><span>130</span><span>);</span>

<span>-- client 2: tries to do the same thing, but mutually exclusive</span>
<span>-- with client 1</span>
<span>SELECT</span> <span>pg_advisory_lock</span><span>(</span><span>130</span><span>);</span> <span>-- blocks if anyone else has held lock with id 130</span>

<span>-- can also do it without blocking:</span>
<span>SELECT</span> <span>pg_try_advisory_lock</span><span>(</span><span>130</span><span>);</span>
<span>-- returns false if lock is being held by another client</span>
<span>-- otherwise acquires the lock then returns true</span></code></pre></figure>

<h3 id="aggregate-into-arrays-json-arrays-or-strings">Aggregate Into Arrays, JSON Arrays or Strings</h3>

<p>Postgres provides aggregate functions that concatenate values in a <em>GROUP</em> to
yield arrays, JSON arrays or strings:</p>

<figure><pre><code data-lang="sql"><span>-- get names of each guild, with an array of ids of players that</span>
<span>-- belong to that guild</span>
  <span>SELECT</span> <span>guilds</span><span>.</span><span>name</span> <span>AS</span> <span>guild_name</span><span>,</span> <span>array_agg</span><span>(</span><span>players</span><span>.</span><span>id</span><span>)</span> <span>AS</span> <span>players</span>
    <span>FROM</span> <span>guilds</span>
    <span>JOIN</span> <span>players</span> <span>ON</span> <span>players</span><span>.</span><span>guild_id</span> <span>=</span> <span>guilds</span><span>.</span><span>id</span>
<span>GROUP</span> <span>BY</span> <span>guilds</span><span>.</span><span>id</span><span>;</span>

<span>-- same but the player list is a CSV string</span>
  <span>SELECT</span> <span>guilds</span><span>.</span><span>name</span><span>,</span> <span>string_agg</span><span>(</span><span>players</span><span>.</span><span>id</span><span>,</span> <span>','</span><span>)</span> <span>-- ...</span>
  
<span>-- same but the player list is a JSONB array</span>
  <span>SELECT</span> <span>guilds</span><span>.</span><span>name</span><span>,</span> <span>jsonb_agg</span><span>(</span><span>players</span><span>.</span><span>id</span><span>)</span> <span>-- ...</span>
  
<span>-- same but returns a nice JSONB object like so:</span>
<span>-- { guild1: [ playerid1, playerid2, .. ], .. }</span>
<span>SELECT</span> <span>jsonb_object_agg</span><span>(</span><span>guild_name</span><span>,</span> <span>players</span><span>)</span> <span>FROM</span> <span>(</span>
  <span>SELECT</span> <span>guilds</span><span>.</span><span>name</span> <span>AS</span> <span>guild_name</span><span>,</span> <span>array_agg</span><span>(</span><span>players</span><span>.</span><span>id</span><span>)</span> <span>AS</span> <span>players</span>
    <span>FROM</span> <span>guilds</span>
    <span>JOIN</span> <span>players</span> <span>ON</span> <span>players</span><span>.</span><span>guild_id</span> <span>=</span> <span>guilds</span><span>.</span><span>id</span>
<span>GROUP</span> <span>BY</span> <span>guilds</span><span>.</span><span>id</span>
<span>)</span> <span>AS</span> <span>q</span><span>;</span></code></pre></figure>

<h3 id="aggregates-with-order">Aggregates With Order</h3>

<p>While we‚Äôre on the topic, here‚Äôs how to set the order of values that are passed
to the aggregate function, <em>within each group</em>:</p>

<figure><pre><code data-lang="sql"><span>-- each state with a list of counties sorted alphabetically</span>
  <span>SELECT</span> <span>states</span><span>.</span><span>name</span><span>,</span> <span>string_agg</span><span>(</span><span>counties</span><span>.</span><span>name</span><span>,</span> <span>','</span> <span>ORDER</span> <span>BY</span> <span>counties</span><span>.</span><span>name</span><span>)</span>
    <span>FROM</span> <span>states</span> <span>JOIN</span> <span>counties</span>
    <span>JOIN</span> <span>states</span><span>.</span><span>name</span> <span>=</span> <span>counties</span><span>.</span><span>state_name</span>
<span>GROUP</span> <span>BY</span> <span>states</span><span>.</span><span>name</span><span>;</span></code></pre></figure>

<p>Yes, there is a trailing ORDER BY clause inside the function call paranthesis.
Yes, the syntax is weird.</p>

<h3 id="array-and-unnest">Array and Unnest</h3>

<p>Use the ARRAY constructor to convert a set of rows, each with one column, into
an array.  The database driver (like JDBC) should be able to map Postgres arrays
into native arrays and might be easier to work with.</p>

<figure><pre><code data-lang="sql"><span>-- convert rows (with 1 column each) into a 1-dimensional array</span>
<span>SELECT</span> <span>ARRAY</span><span>(</span><span>SELECT</span> <span>id</span> <span>FROM</span> <span>players</span> <span>WHERE</span> <span>lifetime_spen‚Ä¶</span></code></pre></figure></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://pgdash.io/blog/postgres-tips-and-tricks.html?hh">http://pgdash.io/blog/postgres-tips-and-tricks.html?hh</a></em></p>]]>
            </description>
            <link>http://pgdash.io/blog/postgres-tips-and-tricks.html?hh</link>
            <guid isPermaLink="false">hacker-news-small-sites-24504948</guid>
            <pubDate>Thu, 17 Sep 2020 14:21:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Data-Oriented Programming in Python]]>
            </title>
            <description>
<![CDATA[
Score 68 | Comments 14 (<a href="https://news.ycombinator.com/item?id=24504947">thread link</a>) | @jbredeche
<br/>
September 17, 2020 | https://www.moderndescartes.com/essays/data_oriented_python/ | <a href="https://web.archive.org/web/*/https://www.moderndescartes.com/essays/data_oriented_python/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div>
	

<p> Originally posted 2020-09-13</p>
<p> Tagged: <a href="https://www.moderndescartes.com/essays/tags/optimization">optimization</a>, <a href="https://www.moderndescartes.com/essays/tags/computer_science">computer_science</a>, <a href="https://www.moderndescartes.com/essays/tags/python">python</a></p>
<p> <em>Obligatory disclaimer: all opinions are mine and not of my employer </em></p>
<hr>

<p>Many users of Python deprioritize performance in favor of soft benefits like ergonomics, business value, and simplicity. Users who prioritize performance typically end up on faster compiled languages like C++ or Java.</p>
<p>One group of users is left behind, though. The scientific computing community has lots of raw data they need to process, and would very much like performance. Yet, they struggle to move away from Python, because of network effects, and because Python‚Äôs beginner-friendliness is appealing to scientists for whom programming is not a first language. So, how can Python users achieve some fraction of the performance that their C++ and Java friends enjoy?</p>
<p>In practice, scientific computing users rely on the NumPy family of libraries e.g.&nbsp;NumPy, SciPy, TensorFlow, PyTorch, CuPy, JAX, etc.. The sheer proliferation of these libraries suggests that the NumPy model is getting something right. In this essay, I‚Äôll talk about what makes NumPy so effective, and where the next generation of Python numerical computing libraries (e.g.&nbsp;TensorFlow, PyTorch, JAX) seems to be headed.</p>
<h2 id="data-good-pointers-bad">Data good, pointers bad</h2>
<p>A pesky fact of computing is that computers can compute far faster than we can deliver data to compute on. In particular, data transfer <em>latency</em> is the Achille‚Äôs heel of data devices (both RAM and storage). Manufacturers disguise this weakness by emphasizing improvements in data transfer <em>throughput</em>, but latency continues to stagnate. Ultimately, this means that any chained data access patterns, where one data retrieval must be completed before the next may proceed, are the worst case for computers.</p>
<p>These worst-case chained data access patterns are unfortunately quite common ‚Äì so common that they have a name you may be familiar with: a pointer.</p>
<p>Pointers have always been slow. In the ‚Äô80s and ‚Äô90s, our hard drives were essentially optimized record players, with a read head riding on top of a spinning platter. These hard drives had physical limitations: The disk could only spin so fast without shattering, and the read head was also mechanical, limiting its movement speed. Disk seeks were slow, and the programs that were most severely affected were databases. Some ways that databases dealt with these physical limitations are:</p>
<ul>
<li>Instead of using binary trees (requiring <span>\(\log_2 N\)</span> disk seeks), B-trees with a much higher branching factor <span>\(k\)</span> were used, only requiring <span>\(\log_k N\)</span> disk seeks.</li>
<li>Indices were used to query data without having to read the full contents of each row.</li>
<li>Vertically-oriented databases optimized for read-heavy workloads (e.g.&nbsp;summary statistics over one field, across entire datasets), by reorganizing from <a href="https://en.wikipedia.org/wiki/AoS_and_SoA">arrays of structs to structs of arrays</a>. This maximized effective disk throughput, since no extraneous data was loaded.</li>
</ul>
<p>Today, compute speed is roughly <span>\(10^5 - 10^6\)</span> times faster than in 1990. Today, RAM is roughly <span>\(10^5\)</span> times faster than HDDs from 1990. I was amused and unsurprised to find that Raymond Hettinger‚Äôs <a href="https://www.youtube.com/watch?v=npw4s1QTmPg">excellent talk on the evolution of Python‚Äôs in-memory <code>dict</code> implementation</a> plays out like a brief history of early database design. Time, rather than healing things, has only worsened the compute-memory imbalance.</p>
<h2 id="numpys-optimizations">NumPy‚Äôs optimizations</h2>
<h3 id="boxing-costs">Boxing costs</h3>
<p>In many higher-level languages, raw data comes in boxes containing metadata and a pointer to the actual data. In Python, the PyObject box holds reference counts, so that the garbage collector can operate generically on all Python entities.</p>
<p>Boxing creates two sources of inefficiency:</p>
<ul>
<li>The metadata bloats the data, reducing the data density of our expensive memory.</li>
<li>The pointer indirection creates another round trip of memory retrieval latency.</li>
</ul>
<p>A NumPy array can hold many raw data within a single PyObject box, <em>provided that all of those data are of the same type</em> (int32, float32, etc.). By doing this, NumPy amortizes the cost of boxing over multiple data.</p>
<p>In <a href="https://www.moderndescartes.com/essays/deep_dive_mcts">my previous investigations into Monte Carlo tree search</a>, a naive UCT implementation performed poorly because it instantiated millions of UCTNode objects whose sole purpose was to hold a handful of float32 values. In the optimized UCT implementation, these nodes were replaced with NumPy arrays, reducing memory usage by a factor of 30.</p>
<h3 id="attribute-lookup-function-dispatch-costs">Attribute lookup / function dispatch costs</h3>
<p>Python‚Äôs language design forces an unusually large amount of pointer chasing. I mentioned boxing as one layer of pointer indirection, but really it‚Äôs just the tip of the iceberg.</p>
<p>Python has no problem handling the following code, even though each of these multiplications invokes a completely different implementation.</p>
<pre><code>&gt;&gt;&gt; mixed_list = [1, 1.0, 'foo', ('bar',)]
&gt;&gt;&gt; for obj in mixed_list:
...     print(obj * 2)

2
2.0
'foofoo'
('bar', 'bar')</code></pre>
<p>Python accomplishes this with a minimum of two layers of pointer indirection:</p>
<ol type="1">
<li>Look up the type of the object.</li>
<li>Look up and execute the <code>__mul__</code> function from that type‚Äôs operation registry.</li>
</ol>
<p>Additional layers of pointer indirection may be required if the <code>__mul__</code> method is defined on a superclass: the chain of superclasses must be traversed, one pointer at a time, until an implementation is found.</p>
<p>Attribute lookup is similarly fraught; <code>@property</code>, <code>__getattr__</code>, and <code>__getattribute__</code> provide users with flexibility that incurs pointer chasing overhead with something as simple as executing <code>a.b</code>. Access patterns like <code>a.b.c.d</code> create exactly the chained data access patterns that are a worst-case for data retrieval latency.</p>
<p>To top it all off, merely <em>resolving</em> the object is expensive: there‚Äôs a stack of lexical scopes (local, nonlocal, then global) that are checked in order to find the variable name. Each check requires a dictionary lookup, another source of pointer indirection.</p>
<p>As the saying goes: ‚ÄúWe can solve any problem by introducing an extra level of indirection‚Ä¶ except for the problem of too many levels of indirection‚Äù. The NumPy family of libraries deals with this indirection, not by removing it, but again by sharing its cost over multiple data.</p>
<pre><code>&gt;&gt;&gt; homogenous_array = np.arange(5, dtype=np.float32)
&gt;&gt;&gt; multiply_by_two = homogenous_array * 2
&gt;&gt;&gt; print(multiply_by_two)
array([ 0.,  2.,  4.,  6.,  8.], dtype=float32)</code></pre>
<p>Sharing a single box for multiple data allows NumPy to retain the expressiveness of Python while minimizing the cost of the dynamism. As before, this works because of the additional constraint that all data in a NumPy array must have identical type.</p>
<h2 id="the-frontier-jit">The Frontier: JIT</h2>
<p>So far, we‚Äôve seen that NumPy doesn‚Äôt solve any of Python‚Äôs fundamental problems when it comes to pointer overhead. Instead, it merely puts a bandaid on the problem by sharing those costs across multiple data. It‚Äôs a pretty successful strategy ‚Äì in my hands (<a href="https://www.moderndescartes.com/essays/vectorized_pagerank">1</a>, <a href="https://www.moderndescartes.com/essays/deep_dive_mcts">2</a>), I find that NumPy can typically achieve 30-60x speedups over pure Python solutions to dense numerical code. However, given that C code typically achieves <a href="https://www.moderndescartes.com/essays/data_oriented_python/(https://benchmarksgame-team.pages.debian.net/benchmarksgame/fastest/python3-gcc.html)">100-200x performance</a> over pure Python on dense numerical code (common in scientific computing), it would be nice if we could further reduce the Python overhead.</p>
<p>Tracing <a href="https://en.wikipedia.org/wiki/Just-in-time_compilation">JITs</a> promise to do exactly this. Roughly, the strategy is to trace the execution of the code and record the pointer chasing outcomes. Then, when you call the same code snippet, reuse the recorded outcomes! NumPy amortizes Python overhead over multiple data, and JIT amortizes Python overhead over multiple function calls.</p>
<p>(I should note that I‚Äôm most familiar with the tracing JITs used by TensorFlow and JAX. <a href="https://doc.pypy.org/en/latest/">PyPy</a> and <a href="https://numba.pydata.org/">Numba</a> are two alternate JIT implementations that have a longer history, but I don‚Äôt know enough about them to treat them fairly, so my apologies to readers.)</p>
<p>Tracing unlocks many wins typically reserved for compiled languages. For example, once you have the entire trace in one place, operations can be fused together (e.g., to make use of the <a href="https://en.wikipedia.org/wiki/FMA_instruction_set">fused multiply-add instructions</a> common to most modern computers), memory layouts can be optimized, and so on. TensorFlow‚Äôs <a href="https://www.tensorflow.org/guide/graph_optimization">Grappler</a> is one such implementation of this idea. Traces can also be <a href="https://en.wikipedia.org/wiki/Backpropagation">walked backwards</a> to automatically compute derivatives. Traces can be compiled for different hardware configurations, so that the same Python code executes on CPU, GPU, and TPU. JAX can <a href="https://jax.readthedocs.io/en/latest/notebooks/quickstart.html#Auto-vectorization-with-vmap">autovectorize traces</a>, adding a batch dimension to all operations. Finally, a trace can be exported in a language-agnostic manner, allowing a program defined in Python to be executed in <a href="https://www.tensorflow.org/js">Javascript</a>, <a href="https://www.tensorflow.org/tfx/guide/serving">C++</a>, or more.</p>
<p>Unsurprisingly, there‚Äôs a catch to all this. NumPy can amortize Python overhead over multiple data, but only if that data is the same type. JIT can amortize Python overhead over multiple function calls, but only if the function calls would have resulted in the same pointer chasing outcomes. Retracing the function to verify this would defeat the purpose of JIT, so instead, TensorFlow/JAX JIT uses array shape and dtype to guess at whether a trace is reusable. This heuristic is necessarily conservative, rules out otherwise legal programs, often requires unnecessarily specific shape information, and doesn‚Äôt make any guarantees against mischievous tinkering. Furthermore, data-dependent tracing is a known issue (<a href="https://pytorch.org/docs/stable/generated/torch.jit.trace.html">1</a>, <a href="https://jax.readthedocs.io/en/latest/notebooks/Common_Gotchas_in_JAX.html#python-control-flow-+-JIT">2</a>). I worked on <a href="https://blog.tensorflow.org/2018/07/autograph-converts-python-into-tensorflow-graphs.html">AutoGraph</a>, a tool to address data-dependent tracing. Still, the engineering benefits of a shared tracing infrastructure are too good to pass up. I expect to see JIT-based systems flourish in the future and iron out their user experience.</p>
<h2 id="conclusion">Conclusion</h2>
<p>The NumPy API‚Äôs specifically addresses Python‚Äôs performance problems for the kinds of programs that scientific computing users want to write. It encourages users to write code in ways that minimize pointer overhead. Coincidentally, this way of writing code is a fruitful abstraction for tracing JITs targeting vastly parallel computing architectures like GPU and TPU. (Some people argue that <a href="https://dl.acm.org/citation.cfm?id=3321441">machine learning is stuck in a rut</a> due to this NumPy monoculture.) In any case, tracing JITs built on top of ‚Ä¶</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.moderndescartes.com/essays/data_oriented_python/">https://www.moderndescartes.com/essays/data_oriented_python/</a></em></p>]]>
            </description>
            <link>https://www.moderndescartes.com/essays/data_oriented_python/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24504947</guid>
            <pubDate>Thu, 17 Sep 2020 14:21:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Deduplicating Decklists]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24504939">thread link</a>) | @umanwizard
<br/>
September 17, 2020 | http://justinjaffray.com/deduplicating-decklists/ | <a href="https://web.archive.org/web/*/http://justinjaffray.com/deduplicating-decklists/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    

<p><small>17 Sep 2020</small></p><p>This is not going to be my normal kind of post, it‚Äôs not very focused, and
going to be a bit rambley, as I talk about a problem I thought about one day.</p>
<p>Magic: The Gathering is a card game where players construct decks, typically of
60 cards plus a 15 card sideboard, for 75 cards total.</p>
<p>Periodically, the company that makes the game,
Wizards of the Coast (WotC) publishes a
list of decks that did well recently.
Just recently they
<a href="https://magic.gg/news/esports-update-grand-finals-formats-decklist-hub-and-more">announced</a> that they were going to start doing this for their most recent digital offering of the game.
Stay with me! This isn‚Äôt a post about card games.
This list, however, is doctored: they want the data shown to be broad and not repetitive, so they perform some amount of deduplication on the data.
This means that if two ‚Äúsimilar‚Äù decks do well, only one will be shown in the dump.
The linked article outlines what is meant by ‚Äúsimilar:‚Äù</p>
<blockquote>
<p>We will be publishing lists from Standard Ranked, Traditional Standard Ranked, Historic Ranked, and Traditional Historic Ranked play queues. Like we do for Magic Online Leagues, we will be posting an example list for each category of deck that share a minimum number of cards: at least 55 of 75 cards (across main deck and sideboard) shared in Traditional (best of three games, or Bo3) or at least 45 of 60 main deck cards shared in best of one (Bo1). All lists published will have won at least six consecutive matches.</p>
</blockquote>
<p>This seemed to me like an interesting problem!
Given a raw set of decks that did well, how could we produce such a
deduplicated set of decks?</p>
<p>At a high level, we might envision the set of decks as a bunch of points in some
space, where points are closer together if the decks are more ‚Äúsimilar‚Äù (for some
meaning of ‚Äúsimilar‚Äù we haven‚Äôt made precise yet).</p>
<p><img src="http://justinjaffray.com/images/decks1.png">
</p>
<p>With a solution being a set of decks which ‚Äúcover‚Äù the set of all other decks
(for some meaning of ‚Äúcover‚Äù we haven‚Äôt made precise yet).</p>
<p><img src="http://justinjaffray.com/images/decks2.png">
</p>
<p>To be slightly more precise, given a set \(D\) of ‚Äúdecks,‚Äù we want to find a
minimal set \(D^\prime \subseteq D\) such that every \(d \in D\) is
‚Äúsufficiently close‚Äù to some \(d^\prime \in D^\prime\).</p>
<p>Let‚Äôs define what we mean by ‚Äúdeck‚Äù and ‚Äúsufficiently close.‚Äù We can represent
decks as maps from the set of cards \(C\) to some integer \(n \in \mathbb N\)
denoting how many copies of a given card are in the deck.
We might also think of this as an \(\mathbb N\) vector indexed by \(C\), which can be denoted \(\mathbb N ^ C\).
That‚Äôs all to say, you should think of one of these decks as just a sequence of numbers denoting how many of a given card were included,
where each index corresponds to a particular card:
\[
\langle
\ldots, 4 \ldots, 2, \ldots, 1, \ldots, 4, \ldots
\rangle
\]
The sequence is finite, since there‚Äôs a finite number of Magic cards (about twenty thousand).</p>
<p>For ‚Äúcloseness‚Äù of two decks, per the statement above from WotC we are interested in the <em>total number of different cards between them</em>.
That is, the distance between two decks \(a\) and \(b\) is the sum
of the absolute difference of the quantity of each card:
\[
|a - b| = \sum_{c \in C} \left| a_c - b_c \right|.
\]
This way of measuring distance is pretty natural, and satisfies some
nice properties:</p>
<ol>
<li>\(|a - b| = 0\) if and only if \(a = b\),</li>
<li>\(|a - b| = |b - a|\) (symmetry), and</li>
<li>\(|a - c| \le |a - b| + |b - c|\) (triangle inequality).</li>
</ol>
<p>A notion of distance that satisfies properties 1, 2, and 3 happens to be called a <em>metric</em>,
and a set combined with a metric on that set is called a <em>metric space</em>.
This particular metric we‚Äôve stumbled on is actually well known, and is called
the \(\ell_1\)-norm.</p>
<p>We‚Äôll be a little abstract here, but when you hear ‚Äúmetric‚Äù you should just
think ‚Äúway of thinking about distance.‚Äù
If you look at the three properties, they‚Äôre all pretty natural things you‚Äôd want from a measure of ‚Äúdistance:‚Äù</p>
<ol>
<li>says the only thing ‚Äúzero distant‚Äù from a thing is the thing itself,</li>
<li>says that \(a\) is exactly as far from \(b\) as \(b\) is from \(a\), and</li>
<li>says two things can‚Äôt be further away than the sum of their distances to a third thing.</li>
</ol>
<p>There are lots of metrics people use for various things.
Another one is the \(\ell_2\)-norm, which you might also know as Euclidean distance:
if you have two points in Euclidean space and draw a straight line between
them, their \(\ell_2\)-distance is the length of that line.
In two-dimensional space,
\[
|a - b| = \sqrt{(a_x - b_x)^2 + (a_y - b_y)^2}
\]
Which is just the Pythagorean theorem.
For our problem we‚Äôre concerned with the \(\ell_1\)-distance, as described above.</p>
<p>Why bother introducting this abstraction?
Well, mostly I just thought it was kind of neat, but
I think making this kind of hop upwards the abstraction hierarchy can be useful to understand problems sometimes,
because it lets us make concrete the link between our actual problem, \(\ell_1\)-distance of 20,000-dimensional \(\mathbb N\)-points, weird, scary, hard to visualize, to
a problem which is easier to conceptualize: \(\ell_2\)-distance of two-dimensional points.</p>
<p><img src="http://justinjaffray.com/images/decks2.png">
</p>
<p>Seen this way, this kind of picture isn‚Äôt just a helpful mental model,
but it actually has a real, quantifiable link to the original problem we were trying to solve.</p>
<p>When thinking about this problem, it‚Äôs not completely accurate, but it‚Äôs not
too bad to just imagine the \(\ell_2\) picture above.</p>
<p>Remember that the thing we‚Äôre primarily interested in is going to be
all the points ‚Äúsufficiently close‚Äù to a given point,
where ‚Äúsufficiently close‚Äù means ‚Äúhas distance less than some \(r\).‚Äù
It turns out this thing has a name, the <em>(closed) ball of radius \(r\) centered at \(p\)</em> is
the set of points \(x\) satisfying \(|x - p| \le r\).
A ‚Äúball‚Äù is basically what you expect in most contexts, in 2D space, under the \(\ell_2\)-norm (our diagram above)
a ball is a (filled in) circle.
In 3D it‚Äôs a sphere.
In ‚Äúdeck-space,‚Äù it‚Äôs the set of decks you can make from \(p\) by adding and removing at most \(r\) cards.</p>
<p>This lets us rephrase our problem a bit more generally.
Given a metric space \(M\), a finite set of points \(P \subseteq M\), and a radius \(r\),
we want to find a set \(P^\prime \subseteq P\) such that every \(p \in P\)
is within some ball of radius \(r\) centered at some \(p^\prime \in P^\prime\).</p>
<p>So, can we solve <em>this</em> problem, in a <em>general</em> metric space, efficiently?
It turns out we actually can‚Äôt!
Why did I bother going down this road of generalization if it was going to lead to a dead-end?
Well, it‚Äôs the road I took when thinking about this problem and it‚Äôs my blog,
and also it‚Äôs actually easy to show that the problem at this level of generality is NP-hard.
As a reminder, to show this is NP-hard for metric spaces in general, we must:</p>
<ol>
<li>Fix some metric space, and</li>
<li>show that computing the size of the cover is NP-hard by showing that an
efficient solution to <em>that</em> would allow us to solve some other NP-hard
problem.</li>
</ol>
<p>Consider a graph \(G\):</p>
<p><img src="http://justinjaffray.com/images/petersen.png">
</p>
<p>The <em>dominating set problem</em> is this:
given a graph \(G = (V, E)\), find a set \(V^\prime\) of vertices such that every \(v \in V\) is adjacent to some
\(v^\prime \in V^\prime\).
That is, we want to choose some set of vertices that ‚Äúcover‚Äù all other vertices: every other vertex is adjacent to one we chose.
Finding a minimum dominating set is a well known NP-complete problem,
and already smells similar to our problem!</p>
<p>If we define a binary function on the vertices of \(G\):
\[
d(a, b) = \text{the length of the shortest path between $a$ and $b$},
\]
it turns out \(d\) is a metric (check this yourself, it‚Äôs easy)!</p>
<p>If we take this metric and set \(r\) to 1, we‚Äôve exactly recreated the
dominating set problem, which, being NP-complete, means our problem
in a general metric space is also NP-complete.
While this doesn‚Äôt mean that our original problem about Magic decks is
NP-complete (though it‚Äôs evidence that suggests this might be the case),
it does mean that any algorithm that <em>only</em> uses the properties of a metric space
probably doesn‚Äôt have an efficient solution.</p>
<p>When asked about this, my friend <a href="https://www.its.caltech.edu/~fshinko/">Forte</a>
found a nice reduction from 3SAT to the deck problem if \(r\) is at least four.
The gist of it is this:</p>
<ul>
<li>Given an instance of 3SAT with \(n\) variables \(\{v_1, \ldots, v_n\}\), let your set of ‚Äúcards‚Äù be
\(\{x_1, \ldots, x_n\} \cup \{y_1, \ldots, y_n\}\).</li>
<li>For each clause \(a \vee b \vee c\), take the vector that is 1 at \(x_i\) for the variable for \(a\) if \(a\) is not negated, and -1 if it is, and the same for \(b\) and \(c\).</li>
<li>For each variable \(v_i\), add three vectors that are all 2 at \(y_i\), and -1, 0, and 1 at \(x_i\), respectively (the choice of the one at 1 or -1 will correspond to whether we take that variable to be true or not, and the 0 one is there to ensure you need to take at least one of them).</li>
<li>This set of decks has a cover of size \(n\) (for radius 4) if and only if the 3SAT instance was satisfiable (the numbers can be tweaked to support radii larger than 4).</li>
</ul>
<p>If \(r\) is one then there actually <em>is</em> an efficient solution,
because in this case the adjacency graph is bipartite, and a dominating set of a
bipartite graph can be found in polynomial time.
I don‚Äôt know if there‚Äôs an efficient solution when \(r\) is two or three.</p>
<p>Ok, well, we are probably not going to find an efficient solution then, how about an
inefficient solution?
Wizard of the Coast must have <em>some</em> way of doing that, since they regularly
publish such deduplicated decklists.
The likely answer, I‚Äôd guess, is that they don‚Äôt fret about finding the minimum cover,
and just do something like ‚Äúoutput uncovered decks until none remain.‚Äù
Or possibly there are just few enough decklists that they have an excel spreadsheet
or something that makes sure their stated invariants are upheld. Unsure!
If you work at WotC and somehow came across this post I‚Äôd be curious to learn the real answer.</p>
<p>I can‚Äôt say how they actually do it, but there are plenty of heuristic methods
for solving this kind of thing that they might employ if you‚Äôre actually
interested in finding a good solution.</p>
<p>Techniques like
<a href="http://justinjaffray.com/branch-and-bound/">Branch and Bound</a> or simulated</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://justinjaffray.com/deduplicating-decklists/">http://justinjaffray.com/deduplicating-decklists/</a></em></p>]]>
            </description>
            <link>http://justinjaffray.com/deduplicating-decklists/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24504939</guid>
            <pubDate>Thu, 17 Sep 2020 14:20:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Retro Unix Operating System]]>
            </title>
            <description>
<![CDATA[
Score 79 | Comments 8 (<a href="https://news.ycombinator.com/item?id=24504891">thread link</a>) | @elvis70
<br/>
September 17, 2020 | https://www.singlix.com/runix | <a href="https://web.archive.org/web/*/https://www.singlix.com/runix">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div width="390">

            
<p>
<span lang="en-us"><span face="Arial" color="#003366" size="2">
Retro UNIX 8086 v1 operating system has been developed by Erdogan Tan as a 
special purposed derivation of original UNIX v1 (by Ken Thompson, 1970-1972).</span></span></p>

<p>
<span face="Arial" color="#003366" size="2"><span lang="en-us">Source code has 
been ported from PDP-11 Unix assembler syntax to Microsoft Macro Assembler 
(INTEL x86 real mode) syntax and original unix source code has been modified for 
IBM PC/AT compatibility with standard ROM BIOS functions, without 
dropping/removing original UNIX v1 multitasking (time-sharing) features.</span></span></p>

<p><span lang="en-us">
<span face="Arial" size="2" color="#003366">Retro UNIX 386 v1 is 32 bit (80386 
protected mode) version of Retro UNIX 8086 v1. Retro UNIX 386 v1 operating 
system kernel and binaries have been written in assembly language syntax of 
Netwide Assembler (NASM). </span>
</span></p>

<p>
<span face="Arial" color="#003366" size="2"><span lang="en-us">Retro UNIX is a 
predecessor to SINGLIX operating system project.<br>
&nbsp;</span></span></p>
            </div></div>]]>
            </description>
            <link>https://www.singlix.com/runix</link>
            <guid isPermaLink="false">hacker-news-small-sites-24504891</guid>
            <pubDate>Thu, 17 Sep 2020 14:16:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[3 Terraform tips that will save you from terrible mistakes]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24504373">thread link</a>) | @ish-xyz
<br/>
September 17, 2020 | https://ish-ar.io/terraform_blog_series_3_tips/ | <a href="https://web.archive.org/web/*/https://ish-ar.io/terraform_blog_series_3_tips/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><span>
      <a href="https://ish-ar.io/static/824daa81507552818ac52c9002670de9/782f4/terraform-icon.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="terraform-icon" title="terraform-icon" src="https://ish-ar.io/static/824daa81507552818ac52c9002670de9/782f4/terraform-icon.png" srcset="https://ish-ar.io/static/824daa81507552818ac52c9002670de9/cf440/terraform-icon.png 148w,
https://ish-ar.io/static/824daa81507552818ac52c9002670de9/d2d38/terraform-icon.png 295w,
https://ish-ar.io/static/824daa81507552818ac52c9002670de9/782f4/terraform-icon.png 480w" sizes="(max-width: 480px) 100vw, 480px">
  </a>
    </span></p>
<h2>1. A big single state file is not going to help you.</h2>
<p>When a new user starts with Terraform, it could seem easier to manage all the infrastructure code under one big repository and one big state file (To who doesn‚Äôt know what a state file is, check out this page -&gt; <a href="https://www.terraform.io/docs/state/index.html">https://www.terraform.io/docs/state/index.html</a>)</p>
<p>However, this design will soon show its downsides and limits.</p>
<p><strong>Why is a mono state file, not a good idea in terms of performance?</strong></p>
<p>One of the reason is that during the ‚Äòterraform plan‚Äô command there‚Äôs an action called ‚Äúrefresh‚Äù. This step means that Terraform is about to ‚Äúreconcile the state Terraform knows about (via its state file) with the real-world infrastructure.‚Äù<br>
If there‚Äôs a big state file with the whole infrastructure mapped and a person wants to change just a single GKE cluster, remove a single EC2 instance or create a new bucket.<br>
Guess what? <strong>It will require the refresh on the whole infrastructure</strong> (and trust me, it will take a while!)</p>
<p><strong>But what about the infrastructure reliability?</strong></p>
<p>What happens if accidentally someone runs ‚Äòterraform destroy‚Äô against that mono state file?<br>
Yes. It‚Äôs all gone. You would have to recreate the infrastructure.</p>
<p>What happens if someone uses a new terraform version? (e.g.: from terraform 0.11 to terraform 0.12)<br>
Everyone would have to upgrade the CLI version, and if you‚Äôre unlucky, you might also need to update the actual terraform code.<br>
There are other reasons, but I‚Äôm sure I‚Äôve made this point clear enough: don‚Äôt use a single state file! -.-‚Äô</p>
<h2>2. Monorepo is evil.</h2>
<p>Someone  might say: let‚Äôs put all together, modules, code, everything in a single repository but in different directories with different state files: brilliant -.-‚Äô</p>
<p>Trust me when I say that I‚Äôve seen the worst things with Terraform: repositories with symlinks to share/copy variables in different directories, I‚Äôve seen gigantic mono repositories, terraform files generated from bash scripts and an SQL database, trust me it‚Äôs not fancy out there.</p>
<p>Why is a huge repository NOT a good idea in terms of code reliability?<br>
Plain and simple: it doesn‚Äôt scale.<br>
Now imagine you‚Äôre a small team of 5 engineers, pushing all the infrastructure code together might seem a good idea.<br>
You all have permission to create/remove/edit the terraform code, and this way, you would not have to deal with multiple pipelines, etc.</p>
<p>However after a year, your small team of 5 becomes 100. Other engineers now want to use Terraform to manage their infrastructures (network engineers, DBAs, Data Engineers, Data Scientists, etc.).</p>
<p>It will become tricky (not impossible) to manage permissions, coordinate terraform changes, and create a whole pipeline/automation that can satisfy everyone‚Äôs need.</p>
<p>And what if you have used modules inside that single repository?<br>
How are you going to manage modules versions?<br>
A poor repositories structure design generates all these obstacles.</p>
<p>What if you are already there?<br>
My piece of advice is start by moving modules to different repositories.<br>
You can also start to automate testing and tagging on modules.<br></p>
<p>After this first step is done, split your infrastructure into layers, and start to divide the layers inside different repositories managed by the owners of that layer of infrastructure.<br>
It will be painful!<br>
Remember, no pain, no gain!</p>
<h2>3. Don‚Äôt run Terraform manually: use pipelines.</h2>
<p>Here too, I‚Äôve seen the worst things. I‚Äôve once worked for a company that used to have a Slack channel where they ‚Äúlocked‚Äù Terraform by basically sending messages like ‚ÄúI‚Äôm using Terraform‚Äù or ‚Äúterraform locked‚Äù: I mean‚Ä¶ seriously? ‚ÄúTerraform locked‚Äù?  -.-‚Äô</p>
<p>Having the right orchestration and automation will help your team to don‚Äôt override each other changes.<br>
If you plan to work with pipelines, my advice is to have <em>no</em> concurrent builds and run the automation on tiny parts of the infrastructures.<br>
By doing this, there won‚Äôt be long pipelines but quick flows with an effective feedback cycle.</p>
<p><em>Always tag your infrastructure code</em>, and treat it as a real software/application.</p>
<p><em>Run tests.</em> Testing Terraform code might look complicated but there some useful tools out there such as ‚Äúterratest‚Äù.<br>
If you‚Äôre comfortable with Go, you can follow Hashicorp‚Äôs tutorials about unit testing with Terraform.</p>
<p><em>You should have a tool to handle the CI and another to run the deploy.</em><br>
In my opinion, the desired situation is that the CI tool would push an artifact with the tested Terraform code in it, and the deploy would pick the artifact and deploy it.</p>
<h2>Conclusion</h2>
<p>The perfect way to run Terraform doesn‚Äôt exist.<br>
In most cases, it depends on the use case, BUT there are some errors that I‚Äôd define common mistakes that everyone should avoid.<br>
Remember: well begun is half done :)</p></div></div>]]>
            </description>
            <link>https://ish-ar.io/terraform_blog_series_3_tips/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24504373</guid>
            <pubDate>Thu, 17 Sep 2020 13:32:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Talking trash: the corporate playbook of false solutions to the plastic crisis [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24504038">thread link</a>) | @Imaiomus
<br/>
September 17, 2020 | https://talking-trash.com/wp-content/uploads/2020/09/TalkingTrash_FullReport.pdf | <a href="https://web.archive.org/web/*/https://talking-trash.com/wp-content/uploads/2020/09/TalkingTrash_FullReport.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>_√ΩpK√£ÔøΩ7√ï&lt;≈∏√Øy√°≈°W¬™≈æ¬Ø√¨¬µ¬°√∂¬π√æ√ë√∑.√±√∏‚Äî¬ÆY]√ô√∞ √Ω√´√ç√ä√â√æU∆ík√¥√Å¬πD¬™LdBV&nbsp;¬øhE[¬±r+~¬°¬µ}√∞¬°√•‚Ä°√ñ]√®¬¥iU√î:¬°g√´‚Äö‚Äπ√≠v(√ùW¬§∆í√∫Y¬°‚ÄìdE/¬∞√î+q‚Äò√ì2s¬∞kk√ón¬≠!√ì√¶P¬∞√ø¬°QM√∞g6dvÔøΩg√ö¬¨√ã√èl/√å√¨√´‚Äô9h
v√ø≈ì	&lt;√ÄÔøΩ√áÔøΩ√ü:¬ÆGks¬Ø√ñ√Ö}Z7‚Ä¢¬¥√Æ√™√õz0x!√§√©¬ß√ëYq_√ß¬∏√ª√è¬æ}√´¬æ¬≤√ñ√£!+≈ìw√∫‚Ñ¢$√µ√è√áU¬°¬π√¢s¬¶j&amp;i√ñ^√ë√ØP√Ö‚Ç¨C√£9=¬∑ÔøΩ¬´l√ÉeN√ø√ôOÔøΩI¬≥√ôj3g√õ‚Ñ¢¬≠‚Ñ¢^¬∂√çg√∂√™L+:√ìZ¬∂√´&lt;√∏√ï¬∂∆í¬£√ö¬ª√∂n]W√ú¬∫¬Ω√¥√§8t|.¬ß√Ø¬∂¬ΩbN{pv√õ¬®‚Äπi9m¬æ√ú¬∂&nbsp;¬∫}√Ç‚Ä¢√≠√Ü¬∂¬Ø¬ª¬™}{M√ª¬æk√öÔøΩG:‚Äö√óv≈í¬™√≠Àúp]√á‚Äö¬∫≈Ωu7vl¬Ø√Ø√ò√∑o√á¬£‚Ä°∆í¬∑√ïpx√Ç√§√É¬Ø‚Ä∫zx{√ì√°}√ìÔøΩ	√é82j√¶‚Äò	wY0K√áFi¬±√ã√é¬∏
N√ª√¨¬≤-ÔøΩ√¨‚Ä∫√§¬∏√™≈æf√â¬∞O¬ø√û¬∂`e√õ¬®√ôx√ñK≈ΩÔøΩi√õ¬≥Q¬≠C.¬ª¬∑fÀÜ∆íUÀÜ‚Ä¢~√é+OqVK&gt;√´√Ä√é√é√ß4K√æ√ØB¬∑&lt;5√†O?√Ñ¬°√¶-rh√ì9√±ÔøΩ√æ0q6¬≥:	√ñ&gt;¬∑[‚Äú√ù√ô¬Ω√∫J√õ¬¶√ã√õ√éj√â¬∫√•¬Æ¬≥≈∏√øiR√ª≈íJ√è‚Ä°¬∂=¬¥o√∏√âÔøΩ‚Ä∫ÔøΩM5¬£Ni|V+MÔøΩ√ÉfC√Æ√§&lt;‚Ä∫√É√í&lt;√£@z]m√ª¬æ√ñv\~≈∏O≈Ω√≥¬ÆW¬¥1¬®√¶e‚Ñ¢nt{√Öm¬£√æ√â¬ßa√≥√Å√éMw√Æz¬¥√≥√†√¢¬£]?Z¬±√¥√®¬∏√•G‚Ä∫W]¬º√∫√®¬¶¬µGw=y√¥√†¬∫O¬∫~√∑‚Äú≈†g&gt;1√´:√Ø¬≤¬µ√´√®√è¬¨√ëu√Ü0&gt;%&amp;wÔøΩ√Ñ√∏≈∏¬ª√≠N√ã√è≈†≈†√∞√ü√∫√°gr¬°¬•s√ÅÀú√∂&nbsp;¬°6#"g≈°p√õ¬∫√ã√ö¬∂ÔøΩ&lt;‚Äî√¨;e√ú√ì √õ¬∏
¬°√é9Y3¬ªm√úÀú#‚Ä∫√åT]‚Ä∞√¢‚Äö≈Ω$O?√®‚ÄòM-√≠gGLÔøΩÔøΩ√è)&amp;‚Äì¬≤¬ß6√Ø√à√ÅÔøΩ]√Ø9W¬°√µ#¬π√∑√îs√π√ß√∞B√ª¬∏¬Ø¬∑7¬£}√±¬ø¬¥o¬∫¬∫}√ó7√õ≈Ω√´√®√∫¬≠≈Ω≈†√±√£¬æ√ù√ë|}√á√¢:6√ù√î¬±√´_;N8√ú√µ√¶√ÉÔøΩ‚Ä∫t¬∏√π√ñ√É‚Äπ¬ß√ût√õ√°]√ìl&gt;√í√µ√∂#ww√ß‚Äò√¶¬ªÔøΩ¬®3&amp;ÔøΩ√â√ês√¶‚Ä¶√ì√ø√ô√Ø√ø¬π√ß√égv√¨Km√ç‚Äî≈æ‚Äπ√ñz√Ä9¬©3¬°n6?‚Ä°A&gt;¬£‚ÄúÔøΩ¬±¬´√ã\√ë¬™S√ºE√™√î√Ä√ª¬¨¬¨ux√≠√≥$¬Ω√π¬ßB√ì‚Ä°[√át.¬®&lt;u¬≥¬°√é≈ì¬π√ß¬´¬ß√ô√ô√ø√º3¬°√µ√øP≈ævnÔøΩ√´√™√ú√æH√ß¬æ√á:ÔøΩ√áÔøΩ‚Äî¬µ√¨√®‚ÄûG¬¨:¬∫n√ç√ë√≠O√ù√∑√î√ë√£‚Ä∞O‚ÄöO2j√Ω√ô¬¨√¢√ú'sZf√º‚Ä∫√ë√ª‚Ñ¢M√ª¬Ø¬¨tB≈ì√≥A√ºs¬¢"y≈†;‚ÄúW√Ω&lt;¬´k¬º√ï√ük√è√ò√π√ì√øGM√¶√≥≈Ω√ò√†√ï√ø√å√é¬≥√∂√≥√Ø√û|√±√∑√Ö√ü_√º}√±√∑√Ö√üI_√ú√≥≈ì√ª=√ú‚Ä¶√¢√†¬ß@W?√Ω√ßY¬ΩÔøΩ%√®)6√Ö!√ñR√™√ò√¶‚Äπ¬∫0¬¢√û4√∫J√ú¬±∆íK%√Æ√êo3*j`¬Æ8u!√æ√¢'√ü‚Ä∫A@√°JÀÜ=¬®‚Äô¬∏√Äv√≠√Ä√îe√á+
√£√†‚Äπ‚Äπ‚Äúx√úvÔøΩ∆í√ò‚Ä†√ä¬§W√ö√ñ_√†≈æ‚Ä∞nIQ¬°‚ÄûB√ûN√åy¬æ√µÀú‚Äî√≤h√î¬Ø‚Ç¨¬∏≈Ω√ö≈†gR√º√ªo‚Ä°3√ë;‚Ä†q3‚Ç¨√Ω√®q√ü√õ¬ß≈æ√ü‚Äì‚Äû≈æ\¬¨≈ì√π√ûÀútÔøΩ‚Äì√¢Qxvs√õ¬©¬∞¬æ	O√∫√Ñ1√Ö3√†iAI√∑√òb
z¬∂¬£(U√∏
√úw4√¨L√†[¬∂√òÀÜ√±{√ë+‚Äûu¬∂√ø√∏¬™00‚Ä†√•R≈í√¶~f√ê13JJ√£6|¬Ω
ÔøΩ¬≠√ñ¬Ø#y¬≥`]
5.KÀÜNe√ï√Ç¬ª√Ω√¢Àúd‚Äπ√∞√î¬£O‚Äú‚ÄùXO√∫(L‚Äìb¬•~√Éd√∞√£1‚Äù1%^√Å¬º√ä¬¢hÔøΩ√∏√π5(O¬®¬≥ÔøΩ√∞√∂√ÜMQ1¬°fx‚Ä°¬¢Db≈æ-¬∂√É[h~√∂&lt;√´‚ÄôÀúk‚Äπ
¬∏dm9‚Ä¢√ñ√ã(X‚Ä¶p1)≈Ω√É‚Ä∫‚Ä°`‚Äú V√´ÔøΩ%√èa
<q√¥‚Ä∞b¬≤-√¢zf6¬ø]!¬Æ√â+≈æÔøΩ√†√•√∞√∫plc√ÑÔøΩ√°igi√ç|h≈æÔøΩ(k√£n[|√≥¬∂q04ad√†√ôÔøΩ√çr¬º√Ñm‚Äπc<√â√†i√¶y¬£xÔøΩbz¬§√∞f+¬•u‚Ä†√º‚Ä¶jc3√Ñ√ã√∞√Æai-r,‚Ä¶g$√∫‚Äûx‚Äôk√†¬©√¶{√¶)√ìÔøΩ!4‚Ç¨'9t√àl√ûu√ú∆í?‚Äû¬Ø‚Äû√Ö>i√Ω¬ºc√ë/≈í√Ö?¬´A≈∏0√∑¬∞¬©&amp;y√ó√á√≤[j¬∞\O2√Ü√ë√Ω
*ÔøΩ√°‚Ä∞G¬§¬µQ!y¬£:√°√π√Å¬¥9¬¨Z√ûÔøΩI√∫g=3[&lt;¬Æ√ü√ÜxÀÜ¬•ÀúÀú‚Ä°l√Ñ ~¬ØÔøΩ‚Äô¬¶√≥¬±x2¬º&nbsp;¬©R|√Ø(Nz¬Æ‚Ä¶5‚Äî‚Äû18‚Ä¶‚Ä°lk3
¬¢¬®√à&nbsp;Y‚Ä∞6x √£!V√©¬≥√ê¬°¬±B?&amp;√ç√õF√≥¬∏‚Ä¶‚Ä¶√æ¬∑&lt;√üR√ë=ÔøΩ√æ
¬∑√õ√Æ‚ÄîP¬∏Q√¥ÔøΩ√∞q_‚Ä°.{¬± ∆íJ√º¬æYzt√¥9√≥‚Ä¢¬º≈†z^P∆í^EÔøΩy¬¥y√Ö¬•a:¬∑uw√Å√∑1√∫¬£&lt;¬•√Ü5√Ç‚ÄîAi2√∞i‚Ä¶√†-¬¢t‚Äúd√∞¬π√¢Zl√ö&gt;√è^‚Äù(L√ìÔøΩL`¬∂√è¬£e(JC¬∏ÔøΩO¬©G√ª0]‚Ä∞q√õ√¢√¶*√±'≈†T¬µq¬ø-^c$‚Ä†√Ö¬∞√ô¬∂.√ÅÀÜ&lt;√¥‚ÄîX√Ø&amp;&amp;'√©¬©√ìÔøΩ√†√π6√®HE√∞Ix)√∫2Àú'¬≠√ï√à≈†ÔøΩ¬¨¬µ¬≠a√à√üÔøΩa)¬º√Å9√§√ù√è‚Äò:I≈°#‚Äù¬º√å√ï√∫#¬¶_'√®E√ç6L√¢{√¥R√∏√™√©√Ö-v√°¬Ω√∞/¬¢}√Äe√≠F√ÅzÀú√π6√Ö/ÔøΩ¬±Ku¬øa√Æ,≈æ

√∞h5z√¢√∏j(7E\∆í¬≠¬´@k+≈∏kÔøΩ¬ª~JS√ñ}√∂√à¬ß√°‚Ä∫‚Ä∞√í¬®Àúh¬ªc√ÅXz√Ñm¬∂8√à¬±C)M¬°√±&amp;¬º@q‚Äù√∏≈æmb√ö√Ñ!W‚Ç¨¬≥√∞5x¬∂√≤L√á√ôLG¬Ω∆íAy√°y[‚Äû(√ΩaMD‚ÄîÔøΩh¬°|¬≥√Ö^√∏s‚Ä∫Z√Ø√¨$√áC∆í
√õl¬µ√§8√ª¬©N√¥ÔøΩVF[¬Ωe‚Äô√¶`√ù‚Ä¶√ºB√¨RxBY_B√æÔøΩc;√á:1¬∑√í V√É√∞J√Ω:¬°L√ª¬´a≈°√ê'√ÅCo√´√ú¬£bX*√Ö¬ª¬∏x+'√±¬¨M(¬®√£√é(q≈Ω1u¬§.√ï+9c√£¬πH}\#ÔøΩ√§‚Äù^‚Ä∞√ÇFTf}]Z√Ç72¬Ø#≈Ω√ÖJ√¨√Ñ≈írF‚Äö&amp;√π¬≠√É(Àú‚Ä¶aI√ö‚Ä°¬Ø√ü‚Äö@‚Äπ√µ¬ÆÔøΩ7√õ¬¶¬∂√æz\‚Äì√≠√ä¬Øb‚Ç¨v¬¶¬Ω√ì@hÀÜ‚Ç¨ÔøΩ*
A≈ì√®N¬¨S(¬øÔøΩy-(Kb≈Ω¬≤,√§√∑F¬π√™√¶‚Ä¢√ñ√∞‚Ä†qS‚Ä†b'√òo¬©NÀÜ√†ÔøΩ¬§√Éz≈æ'Lb¬Æ/&nbsp;2√Ü¬∏√≥¬∞¬¥~ÀÜ‚Äö‚Ñ¢≈æ¬§‚Äú'√æ√¥¬§ÀúJ'√ö√¢a‚Ä†√Å√û)L√î√¥5¬Ωn?J≈æ√§D%7√Ñ&nbsp;√ÆP‚Äπ√ì(≈°‚Ä¶¬´l√±¬®]√∫	√ßqq‚ÄûQ√π√∞¬§‚Ñ¢√ü¬¶KA√≤b√∫√ö¬∏K≈†‚Äû√®√ª√∫'0√Év√Ñ√Ö√õ0(∆íE¬∞√ñ&nbsp;&nbsp;√ÉS√Ñd√¢/3√†!√ì¬ß√åt¬™¬≤‚Ä∫√á[x√è¬Æ¬®qM	w¬ª√ùF√É‚Äî√Ä√Ä√í√í¬ª√æ,√ÆWa`¬ª√ñ‚Ç¨√π√£zm~≈í√≥;¬±¬æÔøΩ√ß√ª√≥√ß√±PÔøΩ√á¬º!y√ªv3¬¶√é‚Äú#¬¶‚Ä°√ö\G4¬Æ√õ√ú&nbsp;F√Ñm√Ø%w¬∂e	
:,√ö¬¶$%¬æ√Ø6√¥M¬£√ë√Æ3¬æN√º4ÔøΩ5|n√πx¬¥-‚Äô√í‚Ä∞B‚Ñ¢Pc¬æ&gt;n¬©‚Äú¬ºu:E√¥√¢¬´√ç√õ√•&lt;√µJ√©y¬ΩÔøΩ√Æ;√ºw¬•9‚Äù‚Äπ√≠C?E¬£QJ¬Æ¬ΩCX¬§¬¨t‚Ä∞2b√Ñ¬Ø√°¬´5=,√ãM}‚Ä∞≈Ω√µPv¬Æ6√É¬≥‚Äú√§‚Ä¶√ú√ä¬´√†‚Äπ¬£≈∏,√£√öAj¬≠4‚Ä∞√ó¬§{≈°√ß}‚Äô√©¬¢¬´√ÅX≈†√±¬∂¬®T≈æ	(ÔøΩ¬≤8≈æ¬±¬≠√π√®QÀÜ≈°‚ÄûxRF√¶√Ä√ü‚Ä∫p¬ßh¬≤m]√â√∫¬°$},√æt√óG¬ΩU√í:≈∏¬∞:ouB√¥¬¥+√íE‚Ä∫√¶√´J"x≈í√µ√é√ù¬∞J4)√é√Æ√∫1l¬§≈Ω√èb¬≤4√ä&amp;√Çt√∞‚Ä†‚Äú-√û√ü√ö√¢√É¬ªÔøΩ¬£√∫Ye√ù+z√è√Çi√í√Ω+√¥¬™√áI¬ΩI‚Äò‚Äûw≈∏q√åo‚Ä∫l‚Ñ¢√ã
√Ø√õ$;\√ï√ä≈°√ü6\ √•√®√≤r¬¢‚Ñ¢f
¬µ√¶X¬∞‚Ä∞3√Ç¬¨√ñsH2≈æ¬≠r‚ÄûV√ë{zw¬™|‚Äπ√ì√û-‚Äú¬∂"‚Ä∫7‚Ñ¢y√±√¥¬º)Àú)v√µ*F√•‚Äô¬¥Àú¬Æ
[√°√ü√Ä√∞X¬øA√ÅN¬ß√π‚Äô√≤√ò√ª¬±!√ñ√•z!≈æC\c¬™&gt;√çF¬≠L¬¥√áGe5.PxXY?@√Å"ÔøΩ1|√Ç√∞√î√¨¬¥Bo≈∏√ä=fY¬∫√Å√É√•ÀúZdQ√∏√ú√Å√≤√ãK√±ÔøΩ√¶√Ö¬ø√ÅZ≈Ω6≈†2‚Äìd√ùV'<!--)¬´‚ÄîTap√ü¬±¬≠√à‚Ä†TD9√¨;√µh≈†¬°√òQ√∫√ú	√ß√ëV√©@≈í:Ja√ö1√øWC""√≥√ûD≈∏√ó√É¬¥;¬∂√ª.B8=p8ÀÜc}Q√ø√ã¬±¬¢Ze}√û‚Äò¬∏8√©¬ΩYq√¨√¨√Ä6√ûW$F√º√ë7ÔøΩ‚Ä¶√íx(¬∑QZG¬≠0EÔøΩ≈°q¬π¬∏‚Ä¶√ì√ø]‚Ä∞5¬∂U‚Ä∞√º¬≠fs√∫‚Äú¬º√ï'4OO√≤$¬≠¬¨U¬º√ÉY
FW√ìc¬≠{PKl¬±√ìD2¬¢≈æ√Å(¬§√ïd¬∞P¬π.√Ñ¬¨√çZ¬Ø¬´≈°&<‚Äöa
ÔøΩ√ô√ïk‚Ä∞√∞VKo√º35V¬´`K√∑`lk√≤√∞¬µ¬∞¬´RZ√∑√Ç¬∑ae√∂¬¨√û√Ñ√ô‚ÄúzS√º¬∏√Ü¬®6
√Ñ'√Ñ¬µiF√Ñ‚Ñ¢XR‚Ä†¬¢√ç¬∏*BÔøΩ]6R¬¥√Ñ,‚Äì√ÇDu%√∫‚ÄûH~-√ìbZ≈†g1¬´√â√¨_¬≥√¢‚Ä∞C≈Ω√Ö‚Äú√Ç\ÀÜ√∑	√ö√≤*m‚Äö√±z‚Äì√¢M‚Ä∫√Öt?√§ÔøΩ√Ö√ê~¬¨%√äV+-√íÔøΩe√à L‚ÄìBk‚Ä∞
√≥q¬©p¬∑y√®v|-√á-->√©¬Ω√æ*√¥ÔøΩ√£&gt;¬≠√É√úv¬¢f√û,Àú?¬¢9@#¬∏fH#M¬¨√¢i¬æ¬ø≈ícÔøΩ¬≤.√¢#√Ö6√•!e√∑ÔøΩ¬©√µ√ú√Éd=¬≥:∆í√†√ãL√¥√ëtX¬§‚ÄπÔøΩ$nW,r(√ñu¬¢S≈°v¬¢4√Äb√∫ÀÜ‚Ä∞√µzeUkÔøΩ√ÜC√íz	‚Äûc≈ì√á√á√ò¬¨≈ìÀÜ‚ÄôZ#F‚Äìk¬∏√í¬£¬≠6√∫l2\√ê¬º√û?3√ä2¬©T√§7¬¢_¬∑K√∑√É¬§*√Ñ@‚Äô√ò≈ìN]ÔøΩ√Æ√ÅJÀÜ√∑¬¥ÀúNq9‚Ä∞¬£≈í≈ìi2‚Ä†imÔøΩ√•√ç7‚Ä†‚Ä¶k√†√õ‚Ñ¢√ø%Ut¬µm]√Ø@≈í‚ÄòOoy√Å‚Ä¶	qÔøΩ√¢$¬´¬ß‚Ä†√û√ü+rIx√§:≈æ‚Ä†√µÀú¬π¬•‚Äò¬¢√Ø*F¬Æ¬°√Å√ïle√•‚Ä∞.qV√º3‚Äù‚Ä∫¬´rw¬±√±¬∏¬ø√Ä√ù[Y√ÉLU√ü√é3,J√æ¬¢:≈í√Ä"+≈í¬µ¬≠"√ñ√´√ó¬ßE¬£,{‚Ä∞¬•eq‚Ä†C∆í¬¢O[¬Æf‚Äì(≈æG‚ÄùÀú#√Ö¬¨√™√Ü‚Ä°√ÑPx.√á√ù	N¬Ω¬©,-√åmL√ìmu√º‚Äô≈†√üOB√º,ÀÜ√®¬∞‚Äì1QQ√¢,‚Ä∫q‚Äô√©_¬¥√≥‚Ä∞~√è√°I√¶√µ√©*U√ñ
L‚Ç¨C√òd[√§9‚ÄùQ¬ø ‚Äô&nbsp;He√π¬•‚Ä¢√òH¬£5¬≤√æm¬¢	√ö√û	√ºT√æ¬øI√¶]‚Äò√â¬ªRY¬Ω√†K¬£*$√æd[U√∞√ñ ‚Äù2F¬°√öG9fÔøΩc
√ã:'√¨wr√ê√í√î¬∑√†√¢0¬•2≈∏DAÀÜ√≠√É4√≠√â‚ÄúEY
.√ã√öI√Ö√±[}R¬§¬≠¬º
√ï√¢√É√≠&amp;x‚Äú¬¥$√í¬∑jms¬•¬°√û)s√è
‚Äô ¬≥0!≈æQ∆í.Q,Y√´√≥ÀÜ‚Äû¬ø√ö√Ñ√´E√ü‚ÄúD-¬∫4‚Äò∆í√á
ÀÜ4{‚Äò(WkD¬∫Cu'√è√å√¨'L¬§√Å‚Ä∫√±√îc(,√Çu√ë√≥k¬º#√≤wE√Ö7d√û√ì≈ìwM√ä√ªI√ßF‚Ä°E;Ax&amp;¬∫%]¬ø≈Ω!.‚Ä¶-D!‚Ä°√ë√≠√ä}-z√¨o+pIQS‚Ä°ÔøΩL&gt;‚Äù-10D~¬≥√ØW√†¬´&amp;K[√î√äBo√πX√ØxXv√π√ó‚ÄûD≈æ
‚Äôo‚Ä∞1≈æ√ùk√≤√´pcx√†x√•.A√∑U¬∏Ey2¬Æ	‚Äî√Öx¬´_√ón\1‚Äú&gt;‚Äπ¬£≈íbGV√õ√∞¬≠¬¢‚Ä∞F¬ª¬∞√º√¥K√†{√ízU¬¥D[‚Ñ¢¬∞√π4‚Ä¢OÔøΩ\√â |√∞¬£√î¬•√è‚Ä∞1H√¢√é√Ç√≥√†√Æ‚Äì√öb7yn√†√Ñ‚Ñ¢'J¬§y¬§0√Å
n√ë√¶u+c√µ4Y8√æU¬¨&nbsp;I√¨A√Å‚Ä†6√≤‚Ä¶4ÔøΩv#F‚Äì‚Ä∫RO∆í2¬æ[‚Ñ¢‚Ç¨¬©q¬∞l¬º¬ß¬πP√≥‚Ä†√¶‚Ç¨√†¬´,Y‚Ä∞q√¶√òd&nbsp;√í√Ö?¬≥KVY√ó‚ÄúI√°5f|M√§√ë√Ö√ô√Ω√ã√∞√≠√Ü&nbsp;¬≤U√∂√èB√ü$¬©√∏√ï¬§¬™8[¬∂‚Ä∫‚ÄúIcÔøΩ~√òF:*?/≈°¬¶√ï`X‚ÄòÀú
q‚Ç¨√ï√∂ÔøΩ≈æR¬´√∑¬°Go√î¬§√Ö*√≤¬ø√†/Bi¬¶¬®√ëf√§*√ç#vZ√à‚Ä†¬øgn@‚ÄòKZ_¬£ {Àúc√ÖFqE;√ß√êfe
]√≤0:\‚Äùr[√è‚Äô¬§¬∏^¬πb√∂√õ+dt?√í√ä&lt;√Ü¬®¬±‚Ä¢√ô¬øÔøΩ6L&amp;X√±‚Ä∞ÀÜ¬´d√û√≥√®S.~¬´√•√Å√é!√éX‚Ä∫KiN¬≤)‚Äô√å
¬±t¬±√¥√∂√ê2#√õ√î&amp;√Ö&lt;¬¥≈∏!ÀÜ‚Äö√´¬ª¬¨√∏√ã√Çbc^√§&nbsp;%¬≥}¬≥*√º7√∏k√ä¬∞@~1
e&amp;√ñqMÔøΩ‚Ä†P√£1√ço	&gt;√π√Ö:4=|√Ç¬π
1f¬ß√´√õv√†*¬∞≈∏√±l‚Ç¨ÔøΩ√ü√ô√û√π|,}IWk‚Ä†&lt;¬π(&lt;'f#*m√¢≈íB√å‚Ä∫/2o¬æ√É
]‚Äπbh‚Ä∫Y√ºS‚Ç¨√ì2[¬¥u*8a'¬™‚Äú¬°ÔøΩ√ûF√Ñ#a√Øj√âd¬π‚Äò1u¬∫.d‚Äπq¬¥}{y√õg√º√•¬§√ö&lt;√∑√ä¬•$g√ñ¬£_4pÔøΩ"m√Ø-Bm:ÔøΩX√Ø√ã√∞√ó√°√≤Àú8*¬≠o√´fV¬ß64Zc√¥√´Zc√≠'1R¬•a√Ü¬æ7¬¨‚Ñ¢D¬Æ|ÔøΩ√ñ/√ìÔøΩ√ám.!√πP‚Äî¬∑√ö!¬¢∆ír‚Äù‚Äû‚Ñ¢‚Ä°¬∂i‚Äò‚Äútb‚Äô√ºq¬º√¢0¬ßÔøΩ¬£‚Äû√ê√≥√è¬∫ÔøΩ¬ÆE¬øj√àg¬∂√ç%¬§e√¢O)~¬ª≈æi‚Ä†:¬£0zM‚Äî√ù‚Äôh√§z‚Ä∞¬∑√Ö!Wl‚Äô¬∏0≈í‚Äî‚Ä¢√µ¬æ¬∂¬∫√í√êa\¬æ√±YW√ß"K√∏√ëT√ù~√á5(≈Ω‚Äù√∑.√Ø√∂√ï√†¬∏BkOiz¬®√ã√π√Ç√ì¬Øv¬¨4¬¢‚Ñ¢√óy√™¬ªbxRZa√§¬ß¬π√ö√±&amp;¬≠W+‚Ä¶‚Äú√Ö5¬µR‚Äî¬´√é√î‚Äπ‚Ä¢√í‚Äî/¬π:c3aO√ß√£f√†√†v0√π|√åU‚Ä∞)¬™√è¬Ø¬∏0Z√µ√ºQ¬Æ≈ì√Ä1√ô/√§¬ΩD‚Äπ√¥ÔøΩ√ÆJp¬≠√≠√∞$√íT√ñ√ï√®‚Äô W√É√û√¥¬∑≈ì"≈Ω\\f¬ß!‚Äπg√í`IÔøΩY¬¶√Ö√ìdp?
√π√çy√äZ∆í√ºH¬•√±‚Äîd√à√Ñ‚Äî¬∞¬π-k9]1t6*a≈†¬®√ë0e+O\,√ï¬∂√´R√õ≈°√ü#¬∏0√ä√≥√≠√†Pjg√ô‚ÄòÔøΩ≈Ω4≈°6‚Äô3√öj√ó¬∏MY¬Ω^√´$~ÔøΩnÔøΩ¬∫@‚Äò√Å≈∏%5√ã√õ√Æ‚Äî√¶g¬±\TGM√ë¬∑1gVj¬µ√¥¬±¬π√∏¬Ω√ì¬Ø"\¬Ω=√üz$i√Ω,√≠√Ω¬´-~¬¶√è"√¢√òI¬Æ√Ö‚Ä°√∏√±y√∏≈†8¬ßJkf2}5√âe?F√ëV\ÔøΩ√ã¬æm|n√Öq√•√™ÔøΩp¬π√¥.√î‚Äù)√å‚Äì√¢{¬¢T¬°wH√∑A\√¢J√ñ‚ÄπW!√é‚ÄìN])‚Äú'l‚Äì}¬¢^=9¬´tÔøΩÔøΩ,l√à¬ª0∆í$‚Ä∞√ì≈æa√øs1^EW!√´4¬£¬´+‚Ä∫8EJSb.j¬ß3&gt;√ö√è¬∂¬≠√∑P√êÀÜ√æi1E¬∫‚Äî¬°rGx√üCAq√û‚Äôv‚Ä†√¢`(W√åÔøΩ√Ü√æ√ñ≈°√ì\‚ÄôE.≈ΩÔøΩoÔøΩ¬§√ó¬ØG‚ÄîYÀú‚Ä∫$√ÄÀÜ≈Ω√Ω√ï√ä¬¶√ñ%Wf¬Ω¬©ÔøΩ√ù‚Ç¨]ÔøΩ√≥√∑√†?√Ä$¬º	$"vp‚Äô)¬æ‚Äú`c.ÔøΩ√ü√å√∫‚Äπ¬ß}ÔøΩ‚Ñ¢√â&gt;O¬°1I√±√†¬±√≠‚Ä¢¬µ¬¨5H√∫¬º%E¬µ¬πl√∫¬∂&lt;
f4¬°≈†√å
√ü≈†√¢¬Ø√ä√ó√æ¬¶‚Ñ¢√µ√ÖI].MÀú-√ñ¬´%P.¬¢√™zj'√äBÀú√áv=¬øC¬¢Xg[‚Äî"?∆í
√Ø√∞√ö|‚Ä¶√ú√∂m'c¬π
√µ‚Ä∫√é3¬≤&nbsp;√õÀÜÔøΩi√≤¬§9√∫√à}9≈í√ÆÀúW≈†&gt;√Ø1N√à¬©6√ól&gt;FÔøΩ√Ç*I&amp;¬¢`‚Ñ¢¬π¬¥p√¥h
ÔøΩ_√¢¬≤Q?WCg√±≈†O√î¬∂√¶4¬µ≈Ωr¬™¬µf‚Äîiy√• x√πE√Év¬Ω%√á≈†√ß¬±√≠√£√ª,√â√§C√ò¬∑ÔøΩ#‚Ä¢T√õs\¬∏ ≈ΩG`m√ó¬¶-√å√•ÔøΩ√ødA
¬≥wr√º|¬∑√™ej|p,‚ÄîS√°4√µ√ô√¨√î√¶Jo¬Ø‚ÄòÔøΩ√Ü*¬∏¬∂ ¬¥≈†k‚Ñ¢¬≥√∏≈æ≈í))i√ÆP¬≤;¬πV?√ÜM¬∂√å√§ÔøΩ√î√áB{F4¬≥√ò¬¶≈∏qy,∆íA¬∂≈°√∫-ÔøΩ35¬∑√™√Ö√Å_c¬≥B√§C√§√æ/ÀÜ√ñv‚Ä∫.√ã√Ø56UC|qÀú+D√†Y√Ö`s¬≥≈æ'‚Ä¶)¬¨‚Ä†√´'√ºE√ù√†0ykp¬Æ‚Ç¨√©√úI¬®\+b
5:ÀÜM_√ó¬•≈æ4√´¬≥√ò√ö‚Äî√á≈ì√ä≈æ/∆í¬°¬ºf¬ª¬º≈†P1√õ√ä3w‚Äπ¬∑√Çx√ì‚Äû√©¬¨√é√Ñ√é2s√É¬¥b√º¬ª¬π√à√∑‚Äö√¢√ö√â√à5_‚Äì2¬¶√ä≈°¬Ω2‚Ä∫‚Äù¬´¬Ω:√º√¶¬∏‚Äú√ëi‚Äì√ö¬¨=¬∑‚Ç¨‚Äû√ê`¬•√≤‚Ä¢√§zE√ñ¬¨√®j~√ÑhÀú%\t√ú√Å∆í√¨√∫√á¬π√Ω;	Rx-:‚Äù}Z¬ß√™√äH¬°‚Ç¨∆í‚Äú√æ=&lt;√Ñ6-√ä¬≤U	√á√ö\(ÔøΩg¬´√£√¶√≠√∏‚ÄùK≈°,Q‚Ä°S√ü¬§9Kc√µ¬´√¨y√ãR¬∏[‚Ä∞g8¬¢J3√¢~i√ù√äU√ñ‚Äú√ò¬¢¬¨O√ò"‚ÄôKjQ'√äX√è5√∏¬∏)L2
√∫√á¬∞√Ñv=√à√ôH√ä√ºN√õ√™‚Äò¬ª$<a3√ä\‚Äòh∆ífzk4√´"i¬≥√©‚Äú¬∞f √ü¬º="" &‚Äù¬º√≥¬≥5Àú15√á√•√∏'‚Ä∫{'‚Äö√Å¬©6g√ü6√ñ‚Äùzoi≈°q≈í;i≈Ω√âa¬¨¬≤¬≠="" √§¬ß¬∏:√≥*w¬ºiÔøΩ¬¶¬∂√òt#&√´s5¬®¬¨√ü~3√å6¬µ‚Äî¬æ¬π‚ÄöhdkÔøΩryh¬¥¬≠√°%√à≈í√ë0√ñl√≤√Ñ√∂√©¬™o¬∂√å¬Ωt¬≥^≈í¬Ω√ø√´√∞√©="" √ÜÀÜw√°{}¬¢√ñ="" √∞j‚Äù&0u√±¬≠r√Ü‚Ç¨≈Ω:="" √ñqz¬£"√ò√Üa√´√∞√¢√§√Æ√µ√§j0√∑n+m√ògo¬πÀÜÔøΩ¬ß√ô¬Æm√®5∆í√Ç¬∏¬¥="" s√≥≈†‚Äú‚Ä¶√Ä≈†√¨√è¬§a'√çz¬Ø√©√≥‚Äûm="" g√æ~="" k√≥5Àún:¬¨y√Ö37¬Ø√ô√í√™s‚Äú√©√∞[∆í¬æ¬º‚Äò√Æa√®¬æ="" s√∏≈Ω¬≤≈†√π√ú‚Ä¶p¬ßt√ü‚Äû√≥√´pk≈°√àh√º‚Ä¢}ÔøΩe√∑s√íz‚Äö¬≤‚Ä∞‚Äû="" √∏{~√å√∑√≥3√µ√î¬∑alt\¬´√≤~‚Ä°="">‚Ä∫‚Ñ¢¬¶√™‚Äö√ä√æ\}g7g‚Ä¶√≤√ª≈ìN√Ω#Àú√∑√ã|‚Äû2√∏‚Äú√¥¬æ√ü1¬æ¬±¬π/¬´^CF
Wk$√ê^Zj[-ÔøΩ√®√ìw√¨¬≥√∂√≤u6i‚Äö√Ø¬¢ ‚Äö√°√é¬¨¬£¬∫√ö√ã)1}W‚Äî5√Ö'ÔøΩ √ÜH¬∞√û‚Ä∫ }O√Ü|¬°‚Ä¢√çv≈æ$‚Ä∞√¥¬π‚ÄôÀú√å√Ü‚Ç¨√üQ
√†≈Ω:ÔøΩ√ôdK¬∫l√Ü√º_r√Ø∆ío‚Äò.√≤i m√í√â 
‚Äπ¬§Wf∆í@¬£¬ΩO_r√É-q~)&amp;¬•√Öv√Ö√∂¬∑c2√¨¬ª3√∞√π0D√°9√õ=√ù√∑√≥¬±ÔøΩ¬Æ√û√à‚Äô9√Äv≈†:\¬≥¬π¬∏¬µ‚Ñ¢3√´!‚Ä∫‚Äö¬∂W‚Äú√ñF¬∞√ñ¬¢`‚Ä†√ò‚Äì1√í&nbsp;L¬¢K∆í¬©‚Äò≈ìik¬∞d	|≈†k√Ö√ªm√ØZ√∏G¬¢o√∑i&lt;¬´√é√≠√∫A√öC:ÔøΩ√©;*¬¢√õ&amp;=¬≥√Ω¬∏ √ÇU√ã-|¬°X√°√¥√ø‚Äù√ßK√®9I¬°sM√£¬∏√ÖÔøΩ√ó‚Ñ¢¬ø‚Äö√∑¬∑D√ü√è√õ≈°0y√¢|√ü2‚Ä°?*√±√Ö}≈∏5‚Äû√õ√û&gt;‚Äπ(¬∫‚Ä†pO¬´¬¨‚Ñ¢[Àú5FA;ÔøΩ√µ√¶V≈°≈°9ÔøΩ√êO¬¥V&amp;y&nbsp;+≈ì√ï¬¨VZX√§7¬¢&lt;ÔøΩ%R√ºJ√ã√ê4¬∞¬©m√è0√ü¬©¬Ω,¬≠|{‚Ñ¢√Ωc¬∂{¬•‚Ä†L¬∞‚Ä°|M'd≈†ss¬£√èW≈†√Ø¬≥√¶*√ñ√ó¬≠[√π¬±$b¬Æ√µ√ç√†,[&lt;≈ío≈†‚Ä∞M√ü@√Åfn@‚Äπ	√û√µF¬≤.√é√ÇU¬∂√Ü$√çh√£H4‚Äú√î√µ¬æ√≠√∑√π‚ÄòF[b√ßÔøΩg√üRS‚Äù√∏¬•	‚Äö	z.RASm‚Ä°√î¬∏√Æ)¬π\≈°√ë=H√±¬¥√æ¬¶A‚Ä∫√¥*√Ø:¬©L√á¬∑rg‚Äò√†!√ä√ò‚Ä∫1√Ç&gt;i√ë_√µ√®√ª√çOs√Ç√ª√î√ª‚Äì√ö√π√® xT¬ºv‚Ä∞^b¬π√ç9¬§rL√¶¬®mÔøΩQ¬§√ãr√•s[√è7M[m-√ê
$‚Äû√ó‚Äù√´&lt;≈æCÀÜ+√û√¢√ød¬´√Æz`ÔøΩÔøΩ≈Ω¬©3√ü¬¨0eW√ï√∏¬¶"ÔøΩ√õ5Q√∏√ª¬´&amp;I=pf%¬±\Ys	‚ÄùN~‚Äπm√≠‚Ä¶o?¬ø‚Äî√Å√µ,BC1H2√áv5|r√∂√û4‚Äì√ì√ä√ô9√®-¬°√§u≈†≈Ω‚Ä°CL¬¨C√í|√≤¬≥‚Ñ¢√Ω/J√°5I:≈†¬¢$√•¬≥√∏O
xqC¬¨‚Äò≈ì1¬Ø9‚Ä¶$√ñj¬£¬ª√É2¬∞√π√úxA√∫√£¬≥%¬π√´√Äe√¶√™√ª‚Äû‚Ä∞‚Ä†¬¨√•¬ª√ÖÀút?√Ö¬¨7(ÔøΩ¬ø√Ä¬ß‚ÄπÔøΩevjYv¬æ&nbsp;h0&lt;‚Äù√ÖT‚Ä°¬®N¬∫=√õ√ã≈ì‚Äù√ò/√π*.¬®ÔøΩT¬≥?‚ÄîdÔøΩY¬≤¬©d	√∫¬≤"¬≠ÔøΩ‚Ä∞‚Äπm√è√ù¬πO¬ª6sL:√Ö¬∏-:√∫RÀú¬£(E|¬ª)I5m/≈†c+\√ºM!j≈°√π¬∞fpfVc.‚Äö‚Äî≈°‚Ä∫m¬ßf^√áÔøΩ‚Äπ$_W√≠√¶I.√îW‚Ä°a√¥Ob‚Ä†√¥√§i7#√ñ√∏`¬∞√Ç√É√∫‚ÄúÔøΩ&amp;¬∂F4√Ña√ΩEB≈ìcr¬•√≠$‚Ä∞¬¢¬ø`[‚Ä¢≈ìk√∏&gt;‚Ç¨|√ÄG¬∂√∑C√∏‚Ä∫√òr}'√ã√öI8ÔøΩ¬®-√Å√™√¨√Åj√ë¬®‚Ñ¢ÔøΩ/ohK√ä√Åsx√õ√∏√ì¬π√©¬∂√•√£√ª‚Ç¨ÔøΩ2≈í≈æ-√îd5¬≠¬£√∞¬≤¬µ√∏%¬º&nbsp;¬¥b[|=S√Ñ√®√Æ+ √Æ √°≈†≈†√ÖÔøΩU∆í0√ò√Ü‚Ä¶k‚Ä∞√ú‚Ä¶'√Å√üÔøΩ√¥∆íÔøΩ¬¶√≤6√≥hA=√ú√Ä∆ívw √•√º¬™√ã√∏√Ç√¨√Ω{√Ç√™ÔøΩ‚Äò¬Ω≈†√üTÀúÀÜ√ºÀÜX‚Ä∫√Ç3Z)‚Äù√£√ó≈†&gt;‚ÄôDS≈∏‚Ä†¬≠ÔøΩ29.Hs√≠¬£¬ßr¬æ√ñ$√Ö¬ø@√µ√†‚Äπ)‚Ä†√å‚Ä∫e√Å|¬æ‚Ä∫y√ó√é¬ª√æ√∑a‚Ä¢√Ée`¬Æ‚Ä°(√•≈∏‚Äò¬º¬¢
√Æg√üc√†√õ¬≠√ª&nbsp;√∏√ä√®e√£√Ω¬≥(F‚Ç¨√µ√ú‚Ç¨zxV≈ì√ñ√º3√Ç√ù7¬∏¬¢	√é7√µ√ú‚Ñ¢√≥x;√ªnÔøΩ√æ≈æÔøΩzX√Ñ¬ßH4;ÔøΩ√ü6f,b√Ω√π(√û∆í≈†z√É≈°‚Äπ¬´¬´08
‚ÄöW√æ¬£‚Äú¬ø1¬º√í√∂
√£¬Ø@¬π√Ñv‚Äù√´9‚Äû)5hRW√õk"=A√∞^‚Ä∫;√É¬£√ç√£J¬¨W√ø√ü√ô|¬∂√≠√ø?√æ¬π(Z?]≈Ω"T=√µgby

endstream
endobj
1572 0 obj
&lt;&lt;
/Type /Page
/CropBox [ 0 0 1190.55 841.89 ]
/MediaBox [ 0 0 1190.55 841.89 ]
/Rotate 0
/Resources &lt;&lt; /ColorSpace &lt;&lt; /CS0 1573 0 R &gt;&gt; /ExtGState &lt;&lt; /GS0 1575 0 R
/GS1 1576 0 R /GS2 1577 0 R /GS3 1578 0 R /GS4 1579 0 R /GS5 1580 0 R /GS6
1581 0 R /GS7 1582 0 R /GS8 1583 0 R /GS9 1584 0 R /GS10 1585 0 R /GS11
1586 0 R /GS12 1587 0 R /GS13 1588 0 R /GS14 1589 0 R /GS15 1590 0 R /GS16
1591 0 R /GS17 1592 0 R /GS18 1600 0 R &gt;&gt; /Font &lt;&lt; /T1_0 1601 0 R /T1_1
1606 0 R /T1_2 1611 0 R /T1_3 1616 0 R /T1_4 1619 0 R &gt;&gt; /XObject &lt;&lt; /X1
1623 0 R /X3 1634 0 R /X19 1642 0 R /X20 1660 0 R /X22 1661 0 R /X30
1667 0 R /X32 1675 0 R /X33 1678 0 R /X34 1679 0 R /X37 1680 0 R /X39
1683 0 R /X40 1685 0 R /X66 1686 0 R /X72 1712 0 R /X76 1718 0 R /X77
1722 0 R /X90 1723 0 R /X114 1736 0 R /X117 1760 0 R /X130 1763 0 R /X143
1776 0 R /X147 1789 0 R /X171 1793 0 R /X172 1817 0 R /X198 1818 0 R /X222
1844 0 R /X223 1868 0 R /X236 1869 0 R /X238 1882 0 R /X262 1884 0 R /X263
1908 0 R /X266 1909 0 R /X270 1912 0 R /X271 1916 0 R /X297 1917 0 R /X300
1943 0 R /X301 1946 0 R /X304 1947 0 R /X308 1950 0 R /X309 1954 0 R /X322
1955 0 R /X335 1968 0 R /X338 1981 0 R /X342 1984 0 R /X357 1988 0 R /X363
2003 0 R /X386 2009 0 R /X389 2032 0 R /X393 2035 0 R /X417 2039 0 R /X421
2063 0 R /X422 2067 0 R /X424 2068 0 R /X425 2070 0 R /X428 2071 0 R /X429
2074 0 R /X433 2075 0 R /X434 2079 0 R /X447 2080 0 R /X460 2093 0 R /X463
2106 0 R /X489 2109 0 R /X495 2135 0 R /X519 2141 0 R /X522 2165 0 R /X546
2168 0 R /X547 2192 0 R /X548 2193 0 R /X551 2194 0 R /X554 2197 0 R /X557
2200 0 R /X561 2203 0 R /X563 2207 0 R /X564 2209 0 R /X590 2210 0 R /X596
2236 0 R /X600 2242 0 R /X601 2246 0 R /X614 2247 0 R /X638 2260 0 R /X641
2284 0 R /X645 2287 0 R /X658 2291 0 R /X662 2304 0 R /X686 2308 0 R /X687
2332 0 R /X688 2333 0 R /X689 2334 0 R /X715 2335 0 R /X739 2361 0 R /X740
2385 0 R /X753 2386 0 R /X755 2399 0 R /X779 2401 0 R /X780 2425 0 R /X781
2426 0 R /X783 2427 0 R /X786 2429 0 R /X790 2432 0 R /X791 2436 0 R /X817
2437 0 R /X820 2463 0 R /X821 2466 0 R /X824 2467 0 R /X825 2470 0 R /X826
2471 0 R /X851 2472 0 R /X854 2498 0 R /X856 2501 0 R /X857 2503 0 R /X883
2504 0 R /X889 2530 0 R /X893 2536 0 R /X894 2540 0 R /X907 2541 0 R /X931
2554 0 R /X934 2578 0 R /X935 2581 0 R /X948 2582 0 R /X952 2595 0 R /X976
2599 0 R /X977 2623 0 R /X1001 2624 0 R /X1002 2648 0 R /X1015 2649 0 R
/X1017 2662 0 R /X1041 2664 0 R /X1042 2688 0 R /X1046 2689 0 R /X1049
2693 0 R /X1050 2696 0 R /X1051 2697 0 R /X1054 2698 0 R /X1055 2701 0 R
/X1058 2702 0 R /X1059 2705 0 R /X1062 2706 0 R /X1086 2709 0 R /X1110
2733 0 R /X1113 2757 0 R /X1117 2760 0 R /X1118 2764 0 R /X1120 2765 0 R
/X1121 2767 0 R /X1124 2768 0 R /X1128 2771 0 R /X1130 2775 0 R /X1136
2777 0 R /X1142 2783 0 R /X1143 2789 0 R /X1161 2790 0 R /X1164 2808 0 R
/X1168 2811 0 R /X1181 2815 0 R /X1194 2828 0 R /X1198 2841 0 R /X1222
2845 0 R /X1223 2869 0 R /X1224 2870 0 R /X1250 2871 0 R /X1274 ‚Ä¶</a3√™\‚Äòh∆ífzk4√´"i¬≥√©‚Äú¬∞f></q√¥‚Ä∞b¬≤-√¢zf6¬ø]!¬Æ√©+≈æÔøΩ√†√•√∞√∫plc√§ÔøΩ√°igi√≠|h≈æÔøΩ(k√£n[|√≥¬∂q04ad√†√πÔøΩ√≠r¬º√§m‚Äπc<√©√†i√¶y¬£xÔøΩbz¬§√∞f+¬•u‚Ä†√º‚Ä¶jc3√§√´√∞√Æai-r,‚Ä¶g$√∫‚Äûx‚Äôk√†¬©√¶{√¶)√≥ÔøΩ!4‚Ç¨'9t√®l√æu√º∆í?‚Äû¬Ø‚Äû√•></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://talking-trash.com/wp-content/uploads/2020/09/TalkingTrash_FullReport.pdf">https://talking-trash.com/wp-content/uploads/2020/09/TalkingTrash_FullReport.pdf</a></em></p>]]>
            </description>
            <link>https://talking-trash.com/wp-content/uploads/2020/09/TalkingTrash_FullReport.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-24504038</guid>
            <pubDate>Thu, 17 Sep 2020 12:59:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Search and Replace Tricks with Ripgrep]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24503895">thread link</a>) | @fanf2
<br/>
September 17, 2020 | https://learnbyexample.github.io/substitution-with-ripgrep/ | <a href="https://web.archive.org/web/*/https://learnbyexample.github.io/substitution-with-ripgrep/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
    
    

    <div>
      <p><a href="https://github.com/BurntSushi/ripgrep">ripgrep</a> (command name <code>rg</code>) is a <code>grep</code> tool, but supports search and replace as well. <code>rg</code> is far from a like-for-like alternate for <code>sed</code>, but it has nifty features like multiline replacement, fixed string matching, <code>PCRE2</code> support, etc. This post gives an overview of syntax for substitution and highlights some of the cases where <code>rg</code> is a handy replacement for <code>sed</code>.</p>
<h2 id="global-search-and-replace">Global search and replace<a href="#global-search-and-replace" aria-label="Anchor link for: global-search-and-replace">üîó</a></h2>
<pre><code><span>$ cat ip.txt
dark blue, light blue
light orange
blue sky

</span><span># by default, line number is displayed if output destination is stdout
# by default, only lines that matched the given pattern is displayed
# 'blue' is search pattern and -r 'red' is replacement string
</span><span>$ rg </span><span>'blue' </span><span>-</span><span>r </span><span>'red'</span><span> ip.txt
</span><span>1:dark</span><span> red, light red
</span><span>3:red</span><span> sky

</span><span># --passthru option is useful to print all lines, whether or not it matched
# -N will disable line number prefix
# this command is similar to: sed 's/blue/red/g' ip.txt
</span><span>$ rg </span><span>--</span><span>passthru </span><span>-</span><span>N </span><span>'blue' </span><span>-</span><span>r </span><span>'red'</span><span> ip.txt
dark red, light red
light orange
red sky
</span></code></pre><br>
<h2 id="matching-nth-occurrence">Matching Nth occurrence<a href="#matching-nth-occurrence" aria-label="Anchor link for: matching-nth-occurrence">üîó</a></h2>
<p>As seen in previous example, <code>rg</code> will search and replace all occurrences. So, you'll have to be creative with regexp to replace only a specific occurrence per input line.</p>
<pre><code><span>$ s=</span><span>'see bat hot at but at go gate at sat at but at'

</span><span># replace first occurrence only
# same as: sed 's/\bat\b/[xyz]/'
</span><span>$ echo </span><span>"$s" </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>-</span><span>N </span><span>'\bat\b(.*)' </span><span>-</span><span>r </span><span>'[xyz]$1'</span><span>
see bat hot [xyz] but at go gate at sat at but at

</span><span># same as: sed 's/\bat\b/[xyz]/3'
# the number within {} is N-1 to replace Nth occurrence, for N&gt;1
</span><span>$ echo </span><span>"$s" </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>-</span><span>N </span><span>'^((.*?\bat\b){2}.*?)\bat\b' </span><span>-</span><span>r </span><span>'$1[xyz]'</span><span>
see bat hot at but at go gate [xyz] sat at but at

</span><span># replace last but Nth occurrence, for N&gt;=0
</span><span>$ echo </span><span>"$s" </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>-</span><span>N </span><span>'^(.*)\bat\b((.*\bat\b){3})' </span><span>-</span><span>r </span><span>'$1[xyz]$2'</span><span>
see bat hot at but [xyz] go gate at sat at but at
</span></code></pre><br>
<h2 id="in-place-workaround">In-place workaround<a href="#in-place-workaround" aria-label="Anchor link for: in-place-workaround">üîó</a></h2>
<p><code>rg</code> doesn't support in-place option, so you'll have to do it yourself.</p>
<pre><code><span># -N isn't needed here as output destination is a file
# same as: sed -i 's/blue/red/g' ip.txt
</span><span>$ rg </span><span>--</span><span>passthru </span><span>'blue' </span><span>-</span><span>r </span><span>'red'</span><span> ip.txt </span><span>&gt;</span><span> tmp.txt </span><span>&amp;&amp;</span><span> mv tmp.txt ip.txt

$ cat ip.txt
dark red, light red
light orange
red sky
</span></code></pre>
<p>If you have <a href="https://joeyh.name/code/moreutils/">moreutils installed</a>, then you could use <code>sponge</code> as well.</p>
<pre><code><span>rg </span><span>--</span><span>passthru </span><span>'blue' </span><span>-</span><span>r </span><span>'red'</span><span> ip.txt </span><span>|</span><span> sponge ip.txt
</span></code></pre><br>
<h2 id="rust-regex-and-pcre2">Rust regex and PCRE2<a href="#rust-regex-and-pcre2" aria-label="Anchor link for: rust-regex-and-pcre2">üîó</a></h2>
<p>By default, <code>rg</code> uses Rust regular expressions, which is much more featured compared to <code>GNU sed</code>. The main feature not supported is backreference within regexp definition (for performance reasons). See <a href="https://docs.rs/regex/1.3.9/regex/index.html">Rust regex documentation</a> for regular expression syntax and features. <code>rg</code> supports Unicode by default.</p>
<pre><code><span># non-greedy quantifier is supported
</span><span>$ s=</span><span>'food land bark sand band cue combat'</span><span>
$ echo </span><span>"$s" </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>'foo.*?ba' </span><span>-</span><span>r </span><span>'[xyz]'
</span><span>[xyz]rk sand band cue combat

</span><span># unicode support
</span><span>$ echo </span><span>'fox:Œ±ŒªŒµœÄŒøœç,eagle:Œ±ŒµœÑœåœÇ' </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>'\p{L}+' </span><span>-</span><span>r </span><span>'($0)'
</span><span>(fox)</span><span>:</span><span>(Œ±ŒªŒµœÄŒøœç),(eagle)</span><span>:</span><span>(Œ±ŒµœÑœåœÇ)

</span><span># set operator example, remove all punctuation characters except . ! and ?
</span><span>$ para=</span><span>'"hi", there! how *are* you? all fine here.'</span><span>
$ echo </span><span>"$para" </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>'[[:punct:]--[.!?]]+' </span><span>-</span><span>r </span><span>''</span><span>
hi there! how are you? all fine here.
</span></code></pre>
<p>The <code>-P</code> switch will enable <a href="https://www.pcre.org/current/doc/html/index.html">PCRE2</a> flavor, which has even more tricks. You can also use <code>--engine=auto</code> to allow <code>rg</code> to automatically use <code>PCRE2</code> when needed (for example: useful as an alias for <code>rg</code> command so that it gives performance of Rust engine by default and use <code>PCRE2</code> only when needed).</p>
<pre><code><span># backreference within regexp definition
</span><span>$ s=</span><span>'cocoa appleseed tool speechless'</span><span>
$ echo </span><span>"$s" </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>-</span><span>wP </span><span>'([a-z]*([a-z])\2[a-z]*){2}' </span><span>-</span><span>r </span><span>'{$0}'</span><span>
cocoa {appleseed} tool {speechless}

</span><span># replace all whole words except 'imp' and 'ant'
</span><span>$ s=</span><span>'tiger imp goat eagle ant important'</span><span>
$ echo </span><span>"$s" </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>-</span><span>P </span><span>'\b(imp|ant)\b(*SKIP)(*F)|\w+' </span><span>-</span><span>r </span><span>'[$0]'
</span><span>[tiger] imp [goat] [eagle] ant [important]

</span><span># recursively match parentheses
</span><span>$ eqn=</span><span>'(3+a)x * y((r-2)*(t+2)/6) + z(a(b(c(d(e)))))'</span><span>
$ echo </span><span>"$eqn" </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>-</span><span>P </span><span>'\((?:[^()]++|(?0))++\)' </span><span>-</span><span>r </span><span>''</span><span>
x </span><span>*</span><span> y </span><span>+</span><span> z

$ </span><span># all lowercase letters and optional hyphen combo from start of string
</span><span>$ s=</span><span>'apple-fig-mango guava grape'</span><span>
$ echo </span><span>"$s" </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>-</span><span>P </span><span>'\G([a-z]+)(-)?' </span><span>-</span><span>r </span><span>'($1)$2'
</span><span>(apple)</span><span>-</span><span>(fig)</span><span>-</span><span>(mango) guava grape
</span></code></pre><br>
<h2 id="extract-and-modify">Extract and modify<a href="#extract-and-modify" aria-label="Anchor link for: extract-and-modify">üîó</a></h2>
<p>The <code>-r</code> option can be used when <code>-o</code> option is active too. The example shown below is not easy to do with <code>sed</code>.</p>
<pre><code><span>$ s=</span><span>'0501 035 154 12 26 98234'

</span><span># numbers &gt;= 100 and ignore leading zeros
</span><span>$ echo </span><span>"$s" </span><span>|</span><span> rg </span><span>-</span><span>woP </span><span>'0*+(\d{3,})' </span><span>-</span><span>r </span><span>'"$1"' </span><span>|</span><span> paste </span><span>-</span><span>sd,
</span><span>"501"</span><span>,</span><span>"154"</span><span>,</span><span>"98234"
</span></code></pre><br>
<h2 id="fixed-string-matching">Fixed string matching<a href="#fixed-string-matching" aria-label="Anchor link for: fixed-string-matching">üîó</a></h2>
<p>Like <code>grep</code>, the <code>-F</code> option will allow fixed strings to be matched, a handy option that I feel every search and replace tool should provide.</p>
<pre><code><span>$ </span><span>printf </span><span>'2.3/[4]*6\nfoo\n5.3-[4]*9\n' </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>-</span><span>F </span><span>'[4]*' </span><span>-</span><span>r </span><span>'2'
</span><span>2.3</span><span>/</span><span>26</span><span>
foo
</span><span>5.3</span><span>-</span><span>29
</span></code></pre>
<p><code>-F</code> doesn't extend to replacement section though, so you need <code>$$</code> instead of <code>$</code> character to represent it literally.</p>
<pre><code><span>$ echo </span><span>'a.*{2}-b' </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>-</span><span>F </span><span>'.*{2}' </span><span>-</span><span>r </span><span>'+$x\tc'</span><span>
a</span><span>+</span><span>\tc</span><span>-</span><span>b
$ echo </span><span>'a.*{2}-b' </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>-</span><span>F </span><span>'.*{2}' </span><span>-</span><span>r </span><span>'+$$x\tc'</span><span>
a</span><span>+</span><span>$x</span><span>\tc</span><span>-</span><span>b
</span></code></pre><br>
<h2 id="multiline-matching">Multiline matching<a href="#multiline-matching" aria-label="Anchor link for: multiline-matching">üîó</a></h2>
<p>Another handy option is <code>-U</code> which enables multiline matching.</p>
<pre><code><span>$ s=</span><span>'hi there\nhave a nice day\nbye'

</span><span># (?s) flag will allow . to match newline characters as well
</span><span>$ </span><span>printf </span><span>'</span><span>%b</span><span>' "$s" </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>-</span><span>U </span><span>'(?s)the.*ice' </span><span>-</span><span>r </span><span>''</span><span>
hi  day
bye
</span></code></pre><br>
<h2 id="handling-dos-style-input">Handling dos-style input<a href="#handling-dos-style-input" aria-label="Anchor link for: handling-dos-style-input">üîó</a></h2>
<p><code>rg</code> provides support for dos-style files with <code>--crlf</code> option.</p>
<pre><code><span># same as: sed -E 's/\w+(\r?)$/xyz\1/'
# note that output will retain CR+LF as line ending
# similar to the sed solution, this will work for unix-style input too
</span><span>$ </span><span>printf </span><span>'hi there\r\ngood day\r\n' </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>--</span><span>crlf </span><span>'\w+$' </span><span>-</span><span>r </span><span>'xyz'</span><span>
hi xyz
good xyz
</span></code></pre><br>
<h2 id="speed-comparison-with-gnu-sed">Speed comparison with GNU sed<a href="#speed-comparison-with-gnu-sed" aria-label="Anchor link for: speed-comparison-with-gnu-sed">üîó</a></h2>
<p>Another advantage of <code>rg</code> is that it is likely to be faster than <code>sed</code>. See <a href="https://blog.burntsushi.net/ripgrep/">ripgrep benchmark with other grep implementations</a> by the author for a methodological detailed analysis and insights.</p>
<pre><code><span># for small files, initial processing time of rg is a large component
</span><span>$ time echo </span><span>'aba' </span><span>|</span><span> sed </span><span>'s/a/b/g' </span><span>&gt;</span><span> f1
real	0m0.002s
$ time echo </span><span>'aba' </span><span>|</span><span> rg </span><span>--</span><span>passthru </span><span>'a' </span><span>-</span><span>r </span><span>'b' </span><span>&gt;</span><span> f2
real	0m0.007s

</span><span># for larger files, rg is likely to be faster
# 6.2M sample ASCII file
</span><span>$ wget </span><span>'https://norvig.com/big.txt'</span><span>
$ time </span><span>LC_ALL</span><span>=</span><span>C</span><span> sed </span><span>'s/\bcat\b/dog/g'</span><span> big.txt </span><span>&gt;</span><span> f1
real	0m0.060s
$ time rg </span><span>--</span><span>passthru </span><span>'\bcat\b' </span><span>-</span><span>r </span><span>'dog'</span><span> big.txt </span><span>&gt;</span><span> f2
real	0m0.048s
$ diff </span><span>-</span><span>s f1 f2
</span><span>Files</span><span> f1 </span><span>and</span><span> f2 are identical

</span><span># nearly 8 times faster!!
</span><span>$ time </span><span>LC_ALL</span><span>=</span><span>C</span><span> sed </span><span>-</span><span>E </span><span>'s/\b(\w+)(\s+\1)+\b/\1/g'</span><span> big.txt </span><span>&gt;</span><span> f1
real	0m0.725s
$ time rg </span><span>--</span><span>no</span><span>-</span><span>unicode </span><span>--</span><span>passthru </span><span>-</span><span>wP </span><span>'(\w+)(\s+\1)+' </span><span>-</span><span>r </span><span>'$1'</span><span> big.txt </span><span>&gt;</span><span> f2
real	0m0.093s
$ diff </span><span>-</span><span>s f1 f2
</span><span>Files</span><span> f1 </span><span>and</span><span> f2 are identical
</span></code></pre><br>
<h2 id="other-alternatives-for-sed">Other alternatives for sed<a href="#other-alternatives-for-sed" aria-label="Anchor link for: other-alternatives-for-sed">üîó</a></h2>
<ul>
<li><a href="https://unix.stackexchange.com/questions/112023/how-can-i-replace-a-string-in-a-files/251742#251742">rpl</a> ‚Äî search and replace tool, has interesting options like interactive mode and recursive mode</li>
<li><a href="https://github.com/chmln/sd">sd</a> ‚Äî simple search and replace, implemented in Rust</li>
<li><a href="https://www.perl.org/">perl</a> and <a href="https://www.ruby-lang.org/en/">ruby</a> ‚Äî programming languages with excellent command line support</li>
</ul>

    </div>

    
    

    

    
    
</article></div>]]>
            </description>
            <link>https://learnbyexample.github.io/substitution-with-ripgrep/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24503895</guid>
            <pubDate>Thu, 17 Sep 2020 12:43:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[An Introduction to LLVM LibFuzzer]]>
            </title>
            <description>
<![CDATA[
Score 10 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24503889">thread link</a>) | @fcambus
<br/>
September 17, 2020 | https://www.moritz.systems/blog/an-introduction-to-llvm-libfuzzer/ | <a href="https://web.archive.org/web/*/https://www.moritz.systems/blog/an-introduction-to-llvm-libfuzzer/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>


<p>Fuzzing is a software testing method that involves passing malformed
data as input to the program and monitoring it for misbehavior.
Today, fuzzing is one of the most effective ways to find software security problems.
In 2014, Micha≈Ç Zalewski presented American Fuzzy Lop, the first coverage
guided fuzzer. This started the modern world of fuzzing solutions and
techniques on the market.</p>

<p>In this article, we will discuss libFuzzer, a LLVM utility that allows you to integrate fuzzing
methodology into your libraries, and briefly introduce techniques to maximize the effectiveness
of catching problems.</p>



<p><a href="https://llvm.org/docs/LibFuzzer.html">libFuzzer</a>
is part of the <a href="https://llvm.org/">LLVM</a>
package. It allows you to integrate the
coverage-guided fuzzer logic into your C / C++ application. A crucial feature
of libFuzzer is its close integration with
<a href="https://clang.llvm.org/docs/SanitizerCoverage.html">Sanitizer Coverage</a>
and bug detecting sanitizers, namely:
<a href="https://clang.llvm.org/docs/AddressSanitizer.html">Address Sanitizer</a>,
<a href="https://clang.llvm.org/docs/LeakSanitizer.html">Leak Sanitizer</a>,
<a href="https://clang.llvm.org/docs/MemorySanitizer.html">Memory Sanitizer</a>,
<a href="https://clang.llvm.org/docs/ThreadSanitizer.html">Thread Sanitizer</a>
and <a href="https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html">Undefined Behavior Sanitizer</a>.
The use of these projects
ensures that a wide range of memory corruption bugs and undesired
application behavior are detected. A few examples of these are: Heap/Stack/Global Out Of Bounds,
Use After Free, Use After Return, Uninitialized Memory Reads, Memory Leaks
or Uninitialized Mutex Use.</p>

<p>Everything is provided with a relatively low performance and memory overhead.
The project requires merely a functional LLVM 5.0 toolchain or newer (release date: 07 Sep 2017).</p>



<p>AFL has been on the market since 2014 and has been able to detect
over 1000 different types of software errors.  When the development of
the <a href="https://github.com/google/AFL">original AFL repository</a> stalled for
a long time, the community created a fork called
<a href="https://github.com/AFLplusplus/AFLplusplus">AFL++</a> in 2018.
The development of Google hosted project was eventually resumed
by a different team of Google employees (as Micha≈Ç Zalewski changed
his workplace). Therefore, there are two independent versions of AFL
in active development today.</p>

<p>The design of AFL is primarily based on code coverage through tracing code path execution
(with SanitizerCoverage), then providing feedback to the fuzzer (again with SanitizerCoverage callbacks),
and then using genetic algorithms to craft new inputs
(using <a href="https://en.wikipedia.org/wiki/Standard_streams">standard input</a>) to widen the code coverage.
The <a href="https://github.com/google/AFL#2-the-afl-fuzz-approach">simplified algorithm of AFL</a> is as follows:</p>

<ol>
<li>Load user-supplied initial test cases into the queue,</li>
<li>Take the next input file from the queue,</li>
<li>Attempt to trim the test case to the smallest size that doesn‚Äôt alter the measured behavior of the program,</li>
<li>Repeatedly mutate the file using a balanced and well-researched variety of traditional fuzzing strategies,</li>
<li>If any of the generated mutations results in a transition to a new state recorded by the instrumentation, add mutated output as a new entry in the queue.</li>
<li>Go to point 2.</li>
</ol>

<p>The readers might ask, why create a new fuzzer?</p>

<p>First of all, AFL was incapable of handling different types of coverage, such as
tracking the evaluation of comparison instructions (in C <code>==</code>, <code>&gt;</code>, <code>&lt;</code>, <code>!=</code>, etc.).
Next, AFL was unaware of tracking the evaluation of standard (and non-standard)
functions that return certain values depending on the input, such as
the functions for comparing strings (in C <code>strcmp()</code>, <code>strncmp()</code>, etc.).
Finally, AFL was not sufficiently flexible to integrate in environments that
accept input from a different source than the <code>standard input</code>.</p>

<p>The Google employees created a new fuzzer to overcome all the mentioned limitations
and take advantage of the bug detecting features that were already present in LLVM.
The libFuzzer philosophy was to create a tool that operates
similarly to unit testing. We write a small fuzzing program (called the ‚Äúharness‚Äù)
and create programming environment to quickly integrate it into projects
that consists of callable set of functions, typically API of a library.
The fuzzer input is provided as parameters to a regular C function (instead of stdin),
and if possible the fuzzing process is run in persistent mode that
avoids respawning it for every input.</p>

<p>The simplest integration of libFuzzer is as follows:</p>

<pre><code>// fuzz_API.cpp
extern "C" int LLVMFuzzerTestOneInput(const uint8_t *Data, size_t Size) {
  DoSomethingWithMyAPI(Data, Size);
  return 0;
}
</code></pre>

<p>There are two arguments to the <code>LLVMFuzzerTestOneInput()</code> function, Data and Size.
This is the buffer of a fixed length that then has to be processed by our
unit testing-like program and passed on to our API.</p>

<p>That said, libFuzzer is tailored towards:</p>

<ul>
<li>Fuzzing libraries and their APIs, rather than standalone programs.</li>
<li>The behavior should be as deterministic as possible. The same input must result in the same output.</li>
<li>The called library should avoid exiting (by <code>exit()</code> or raising signals) for valid code paths.</li>
<li>It should avoid mutating the global state as otherwise it will confuse the fuzzer.</li>
<li>It should evaluate as quickly as possibly, returning to the fuzzer.</li>
<li>It may use threads, but all newly spawned threads should be joined before returning to libFuzzer.</li>
<li>Collecting diverse sources of coverage as productive as possible.</li>
</ul>

<p>AFL is better for one type of projects and libFuzzer for another one.
For example, projects that are not designed as libraries
are hard to integrate with libFuzzer, while entry barrier to AFL testing
can be lower. It is a matter of rebuilding the software and running the fuzzer as-is.</p>

<p>As we presented above libFuzzer operates entirely inside the memory while AFL
feeds the fuzzed program with specially crafted files and passed them to its input.</p>



<p>The fuzzing process begins with the construction of test corpora.
In the case of libFuzzer, this is not necessarily true - it
can generate entirely random input. Of course, this implies practically
no code coverage at the start, and many hours of work before the first
input passing initial integrity checks is produced. Therefore, it is
worth having even a few/odd test cases to start with.</p>

<p><img src="https://raw.githubusercontent.com/Moritz-Systems/moritz_staticDir/master/fuzzing_corpora.svg" alt="Fuzzing corpora"></p>

<p>The goal of minimizing the test files is to get as much code coverage as possible
with as small input file size as possible. The relation is simple:
the smaller the file, the more executions per second can be achieved. It is worth adding that
there is also a process of minimizing a single input file. This operation aims
to remove any redundant data from the test case causing the crash to capture
what exactly happened. According to the libFuzzer documentation, the minimum speed
at which it is worthwhile to start meaningful fuzzing with a prepared body is
1000 iterations per second.</p>

<p>Crash management usually boils down to deduplicating a set of test cases by
comparing the function call stack or a stack trace. Due to limited fuzzer
information during a crash, there are different approaches to solve the
problem here. libFuzzer does not have a module for managing test cases,
and every new fuzzing job is a ‚Äúclean card‚Äù for it. The user must automate
this process by writing the report parser himself/herself.</p>

<p>Readers are encouraged to create and maintain their test corpora - in
the long run, and this is much better than using the ‚Äúready-made‚Äù
ones found on the Internet or, as mentioned earlier, generating one from scratch.
It is worth categorizing the corpus per application (in case of a single
application) or per file type - if we test many different programs, using
the same file formats.</p>

<p>The more diverse the initial test data, the better. The corpus continuously
evolves during fuzzing: you find inputs that pass through previously unknown
paths in the code. During the operation, smaller files push large files
out of the corpus (if they provide equivalent code coverage). Of course,
you find test cases that cause the program to terminate. The process of
merging the corpus is nothing more than minimizing the sum of the sets:
the corpora that started fuzzing and the newly created test cases.</p>



<p>As mentioned earlier, to use libFuzzer in your projects, you need to prepare
a lightweight library entry code.</p>

<p>Let‚Äôs see at a real world example from the LLVM libFuzzer test-suite, an
example called
<a href="https://github.com/llvm/llvm-project/blob/master/compiler-rt/test/fuzzer/SingleStrcmpTest.cpp">SingleStrcmpTest.cpp</a></p>

<pre><code>// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.
// See https://llvm.org/LICENSE.txt for license information.
// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception

// Simple test for a fuzzer. The fuzzer must find a particular string.
#include &lt;cstdint&gt;
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cstring&gt;

extern "C" int LLVMFuzzerTestOneInput(const uint8_t *Data, size_t Size) {
  if (Size &gt;= 7) {
    char Copy[7];
    memcpy(Copy, Data, 6);
    Copy[6] = 0;
    if (!strcmp(Copy, "qwerty")) {
      fprintf(stderr, "BINGO\n");
      exit(1);
    }
  }
  return 0;
}
</code></pre>

<p>In this example, we have two conditions for triggering the bug (in our case, calling <code>exit(2)</code> and exiting):</p>

<ul>
<li>Size of the input buffer is larger or equal to 7 bytes.</li>
<li>The first 6 bytes store the sequence <code>"qwerty"</code>, followed by <code>\0</code>.</li>
<li>The rest of the input buffer is ignored.</li>
</ul>

<p>We note that there is no <code>main()</code> function in the program, as it is provided directly by the
libFuzzer library. Besides that, the code contains SanCov instrumentation that feedbacks the fuzzer.</p>

<p>This fuzzer uses the <code>strcmp(3)</code> function interceptors that are integrated through Address Sanitizer
into the coverage reporting mechanism in libFuzzer. Thus, there are two ways of executing the program,
with Address Sanitizer enabled and without, and we can see the difference. This also illustrates that
even if the code path is relatively simple, AFL would be totally incapable of guessing code
to break <code>strcmp(3)</code> conditionals in the code and passing random inputs, possibly even never breaking
the program in a finite time.</p>

<p>This happens inside
<a href="https://github.com/llvm/llvm-project/blob/master/compiler-rt/lib/sanitizer_common/sanitizer_common_interceptors.inc">sanitizer_common_interceptors.inc</a>:</p>

<pre><code>DECLARE_WEAK_INTERCEPTOR_HOOK(__sanitizer_weak_hook_strcmp, uptr called_pc,
                              const char *s1, const char *s2, int result)

INTERCEPTOR(int, strcmp, const char *s1, const char *s2) {
  void *ctx;
  COMMON_INTERCEPTOR_ENTER(ctx, strcmp, s1, s2);
  unsigned char c1, c2;
  uptr i;
  for (i = 0;; i++) {
    c1 = (unsigned char)s1[i];
    c2 = (unsigned char)s2[i];</code></pre></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.moritz.systems/blog/an-introduction-to-llvm-libfuzzer/">https://www.moritz.systems/blog/an-introduction-to-llvm-libfuzzer/</a></em></p>]]>
            </description>
            <link>https://www.moritz.systems/blog/an-introduction-to-llvm-libfuzzer/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24503889</guid>
            <pubDate>Thu, 17 Sep 2020 12:42:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Exit to community ‚Äì what if startups could be owned by their users?]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24503881">thread link</a>) | @joshsharp
<br/>
September 17, 2020 | https://www.noemamag.com/exit-to-community/ | <a href="https://web.archive.org/web/*/https://www.noemamag.com/exit-to-community/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

				<div>
  <p>Credits</p>
  <p><span>Nathan Schneider is an assistant professor of media studies at the University of Colorado. He is the co-author of ‚Äú<a href="https://www.colorado.edu/lab/medlab/exit-to-community">Exit to Community: A Community Primer</a>‚Äù and author of‚ÄúEverything for Everyone: The Radical Tradition That Is Shaping the Next Economy.‚Äù</span></p>
</div>


<p>Perhaps you remember the time, in the fall of 2016, when rumors swirled that Twitter might be up for sale. As a reporter, I‚Äôd come to depend on Twitter. I first started using it heavily during the Arab Spring in 2011, enabling me to follow events on the ground in real-time and connect with activists directly. It felt shocking to me that this tool, which had become so important to my work and my life, was also a commodity. The news reports said maybe Disney or Google would buy it, or maybe Salesforce. This all seemed so arbitrary.</p>



<p>With some nudging from friends, I wrote an <a href="https://www.theguardian.com/commentisfree/2016/sep/29/save-twitter-buy-platform-shared-ownership">article</a> in the Guardian suggesting Twitter should be owned by its users instead. What if that mere feeling that I had of ownership, as a participant in the Twitter-verse, was actually expressed in how the company was owned? I‚Äôve written a lot of articles over the years that propose fantastical ideas; usually, they just plunk in the water. But this time, people around the world actually started organizing. I wasn‚Äôt the only person who felt this way. And we had a head start: Many of us had already been working together under the banner of ‚Äú<a href="https://www.fastcompany.com/40575728/worker-owned-co-ops-are-coming-for-the-digital-gig-economy">platform cooperativism</a>,‚Äù trying to graft the lessons of old worker-owned factories and member-owned credit unions into the online economy.</p>



<p>First, we circulated a <a href="https://www.change.org/p/twitter-inc-vote-yes-to-a-co-op-with-your-users">petition campaign</a>, asking Twitter to consider user ownership. Then we realized we had shares of Twitter stock in our community, and we could use those to make a shareholder proposal to the company itself. We had a bit of a legal battle with the company, which tried to strike down our proposal through the American Securities and Exchange Commission. But we won, and the proposal went forward. At the annual meeting in early 2017, we won nearly 5% of the vote ‚Äî which doesn‚Äôt sound like a lot, but it was more than we expected, and it meant we could resubmit later. We also got a lot of attention: articles covered us in <a href="https://www.wired.com/2016/11/lets-build-next-twitter-like-green-bay-packers/">Wired</a>, <a href="https://www.vanityfair.com/news/2017/04/twitter-users-petition-co-op-shareholder-meeting">Vanity Fair</a> and about a <a href="https://www.buytwitter.org/press/">hundred other places</a>. The press thought what we were doing was crazy enough to be interesting. And then life went on.</p>



<p>Or did it? Something weird keeps happening. Those of us working on platform cooperativism have tended to think of ourselves as radicals working against Big Tech. So it came as a surprise to me when, in 2018 and 2019, several of the biggest, baddest tech companies began filing letters to the Securities and Exchange Commission, asking it to allow them to share ownership with their users ‚Äî to distribute company stock among the very user-workers the platforms refused to classify as employees. </p>



<p>These platforms included the likes of Airbnb and Uber. Like Twitter, these are multi-sided marketplaces that leverage user loyalty to entice fickle investor-owners. Their demand was a modest step, to say the least, yet it looked eerily like a step in the direction of the radicalism we had been calling for ‚Äî building democracy into the businesses themselves, into how they are owned and governed. The Airbnb letter even <a href="https://www.nytimes.com/2018/09/21/business/dealbook/airbnb-hosts-shareholders.html">articulated</a> a lot of the rationales that we had been harping on in our little radical world for a few years.</p>



<p>The companies, of course, had their own interests at heart ‚Äî several seemed to think it might buttress going public on Wall Street ‚Äî but the letters made me wonder if a deal could be struck. At a time when regulators are starting to clamp down on the big platform companies, what if we could meet the companies in the middle and create a new kind of paradigm, a kind of race to the top? What if companies competed with each other not to extract more data from their users or suppress working conditions, wiping away rights that people have fought for over generations, but instead to offer better deals through shared ownership? </p>



<p>For the same reasons that startups often share stock with early employees, the platforms would get economic alignment with their users and loyalty. Society as a whole would get more built-in accountability for our platforms, a kind of accountability that doesn‚Äôt rely on any one jurisdiction or legislature. What if, in turn, we had a new kind of story available to tech startups, a new mythology?</p>


<!-- Content Image Block Template -->
<div>

  <div>

    <!-- Main Image -->
    <div>

            <div>
              <p><img width="2560" height="1707" src="https://www.noemamag.com/wp-content/uploads/2020/08/GettyImages-1027071040-1-scaled.jpg" alt="" srcset="https://www.noemamag.com/wp-content/uploads/2020/08/GettyImages-1027071040-1-scaled.jpg 2560w, https://www.noemamag.com/wp-content/uploads/2020/08/GettyImages-1027071040-1-300x200.jpg 300w, https://www.noemamag.com/wp-content/uploads/2020/08/GettyImages-1027071040-1-1024x683.jpg 1024w, https://www.noemamag.com/wp-content/uploads/2020/08/GettyImages-1027071040-1-768x512.jpg 768w, https://www.noemamag.com/wp-content/uploads/2020/08/GettyImages-1027071040-1-1536x1024.jpg 1536w, https://www.noemamag.com/wp-content/uploads/2020/08/GettyImages-1027071040-1-2048x1365.jpg 2048w, https://www.noemamag.com/wp-content/uploads/2020/08/GettyImages-1027071040-1-578x385.jpg 578w, https://www.noemamag.com/wp-content/uploads/2020/08/GettyImages-1027071040-1-750x500.jpg 750w, https://www.noemamag.com/wp-content/uploads/2020/08/GettyImages-1027071040-1-960x640.jpg 960w, https://www.noemamag.com/wp-content/uploads/2020/08/GettyImages-1027071040-1-1200x800.jpg 1200w, https://www.noemamag.com/wp-content/uploads/2020/08/GettyImages-1027071040-1-1980x1320.jpg 1980w, https://www.noemamag.com/wp-content/uploads/2020/08/GettyImages-1027071040-1-600x400.jpg 600w" sizes="(max-width: 2560px) 100vw, 2560px"></p>
      </div>

              <div>
              
      <figcaption>
        <p>Twitter CEO Jack Dorsey testifies in the Senate in 2018. (Drew Angerer/Getty)</p>
      </figcaption>

            </div>
      
    </div>


      </div>

</div>



<h5><strong>Another Narrative</strong></h5>



<p>If you‚Äôre forming a startup, there are generally two kinds of stories to choose from about what the startup is for. Keep in mind that startups are companies that are trying to take over some subsection of the world. It‚Äôs ambitious stuff, so they tend to take on lots of early investment. They get somebody to give them a lot of money so they can hit the market with disproportionate force. And in order to pay that investment back, they need what‚Äôs called an ‚Äúexit,‚Äù which usually comes in two forms: You‚Äôre either acquired by a larger company or you go public, selling your company on a market where people can trade your shares based on their speculations about what it‚Äôs worth. In both cases, you‚Äôre passing the company that you‚Äôve worked to build off to new owners, who in turn might be buying it just to convince future buyers to pay even more for it later. It‚Äôs a weirdly normal pyramid scheme of capitalism.</p>



<p>What if there were another way? What if a startup that successfully builds a community could opt for an exit to ownership by that community?</p>



<p>This is not so crazy. The more I look, the more I find activists, lawyers, investors and entrepreneurs around the world who are exploring options along these lines, often while seeking to address some of the deep problems of internet culture. Community ownership could be a way of rooting out the abuses that we often see with the billion-dollar ‚Äúunicorn‚Äù startups that make it big and lose their souls to satisfy financial markets, building accountability into the structure of the companies themselves. Too often, tech platforms get caught in the position of trying to extract as much as they possibly can from their users on behalf of their investor-owners, getting away with as much as they think they can.</p>


<!-- Quote Block Template -->

<div>

  <div>

    <p>
      ‚ÄúWhat if a startup that successfully builds a community could opt for an exit to ownership by that community?‚Äù    </p>

    
    
  </div>
</div>




<p>There‚Äôs also a category in the Silicon Valley lexicon called ‚Äú<a href="https://www.businessinsider.com/drew-houston-dropbox-startup-advice-2018-12">zombies</a>‚Äù ‚Äî the companies that don‚Äôt quite become unicorns but aren‚Äôt failures either. They‚Äôre a dead weight on the investors‚Äô balance sheets because, for one reason or another, nobody wants to buy them. Even if a company like that is making a profit and pleasing users, it can be worthless in the eyes of financial markets if it isn‚Äôt poised for the kind of exit options that investors need. What if the <a href="https://www.colorado.edu/lab/medlab/exit-to-community">exit to community</a> strategy could enable these zombies to be cured of their condition?</p>



<p>I have been working with Morshed Mannan, a legal scholar at the Leiden Law School, to sketch out <a href="https://ntnsndr.in/E2C-strategies">different strategies</a> for this based on what has been done before and what seems at least approximately plausible. Allow me to introduce you to our imaginary company, CoSocial. It‚Äôs a social network that managed to sprout a gig marketplace and payment system. It‚Äôs more or less a combination of Reddit and TaskRabbit ‚Äî or, if you‚Äôre familiar with the Chinese online ecosystem, just think WeChat.</p>



<p>CoSocial has positioned itself as an upstart alternative to the big platform giants. It has taken a small, energetic slice of the market share, especially among people who want to opt out from the giants. Fees from marketplace payments have even made it at least mildly profitable. But its growth has stalled. Every pathway toward unicorn status seems to point in a direction that would drive away its most loyal users ‚Äî incentivizing clickbait, adopting dismal labor standards ‚Äî which puts the whole enterprise at risk. The founders and early investors are at a loss about what to do until they started thinking about their user community itself as the answer, and they come up with three ideas for how to proceed.</p>



<h5><strong>Option 1: Trust Buyout</strong></h5>



<p>The first is for users to buy out the investors. But let‚Äôs be reasonable: Even the most loyal users probably wouldn‚Äôt have the means or inclination to pony up cash to buy the company. Instead, CoSocial could follow the pattern of the U.S. employee stock ownership plan, in which a trust operating on the employees‚Äô behalf borrows money to buy shares in the company ‚Äî except in this case, on behalf of users. </p>



<p>At first, commercial banks might be reluctant to participate in the deal, but if a foundation committed a significant portion of mission-related investment funds, for instance, other institutions might join in. Within a few years, CoSocial‚Äôs profits would pay off the loan and the users‚Äô trust would become able to keep and distribute the dividends. At first, the company would appoint an initial trustee for the trust, but within five years, the position would be elected by user-members.</p>



<p>This kind of shared pool could take a few forms. For instance, CoSocial‚Äôs gig workers might want to supplement their incomes with a proportional cut of the profits on a regular basis. But that benefit might be less important for users primarily interested in the social media features; their contribution to the profits might be much smaller when divided among individuals, but significant when pooled. </p>



<p>In that case, perhaps the dividends derived from their use could become a user-controlled fund for developing features or other initiatives that users choose through a participatory budgeting process. Those funds could also be used to support an independent oversight board ‚Äî a user-accountable version of the one ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.noemamag.com/exit-to-community/">https://www.noemamag.com/exit-to-community/</a></em></p>]]>
            </description>
            <link>https://www.noemamag.com/exit-to-community/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24503881</guid>
            <pubDate>Thu, 17 Sep 2020 12:41:31 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Jesux (1999)]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24503591">thread link</a>) | @Clex
<br/>
September 17, 2020 | http://pudge.net/jesux/ | <a href="https://web.archive.org/web/*/http://pudge.net/jesux/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
<!-- following code added by server. PLEASE REMOVE -->
<!-- preceding code added by server. PLEASE REMOVE -->

<p><img src="http://pudge.net/jesux/JHSYX.gif" alt="JHSYX" height="298" width="249"></p>



<h2>The distribution that will not lead you into temptation</h2>

<h3>What is <a href="http://pudge.net/jesux/jesux.html">Jesux</a>?</h3>

<p>
Jesux (pronounced Hay-sooks) is a new Linux distribution for Christian hackers, schools, families, and churches.  There is already a core distribution being prepared, based on RedHat's distribution.
</p>

<p>
Jesux will aim to be an environment that is pleasant for Christians to work in, with all the amenities a Christian might expect, and when possible, free from worldly influences.
</p>

<h3>What is different about Jesux?</h3>

<p>
Below is a short list.  As we get more information, we will put it here.  Send more suggestions to <a href="mailto:jesux@pobox.com">jesux@pobox.com</a>.  Send your suggestions for content in the bookmark, fortune, and .newsrc files, too, and we will start posting some of this stuff.
</p>

<ul>
    <li>default fortune file contains quotes from the scriptures, Augustine, C.S. Lewis, Chuck Swindoll, etc.</li>
    <li>Christian Enlightenment themes featuring Jesus, the cross, and other Christian icons</li>
    <li>Login screen has full text to Lord's Prayer and Pledge of Allegiance, with Christian and American symbols
    <ul>
        <li>Provide alternate screens for non-Americans, perhaps</li>
    </ul>
    </li>
    <li>Pregenerated Netscape bookmarks and .newsrc files pointing to prescreened Christian web sites and newsgroups</li>
    <li>cal(1) includes Christian holidays</li>
    <li>Special hack of emacs "M-x doctor" mode, "M-x pastor"</li>
    <li>Optional technical support and basic counseling services provided by Christian hackers
        <ul>
            <li>The current plan is to double up the tech support line as a crisis line, where people in need can be redirected to people who can really help them</li>
        </ul>
    </li>
    <li>Online Bible in King James Version
        <ul>
            <li>no other versions will be provided by default; we feel the KJV is the only English version that can be fully trusted</li>
        </ul>
    </li>
    <li>Addition of <a href="http://pudge.net/jesux/kjv.words.gz">/usr/dict/kjv.words</a> (exhaustive)</li>
    <li>Removal of some of the RedHat games
        <ul>
            <li>we don't play them much, but several of you have noted that some of them are clearly inappropriate</li>
        </ul>
    </li>
    <li>Squid proxy server (plus squidGuard) bundled and configured for blocking illicit web sites (including a regularly updated list of illicit sites and URL patterns to install on your own; we will be looking for mature and diligent volunteers to help maintain it)</li>
    <li>Optionally disable logins on Sunday, the day of rest</li>
    <li>bash(1) is default
        <ul>
            <li>the "Bourne-Again" shell is already the default; but we like the shell, and we love the name :)</li>
        </ul>
    </li>
    <li>chmod(1) accepts hexadecimal modes, such as 0x01B6</li>
    <li>qmail replaces sendmail as the standard MTA (sendmail was written by a prominent homosexual)
    <!-- Happy Birthday, Funny Little Man!  sweeeet.  -->
        <ul>
            <li>we are considering postfix too, due to popular request</li>
        </ul>
    </li>
    <li>Hierarchical user structure, so parents and teachers can easily access children's files without needing to become root</li>
    <li>No encryption provided; Christians have nothing to hide
        <ul>
            <li>We have had concerns about the "no encryption" item ... but no worries, crypt(3) will still be there.  Sorry for the confusion, we do not generally consider it as encryption, though, of course, technically it is.  But since it is generally unsuitable for anything other than password authentication, we don't see any problem with it.</li>
        </ul>
    </li>
    <li>No cracking utilities provided; SAINT can be acquired from us later, after the user has proven his worth</li>
</ul>

<p>
All new code will be provided under the <a href="http://pudge.net/jesux/cspl.html">Christian Software Public License</a>, an Open Source-compatible license.  Go ahead and <a href="http://pudge.net/jesux/cspl.html">check it out</a>.  The final CSPL is very similar to the BSD license, where the required advertising is the text of John 3:16 from the King James Version of the Bible.  <em>(Note: the requested requirement that only Christians could redistribute the code was considered and rejected, in accordance with the "No Discrimination Against Persons or Groups" section of the Open Source Definition.  We actually agree with this section of the OSD ... the more people that use our software, the more that see the Gospel; the more that distribute it, the more that advertise His word in His name!)</em>
</p>

<p>
Also, we are seriously considering changing some fundamental OS features.  The idea would be that function calls and features suggesting evil and otherwise pagan ideas would be changed.
</p>

<ul>
    <li>abort(3)</li>
    <li>kill(1)</li>
    <li>references to "daemon"</li>        
</ul>

<p>
NOTE: we do <strong>not</strong> believe words are inherently bad.  We simply do not like these words because of their connotations in different contexts.  You do not have to agree, but you will not change our minds.  However, because this is not a point of religious contention but of linguistics and meanings and associations, and because the solution seems like the easiest one to implement, the current plan is to provide symlinks, headers, macros, etc. so that the existing names will still exist, but those who want to use alternate symbols (words) can do so.
</p>

<p>
In the interest of getting out a functional system, these will all wait for some future release anyway.
</p>


<h3>When will it be out?</h3>

<p>
Jesux will be here in late December (hopefully before Jesus arrives :).  Contact <a href="mailto:jesux@pobox.com">jesux@pobox.com</a> for more information.  Ask to be put on our announcement list.
</p>


<h3>Latest News</h3>

<p>
We have been asked several times about "corporate information."  We are not a company, and will not be.  We are volunteers doing this in our free time, and seek not a dime of profit, not a penny of contribution or charity.  We have all been involved in open source projects for a few years, and this one is no different in that respect.  It is different in that it is closer to our hearts and can possibly make a real difference in people's lives.
</p>

<p>
We have been getting lots of requests about whether or not this site is a hoax.  We understand the reasons why, but it saddens us.  What has become of our society that it is so hard to believe that people are earnestly seeking to do good in God's name, to follow Him, and to help others through the power of the Holy Spirit?  Please do keep the mail coming, but don't bother asking us if this is a hoax.  We are here to do what we think is good and right.  We don't have time to answer such frivolous mail anymore.  Please keep all your other messages coming, though!  We still don't have time to answer all of them, but we answer what we can, and we will add you to our announcement list if you request it.  Thank you!
</p>

<p>
<strong>Apologies</strong>:  We rightfully criticized slashdot.org previously, but we did not do so with a loving spirit.  For that, we apologize.  We still will not bow to the media, we do not need the media, and we will succeed in providing a distribution for you.  If God is for us, who can be against us?
</p>

<p>
We are considering making the first distribution of Jesux as a set of patches over the most recent RedHat distribution.  This will make "time-to-market" quicker, and make distribution easier, too.  Many of you have requested that we post what we have, so people can start using it, and participating in the development.  We are planning on it!  Be patient; good things come to those who wait.  :)
</p>

<p>
We are getting great feedback (even from some of you who don't like us, or what we are doing).  Keep it coming!
</p>

<hr>

<p>
<em>Finally, brethren, whatsoever things are true, whatsoever things are honest, whatsoever things are just, whatsoever things are pure, whatsoever things are lovely, whatsoever things are of good report; if there be any virtue, and if there be any praise, think on these things.  (Phillipians 4:8)</em>  As such, this site is conformant to HTML 4.0 strict and CSS1.
</p>

<p>
This page last updated Wednesday, September 29, 1999, 13:51:07 PDT
</p>




<img src="http://geo.yahoo.com/serv?s=76001067&amp;t=1240529179&amp;f=us-w3" alt="1" width="1" height="1">
</div>]]>
            </description>
            <link>http://pudge.net/jesux/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24503591</guid>
            <pubDate>Thu, 17 Sep 2020 12:07:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How I think I want to drop modern Python packages into a single program]]>
            </title>
            <description>
<![CDATA[
Score 25 | Comments 55 (<a href="https://news.ycombinator.com/item?id=24503292">thread link</a>) | @pcr910303
<br/>
September 17, 2020 | https://utcc.utoronto.ca/~cks/space/blog/python/PipDropInInstall | <a href="https://web.archive.org/web/*/https://utcc.utoronto.ca/~cks/space/blog/python/PipDropInInstall">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><h2>How I think I want to drop modern Python packages into a single program</h2>

	<p><small>September 16, 2020</small></p>
</div><div><p>For reasons beyond the scope of this blog entry, I'm considering
augmenting <a href="https://github.com/siebenmann/exim-attachment-logger">our Python program to log email attachment information
for Exim</a> to
use <a href="https://github.com/decalage2/oletools">oletools</a> to peer
inside MS Office files for indications of bad things. Oletools is
not packaged by Ubuntu as far as I can see, and in any case it would
be an older version, so we would need to add the oletools Python
packages ourselves.</p>

<p>The official oletools install instructions talk about using either
pip or setup.py. As a general rule, we're very strongly against
installing anything system-wide except through Ubuntu's own package
management system, and the environment our Python program runs in
doesn't really have a home directory to use pip's --user option, so
the obvious and simple pip invocations are out. I've used a setup.py
approach to install a large Python package into a specific directory
hierarchy in the past (Django), and it was a big pain, so I'd like
not to do it again.</p>

<p>(Nor do we want to learn about how to build and maintain Python
virtual environments, and then convert how we run this Python program
to use one.)</p>

<p>After some looking at pip's help output I found the '<code>pip install
--target &lt;directory&gt;</code>' option and tested it a bit. This appears to
do more or less what I want, in that it installs oletools and all
of its dependencies into the target directory. The target directory
is also littered with various metadata, so we probably don't want
to make it where the program's normal source code lives. This means
we'll need to arrange to run the program so that <code>$PYTHONPATH</code> is
set to the target directory, but that's a solvable problem.</p>

<p>(This '<code>pip install</code>' invocation does write some additional pip
metadata to your <code>$HOME</code>. Fortunately it actually does respect the
value of the <code>$HOME</code> environment variable, so I can point that at
a junk directory and then delete it afterward. Or I can make <code>$HOME</code>
point to my target directory so everything is in one place.)</p>

<p>All of this is not quite as neat and simple as dropping an <code>oletools</code>
directory tree in the program's directory, <a href="https://utcc.utoronto.ca/~cks/space/blog/python/UpdatingToRarfile30">in the way that I could
deal with needing the rarfile module</a>, but then
again oletools has a bunch of dependencies and pip handles them all
for me. I could manually copy them all into place, but that would
actually create a sufficiently cluttered program directory that I
prefer a separate directory even if it needs a <code>$PYTHONPATH</code> step.</p>

<p>(Some people will say that setting <code>$PYTHONPATH</code> means that I should
go all the way to a virtual environment, but that would be a lot
more to learn and it would be more opaque. But looking into this
a bit did lead to me learning that <a href="https://docs.python.org/3/tutorial/venv.html">Python 3 now has standard
support for virtual environments</a>.)</p>
</div></div>]]>
            </description>
            <link>https://utcc.utoronto.ca/~cks/space/blog/python/PipDropInInstall</link>
            <guid isPermaLink="false">hacker-news-small-sites-24503292</guid>
            <pubDate>Thu, 17 Sep 2020 11:24:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Toward a Technological Cage for the Masses]]>
            </title>
            <description>
<![CDATA[
Score 83 | Comments 74 (<a href="https://news.ycombinator.com/item?id=24503179">thread link</a>) | @sT370ma2
<br/>
September 17, 2020 | https://cheapskatesguide.org/articles/techno-cage.html | <a href="https://web.archive.org/web/*/https://cheapskatesguide.org/articles/techno-cage.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://cheapskatesguide.org/articles/techno-cage.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24503179</guid>
            <pubDate>Thu, 17 Sep 2020 11:05:21 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Become an Ultralearner ‚Äì Scott H. Young on the Artists of Data Science Podcast]]>
            </title>
            <description>
<![CDATA[
Score 34 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24502962">thread link</a>) | @harpreetsahota
<br/>
September 17, 2020 | https://theartistsofdatascience.fireside.fm/scott-h-young | <a href="https://web.archive.org/web/*/https://theartistsofdatascience.fireside.fm/scott-h-young">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    

    <p>Scott H Young a writer, programmer, traveler and avid reader of interesting things. For the last ten years he's been experimenting to find out how to learn and think better. Today he swings by the show and talks to us about how we can master hard skills faster!</p>

<p><strong>QUOTES</strong><br>
"What you need is not just motivation, but you need some kind of system. You need some way to channel that initial burst of enthusiasm into creating structures for your life so that you will kind of consistently re-engage with it and consistently do what you need to do to learn things better." [00:07:37] </p>

<p>"The way that mental models become useful is when you really spent a lot of time thinking about them, not when you just heard their name and kind of written them down and understood a few sentences." [00:13:54] </p>

<p>"There is a certain type of person, I guess you could say that like they do need to stop reading, they need to actually start just taking action on things and implementing things." [00:24:23] </p>

<p>"The possibilities of learning are a lot more vast than you've maybe previously considered." [01:02:17]</p>

<p><strong>CONNECT WITH SCOTT</strong><br>
Website: <a href="https://www.scotthyoung.com/" rel="nofollow">https://www.scotthyoung.com/</a></p>

<p>Twitter: <a href="https://twitter.com/scotthyoung/" rel="nofollow">https://twitter.com/scotthyoung/</a></p>

<p>Facebook: <a href="https://www.facebook.com/AuthorScottYoung/" rel="nofollow">https://www.facebook.com/AuthorScottYoung/</a></p>

<p><strong>SHOW NOTES</strong></p>

<p>[00:01:27] Introduction for our guest</p>

<p>[00:02:42] Talk to us a bit about your journey. How did you get to where you are today?</p>

<p>[00:03:30] The struggles on the path to becoming an ultralearner</p>

<p>[00:06:22] The pitfalls of motivation</p>

<p>[00:08:25] A walk down the narrow path to success</p>

<p>[00:10:47] How to make sure you‚Äôre applying effort intelligently</p>

<p>[00:13:18] The benefits and limits of mental models</p>

<p>[00:16:32] The difference between knowing the name of a thing and knowing the thing</p>

<p>[00:18:54] Scott‚Äôs favorite mental model</p>

<p>[00:21:05] Scott talks about his doodles</p>

<p>[00:23:33] Is reading making you stupid?</p>

<p>[00:26:23] The danger of learning theories and not applying them</p>

<p>[00:27:37] You need to do more than just homework</p>

<p>[00:29:27] What to do when you‚Äôre stunned into inaction</p>

<p>[00:31:39] You can‚Äôt see your brain getting buff</p>

<p>[00:33:36] Luck to destiny</p>

<p>[00:39:14] What exactly is ultralearning?</p>

<p>[00:40:27] How can we use ultralearning to accelerate, transition, or rescue our careers?</p>

<p>[00:41:46] Why is it that we procrastinate?</p>

<p>[00:42:55] Mental habits to combat procrastination</p>

<p>[00:45:40] You‚Äôre more ready than you think you are</p>

<p>[00:49:32] How can we mitigate the distraction of our mind?</p>

<p>[00:51:18] Do you have any tips for our listeners for what they could start doing today to improve the quality of their focus?</p>

<p>[00:53:27] The principle of intuition</p>

<p>[00:59:47] Building expert intuition</p>

<p>[01:02:04] What's the one thing you want people to learn from your story?</p>

<p>[01:03:25] The random round</p>




      
      
  </div></div>]]>
            </description>
            <link>https://theartistsofdatascience.fireside.fm/scott-h-young</link>
            <guid isPermaLink="false">hacker-news-small-sites-24502962</guid>
            <pubDate>Thu, 17 Sep 2020 10:34:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Sixty second stories of exceptional founders, sent out every 10 days]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24502932">thread link</a>) | @plincoln8
<br/>
September 17, 2020 | http://tareksway.com/visionaries | <a href="https://web.archive.org/web/*/http://tareksway.com/visionaries">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="wrapper">	
<section>
<article id="page-5046">
<section>
<div data-token="zSb1c"><div><div><div><div>
<div>
<div>
<p><img src="https://tareksway.com/wp-content/uploads/2020/08/visionaries-logo-250-03-copy.png" alt="" width="250" height="40"></p><h5>60-SECOND STORIES OF EXCEPTIONAL FOUNDERS</h5>
<p>1 STORY EVERY 10 DAYS</p>

<h5>‚¨áÔ∏é Read an example below ‚¨áÔ∏é</h5></div></div></div></div></div></div></div><div id="posts" data-token="5gLXL"><div><div><div><div><section>
<article id="post-5202">
<p><a href="https://tareksway.com/visionaries/sew-much-hope/"> <span><span><i></i></span></span> <img onload="Wpfcll.r(this,true);" src="https://tareksway.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" width="600" height="444" data-wpfc-original-src="https://tareksway.com/wp-content/uploads/2020/09/Singer-image.jpg" alt="blank" data-wpfc-original-srcset="https://tareksway.com/wp-content/uploads/2020/09/Singer-image.jpg 600w, https://tareksway.com/wp-content/uploads/2020/09/Singer-image-300x222.jpg 300w" sizes="(max-width: 600px) 100vw, 600px"> </a></p><div>
<h3>
<a href="https://tareksway.com/visionaries/sew-much-hope/" rel="bookmark" title="Permanent Link to Sew much hope">Sew much hope</a>
</h3>
<p><span>
<i></i><i></i>
<em>September 7, 2020</em>		</span></p><p><span>Reading time: 54 seconds</span></p>
<p>In 19th century America, less than 5% of US citizens had access to electricity and the average life expectancy was 45. Life was tough and opportunities were desperately needed.</p>
</div></article>
<article id="post-2525">
<p><a href="https://tareksway.com/visionaries/a-surprise-delivery-will-shu-deliveroo-story/"> <span><span><i></i></span></span> <img onload="Wpfcll.r(this,true);" src="https://tareksway.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" width="780" height="597" data-wpfc-original-src="https://tareksway.com/wp-content/uploads/2018/05/Will-Shu-Deliveroo-mini-780x597.jpg" alt="blank" data-wpfc-original-srcset="https://tareksway.com/wp-content/uploads/2018/05/Will-Shu-Deliveroo-mini-780x597.jpg 780w, https://tareksway.com/wp-content/uploads/2018/05/Will-Shu-Deliveroo-mini-300x230.jpg 300w, https://tareksway.com/wp-content/uploads/2018/05/Will-Shu-Deliveroo-mini-768x588.jpg 768w, https://tareksway.com/wp-content/uploads/2018/05/Will-Shu-Deliveroo-mini.jpg 900w" sizes="(max-width: 780px) 100vw, 780px"> </a></p><div>
<h3>
<a href="https://tareksway.com/visionaries/a-surprise-delivery-will-shu-deliveroo-story/" rel="bookmark" title="Permanent Link to A surprise delivery">A surprise delivery</a>
</h3>
<p><span>
<i></i><i></i>
<em>May 22, 2018</em>		</span></p><p><span>Reading time: 60 seconds</span></p>
<p>It was 2001 and American Will Shu was fresh out of college with a shiny new job at Morgan Stanley, New York. The money was awesome but the 100-hour workweek‚Ä¶ not so much. </p>
</div></article>
<article id="post-2520">
<p><a href="https://tareksway.com/visionaries/from-grade-c-to-the-skies-fedex-story/"> <span><span><i></i></span></span> <img onload="Wpfcll.r(this,true);" src="https://tareksway.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" width="780" height="417" data-wpfc-original-src="https://tareksway.com/wp-content/uploads/2018/03/Frederick-Smith-FedEx-780x417.jpg" alt="blank" data-wpfc-original-srcset="https://tareksway.com/wp-content/uploads/2018/03/Frederick-Smith-FedEx-780x417.jpg 780w, https://tareksway.com/wp-content/uploads/2018/03/Frederick-Smith-FedEx-300x161.jpg 300w, https://tareksway.com/wp-content/uploads/2018/03/Frederick-Smith-FedEx-768x411.jpg 768w, https://tareksway.com/wp-content/uploads/2018/03/Frederick-Smith-FedEx.jpg 1000w" sizes="(max-width: 780px) 100vw, 780px"> </a></p><div>
<h3>
<a href="https://tareksway.com/visionaries/from-grade-c-to-the-skies-fedex-story/" rel="bookmark" title="Permanent Link to From grade ‚ÄúC‚Äù to the skies">From grade ‚ÄúC‚Äù to the skies</a>
</h3>
<p><span>
<i></i><i></i>
<em>March 15, 2018</em>		</span></p><p><span>Reading time: 60 seconds</span></p>
<p>Frederick Smith wasn‚Äôt exactly in love with academics. He attended Yale in 1962 and was a solid ‚ÄúC‚Äù student. When one of his courses assigned a paper, he wrote one at the last minute. He later admitted that it likely also got him a ‚ÄúC‚Äù.</p>
</div></article>
<article id="post-2516">
<p><a href="https://tareksway.com/visionaries/when-the-stars-are-misaligned-instagram-story/"> <span><span><i></i></span></span> <img onload="Wpfcll.r(this,true);" src="https://tareksway.com/wp-content/plugins/wp-fastest-cache-premium/pro/images/blank.gif" width="780" height="569" data-wpfc-original-src="https://tareksway.com/wp-content/uploads/2018/02/22639499_1454023074646352_7020349780203143168_n900px-2-e1517504855497-780x569.jpg" alt="blank" data-wpfc-original-srcset="https://tareksway.com/wp-content/uploads/2018/02/22639499_1454023074646352_7020349780203143168_n900px-2-e1517504855497-780x569.jpg 780w, https://tareksway.com/wp-content/uploads/2018/02/22639499_1454023074646352_7020349780203143168_n900px-2-e1517504855497-300x219.jpg 300w, https://tareksway.com/wp-content/uploads/2018/02/22639499_1454023074646352_7020349780203143168_n900px-2-e1517504855497-768x560.jpg 768w, https://tareksway.com/wp-content/uploads/2018/02/22639499_1454023074646352_7020349780203143168_n900px-2-e1517504855497.jpg 897w" sizes="(max-width: 780px) 100vw, 780px"> </a></p><div>
<h3>
<a href="https://tareksway.com/visionaries/when-the-stars-are-misaligned-instagram-story/" rel="bookmark" title="Permanent Link to When the stars are misaligned">When the stars are misaligned</a>
</h3>
<p><span>
<i></i><i></i>
<em>February 4, 2018</em>		</span></p><p><span>Reading time: 59 seconds</span></p>
<p>In 2009, Kevin Systrom was working full time at a travel startup but was learning to code at night. Smartphones had only recently become ‚Äúsmart‚Äù after acquiring a camera and location capabilities.</p>
</div></article></section></div></div></div></div></div></section>
</article>
</section>
</div></div>]]>
            </description>
            <link>http://tareksway.com/visionaries</link>
            <guid isPermaLink="false">hacker-news-small-sites-24502932</guid>
            <pubDate>Thu, 17 Sep 2020 10:28:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Safari on iOS 14 and iPadOS 14 for PWA and Web Developers]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24502728">thread link</a>) | @Jarred
<br/>
September 17, 2020 | https://firt.dev/ios-14 | <a href="https://web.archive.org/web/*/https://firt.dev/ios-14">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
      <header>
          <p>What's new, what's missing, new challenges and new abilities</p><section id="meta">
              <p><time datetime="Invalid DateTime">Published 3 days ago (16 Sep 2020)      
            </time></p><p>About 21 min reading time
          </p></section>
      <section>
            
                  <a href="https://firt.dev/tags/ios/">#ios</a>
                  <a href="https://firt.dev/tags/webview/">#webview</a>
                  <a href="https://firt.dev/tags/pwa/">#pwa</a>
                  <a href="https://firt.dev/tags/store/">#store</a>
              
      </section>
      
          <p>From today, iOS 14 and iPadOS 14 are available to most users in the world. I've played with it, and here you have a list of the essential changes for PWA and Web Designers and Developers. As usual with Apple, some (most?) of this information was not documented at all.</p>
      </header><section>
        <nav>
        <ol><li><a href="#what's-new-in-a-nutshell">What's new in a nutshell</a></li><li><a href="#new-features-for-users">New Features for Users</a><ol><li><a href="#privacy-report">Privacy Report</a></li><li><a href="#website-translation">Website Translation</a></li><li><a href="#performance-improvements">Performance Improvements</a></li></ol></li><li><a href="#default-browser-change">Default Browser Change</a><ol><li><a href="#hello-service-worker">Hello Service Worker</a></li><li><a href="#what-changing-a-default-browser-means-and-what-it-doesn't-mean">What changing a default browser means and what it doesn't mean</a></li></ol></li><li><a href="#progressive-web-apps">Progressive Web Apps</a><ol><li><a href="#storage-shared-with-safari">Storage shared with Safari</a></li><li><a href="#app-library-for-pwas">App Library for PWAs</a></li><li><a href="#inspecting-pwas">Inspecting PWAs</a></li><li><a href="#bugs">Bugs</a></li><li><a href="#white-status-bar-gone">White Status Bar gone</a></li><li><a href="#web-app-manifest-support">Web App Manifest support</a></li></ol></li><li><a href="#new-abilities-and-apis">New Abilities and APIs</a><ol><li><a href="#http%2F3">HTTP/3</a></li><li><a href="#javascript-engine">JavaScript Engine</a></li><li><a href="#faceid-and-touchid-for-the-web">FaceID and TouchID for the Web</a></li><li><a href="#sms-one-time-codes">SMS One-time codes</a></li></ol></li><li><a href="#new-for-design-%26-media">New for Design &amp; Media</a></li><li><a href="#geolocation-changes">Geolocation Changes</a><ol><li><a href="#working-with-imprecise-location">Working with imprecise location</a></li><li><a href="#what-is-an-approximate-location-anyway%3F">What is an approximate location anyway?</a></li></ol></li><li><a href="#service-worker-changes">Service Worker Changes</a><ol><li><a href="#sharing-the-storage-2020-edition">Sharing the Storage 2020 edition</a></li></ol></li><li><a href="#ipados-new-features">iPadOS New Features</a><ol><li><a href="#multitasking">Multitasking</a></li><li><a href="#scribble-and-apple-pencil">Scribble and Apple Pencil</a></li><li><a href="#disabling-scribble-on-one-particular-element">Disabling Scribble on one particular element</a></li></ol></li><li><a href="#web-views-and-pwas-in-the-appstore">Web Views and PWAs in the AppStore</a><ol><li><a href="#itp">ITP</a></li><li><a href="#service-workers">Service Workers</a></li><li><a href="#app-bound-domains">App-Bound Domains</a></li></ol></li><li><a href="#security-bug">Security Bug</a></li><li><a href="#new-abilities-in-the-os">New Abilities in the OS</a><ol><li><a href="#news%2B-reading-web-links">News+ reading web links</a></li><li><a href="#app-clips">App Clips</a></li></ol></li><li><a href="#anything-else%3F">Anything else?</a></li></ol></nav>
      </section>
<p>This article marks ten years of writing about news on Safari for mobile (see the <a href="https://firt.dev/ios-4.2">first article on the series</a>). It's been a bumpy ride, detecting many new APIs and bugs, and asking questions the Safari doesn't want to respond. Of course, you may know about the <a href="https://firt.dev/lazy">bullying I've got from the team lately</a>. But here I am, keeping the story alive :).</p>
<blockquote>
<p>Many people asked me before how to support my work as I'm doing this as a freelancer. You can check one of my <a href="https://firt.dev/tags/course">courses</a>, use <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=97VA4JKZAKPLJ&amp;source=url">PayPal Donate</a>, or you can <a href="https://www.buymeacoffee.com/firt">Buy me a Coffee</a>. Thanks!</p>
</blockquote>
<h2 id="what's-new-in-a-nutshell">What's new in a nutshell <a href="#what's-new-in-a-nutshell">#</a></h2>
<p><em>New Safari features for users</em>: Page translation, Privacy Report, Performance Improvements<br>
<em>Default browser</em>: You can change the Default Browser AppÔºçChrome or Edge now available, but there are some UX issues including reset choice on restart, and they are still not full browsers.<br>
<em>New Abilities and APIs</em>: Updated JS engine (BigInt, public class fields), HTTP/3 experiment, TouchID and FaceID for Web Authentication, SMS One Time codes supported.<br>
<em>New for Design &amp; Media</em>: WebP ü•≥, HDR video, Picture in Picture for video playing, new Image Picker, some CSS additions<br>
<em>Geolocation</em>: Now Safari can expose the accurate or an approximate location based on the user's decision. Be aware of this!<br>
<em>Service Worker</em>: Safari and a PWA now share the registration and the cache storage, Chrome and Edge now support SWs as well as your web views if you follow some rules<br>
<em>Progressive Web Apps</em>: They don't appear in the new App Library, some bugs were solved, the white theme color is not supported anymore, and some limitations are still there. No better support for Web App Manifest or other PWA-related APIs<br>
<em>iPadOS</em>: Now PWAs can share the screen with other apps (including other PWAs), and with Apple Pencil, web apps can receive handwriting text over editable elements<br>
<em>WebViews and PWAs in AppStore:</em> Still no getUserMedia; a new feature to register safe domains that will give more power to a web view (such as Service Workers).<br>
<em>Security bug:</em> A significant security bug with Web Share is still there</p>
<h2 id="new-features-for-users">New Features for Users <a href="#new-features-for-users">#</a></h2>
<p>Safari users on iOS and iPadOS now have a couple of features that will impact how they browse our websites.</p>
<h3 id="privacy-report">Privacy Report <a href="#privacy-report">#</a></h3>
<p>The new privacy report is available in Safari (not in standalone PWAs). It will let the user know what ITP (Intelligent Tracking Prevention) has done to reduce tracking around the Web. The most visible enemy of this is Google Analytics, as it always appears as the most blocked target.</p>
<h3 id="website-translation">Website Translation <a href="#website-translation">#</a></h3>
<p>Safari now can translate a webpage into different pages (something that Chrome has supported for years). Unfortunately, I didn't find a way for a web owner to disable that feature as Chrome has with a meta tag.</p>
<h3 id="performance-improvements">Performance Improvements <a href="#performance-improvements">#</a></h3>
<p>According to <a href="https://developer.apple.com/documentation/safari-release-notes/safari-14-beta-release-notes">Safari Release Notes</a> (published in beta only for some reason), these are the new performance advantages for iOS and iPadOS are:</p>
<ul>
<li>Supported the incremental loading of PDF files.</li>
<li>Improved tab closing performance.</li>
<li>Improved IndexedDB performance.</li>
<li>Improved JavaScript cookie access performance.</li>
<li>Improved for-of performance.</li>
</ul>
<h2 id="default-browser-change">Default Browser Change <a href="#default-browser-change">#</a></h2>
<p>iOS 14 supports the <em>browser entitlement</em>, a right granted by Apple to apps that are web browsers as their primary goal (also known as "not Facebook"). This entitlement must be required from the browser team by email, and it will be granted if your App has web browsing as its primary purpose.</p>
<p>Right now, only the latest versions of Google Chrome and Microsoft Edge in the AppStore have granted access to it.</p>
<blockquote>
<p>Remember that Chrome, Firefox, Edge, or Brave from the App Store are not Chrome, Firefox, Edge, or Brave. They are just skins with UI behavior on top of WebKit's web view. The amount of things they can add or replace is limited. iOS 14 hasn't changed this situation.</p>
</blockquote>
<figure><img src="https://firt.imgix.net/img/notes/ios14/browser-change2.png?auto=format" alt="" loading="lazy" data-src="https://firt.imgix.net/img/notes/ios14/browser-change2.png?auto=format" width="1125" height="729"><figcaption>At this point, only Chrome and Edge have the browser entitlement to appear in this list</figcaption></figure>
<p>The place to change the default browser is a little odd, however. I was expecting one setting option in General. But instead, we have the setting screen available inside each browser. You will find the same settings within Safari settings, Edge settings, and Chrome settings; that panel will let you change it from a list.</p>
<figure><img src="https://firt.imgix.net/img/notes/ios14/edge.png?auto=format" alt="" loading="lazy" data-src="https://firt.imgix.net/img/notes/ios14/edge.png?auto=format" width="1125" height="2436"><figcaption>Microsoft Edge offers you to set itself as a default browser sending you to Settings</figcaption></figure>
<p>It's not even an action such as "Set this App as the default browser"; every browser will contain the full list of available browsers.</p>
<figure><img src="https://firt.imgix.net/img/notes/ios14/browser-chrome.png?auto=format" alt="" loading="lazy" data-src="https://firt.imgix.net/img/notes/ios14/browser-chrome.png?auto=format" width="1125" height="2436"><figcaption>From Settings &gt; Chrome you can access the default browser list</figcaption></figure>
<figure><img src="https://firt.imgix.net/img/notes/ios14/browser-safari.png?auto=format" alt="" loading="lazy" data-src="https://firt.imgix.net/img/notes/ios14/browser-safari.png?auto=format" width="1125" height="2436"><figcaption>From Settings &gt; Safari you can also access the default browser list</figcaption></figure>
<blockquote>
<p>There is a bug right now that will reset your choice of default Browser App every time your phone restarts. Also, the option to set the choice again dissapears from Safari when restarted. It needs to be re-defined on Edge or Chrome Settings.</p>
</blockquote>
<h3 id="hello-service-worker">Hello Service Worker <a href="#hello-service-worker">#</a></h3>
<p>Thanks to <a href="#app-bound-domains">App-Bound Domains</a>, browser apps with the browser entitlement will have app-bound domains enabled for the entire Web. That means that Service Workers are now available in Google Chrome and Microsoft Edge.</p>
<blockquote>
<p>Apple didn't document anywhere that App-bound domains will grant Service Workers to Web View. Still, the reality is that they are enabled.</p>
</blockquote>
<p>Have in mind:</p>
<ul>
<li>Service Worker registration and Cache Storage is unique to each browser. So if you browse the same web app in Safari, Chrome, and Edge, you will end up with three copies of the files. This situation is expectable, and the same happens on Android and desktop.</li>
<li>I'm not 100% sure about the storage limits and lifespan yet; my current estimation is that it won't follow the current WebKit 7-day limit but, who knows for sure üòê</li>
<li>Read more about this at the <a href="#service-workers-in-web-views">Service Workers in Web Views</a> section</li>
</ul>
<h3 id="what-changing-a-default-browser-means-and-what-it-doesn't-mean">What changing a default browser means and what it doesn't mean <a href="#what-changing-a-default-browser-means-and-what-it-doesn't-mean">#</a></h3>
<p>When you change the default browser, all <code>http</code> and <code>https</code> URLs that we use within the <code>openURL</code> native API will now be sent to that default browser instead of Safari. Clicking links on different apps is the most common example of this action.</p>
<p>We need to remember that browsers other than Safari on iOS and iPadOS are not full browsers. I used to call them pseudo browsers. They look like a browser, but it's just WebKit's web view (not even Safari) from a rendering engine perspective.</p>
<blockquote>
<p>It's not completely clear what happens with news URLs that seem to be captured by Apple News when the user has a subscription. <a href="#news%2B-reading-web-links">See more</a></p>
</blockquote>
<p>The main problems that pseudo browsers on iOS and iPad have today are:</p>
<ul>
<li><em>They can't use their web rendering and execution engines</em></li>
<li>They can't add icons (WebClips) to the home screen as Safari (therefore, <em>no PWA installation support</em> for alternative browsers)</li>
<li>They can't be used as a replacement of SafariViewController when other apps (such as Twitter) are creating an In-App browser; therefore, you will still use a forced Safari within apps (including session issues)</li>
<li>They are tied to WebKit APIs for the WebView; for example, WebRTC and getUserMedia are still not fully supported there (no raw camera access)</li>
<li>While they could add more API bridging with native, Most big players don't want to play on that field; it's never clear when Apple will approve that, as well as it might open some security risks</li>
<li>Now users can enable WebKit's Intelligent Tracking Prevention (ITP) on every WebView-based App, including browsers. The browser itself can't decide about that feature that may be enabled within its boundaries and affect how it renders content.</li>
</ul>
<h4 id="ux-inconsistencies">UX Inconsistencies <a href="#ux-inconsistencies">#</a></h4>
<p>There is no API for browsers to request being the default browser, or for other apps to query about the current browser. And the latter is leading to some UX inconsistencies. Let's see them.</p>
<figure><img src="https://firt.imgix.net/img/notes/ios14/browser-svc.png?auto=format" alt="" loading="lazy" data-src="https://firt.imgix.net/img/notes/ios14/browser-svc.png?auto=format" width="1125" height="2436"><figcaption>SafariViewController renders a Safari icon (bottom-right) that can now point to other browsers, such as Chrome. UI does not update to reflect that situation.</figcaption></figure>
<p>SafariViewController is the first victim of this issue. When you render a website in SafariViewController, such as when you click on a link within Twitter, the UI has a Safari icon that now may point to other browsers, such as Chrome.</p>
<figure><img src="https://firt.imgix.net/img/notes/ios14/browser-fb.png?auto=format" alt="" loading="lazy" data-src="https://firt.imgix.net/img/notes/ios14/browser-fb.png?auto=format" width="1125" height="1408"><figcaption>Facebook Mobile Browser also shows an 'Open in Safari' menu item that now may open a different browser</figcaption></figure>
<p>For example, Facebook Mobile Browser has a menu item to "Open in Safari" that opens Chrome instead, if the latter is defined as default.</p>
<p>As far as I know today, there will be no way now to open a URL in Safari.  Apps that let you choose the browser you prefer to open links should change their behavior. Feedly is one example of this kind of Apps.</p>
<figure><img src="https://firt.imgix.net/img/notes/ios14/browser-feedly.png?auto=format" alt="" loading="lazy" data-src="https://firt.imgix.net/img/notes/ios14/browser-feedly.png?auto=format" width="1125" height="1063"><figcaption>Feedly lets you define your preferred browser; this will be a problem from iOS ‚Ä¶</figcaption></figure></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://firt.dev/ios-14">https://firt.dev/ios-14</a></em></p>]]>
            </description>
            <link>https://firt.dev/ios-14</link>
            <guid isPermaLink="false">hacker-news-small-sites-24502728</guid>
            <pubDate>Thu, 17 Sep 2020 09:41:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why Is 1 World Trade Center Missing from Spider-Man?]]>
            </title>
            <description>
<![CDATA[
Score 170 | Comments 114 (<a href="https://news.ycombinator.com/item?id=24502706">thread link</a>) | @tosh
<br/>
September 17, 2020 | https://www.stevenbuccini.com/why-1wtc-isnt-in-spiderman | <a href="https://web.archive.org/web/*/https://www.stevenbuccini.com/why-1wtc-isnt-in-spiderman">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>Like many people across the world, I‚Äôm using my quarantine effectively: by catching up on all the video games I wasn‚Äôt able to play while traveling. The game at the top of my list? <a href="https://en.wikipedia.org/wiki/Spider-Man_(2018_video_game)">Spider-Man</a>, which was widely recognized as one of the top games of 2018. The game is features an open-world, which means you can travel around the game map as you see fit. And since Spider-Man, canonically, lives in real-life New York City, this means you‚Äôll spend hours webbing around an incredibly detailed version of the city that never sleeps.</p>

<p>If you‚Äôve spent any appreciable amount of time in New York, the in-game world will immediately feel familiar. The developers nailed the look and feel of the city. I found myself using real-world landmarks to orient myself as I slinged (slunged?) across Manhattan. The game leans into this realism‚Äîit even includes a challenge where you can take photos of in-game landmarks. While some are unique to the Marvel universe, like Avengers Tower and Uncle Ben‚Äôs grave, many exist in the real world and are faithfully reproduced within the game: Williamsburg/Brooklyn/Manhattan/Queensboro Bridges all make an appearance, as does Grand Central, Madison Square Garden, Saint Patrick‚Äôs Cathedral, Columbus Circle, the High Line and many more points of reference. As you‚Äôre swinging through the city, you‚Äôre treated to great views of Manhattan‚Äôs skyline, anchored by the Empire State Building, Chrysler Building, and Freedom Tower. Except, it‚Äôs <em>not</em> the Freedom Tower, despite being located in the exact same location as its real-life counterpart. Why are equally famous buildings like the Empire State Building accurately depicted, but the Freedom Tower isn‚Äôt?</p>

<p>Here‚Äôs what the ‚ÄúFreedom Tower‚Äù looks like in the game:
<img src="https://www.stevenbuccini.com/assets/spiderman/spiderman-1wtc.png" alt="In-Game 1WTC">
<em>(credit to Polygon because I was too lazy to get this off my PS4 myself)</em></p>

<p>Interestingly enough, the in-game design looks to be based on Libeskind‚Äôs original design for Freedom Tower (an interesting recap of the changes can be found <a href="https://www.newyorker.com/business/currency/daniel-libeskinds-world-trade-center-change-of-heart">here</a>), lending further credence to the theory that this building is supposed to be 1WTC.</p>

<p>My curiosity was further piqued when I learned that the <em>real</em> One World Trade Center was actually in the game during a demo at E3 in June of 2018, less than 4 months before the final game was set to be released to the public!</p>

<p><img src="https://www.stevenbuccini.com/assets/spiderman/1wtc_e3.png" alt="Real-life 1WTC in Spider-Man demo from E3 2018"></p>

<p>This deadline is even closer than it appears at first glance as the <a href="https://en.wikipedia.org/wiki/Software_release_life_cycle#RTM">‚Äúgold master‚Äù</a> is finalized weeks before release date so manufacturers have time to make and distribute the game to retailers. This change must have been implemented at the 11th hour.</p>

<p>And even after swapping the model out, they featured the building prominently on the home screen in the released version of the video game!
<img src="https://www.stevenbuccini.com/assets/spiderman/spiderman-start.png" alt="Start screen">
<em>(<a href="https://www.noobfeed.com/features/1119/marvel-s-spider-man-how-do-you-access-new-game-plus-and-ultimate-difficulty">credit</a>)</em></p>

<p>So <em>why</em> isn‚Äôt the real-life 1 WTC featured? At this point, we can eliminate time and budget constraints because we know the model already existed and was implemented before launch. We know that the designers thought this building was important as it‚Äôs the first thing you notice when starting the game.</p>

<p>I wish to briefly introduce <strong>Buccini‚Äôs razor</strong>‚Äîif something fun disappears unexpectedly, the cause is litigation (real or imagined).</p>

<p>It turns out that just like an author can copyright their book and a musician can copyright a song, an architect can copyright a building. Sure enough, here‚Äôs the copyright record for One World Trade Center:
<img src="https://www.stevenbuccini.com/assets/spiderman/copyright_record.png" alt="Record from [copyright.gov](https://www.copyright.gov/); can't deeplink the record but you can find it yourself by using the document record seen above"></p>

<p>At this point, I had a strong feeling copyright law was the reason for the change. The <a href="https://www.reddit.com/r/SpidermanPS4/comments/9grnr8/freedom_tower/">internet</a> <a href="https://www.reddit.com/r/SpidermanPS4/comments/9d3paw/the_real_reason_for_the_redesigned_freedom_tower/">seems</a> <a href="https://gamefaqs.gamespot.com/boards/191635-marvels-spider-man/76988485">to</a> <a href="https://www.neogaf.com/threads/one-world-trade-center-has-been-removed-from-spider-man-ps4.1465315/">agree</a>.</p>

<p>As luck<sup id="fnref:1" role="doc-noteref"><a href="#fn:1">1</a></sup> would have it, there was <a href="https://www.nexsenpruet.com/professionals/jeff-reichard">an expert in architectural copyright</a> right around the corner from my house here in Greensboro! Jeffrey was kind enough to spend a few minutes of his time thinking about this not-at-all-important question.</p>

<p>First, Jeffrey noted that <em>copyrights expire</em>. Just as music and books can pass into the public domain for anyone to replicate freely, you can also build an exact replica of the Empire State Building here in the United States if you so choose. Generally, any building constructed after December 1, 1990 is covered by the <a href="https://www.djc.com/news/ae/11151054.html">Architectural Works Copyright Protection Act</a>. This would explain why older structures are replicated faithfully but the Freedom Tower is not.</p>

<p>However, this doesn‚Äôt tell the full story. As Jeffrey noted, <a href="https://www.law.cornell.edu/uscode/text/17/120">17 U.S. Code ¬ß‚ÄØ120(a)</a> ‚Äúprovides an exception related to pictorial representations of of buildings that are visible from a public place. Therefore, I am not sure exactly why they changed it in the video game.‚Äù</p>

<p>The final piece of the puzzle lies at the <a href="https://www.youtube.com/watch?v=vo5A_fuDgtk&amp;feature=youtu.be&amp;t=2666">end of the credits</a>, where the creators of the game specifically thank the owners of certain famous buildings in New York, including the Empire State Building. I found this curious as the Empire State Building should be doubly safe: it was constructed long before 1990 so it is not covered under copyright law, and it is visible from a public place so it should be exempt from any potential copyrights. But look closer. You‚Äôll see that they are acknowledging the <em>trademark</em> holders, NOT the <em>copyright</em> holders.</p>

<p><a href="https://www.photosecrets.com/buildings-copyright-and-trademarks">As this page</a> helpfully explains, applying a trademark to the building limits how the building‚Äôs image can be used in the sale of goods and services (like video games)! The credits hint that the video game creators obtained limited licenses to use the trademark, i.e. the distinctive design and appearance of the building, for certain buildings such as the Flatiron Building.<sup id="fnref:2" role="doc-noteref"><a href="#fn:2">2</a></sup></p>

<p>Therefore, the most likely answer is that the distinctive shape of 1 World Trade Center is either trademarked (although I could not find it within USPTO databases) or is so recognizable that it is easily defensible via a common law trademark and the game developers were unable to secure a license to use the trademark before their deadline.</p>

<p>However, <a href="https://www.youtube.com/watch?v=gHzuHo80U2M">Sony just announced</a> an expansion to the Spider-Man video game, so perhaps the additional time and the demonstrated popularity of the first installment will help resolve this issue for the upcoming title.</p>



  </div>
</article>

      </div>
    </div></div>]]>
            </description>
            <link>https://www.stevenbuccini.com/why-1wtc-isnt-in-spiderman</link>
            <guid isPermaLink="false">hacker-news-small-sites-24502706</guid>
            <pubDate>Thu, 17 Sep 2020 09:38:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I overslept because iOS 14 disabled my alarm]]>
            </title>
            <description>
<![CDATA[
Score 474 | Comments 306 (<a href="https://news.ycombinator.com/item?id=24502697">thread link</a>) | @dewey
<br/>
September 17, 2020 | https://annoying.technology/posts/e82ff3bde8b225e6/ | <a href="https://web.archive.org/web/*/https://annoying.technology/posts/e82ff3bde8b225e6/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><img src="https://d33wubrfki0l68.cloudfront.net/9261d105b12f5c6c5928c9532d1f8721b84005cd/62d1b/media/oversleeping.jpg"></p><p>I‚Äôm using the iOS <a href="https://support.apple.com/en-us/HT208655">Bedtime</a> feature for years now. With yesterday‚Äôs iOS 14 update the feature got moved from the Clock app to the Health app. Unfortunately the migration is done by disabling your existing alarm and showing a button to open the Health app to set it up again.</p><p>I woke up late and well rested today.</p></div></div>]]>
            </description>
            <link>https://annoying.technology/posts/e82ff3bde8b225e6/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24502697</guid>
            <pubDate>Thu, 17 Sep 2020 09:36:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Peculiarities of Video Console Pricing]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24502690">thread link</a>) | @tosh
<br/>
September 17, 2020 | https://www.stevenbuccini.com/console-wars | <a href="https://web.archive.org/web/*/https://www.stevenbuccini.com/console-wars">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>I saw this great meme today:</p>

<p><img src="https://www.stevenbuccini.com/assets/console-wars/meme.png" alt="Meme"></p>

<p>Here we are, about three months out from the biggest shopping period of the year. Both Microsoft and Sony announced their next-generation consoles with splashy livestreams. They announced off new titles, showed off tech demos, and talked up their hardware specs. But both events had one glaring omission: the price.</p>

<p>As it turns out, this is game theory in action. There are two main ways to make revenue in the console business: selling the hardware and taking a rake on video game sales via a licensing fee. For the most part, consoles are at feature parity. Many titles are available on both platforms and the graphics are of similar quality. Therefore, prcee is one of a few key differentiators between products, yet pricing the product correctly requires balancing many different factors.</p>

<p>We‚Äôve seen how sensative consumers are to price in the last two generations. Sony tried to position the PlayStation 3 as a hulking machine meant for hard-core gamers who demanded the top performance, launching their the base model at $499.99. Meanwhile, the Xbox base model launched at $299. The cheaper price made the Xbox more appealing for the average family, and the Xbox moved nearly double the number of units in the US when compared to the Playstation 3.</p>

<p>But it was Microsoft who made a pricing mistake in the next genreation. They priced their console at $499, a price that was significantly higher than many expected. This was most likely to cover the cost of the Kinect sensor, which was bundled with the console at launch. Instead, it was Sony that announced that the Playstation 4 would launch ath the $399 price point that many analysts expect Microsoft to anchor at. Microsoft‚Äôs fatal mistake was to bet big on Kinect being a hit with casual gamers, even though casual gamers are much less likely to shell out big bucks for video game consoles. The PS4 has more than doubled the sales of the Xbox One.</p>

<p>Selling more consoles is crucial for another reason: per-unit profit. Consoles are overbuilt when first released. The hardware has to last for an entire ‚Äúgeneration‚Äù which, on average, lasts about 5-7 years. Since the components are so cutting edge, they are expensive to manufacture and acquire. Even pricing consoles at their true cost, and taking no profit whatsoever, would mean setting a price so high that it is beyond the reach of many consumers. Manufacturers have decided it‚Äôs better to take a loss on the unit upfront in order to move more units. Why? Because the more units you produce, the cheaper the consoles are to make. Ordering more parts amortizes the huge upfront design expenses over a larger base and gives you greater negotiating power over your suppliers. Your employees get better at making the devices so your defect rate drops. These factors combine to increase your margins, which allows you in turn to cut the price of your console to make it even more attractive, which causes you to sell even more units, and so on.</p>

<p>The second key is that video game developers go where the gamers are. If your platform has a significant portion of the market for video games, you have more pricing power when it comes to the licensing fee you charge developers. And the larger your install base, the more games you will sell in aggregate.</p>

<p>Sony and Microsoft are probably just now ramping up their assembly lines for the holiday shopping boom. They‚Äôre probably only now understanding what their defect rate is and how certain design decisions are affecting the cost of the machine. Each knows the price that they would <em>like</em> to sell the console for. The question remains: how high can they go without getting kneecapped by the other? And is their price low enough that they can do the same to their rival? One has to wonder how long this game of chicken can go on for. But one way or another, come Black Friday, a price will be set.</p>

<p>I would encourage you to <a href="https://mitsloan.mit.edu/LearningEdge/simulations/platform-wars/Pages/default.aspx">play around with the pricing simulator</a> built by MIT/Sloan and read the associated case studies to develop a more intuitive feel for the forces at work.</p>

  </div>
</article>

      </div>
    </div></div>]]>
            </description>
            <link>https://www.stevenbuccini.com/console-wars</link>
            <guid isPermaLink="false">hacker-news-small-sites-24502690</guid>
            <pubDate>Thu, 17 Sep 2020 09:34:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Fuzzing binaries with LLVM's libFuzzer and rev.ng]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24502500">thread link</a>) | @aleclm
<br/>
September 17, 2020 | https://rev.ng/blog/fuzzing/post.html | <a href="https://web.archive.org/web/*/https://rev.ng/blog/fuzzing/post.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://rev.ng/blog/fuzzing/post.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24502500</guid>
            <pubDate>Thu, 17 Sep 2020 08:58:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Klarna ‚Äì Making a payment is unnecessarily awkward ‚Äì UX review]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24502062">thread link</a>) | @Spidery
<br/>
September 17, 2020 | https://builtformars.co.uk/how-klarna-works/ | <a href="https://web.archive.org/web/*/https://builtformars.co.uk/how-klarna-works/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section data-id="ca3ca43" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
							
							<div>
				<div>
				<div data-id="ec20c55" data-element_type="column">
			<div>
					<div>
				<div data-id="682e138" data-element_type="widget" data-widget_type="theme-post-content.default">
				<div>
					<div data-elementor-type="wp-post" data-elementor-id="8794" data-elementor-settings="[]">
			<div>
				<div>
							<section data-id="39cfc48" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="cc8b80f" data-element_type="column">
			<div>
					<div>
				<div data-id="38a613d" data-element_type="widget" data-settings="{&quot;drop_cap&quot;:&quot;yes&quot;}" data-widget_type="text-editor.default">
				<div>
					<p>Klarna is one of the biggest ‚Äòbuy-now, pay-later‚Äô services in the world, and you‚Äôll probably have seen their logo in a few familiar places, like ASOS, Topshop and Wayfair.</p>
				</div>
				</div>
				<div data-id="d4835f8" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>The idea is that you can buy something from one of their participating retailers, receive the item, and pay for it through Klarna later on.</p>
				</div>
				</div>
				<div data-id="a9286a0" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>And it seems to be working well. As I write this, Klarna is a $10 billion company, and they claim to process more than a million transactions every day.</p>
				</div>
				</div>
				<div data-id="06dde1a" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>So, you can imagine how meaningful a 1% improvement in their customer retention would be. Even 0.1% would be noticeable.</p>
				</div>
				</div>
				<div data-id="4d0c8b6" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Well, let‚Äôs explore the UX mistakes that Klarna are making, and ultimately how they could improve their product fairly easily.</p>
				</div>
				</div>
				
				<div data-id="ae6fbf6" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>üéØ Recognising event-driven behaviour.</p>
				</div>
				</div>
				<div data-id="4239c47" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>üçØ How not to ask ‚Äòare you sure?‚Äô.</p>
				</div>
				</div>
				<div data-id="ff9a088" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>‚õ≥Ô∏è The irony of saying something is ‚Äòeasy‚Äô.</p>
				</div>
				</div>
				<div data-id="6cfaa4c" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>üó∫ Always include a way back.</p>
				</div>
				</div>
				
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="82654c1" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;,&quot;stretch_section&quot;:&quot;section-stretched&quot;}">
						<div>
				<div>
				<div data-id="a7cb550" data-element_type="column">
			<div>
					<div>
				
				<div data-id="206da17" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>üí°<strong>Tip:</strong> Try using the ‚¨ÖÔ∏è <span>‚û°Ô∏è arrows on your keyboard to navigate the slides.</span></p>
				</div>
				</div>
				<div data-id="2d6c95a" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>üí°<strong>Tip:</strong> Swipe <span>to navigate slides.</span></p>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="9387ec6" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;,&quot;stretch_section&quot;:&quot;section-stretched&quot;}">
						<div>
				<div>
				<div data-id="bcf94c5" data-element_type="column">
			<div>
					<div>
				<div data-id="bb3ae52" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<div>
<div><div role="region" aria-label="Slider"><p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NjAiIGhlaWdodD0iNzIwIiA+PC9zdmc+" alt="Slider"></p></div></div>


</div>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="02de3e3" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						
		</section>
				<section data-id="3128807" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="4890770" data-element_type="column">
			<div>
					<div>
				<div data-id="5132d05" data-element_type="widget" data-settings="{&quot;_animation&quot;:&quot;none&quot;}" data-widget_type="heading.default">
				<p>
			<h4>1. Event-driven behaviour</h4>		</p>
				</div>
				<div data-id="f7b7c9d" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Sometimes‚Äîas I‚Äôm making my morning coffee‚ÄîI‚Äôll realise that we‚Äôve run out of milk. So I rush down to my local shop, power-walking through the isles at 7am with a bottle of milk in hand.</p>
				</div>
				</div>
				<div data-id="972c566" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>It‚Äôs a very small shop, so the cashier will have seen me pull up, and use the most efficient path to go from the door, to the milk, to the till‚Äîand have Apple Pay up and ready before they open their mouth:</p>
				</div>
				</div>
				<div data-id="bc8eb43" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>‚Äú<em>Do you have a Tesco clubcard</em>?‚Äù</p>
				</div>
				</div>
				<div data-id="4faeee2" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>‚Äú<em>No.</em>‚Äù (slightly out of breath)</p>
				</div>
				</div>
				<div data-id="af7b1e9" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>‚Äú<em>Would you like to sign up <strong>now</strong></em>?‚Äù</p>
				</div>
				</div>
				<div data-id="bc124f5" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Sure, it may be company policy to always ask, but it‚Äôs a stupid company policy.</p>
				</div>
				</div>
				<div data-id="2159a92" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>It‚Äôs also a perfect example of an issue that happens a lot when designing software: people misunderstanding, or not considering what is driving a user‚Äôs behaviour.</p>
				</div>
				</div>
				<div data-id="9a3a3e7" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>I‚Äôve overly-simplified this, but consider that there are only two types of behaviour:</p>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="97ec5ed" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="cf80687" data-element_type="column">
			<div>
					<div>
				<section data-id="7e48004" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				
				<div data-id="b006a6f" data-element_type="column">
			<div>
					<div>
				<div data-id="5ccdd20" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<div><p><strong>1. Event-driven behaviour</strong></p>
<p>People have a clear purpose or goal.</p></div>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="729feb3" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				
				<div data-id="ffc6378" data-element_type="column">
			<div>
					<div>
				<div data-id="ec89554" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<div><p><b>2. Casual browsing</b></p>
<p>Open to being tempted by offers and new products.</p></div>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="e172bda" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="ae81c4a" data-element_type="column">
			<div>
					<div>
				<div data-id="4482701" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Klarna have a version of this when paying for your <em>first</em> item, after you click on a CTA that is very event-drive: ‚Äú<em>I‚Äôm ready to pay‚Äù</em>.</p>
				</div>
				</div>
				<div data-id="375d035" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>As this is your first experience of Klarna, you‚Äôre probably anxious to see if there will be any additional fees. You want to make the payment as quickly as possible, and be reassured that you didn‚Äôt make a mistake trusting Klarna in the first place.</p>
				</div>
				</div>
				<div data-id="19dcef3" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Well, after clicking on that CTA, you‚Äôre immediately asked to invest your time into creating better future shopping experiences. This is their ‚Äòclubcard‚Äô moment.</p>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="95c6e5a" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="2c8094f" data-element_type="column">
			<div>
					<div>
				<section data-id="d212cad" data-element_type="section">
						<div>
				<div>
				<div data-id="c56e247" data-element_type="column">
			<div>
					<div>
				<div data-id="0d2a083" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p><strong>You click ‚ÄúI‚Äôm ready to pay‚Äù‚Ä¶</strong></p>
				</div>
				</div>
				<div data-id="205879d" data-element_type="widget" data-widget_type="image.default">
				<div>
					<p><img width="400" height="866" src="https://builtformars.co.uk/wp-content/uploads/2020/09/IMG_4743.jpg" alt="" srcset="https://builtformars.co.uk/wp-content/uploads/2020/09/IMG_4743.jpg 400w, https://builtformars.co.uk/wp-content/uploads/2020/09/IMG_4743-139x300.jpg 139w, https://builtformars.co.uk/wp-content/uploads/2020/09/IMG_4743-46x100.jpg 46w, https://builtformars.co.uk/wp-content/uploads/2020/09/IMG_4743-208x450.jpg 208w" sizes="(max-width: 400px) 100vw, 400px">											</p>
				</div>
				</div>
						</div>
			</div>
		</div>
				
				<div data-id="7a3bed4" data-element_type="column">
			<div>
					<div>
				
				<div data-id="9790067" data-element_type="widget" data-widget_type="image.default">
				<div>
					<p><img width="400" height="866" src="https://builtformars.co.uk/wp-content/uploads/2020/09/KlarnaShoppingMadeEasy.jpg" alt="" srcset="https://builtformars.co.uk/wp-content/uploads/2020/09/KlarnaShoppingMadeEasy.jpg 400w, https://builtformars.co.uk/wp-content/uploads/2020/09/KlarnaShoppingMadeEasy-139x300.jpg 139w, https://builtformars.co.uk/wp-content/uploads/2020/09/KlarnaShoppingMadeEasy-46x100.jpg 46w, https://builtformars.co.uk/wp-content/uploads/2020/09/KlarnaShoppingMadeEasy-208x450.jpg 208w" sizes="(max-width: 400px) 100vw, 400px">											</p>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="da9be87" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="b5ed187" data-element_type="column">
			<div>
					<div>
				<div data-id="6502581" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>The point here isn‚Äôt that Klarna shouldn‚Äôt be asking users to invest their time‚Äîit‚Äôs that right now, in this moment, the user is focused on a task.&nbsp;</p>
				</div>
				</div>
				<div data-id="81d3f5c" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>And if you‚Äôre trying to get a user‚Äôs attention, to ultimately invest time into something irrelevant, then you‚Äôll have much more success doing it <strong><em>after</em></strong> they‚Äôve completed that task.</p>
				</div>
				</div>
				<div data-id="fcbfbaa" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Or rather: if Klarna asked this same question after the payment had been made, I‚Äôd be confident that they‚Äôd increase the engagement they received.</p>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="08dd173" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="fde957c" data-element_type="column" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
			<div>
					<div>
				<section data-id="4714216" data-element_type="section">
						<div>
				<div>
				<div data-id="38244b0" data-element_type="column">
			<div>
					<div>
				<div data-id="30195a9" data-element_type="widget" data-settings="{&quot;_animation&quot;:&quot;none&quot;}" data-widget_type="heading.default">
				<p>
			<h4>üéØ Event-driven behaviour</h4>		</p>
				</div>
						</div>
			</div>
		</div>
				
						</div>
			</div>
		</section>
				<section data-id="b3921ab" data-element_type="section">
						<div>
				<div>
				<div data-id="eeb9bc5" data-element_type="column">
			<div>
					<div>
				<div data-id="9aac358" data-element_type="widget" data-widget_type="blockquote.default">
				<div>
					<blockquote>
			<p>
				When a user is focused on completing a specific task, they probably don't want to be distracted‚Äîand, your conversion rates will be lower.			</p>
							
					</blockquote>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="8211523" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="2278c85" data-element_type="column">
			<div>
					<div>
				
				<div data-id="2979444" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Imagine if my Tesco scenario actually went like this:</p>
				</div>
				</div>
				<div data-id="db716e1" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>‚Äú<em>Do you have a Tesco clubcard</em>?‚Äù</p>
				</div>
				</div>
				
				<div data-id="ed55f8b" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>‚Äú<em>Would you like to sign up now</em>?‚Äù</p>
				</div>
				</div>
				
				
				
				
				<div data-id="1d30900" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<div><p>Let‚Äôs be honest, this would be insane, yet it‚Äôs exactly what Klarna do. Actually, they ask if you‚Äôre sure <strong>four times</strong> in a row.</p>
</div>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="3d6d98c" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						
		</section>
				<section data-id="f506cd6" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="1c15876" data-element_type="column">
			<div>
					<div>
				<div data-id="48578f3" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>There are two problems with what Klarna are doing here:</p>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="cb2fa5a" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="56803dc" data-element_type="column">
			<div>
					<div>
				<section data-id="d7a0b29" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				
				<div data-id="3c3ef18" data-element_type="column">
			<div>
					<div>
				<div data-id="3beccd4" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<div><p><strong>1. Offering no new information</strong></p>
<p>Just asking the same question again isn‚Äôt convincing‚Äîyou need to entice the user into changing their mind with some new information, or a benefit that they may not have correctly valued before.</p></div>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="2304784" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				
				<div data-id="f9d270c" data-element_type="column">
			<div>
					<div>
				<div data-id="1e2ad5f" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<div><p><b>2. Making you skip each step individually</b></p>
<p>If you want to skip the first part of the personalisation process, you probably also want to skip all the following parts too.</p></div>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="7b217be" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="8d4faf9" data-element_type="column">
			<div>
					<div>
				<div data-id="8ce480f" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>It‚Äôs actually quite helpful to use my analogy again:</p>
				</div>
				</div>
				<div data-id="138f987" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>It may be convincing enough if the Tesco employee responded with new information, for example:</p>
				</div>
				</div>
				<div data-id="0ffae1c" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>‚Äú<em>Are you sure? All I need is your email address and you‚Äôll get a ¬£2 bonus instantly.‚Äù</em></p>
				</div>
				</div>
				<div data-id="195c3e5" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>In conversation, this is mostly instinctive. If someone says no to your offer, you immediately know that you need to entice them a little more. Even children understand this.</p>
				</div>
				</div>
				<div data-id="e852ef5" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<div><p>But in software, human instinct needs to be designed. It rarely happens by coincidence.</p>
<p>‚Ä¶</p></div>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="381636f" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="c2b116c" data-element_type="column" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
			<div>
					<div>
				<section data-id="6799b13" data-element_type="section">
						
		</section>
				<section data-id="b920236" data-element_type="section">
						<div>
				<div>
				<div data-id="097f064" data-element_type="column">
			<div>
					<div>
				<div data-id="0c56897" data-element_type="widget" data-widget_type="blockquote.default">
				<div>
					<blockquote>
			<p>
				If you've got an 'are you sure' screen, make sure it's (in some way) more enticing than what you'd displayed before.			</p>
							
					</blockquote>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="865c1d0" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="48a79da" data-element_type="column">
			<div>
					<div>
				<div data-id="7594657" data-element_type="widget" data-settings="{&quot;_animation&quot;:&quot;none&quot;}" data-widget_type="heading.default">
				<p>
			<h4>3. The irony of telling people how easy something is</h4>		</p>
				</div>
				<div data-id="ca49d7e" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Telling someone how easy something is‚Äîwithout quantifying it in any way‚Äîis in short; useless.</p>
				</div>
				</div>
				<div data-id="a763e84" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>There‚Äôs a deep irony too: companies believe their own products are easy to use, so they tell people how easy they are to use. In doing so, adding stuff for the user to read, making it take longer.</p>
				</div>
				</div>
				<div data-id="863bbfa" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<div><p>The key is to not just <em>say</em> something is easy, but explain <em>why</em> it‚Äôs easy. Otherwise it‚Äôs nothing more than padding.</p>
<p>‚Ä¶</p></div>
				</div>
				</div>
				
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="c25b3d2" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="579ad9b" data-element_type="column">
			<div>
					<div>
				<section data-id="3eb8f35" data-element_type="section">
						
		</section>
				<section data-id="b226c69" data-element_type="section">
						<div>
				<div>
				
				<div data-id="bb094bc" data-element_type="column">
			<div>
					<div>
				<div data-id="9c494da" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>All you need is an email address‚Äîthat‚Äôs how easy it is.</p>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="79467ab" data-element_type="section">
						<div>
				<div>
				
				<div data-id="c3301cb" data-element_type="column">
			<div>
					<div>
				<div data-id="718faed" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>90% of our users complete this process within 75 seconds.</p>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="f209100" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="77fa63e" data-element_type="column">
			<div>
					<div>
				<div data-id="fc611af" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Klarna have a great example of this: telling the user <strong>‚ÄúIt‚Äôs a breeze‚Äù</strong>.</p>
				</div>
				</div>
				<div data-id="35b106d" data-element_type="widget" data-widget_type="image.default">
				<div>
					<p><img width="500" height="574" src="https://builtformars.co.uk/wp-content/uploads/2020/09/ItsDamnEasy.jpg" alt="" srcset="https://builtformars.co.uk/wp-content/uploads/2020/09/ItsDamnEasy.jpg 500w, https://builtformars.co.uk/wp-content/uploads/2020/09/ItsDamnEasy-261x300.jpg 261w, https://builtformars.co.uk/wp-content/uploads/2020/09/ItsDamnEasy-87x100.jpg 87w, https://builtformars.co.uk/wp-content/uploads/2020/09/ItsDamnEasy-392x450.jpg 392w" sizes="(max-width: 500px) 100vw, 500px">											</p>
				</div>
				</div>
				<div data-id="b39ac87" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>If this seems tiny and insignificant, that‚Äôs because it is. But it‚Äôs also easily solvable, and a missed opportunity to say something that‚Äôs actually interesting.</p>
				</div>
				</div>
				<div data-id="4a0db2a" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Great product design is a balancing act of being as concise as possible, whilst also being as convincing as possible.</p>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="d2b094f" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="2198c62" data-element_type="column" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
			<div>
					<div>
				<section data-id="3741598" data-element_type="section">
						
		</section>
				<section data-id="db09822" data-element_type="section">
						<div>
				<div>
				<div data-id="432dc58" data-element_type="column">
			<div>
					<div>
				<div data-id="a6df267" data-element_type="widget" data-widget_type="blockquote.default">
				<div>
					<blockquote>
			<p>
				If you have to tell someone how easy your process is, it's probably not easy enough.			</p>
							
					</blockquote>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="ae6fb04" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="ca99bc1" data-element_type="column">
			<div>
					<div>
				<div data-id="ed0d631" data-element_type="widget" data-settings="{&quot;_animation&quot;:&quot;none&quot;}" data-widget_type="heading.default">
				<p>
			<h4>4. People will enter their details incorrectly</h4>		</p>
				</div>
				<div data-id="be4fb93" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>You‚Äôve probably heard the quote: <em>nothing is certain, except death and taxes</em>.</p>
				</div>
				</div>
				<div data-id="412a5b0" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Really though, this needs to be rewritten for 2020:</p>
				</div>
				</div>
				<div data-id="f76dde6" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>‚ÄúNothing is certain, except death, taxes, <strong>and that customers will enter their personal details incorrectly on your form</strong>‚Äú.</p>
				</div>
				</div>
				<div data-id="fd9a5eb" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>When designing software, in particular forms, you need to make sure that users can go back and edit their data‚Äîwithout having to just start again‚Äîbecause they will get it wrong some of the time.</p>
				</div>
				</div>
				<div data-id="1505f04" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Which is why verifying your phone number with Klarna is so frustrating‚Äîyou can‚Äôt go back. You have to request a new email, get a new link, and start again.</p>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="3ef561d" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						
		</section>
				<section data-id="a021ffc" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="aaf462b" data-element_type="column">
			<div>
					<div>
				<div data-id="e74d53d" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>This is probably an oversight, ‚Ä¶</p></div></div></div></div></div></div></div></section></div></div></div></div></div></div></div></div></div></div></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://builtformars.co.uk/how-klarna-works/">https://builtformars.co.uk/how-klarna-works/</a></em></p>]]>
            </description>
            <link>https://builtformars.co.uk/how-klarna-works/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24502062</guid>
            <pubDate>Thu, 17 Sep 2020 07:32:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[TOC Approves KubeEdge as Incubating Project ‚Äì Cloud Native Computing Foundation]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24502043">thread link</a>) | @kwang0126
<br/>
September 17, 2020 | https://www.cncf.io/blog/2020/09/16/toc-approves-kubeedge-as-incubating-project/ | <a href="https://web.archive.org/web/*/https://www.cncf.io/blog/2020/09/16/toc-approves-kubeedge-as-incubating-project/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
			
<p>Today, the CNCF Technical Oversight Committee (TOC) voted to accept <a href="https://kubeedge.io/en/">KubeEdge</a> as an incubation-level hosted project.</p>



<p>KubeEdge is an open source system for extending containerized application orchestration capabilities to hosts at the edge. It is built on top of Kubernetes and provides infrastructure support for network, application deployment, and metadata synchronization between the cloud and the edge.</p>



<p>‚ÄúWe designed KubeEdge to address three major challenges in edge computing ‚Äì network reliability between the cloud and edge, resource constraint on edge nodes, and scalability challenges of highly distributed edge architectures,‚Äù said Zefeng Wang and Yin Ding, KubeEdge maintainers. ‚ÄúBy extending cloud native technologies to the edge, KubeEdge forms a complete edge cloud computing ecosystem. We are very excited to continue to make the project more robust as it moves to incubation.‚Äù</p>



<p>KubeEdge was accepted as a CNCF Sandbox project in March 2019, and released version 1.0 in June 2019. The KubeEdge team now releases quarterly, timed with the release of upstream Kubernetes.&nbsp;</p>



<p>Since joining CNCF, KubeEdge has added more than <a href="https://kubeedge.devstats.cncf.io/d/18/overall-project-statistics-table?orgId=1">395 Contributors</a> from 25 organizations. The project has 14 maintainers from 5 different organizations, including Arm, China Unicom, Huawei, infoblox.com, and inovex.de, and is used in production by <a href="https://huaweicloud.com/">Huawei Cloud</a>, <a href="https://kubesphere.io/">KubeSphere</a>, <a href="https://github.com/kubeedge/kubeedge/blob/master/ADOPTERS.md#raisecom-technology-coltd">Raisecom</a>, <a href="https://cucc.wocloud.cn/">WoCloud</a>, <a href="https://github.com/kubeedge/kubeedge/blob/master/ADOPTERS.md#xinghai-iot">Xinghai IoT</a>, and more.</p>



<p>‚ÄúKubeEdge solves a complex and unique use case of running containerized applications on edge devices, which benefits the cloud computing ecosystem as a whole,‚Äù said Alena Prokharchyk, CNCF TOC member. ‚ÄúIts architecture meets the reliability, availability, and extensibility criteria needed for further growth and adoption. We look forward to seeing new and improved features as the project moves to this new level.‚Äù</p>



<p><strong>Main KubeEdge Features:</strong></p>



<ul><li>Cloud-Edge Reliable Collaboration: Ensure reliable messages delivery without loss over an unstable cloud-edge network.</li><li>Edge Autonomy: Ensure edge nodes run autonomously, and the applications on edge run normally, even when the cloud-edge network is unstable, or the edge is offline and restarted.</li><li>Edge Device Management: Managing edge devices through Kubernetes native APIs implemented by CRD.</li><li>Lightweight Edge Agent: Extremely lightweight Edge Agent&nbsp; (EdgeCore) to run on the resource-constrained edge.</li></ul>



<p><strong>Notable Milestones:</strong></p>



<ul><li>&gt; 2,500 Commits</li><li>&gt; 2,900 GitHub Stars</li><li>&gt; 780 Forks</li></ul>



<p>KubeEdge is an active participant in the CNCF community and contributes to the upstream Kubernetes project to solve common issues. The project is built on Kubernetes and integrates with other CNCF projects, including containerd and CRI-O as a lightweight container runtime, Prometheus for metrics on the edge, and Envoy for ingress. It also uses gRPC to offer cloud edge remote calls for applications.</p>



<p>The KubeEdge team also <a href="https://thenewstack.io/kubeedge-and-its-role-in-multi-access-edge-computing/">collaborated with LF Edge</a> in setting up the Akraino KubeEdge Edge Service Blueprint Family and Akraino Eliot Blueprint Family projects, which can be deployed at enterprise edges or as a cloud edge extension interfacing to the core telco network.</p>



<p>‚ÄúKubernetes is the de-facto orchestrator for cloud native services and is starting to evolve in future edge computing deployments,‚Äù said Chris Aniszczyk, CTO/COO of Cloud Native Computing Foundation. ‚ÄúKubeEdge plays an important role in bringing Kubernetes to the edge. We look forward to seeing how the project develops and pushes the Kubernetes community into new areas.‚Äù&nbsp;</p>



<p>As a CNCF-hosted project, joining incubating technologies Argo, CloudEvents, CNI, Contour, Cortex, CRI-O, Dragonfly, etcd, Falco, gRPC, Linkerd, NATS, Notary, OPA, OpenTracing, Operator Framework, Rook, SPIFFE, SPIRE, and Thanos, KubeEdge is part of a neutral foundation aligned with its technical interests, as well as the larger Linux Foundation, which provides governance, marketing support, and community outreach. For more information on maturity requirements for each level, please visit the <a href="https://github.com/cncf/toc/blob/master/process/graduation_criteria.adoc">CNCF Graduation Criteria</a>.</p>



<p>To learn more about KubeEdge, visit <a href="https://kubeedge.io/">https://kubeedge.io/</a>.&nbsp;</p>


			<hr>
			
		</div></div>]]>
            </description>
            <link>https://www.cncf.io/blog/2020/09/16/toc-approves-kubeedge-as-incubating-project/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24502043</guid>
            <pubDate>Thu, 17 Sep 2020 07:29:02 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Fixing Common Go Vulnerabilities]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24501969">thread link</a>) | @hyustan
<br/>
September 17, 2020 | https://www.securecoding.com/fixing-common-go-vulnerabilities/ | <a href="https://web.archive.org/web/*/https://www.securecoding.com/fixing-common-go-vulnerabilities/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section id="b-text-1">
	<div>
		<div>
		<p><span>Go, sometimes referred to as Golang, is Google‚Äôs programming language and was released in 2009 with a huge growing community of developers. Go makes it easier for developers to write solid and efficient code. It‚Äôs a statically typed, compiled and open source programming language.&nbsp;</span></p>

<p><span>Go has a lightweight architecture and suitability for use in microservice and serverless architecture. Go also helps working on large scale projects that require high-level multiprocessing and networking.</span></p>

<p><span>Due to its usability and simplicity, it‚Äôs categorized as one of the first-class citizens of serverless architecture like AWS Lambda and Microsoft Azure and has also found its way up to large organizations like Netflix, Cloudflare, Docker, Adobe and and so on.</span></p>

<p><span>As more people and companies are using open source elements in their Go projects, it‚Äôs always advisable to stay updated on known vulnerabilities affecting.</span></p>

<p><span>Go doesn‚Äôt provide a lot of features and capabilities on its own, so the community is still figuring out the best packages and frameworks to use.&nbsp;</span></p>

<p><span>Everyday, lots of packages pop up on the internet and gain popularity due to their features, however if these packages are not reviewed by the Go security community, they can introduce vulnerabilities.&nbsp;</span></p>

<p><span>In this article, we are going to explore common Go vulnerabilities and how to fix them.</span></p>


<h2><b>Cross-Site Scripting (XSS) Attacks</b></h2>
<p><span>Cross-site scripting, usually known as XSS, is one of the most common security vulnerability exploits found in modern web applications. This usually happens when user inputs without being validated or encoded are used as outputs to the browser directly.&nbsp;</span></p>

<p><span>With this vulnerability, attackers can easily inject malicious code into the browsers of visitors.</span></p>

<p><span>This malicious code is executed via the unsuspecting user‚Äôs web browser by maliciously manipulating the contents of JavaScript and HTML scripts. This exploit can be used to embed malicious scripts into a web page.&nbsp;</span></p>

<p><span>These scripts are usually executed when a user opens the web page or whenever a specific action is performed by the user.&nbsp;</span></p>

<p><span>A successful Cross-Site Scripting (XSS) attack can be used to:</span></p>

<ol>
<li><span>Redirect users to phishing sites</span></li>
<li><span>Steal cookies and session information</span></li>
<li><span>Change and manipulate portions of the web page the user is opening.</span></li>
</ol>

<p><span>This can cause a lot of problems if this attack is successful on Go web server applications, especially on company web servers, and can lead to user data theft.&nbsp;</span></p>

<p><span>Let‚Äôs look at the example below:</span></p>



<p><span>and </span><span>index.html</span><span> template:</span></p>



<p><span>This example code is vulnerable to xss attack as we are passing the </span><span>name</span><span> data without encoding or escaping it to the browser.&nbsp; If we pass a malicious code like </span><span>&lt;script&gt;alert(‚ÄúI‚Äôm Malicious‚Äù)&lt;/script&gt;</span><span>, it would execute the JavaScript code and pops up </span><span>I‚Äôm Malicious</span><span> alert.</span></p>



<p><span>In this example, we are using</span><a href="https://golang.org/pkg/text/template/"> <span>text/template</span></a><span> to read and render the html template. </span><span>Text/template</span><span> doesn‚Äôt encode or escape output to the browser as HTML response.&nbsp;</span></p>

<p><span>To fix this, we should use</span><a href="https://golang.org/pkg/html/template/"> <span>html/template</span></a><span> to render our html templates and as well as escape and validate user generated inputs. </span><span>html/template</span><span> generates correctly escaped html content safe from xss attacks on the web browser.</span></p>

<p><span>When building web apps that renders html templates, you should consider using </span><span>html/template</span><span> to render your html final output.</span></p>

<h2><b>SQL Injection Attacks</b></h2>
<p><span>When building Go applications that deal with databases, it‚Äôs always good to be conscious of SQL injection attacks. This is not a new type of vulnerability attack, but a very old and common attack where users with malicious intent inject a malicious SQL command into your database which is then executed by the application.</span></p>

<p><span>This would open up a vulnerability in your application that exposes your application database to attackers. This usually happens when user inputs are not properly validated and encoded before passing them to the database.</span></p>

<p><span>The SQL commands tricks the application into executing unintended actions which could end up in data modification or data theft. The SQL interpreter is not able to differentiate between intended and unintended commands and just executes all commands passed to it without checking how they‚Äôre being constructed as long as they‚Äôre valid.&nbsp;</span></p>

<p><span>With this vulnerability, an attacker can gain unauthorized access to confidential data.</span></p>

<p><span>In Go applications, there are many ways to handle SQL operations. One common way is to simply use </span><span>fmt.Sprintf()</span><span> to create and construct your SQL queries.</span></p>

<p><span>Let‚Äôs take a look at the example below:</span></p>



<p><span>This would query users with the matching email.</span></p>

<p><span>While this might look okay initially, it actually has a some potential vulnerabilities and they are not something you can ignore.</span></p>

<p><span>In the above example you are handling user inputs and not doing any form of sanitation or encoding to ensure the inputs are safe and not with malicious code.</span></p>

<p><span>For instance we can enter a malicious SQL command to drop the whole database instead of our email. Let‚Äôs take a look at the example below:</span></p>



<p><span>Instead of passing in our email ‚Äì </span><span>oyetoketoby80@gmail.com</span><span>, we passed in </span><span>‚Äò; DROP TABLE users;‚Äô</span><span> which would output the command:</span></p>



<p><span>If this command is being executed, the whole database would be dropped and deleted. Whoops! That‚Äôs quite huge as this could shutdown an application with no backups.&nbsp;</span></p>

<p><span>If you look at the command you would notice that another command </span><span>; DROP TABLE users;</span><span> has been added and the command is used for dropping a table. So basically any command could be passed and executed with nothing holding them back.</span></p>

<p><span>To fix this, you should always escape and encode user inputs and consider using SQL libraries that escape and validate all user inputs against SQL queries before running them. Libraries like </span><span>database/sql</span><span> help prevent this kind of vulnerability automatically.</span></p>

<p><span>With the </span><span>database/sql</span><span> package, you will be able to construct SQL statements that are automatically escaped properly.</span></p>

<p><span>For instance:</span></p>



<p><span>The first </span><span>buildSql</span><span>&nbsp; would return users matching the email, while the second would return nothing and won‚Äôt drop any database either. Since </span><span>‚Äù‚Äô; DROP TABLE users;‚Äù‚Äô</span><span> is seen as a normal string rather than a command.</span></p>

<p><span>Ensure you are using libraries like</span><a href="https://golang.org/pkg/database/sql/"> <span>database/sql</span></a><span> to construct and run your SQL queries as it helps automatically escape queries properly.</span></p>

<h2><b>OS Command Injections</b></h2>
<p><b>OS Command injection</b><span> which is also referred to as shell </span><b>injection</b><span> is a security vulnerability that lets a malicious user run malicious arbitrary </span><b>operating system</b><span> (</span><b>OS</b><span>) </span><b>commands</b><span> on the web server where the application is hosted and running. This will basically compromise the application and all its data.</span></p>

<p><span>The goal of the attack is to execute malicious commands on the host operating system of the application. This is usually possible when application interfacing with the system shell passes an unsafe user supplied data to the system shell directly.&nbsp;</span></p>

<p><span>With this, the attacker can run commands using the same privileges of the vulnerable application making it possible to use any kind of commands.</span></p>

<p><span>If successful, this could lead to the leakage of data, disruption of service, or other undesirable events as the attacker has full access to the server to do anything.</span></p>

<p><span>In Go 1.9.4 version downward, the </span><span>go get</span><span> implementation, when the -insecure command-line option is used,</span><a href="https://www.cvedetails.com/vulnerability-list.php"> <span>does not validate</span></a><span> the import path (</span><span>get/vcs.go</span><span> only checks for </span><span>‚Äú://‚Äù</span><span> anywhere in the string). This as a result, could ‚Äúallow remote attackers to run arbitrary malicious OS commands through a malicious web server‚Äù.</span></p>

<p><span>For instance:</span></p>



<p><span>Where </span><span>https://khasheav.ru/go-vuln</span><span>:</span></p>



<p><span>With this a user can successfully run malicious code on your server. To fix this, you would need to upgrade to the latest version starting from Go 1.10 upward.</span></p>

<h2><b>CSRF Protection Attacks&nbsp;</b></h2>
<p><span>Cross-site request forgery (CSRF) which is also known as one-click attack is simply an attack that lures users into performing actions they do not intend to perform on a web application in which they are currently logged in and authenticated.</span></p>

<p><span>A CSRF attack uses stolen session cookies provided to an authenticated user to send requests to the server which the user didn‚Äôt intend to do. The attacker can disguise a button/link as a normal button/link on the webpage. Clicking that could end up performing an action you didn‚Äôt intend to do since there‚Äôs no way to validate that the request is triggered ‚Äúcross-site‚Äù.</span></p>

<p><span>For instance, a software for money transfer services could be exploited by an attacker to have a button/link to transfer money to their account by tricking the victim into clicking that button which sends the authenticated request.</span></p>

<p><span>Let‚Äôs take a look at the form below:</span></p>



<p><span>If you look at the form above, you can see that it‚Äôs used to transfer money to an account. An attacker could steal the cookies from the vuln website and when you click on </span><span>Click to send money</span><span>, it would use the cookies to send authenticated requests for you to transfer </span><span>$8100</span><span> to the accounts with </span><span>attacker@email.com</span><span> without your knowledge. Scary right?</span></p>

<p><span>This could be hosted anywhere as a clone of the application and the link sent through a phishing mail to the victim.</span></p>

<p><span>However, this could be prevented, if you have CSRF protection enabled. One way to do this, for each request, there should be a way to generate a one-time unique token from the web-server that must be provided when sending back a request once the page has loaded.&nbsp;</span></p>

<p><span>This token is usually referred to as CSRF token and it‚Äôs a random string that‚Äôs being generated on every request to a webpage and available to use in the html forms and ajax requests. This token can‚Äôt be replayed or forged.</span></p>

<p><span>Implementing this from scratch might seem stressful and time consuming, but the good thing we already have a library doing just that.</span><a href="https://github.com/gorilla/csrf"> <span>gorilla/csrf</span></a><span> middleware library is a library for adding CSRF token protection on your website.</span></p>

<p><span>To implement this on your website:</span></p>





<p><span>the template..</span></p>



<p><span>With this, your website is protected against any CSRF attacks. This will add a random string to the page which attackers can‚Äôt guess.&nbsp;</span></p>

<p><span>To implement ‚Ä¶</span></p></div></div></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.securecoding.com/fixing-common-go-vulnerabilities/">https://www.securecoding.com/fixing-common-go-vulnerabilities/</a></em></p>]]>
            </description>
            <link>https://www.securecoding.com/fixing-common-go-vulnerabilities/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24501969</guid>
            <pubDate>Thu, 17 Sep 2020 07:12:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Introduction to the Relational Algebra]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24501895">thread link</a>) | @spermwhale0
<br/>
September 16, 2020 | https://shark.armchair.mb.ca/~erwin/relalgintro_0105.html | <a href="https://web.archive.org/web/*/https://shark.armchair.mb.ca/~erwin/relalgintro_0105.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		<tbody>
			<tr>
				<td></td>
				<td>
					<h2>What, why &amp; who for ?</h2>
					<p>This document essentially contains an introduction to the relational algebra that is implemented in SIRA_PRISE. Depending on your background, you may already have some or very extensive knowledge about the subject, in which case you probably do not need to read this document.</p>
					<p>If, however, your knowledge of and about the Relational Model of Data was primarily/solely obtained through the usage of SQL-based systems, and terms such as "relvar", "relation" and "tuple" sound completely unfamiliar to you, then carefully studying this document is probably a sine qua non for you to
						understand and effectively use this new system you've got in your hands.</p>
					<p>This introduction is subdivided in several parts :&nbsp;</p>
					<ul>
						<li>The first part, "<a href="#Terminology">Terminology</a>", defines the components that lay the foundation for any relational database : type, value, tuple, relation, ... &nbsp;It is rather mathematical in nature and may therefore seem to be a bit alienating ("What the hell do IT&nbsp;professionals need
							mathematics for ?"), but let me assure you that understanding&nbsp;this part really is relevant and really is needed for you to understand part two properly.
						</li>
						<li>Part two, "<a href="#Relational_Algebra">Relational Algebra</a>", offers a detailed definition and discussion of all the operators of the algebra, which is the part of the relational model that every database user employs in every single query he/she writes and/or&nbsp;executes.
						</li>
						<li>Part two introduces the operators of the algebra, making abstraction of a very particular data type called the interval type. SIRA_PRISE offers support for interval types, and the third part, "<a href="#interval_types">The RA and interval types</a>", introduces how the operators of the algebra behave
							when faced with relations that hold interval-typed attributes.
						</li>
					</ul>
					<h2>
						<a id="Terminology"></a>Terminology
					</h2>
					<p>You may have wondered, at some time, why "Relational databases" (and "Relational dbms's") are called how they are. You may have assumed that it must have had something to do with this thing called "Entity-Relationship modeling" that you may already have practiced at some point in your career. Your
						assumption was wrong. In fact, the first mention of the term "relational" in the context of data management even predates the invention of E/R modeling ... So where d√≥es the term come from ?</p>
					<p>Well, the term comes from something that we have presumably all been taught about in our math classes, somewhere between the age of 10 and 20, that thing being the "relation". The Relational Model of Data (RM for short) is no more or less than a mechanism to represent data in general, and which has that
						same mathematical concept of a relation as its key building brick. Before digging into the details of the algebra, it is first necessary to define a couple of terms that are frequently used when talking about the RM. That is where we will start this introduction of the relational algebra.</p>
					<ol>
						<li>
							<h3>
								<i>Set</i>
							</h3>
							<p>Lots of people collect things. Stamps, coins, rare books, art reproductions or even original art masterpieces, just name it and someone exists who collects it. You probably have spent some time in your life too, trying to build up some collection. If you have, doubtless that there have been some items
								that you have managed to collect more than once. It was problaby fun trading those "duplicates" with fellow collectors for items that you had not yet managed to collect. Well, a "collection" is a very fundamental concept in mathematics, one that is in fact needed to define what a "set" is.</p>
							<p>In mathematics, a "collection" is, loosely speaking, any possible gathering in any possible quantity of any possible things. The gathering of (chair, cloud, oak tree, chair) is a collection. Note that the collection has two chairs.</p>
							<p>Now, if a collection has the particular property that none of the items in the collection appear more than once, then we call this collection a "set". This property turns out to be a very useful and important one, and therefore sets, and set theory, are very important in mathematics. So important in fact
								that relational database technology could and would not even have been invented without them. Important enough also, to be repeated in bold :</p>
							<p>
								<b>A set is a collection that does not contain duplicates.<br> Something that does contain duplicates, is not a set.
								</b>
							</p>
						</li>
						<li>
							<h3>
								<i>Type/Value</i>
							</h3>
							<ol>
								<li>
									<h4>
										<i>Definition</i>
									</h4>
									<p>So {A,1,oak tree,patent} is a set. {A,patent,A} is not. Now, in the context of data management problems, which is what we're interested in, sets such as those&nbsp;are of course not very useful. In the context of data management, sets are mostly useful only if the items they contain are in some way
										"alike". In that context, we usually deal with sets that contain only numbers, only dates, or some such. Useful sets in data management are sets such as {Monday, Tuesday, Wednesday, Thursday, Friday} and {true, false}. Without attempting a formal and precise definition of the term, we can (and do) say that a
										Type is such a "useful" set. And a Value is one of the items contained in a Type. Which brings us to :</p>
									<p>
										<b>A Type is a set of Values.</b>
									</p>
								</li>
								<li>
									<h4>
										<i>Additional remarks</i>
									</h4>
									<p>In data management, we will often need to speak about, or refer to, such Types. For that reason, it is customary that all the Types we use are assigned a name. The type {Monday, Tuesday, Wednesday, Thursday, Friday}, e.g. could be assigned the name 'Weekdays'. The type {true, false}, e.g. could be
										assigned the name 'Boolean'. Such that we can say :</p>
									<p>
										<b>A Type is a named set of Values.</b>
									</p>
									<p>You might wonder at the mutual dependency in the definition here. A type is a set of values, and a value is an item in a type. In the end, that doesn't really define much, does it ? Shouldn't we have some other definition of what a 'Value' is ? Well, for the purpose of this introduction, that isn't
										really necessary. The reason for this is that the RM (and the algebra) can work with just any set of types. The RM does not "fall apart" if the set of integers is not defined as a type, nor does the algebra. (It would be difficult to build a useful database without that type, but that's another issue.) And
										the most important consequence is that this observation is equally valid "the other way round" : the RM does not stop you from defining whatever type you like. The RM gives you no answer to the question when or why something is a value, and when or why not. As far as the RM is concerned, a value is whatever
										you want it to be, and a type is whatever set you define it to be. It only depends on whether you have a useful purpose for the type or not. A set such as {Em, C, G, ...} might look pretty insane and useless to most readers, but a guitar player would certainly have some good uses for a type holding the guitar
										chords as values ...</p>
								</li>
							</ol>
						</li>
						<li>
							<h3>
								<i>Cartesian product</i>
							</h3>
							<ol>
								<li>
									<h4>
										<i>Definition</i>
									</h4>
									<p>Looking at our example types Weekday and Boolean, it's not difficult to see how one can "pick a value from the first type, then pick a value from the second one, then arrange those two picked values to form a pair.". One example of such a pair would be (Monday, false). There are 10 such pairs possible,
										and those 10 pairs can be gathered into a set. Such a set turns out to be a very important concept in mathematics too, so important in fact that the concept of such a set is given a name : the "Cartesian Product".</p>
									<p>
										<b>The Cartesian product of two sets is the set of all possible pairs formed from the items in those two sets.</b>
									</p>
								</li>
								<li>
									<h4>
										<i>Remarks</i>
									</h4>
									<p>The term "Cartesian product" is not often encountered in the world of RM. The reason for&nbsp;this will become clear in the next few sections. Nevertheless it is worthwhile to reiterate in a more informal manner : A Cartesian product is a set, and the things that we find in that set are "pairs of other
										things", and those "other things" are precisely the things that are part of one of the sets that were used to form the Cartesian product.</p>
								</li>
							</ol>
						</li>
						<li>
							<h3>
								<i>Relation (Traditional mathematics version)</i>
							</h3>
							<ol>
								<li>
									<h4>
										<i>Definition</i>
									</h4>
									<p>Traditional set theory then goes on to define the concept of a "Relation" :</p>
									<p>A Relation is a subset of a Cartesian product of two sets.</p>
								</li>
								<li>
									<h4>
										<i>Remarks</i>
									</h4>
								</li>
								<p>Examples of such relations are then : {(Monday, false),(Monday, true)}, {}, {(Tuesday, false),(Thursday, true)}, ...</p>
								<p>Once again it is worthwhile to reiterate in a more informal manner : A Relation is a set, and the things that we find in that set are "pairs of other things", and those "other things" are precisely the things that are part of one of the sets that were used to form the Cartesian product of which the
									Relation happens to be a subset.</p>
							</ol>
						</li>
						<li>
							<h3>
								<i>Generalized product</i>
							</h3>
							<ol>
								<li>
									<h4>
										<i>Definition</i>
									</h4>
									<p>Following this definition, a relation can be (and is indeed) defined as being a set of pairs. For the context of data management problems, this definition isn't so useful, however. Indeed, when recording data about our customers, sales, ..., we usually record a lot more things than just two. So for the
										specific purpose of data management, the concept of a relation had to be "adapted" somewhat ("generalised" is the correct word, actually) to cater for that problem. It is not difficult to see how this can be done : instead of "picking values from two types and arrange those", one can also "pick one value from
										each of any number of types, and arrange those". The set that is formed by ‚Ä¶</p></li></ol></li></ol></td></tr></tbody></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://shark.armchair.mb.ca/~erwin/relalgintro_0105.html">https://shark.armchair.mb.ca/~erwin/relalgintro_0105.html</a></em></p>]]>
            </description>
            <link>https://shark.armchair.mb.ca/~erwin/relalgintro_0105.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24501895</guid>
            <pubDate>Thu, 17 Sep 2020 06:56:37 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Write a Shell in C (2015)]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24501806">thread link</a>) | @xanthine
<br/>
September 16, 2020 | https://brennan.io/2015/01/16/write-a-shell-in-c/ | <a href="https://web.archive.org/web/*/https://brennan.io/2015/01/16/write-a-shell-in-c/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

  
<p><em>Stephen Brennan ‚Ä¢ 16 January 2015</em></p><p>It‚Äôs easy to view yourself as ‚Äúnot a <em>real</em> programmer.‚Äù  There are programs out
there that everyone uses, and it‚Äôs easy to put their developers on a pedestal.
Although developing large software projects isn‚Äôt easy, many times the basic
idea of that software is quite simple.  Implementing it yourself is a fun way to
show that you have what it takes to be a real programmer.  So, this is a
walkthrough on how I wrote my own simplistic Unix shell in C, in the hopes that
it makes other people feel that way too.</p>

<p>The code for the shell described here, dubbed <code>lsh</code>, is available on
<a href="https://github.com/brenns10/lsh">GitHub</a>.</p>

<p><strong>University students beware!</strong> Many classes have assignments that ask you to
write a shell, and some faculty are aware of this tutorial and code.  If you‚Äôre
a student in such a class, you shouldn‚Äôt copy (or copy then modify) this code
without permission.  And even then, I would <a href="https://brennan.io/2016/03/29/dishonesty/">advise</a> against heavily relying on this tutorial.</p>

<h2 id="basic-lifetime-of-a-shell">Basic lifetime of a shell</h2>

<p>Let‚Äôs look at a shell from the top down.  A shell does three main things in its
lifetime.</p>

<ul>
  <li><strong>Initialize</strong>: In this step, a typical shell would read and execute its
configuration files.  These change aspects of the shell‚Äôs behavior.</li>
  <li><strong>Interpret</strong>: Next, the shell reads commands from stdin (which could be
interactive, or a file) and executes them.</li>
  <li><strong>Terminate</strong>: After its commands are executed, the shell executes any
shutdown commands, frees up any memory, and terminates.</li>
</ul>

<p>These steps are so general that they could apply to many programs, but we‚Äôre
going to use them for the basis for our shell.  Our shell will be so simple that
there won‚Äôt be any configuration files, and there won‚Äôt be any shutdown command.
So, we‚Äôll just call the looping function and then terminate.  But in terms of
architecture, it‚Äôs important to keep in mind that the lifetime of the program is
more than just looping.</p>

<div><div><pre><code><span>int</span> <span>main</span><span>(</span><span>int</span> <span>argc</span><span>,</span> <span>char</span> <span>**</span><span>argv</span><span>)</span>
<span>{</span>
  <span>// Load config files, if any.
</span>
  <span>// Run command loop.
</span>  <span>lsh_loop</span><span>();</span>

  <span>// Perform any shutdown/cleanup.
</span>
  <span>return</span> <span>EXIT_SUCCESS</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Here you can see that I just came up with a function, <code>lsh_loop()</code>, that will
loop, interpreting commands.  We‚Äôll see the implementation of that next.</p>

<h2 id="basic-loop-of-a-shell">Basic loop of a shell</h2>

<p>So we‚Äôve taken care of how the program should start up.  Now, for the basic
program logic: what does the shell do during its loop?  Well, a simple way to
handle commands is with three steps:</p>

<ul>
  <li><strong>Read</strong>: Read the command from standard input.</li>
  <li><strong>Parse</strong>: Separate the command string into a program and arguments.</li>
  <li><strong>Execute</strong>: Run the parsed command.</li>
</ul>

<p>Here, I‚Äôll translate those ideas into code for <code>lsh_loop()</code>:</p>

<div><div><pre><code><span>void</span> <span>lsh_loop</span><span>(</span><span>void</span><span>)</span>
<span>{</span>
  <span>char</span> <span>*</span><span>line</span><span>;</span>
  <span>char</span> <span>**</span><span>args</span><span>;</span>
  <span>int</span> <span>status</span><span>;</span>

  <span>do</span> <span>{</span>
    <span>printf</span><span>(</span><span>"&gt; "</span><span>);</span>
    <span>line</span> <span>=</span> <span>lsh_read_line</span><span>();</span>
    <span>args</span> <span>=</span> <span>lsh_split_line</span><span>(</span><span>line</span><span>);</span>
    <span>status</span> <span>=</span> <span>lsh_execute</span><span>(</span><span>args</span><span>);</span>

    <span>free</span><span>(</span><span>line</span><span>);</span>
    <span>free</span><span>(</span><span>args</span><span>);</span>
  <span>}</span> <span>while</span> <span>(</span><span>status</span><span>);</span>
<span>}</span>
</code></pre></div></div>

<p>Let‚Äôs walk through the code.  The first few lines are just declarations.  The
do-while loop is more convenient for checking the status variable, because it
executes once before checking its value.  Within the loop, we print a prompt,
call a function to read a line, call a function to split the line into args, and
execute the args.  Finally, we free the line and arguments that we created
earlier.  Note that we‚Äôre using a status variable returned by <code>lsh_execute()</code> to
determine when to exit.</p>

<h2 id="reading-a-line">Reading a line</h2>

<p>Reading a line from stdin sounds so simple, but in C it can be a hassle.  The
sad thing is that you don‚Äôt know ahead of time how much text a user will enter
into their shell.  You can‚Äôt simply allocate a block and hope they don‚Äôt exceed
it.  Instead, you need to start with a block, and if they do exceed it,
reallocate with more space.  This is a common strategy in C, and we‚Äôll use it to
implement <code>lsh_read_line()</code>.</p>

<div><div><pre><code><span>#define LSH_RL_BUFSIZE 1024
</span><span>char</span> <span>*</span><span>lsh_read_line</span><span>(</span><span>void</span><span>)</span>
<span>{</span>
  <span>int</span> <span>bufsize</span> <span>=</span> <span>LSH_RL_BUFSIZE</span><span>;</span>
  <span>int</span> <span>position</span> <span>=</span> <span>0</span><span>;</span>
  <span>char</span> <span>*</span><span>buffer</span> <span>=</span> <span>malloc</span><span>(</span><span>sizeof</span><span>(</span><span>char</span><span>)</span> <span>*</span> <span>bufsize</span><span>);</span>
  <span>int</span> <span>c</span><span>;</span>

  <span>if</span> <span>(</span><span>!</span><span>buffer</span><span>)</span> <span>{</span>
    <span>fprintf</span><span>(</span><span>stderr</span><span>,</span> <span>"lsh: allocation error</span><span>\n</span><span>"</span><span>);</span>
    <span>exit</span><span>(</span><span>EXIT_FAILURE</span><span>);</span>
  <span>}</span>

  <span>while</span> <span>(</span><span>1</span><span>)</span> <span>{</span>
    <span>// Read a character
</span>    <span>c</span> <span>=</span> <span>getchar</span><span>();</span>

    <span>// If we hit EOF, replace it with a null character and return.
</span>    <span>if</span> <span>(</span><span>c</span> <span>==</span> <span>EOF</span> <span>||</span> <span>c</span> <span>==</span> <span>'\n'</span><span>)</span> <span>{</span>
      <span>buffer</span><span>[</span><span>position</span><span>]</span> <span>=</span> <span>'\0'</span><span>;</span>
      <span>return</span> <span>buffer</span><span>;</span>
    <span>}</span> <span>else</span> <span>{</span>
      <span>buffer</span><span>[</span><span>position</span><span>]</span> <span>=</span> <span>c</span><span>;</span>
    <span>}</span>
    <span>position</span><span>++</span><span>;</span>

    <span>// If we have exceeded the buffer, reallocate.
</span>    <span>if</span> <span>(</span><span>position</span> <span>&gt;=</span> <span>bufsize</span><span>)</span> <span>{</span>
      <span>bufsize</span> <span>+=</span> <span>LSH_RL_BUFSIZE</span><span>;</span>
      <span>buffer</span> <span>=</span> <span>realloc</span><span>(</span><span>buffer</span><span>,</span> <span>bufsize</span><span>);</span>
      <span>if</span> <span>(</span><span>!</span><span>buffer</span><span>)</span> <span>{</span>
        <span>fprintf</span><span>(</span><span>stderr</span><span>,</span> <span>"lsh: allocation error</span><span>\n</span><span>"</span><span>);</span>
        <span>exit</span><span>(</span><span>EXIT_FAILURE</span><span>);</span>
      <span>}</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>The first part is a lot of declarations.  If you hadn‚Äôt noticed, I prefer to
keep the old C style of declaring variables before the rest of the code.  The
meat of the function is within the (apparently infinite) <code>while (1)</code> loop.  In
the loop, we read a character (and store it as an <code>int</code>, not a <code>char</code>, that‚Äôs
important!  EOF is an integer, not a character, and if you want to check for it,
you need to use an <code>int</code>.  This is a common beginner C mistake.).  If it‚Äôs the
newline, or EOF, we null terminate our current string and return it.  Otherwise,
we add the character to our existing string.</p>

<p>Next, we see whether the next character will go outside of our current buffer
size.  If so, we reallocate our buffer (checking for allocation errors) before
continuing.  And that‚Äôs really it.</p>

<p>Those who are intimately familiar with newer versions of the C library may note
that there is a <code>getline()</code> function in <code>stdio.h</code> that does most of the work we
just implemented.  To be completely honest, I didn‚Äôt know it existed until after
I wrote this code.  This function was a GNU extension to the C library until
2008, when it was added to the specification, so most modern Unixes should have
it now.  I‚Äôm leaving my existing code the way it is, and I encourage people to
learn it this way first before using <code>getline</code>.  You‚Äôd be robbing yourself of a
learning opportunity if you didn‚Äôt!  Anyhow, with <code>getline</code>, the function
becomes easier:</p>

<div><div><pre><code><span>char</span> <span>*</span><span>lsh_read_line</span><span>(</span><span>void</span><span>)</span>
<span>{</span>
  <span>char</span> <span>*</span><span>line</span> <span>=</span> <span>NULL</span><span>;</span>
  <span>ssize_t</span> <span>bufsize</span> <span>=</span> <span>0</span><span>;</span> <span>// have getline allocate a buffer for us
</span>
  <span>if</span> <span>(</span><span>getline</span><span>(</span><span>&amp;</span><span>line</span><span>,</span> <span>&amp;</span><span>bufsize</span><span>,</span> <span>stdin</span><span>)</span> <span>==</span> <span>-</span><span>1</span><span>){</span>
    <span>if</span> <span>(</span><span>feof</span><span>(</span><span>stdin</span><span>))</span> <span>{</span>
      <span>exit</span><span>(</span><span>EXIT_SUCCESS</span><span>);</span>  <span>// We recieved an EOF
</span>    <span>}</span> <span>else</span>  <span>{</span>
      <span>perror</span><span>(</span><span>"readline"</span><span>);</span>
      <span>exit</span><span>(</span><span>EXIT_FAILURE</span><span>);</span>
    <span>}</span>
  <span>}</span>

  <span>return</span> <span>line</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>This is not 100% trivial because we still need to check for EOF or errors while
reading. EOF (end of file) means that either we were reading commands from a
text file which we‚Äôve reached the end of, or the user typed Ctrl-D, which
signals end-of-file. Either way, it means we should exit successfully, and if
any other error occurs, we should fail after printing the error.</p>

<h2 id="parsing-the-line">Parsing the line</h2>

<p>OK, so if we look back at the loop, we see that we now have implemented
<code>lsh_read_line()</code>, and we have the line of input.  Now, we need to parse that
line into a list of arguments.  I‚Äôm going to make a glaring simplification here,
and say that we won‚Äôt allow quoting or backslash escaping in our command line
arguments.  Instead, we will simply use whitespace to separate arguments from
each other.  So the command <code>echo "this message"</code> would not call echo with a
single argument <code>this message</code>, but rather it would call echo with two
arguments: <code>"this</code> and <code>message"</code>.</p>

<p>With those simplifications, all we need to do is ‚Äútokenize‚Äù the string using
whitespace as delimiters.  That means we can break out the classic library
function <code>strtok</code> to do some of the dirty work for us.</p>

<div><div><pre><code><span>#define LSH_TOK_BUFSIZE 64
#define LSH_TOK_DELIM " \t\r\n\a"
</span><span>char</span> <span>**</span><span>lsh_split_line</span><span>(</span><span>char</span> <span>*</span><span>line</span><span>)</span>
<span>{</span>
  <span>int</span> <span>bufsize</span> <span>=</span> <span>LSH_TOK_BUFSIZE</span><span>,</span> <span>position</span> <span>=</span> <span>0</span><span>;</span>
  <span>char</span> <span>**</span><span>tokens</span> <span>=</span> <span>malloc</span><span>(</span><span>bufsize</span> <span>*</span> <span>sizeof</span><span>(</span><span>char</span><span>*</span><span>));</span>
  <span>char</span> <span>*</span><span>token</span><span>;</span>

  <span>if</span> <span>(</span><span>!</span><span>tokens</span><span>)</span> <span>{</span>
    <span>fprintf</span><span>(</span><span>stderr</span><span>,</span> <span>"lsh: allocation error</span><span>\n</span><span>"</span><span>);</span>
    <span>exit</span><span>(</span><span>EXIT_FAILURE</span><span>);</span>
  <span>}</span>

  <span>token</span> <span>=</span> <span>strtok</span><span>(</span><span>line</span><span>,</span> <span>LSH_TOK_DELIM</span><span>);</span>
  <span>while</span> <span>(</span><span>token</span> <span>!=</span> <span>NULL</span><span>)</span> <span>{</span>
    <span>tokens</span><span>[</span><span>position</span><span>]</span> <span>=</span> <span>token</span><span>;</span>
    <span>position</span><span>++</span><span>;</span>

    <span>if</span> <span>(</span><span>position</span> <span>&gt;=</span> <span>bufsize</span><span>)</span> <span>{</span>
      <span>bufsize</span> <span>+=</span> <span>LSH_TOK_BUFSIZE</span><span>;</span>
      <span>tokens</span> <span>=</span> <span>realloc</span><span>(</span><span>tokens</span><span>,</span> <span>bufsize</span> <span>*</span> <span>sizeof</span><span>(</span><span>char</span><span>*</span><span>));</span>
      <span>if</span> <span>(</span><span>!</span><span>tokens</span><span>)</span> <span>{</span>
        <span>fprintf</span><span>(</span><span>stderr</span><span>,</span> <span>"lsh: allocation error</span><span>\n</span><span>"</span><span>);</span>
        <span>exit</span><span>(</span><span>EXIT_FAILURE</span><span>);</span>
      <span>}</span>
    <span>}</span>

    <span>token</span> <span>=</span> <span>strtok</span><span>(</span><span>NULL</span><span>,</span> <span>LSH_TOK_DELIM</span><span>);</span>
  <span>}</span>
  <span>tokens</span><span>[</span><span>position</span><span>]</span> <span>=</span> <span>NULL</span><span>;</span>
  <span>return</span> <span>tokens</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>If this code looks suspiciously similar to <code>lsh_read_line()</code>, it‚Äôs because it
is!  We are using the same strategy of having a buffer and dynamically expanding
it.  But this time, we‚Äôre doing it with a null-terminated array of pointers
instead of a null-terminated array of characters.</p>

<p>At the start of the function, we begin tokenizing by calling <code>strtok</code>.  It
returns a pointer to the first token.  What <code>strtok()</code> actually does is return
pointers to within the string you give it, and place <code>\0</code> bytes at the end of
each token.  We store each pointer in an array (buffer) of character
pointers.</p>

<p>Finally, we reallocate the array of pointers if necessary.  The process repeats
until no token is returned by <code>strtok</code>, at which point we null-terminate the
list of tokens.</p>

<p>So, once all is said and done, we have an array of tokens, ready to execute.
Which begs the question, how do we do that?</p>



<p>Now, we‚Äôre really at the heart of what a shell does.  Starting processes is the
main function of shells.  So writing a shell means that you need to know exactly
what‚Äôs going on with processes and how they start.  That‚Äôs why I‚Äôm going to take
us on a short diversion to discuss processes in Unix.</p>

<p>There are only two ways of starting processes on Unix.  The first one (which
almost doesn‚Äôt count) is by being Init.  You see, when a Unix computer boots,
its kernel is loaded.  Once it is loaded and initialized, the kernel starts only
one process, which is called Init.  This process runs for the entire length of
time that the computer is on, and it manages loading up the rest of the
processes that you need for your computer to be useful.</p>

<p>Since most programs aren‚Äôt Init, that leaves only one practical way for
processes to get started: the <code>fork()</code> system call.  When ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://brennan.io/2015/01/16/write-a-shell-in-c/">https://brennan.io/2015/01/16/write-a-shell-in-c/</a></em></p>]]>
            </description>
            <link>https://brennan.io/2015/01/16/write-a-shell-in-c/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24501806</guid>
            <pubDate>Thu, 17 Sep 2020 06:35:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Infosec Apocalypse]]>
            </title>
            <description>
<![CDATA[
Score 153 | Comments 97 (<a href="https://news.ycombinator.com/item?id=24501803">thread link</a>) | @chillax
<br/>
September 16, 2020 | https://blog.rickasaurus.com/2020/08/31/The-Infosec-Apocalypse.html | <a href="https://web.archive.org/web/*/https://blog.rickasaurus.com/2020/08/31/The-Infosec-Apocalypse.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>The rise of tooling for vulnerability detection combined with pressure driven by Vendor Due Diligence is causing a massive enterprise freezeout for non-mainstream technologies across the board. Of particular concern is the impact this will have on the adoption of functional programming in enterprise and small business B2B development.</p>

<p>I see now that the last 10 years were ‚Äúeasy mode‚Äù for the growth of new programming tools and infrastructure, with many new breakthrough technologies seeing rapid adoption. Languages like Node, Go and to some degree Scala saw breakaway success, not to mention all of the new cloud tech, NoSQL tech, containerization and data processing platforms along with their custom query DSLs. Other languages like Haskell saw success in small companies and skunkworks style teams solving very difficult problems.</p>

<h3 id="the-rise-of-vulnerability-scanning">The Rise of Vulnerability Scanning</h3>

<p>Just this past year I‚Äôve come to see we‚Äôre in the middle of a massive change across the industry. There are new forces at play which will calcify current software stacks and make it extremely hard for existing or new entrants to see similar success without a massive coordinated push backed by big enterprise companies. This force is the rise of InfoSec and vulnerability detection tooling.</p>

<p>Tools like <a href="https://owasp.org/www-community/Source_Code_Analysis_Tools">Blackduck, WhiteSource, Checkmarx, Veracode</a> are exploding in popularity, there are too many to list and many variations on the same theme. In the wake of so many data leaks and hacking events enterprises no longer trust their developers and SREs to take care of security, and so protocols are being implemented top down. This isn‚Äôt just on the code scanning side, there is a similar set of things going on with network scanning as well which impacts programming languages less, but similarly will calcify server stacks.</p>

<p>These tools are quickly making their way into SOC2 and SDLC policies across industry, and if your language or new infrastructure tool isn‚Äôt supported by them there‚Äôs little chance you will get the previously already tenuous approval to use them. This sets the already high bar for adoption much higher. As you might expect, vendors will only implement support for languages that meet some threshold for profitability of their tools. Not only do you need to build a modern set of tools for your language to compete, now you also need support from external vendors.</p>

<h3 id="vendor-due-diligence">Vendor Due Diligence</h3>

<p>Maybe we just cede this territory to enterprise tools with big backers like Microsoft and Oracle, we never more than a few small inroads anyway. The use of these tools is arguably a good thing overall for software security. Unfortunately, the problem cannot be sidestepped so easily, and I‚Äôm afraid this is where things look very bleak. The biggest new trend is in enforcement of these tools through Vendor Due Diligence.</p>

<p>You may not be familiar with Vendor Due Diligence if you aren‚Äôt in a manager role. The basic idea is your customer will send you a long list of technical questions about your product which you must fill out to their satisfaction before they buy your product or service. In the B2B space where I work these lists are nothing new, but have been getting longer and longer over the last 10 years, now often numbering in the hundreds of questions.</p>

<p>Most recently I‚Äôve seen more and more invasive questions being asked, some even going into how teams are organized, but important to this article is that across the board they now all ask about vulnerability scanning and now often request specific outputs for well-known vulnerability scanning tools. The implication being that if you‚Äôre not scanning with these tools they won‚Äôt buy your software, and the list of supported languages is small.</p>

<p>Any experienced technology manager sees the natural tradeoff here. When it comes down to making money versus using cool tech, cool tech will lose every time. You‚Äôre just burning money if you‚Äôre building cool things with cool tech if you know no one will buy it.</p>

<h3 id="so-what-now">So What Now?</h3>

<p>Potentially we will see a resurgence of ‚Äúcompile-to‚Äù functional programming with mainstream language targets to sidestep the issue. I suppose though that the extra build complexity and problems debugging will prevent this from ever being mainstream, not to mention that the vulnerability tools look for specific patterns and likely won‚Äôt behave well on generated code.</p>

<p>There is some hope in the form of projects like SonarCube which enables users to come together and <a href="https://github.com/SonarSource/sonar-custom-plugin-example">build custom plugins</a>. Will functional programming communities come together to build and maintain such boring tech? I somewhat doubt it. This kind of work is not what most programmers would choose to do in their off time. Similarly, vulnerability detection is unlikely to be a good target to be advanced a little at a time with academic papers. It would take true functional programming fanatics to build companies or tools dedicated to the cause. If you are interested in helping out, pay attention to the <a href="https://owasp.org/www-project-top-ten/">OWASP Top 10</a> as this list drives focus for many infosec teams.</p>

<p>Where does this leave us? If our communities do nothing then smaller B2B software operations focused mom and pop shops or consumer focused web applications likely won‚Äôt see any impact unless static analysis makes it into data protection law. Beyond these use cases FP will be relegated to tiny boxes on the back end where vulnerabilities are much less of a concern and the mathematical skills of functional programmers can bring extreme amounts of value.</p>

<p>I know there are many deeper facets I didn‚Äôt cover here, if you want to continue the discussion <a href="https://twitter.com/rickasaurus/status/1300487826782420995">join the thread on twitter</a>.</p>


  </div></div>]]>
            </description>
            <link>https://blog.rickasaurus.com/2020/08/31/The-Infosec-Apocalypse.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24501803</guid>
            <pubDate>Thu, 17 Sep 2020 06:34:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I write recursive descent parsers (despite their issues)]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24500860">thread link</a>) | @panic
<br/>
September 16, 2020 | https://utcc.utoronto.ca/~cks/space/blog/programming/WhyRDParsersForMe | <a href="https://web.archive.org/web/*/https://utcc.utoronto.ca/~cks/space/blog/programming/WhyRDParsersForMe">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><h2>Why I write recursive descent parsers (despite their issues)</h2>

	<p><small>September 16, 2020</small></p>
</div><div><p>Today I read Laurence Tratt's <a href="https://tratt.net/laurie/blog/entries/which_parsing_approach.html">Which Parsing Approach?</a> (<a href="https://lobste.rs/s/9pcqys/which_parsing_approach">via</a>), which has a
decent overview of how parsing computer languages (including little
domain specific languages) is not quite the well solved problem
we'd like it to be. As part of the article, Tratt discusses how
<a href="https://en.wikipedia.org/wiki/Recursive_descent_parser">recursive descent parsers</a> have a
number of issues in practice and recommends using other things,
such as a LR parser generator.</p>

<p>I have a long standing interest in parsing, I'm reasonably well
aware of the annoyances of recursive descent parsers (although some
of the issues Tratt raised hadn't occurred to me before now), and
I've been exposed to parser generators like Yacc. Despite that, my
normal approach to parsing any new little language for real is to
write a recursive descent parser in whatever language I'm using,
and Tratt's article is not going to change that. My choice here is
for entirely pragmatic reasons, because to me recursive descent
parsers generally have two significant advantages over all other
real parsers.</p>

<p>The first advantage is that almost always, a recursive descent parser
is the only or at least easiest form of parser you can readily create
using only the language's standard library and tooling. In particular,
parsing LR, LALR, and similar formal grammars generally requires you to
find, select, and install a parser generator tool (or more rarely, an
additional package). Very few languages ship their standard environment
with a parser generator (or a lexer, which is often required in some
form by the parser).</p>

<p>(The closest I know of is C on Unix, where you will almost always
find some version of lex and yacc. Not entirely coincidentally,
I've used lex and yacc to write a parser in C, although a long time
ago.)</p>

<p>By contrast, a recursive descent parser is just code in the language.
You can obviously write that in any language, and you can build a
little lexer to go along with it that's custom fitted to your
particular recursive descent parser and your language's needs.  This
also leads to the second significant advantage, which is that if
you write a recursive descent parser, you don't need to learn a new
language, the language of the parser generator, and also learn how
to hook that new language to the language of your program, and then
debug the result. Your entire recursive descent parser (and your
entire lexer) are written in one language, the language you're
already working in.</p>

<p>If I was routinely working in a language that had a well respected
de facto standard parser generator and lexer, and regularly building
parsers for little languages for my programs, it would probably be
worth mastering these tools. The time and effort required to do so
would be more than paid back in the end, and I would probably have
a higher quality grammar too (Tratt points out how recursive descent
parsers hide ambiguity, for example). But in practice I bounce back
and forth between two languages right now (Go and Python, neither
of which have such a standard parser ecology), and I don't need to
write even a half-baked parser all that often. So writing another
recursive descent parser using my standard process for this has
been the easiest way to do it every time I needed one.</p>

<p>(I've developed a standard process for writing recursive descent
parsers that makes the whole thing pretty mechanical, but that's a
discussion for another entry or really a series of them.)</p>

<p>PS: I can't comment about how easy it is to generate good error
messages in modern parser generators, because I haven't used any
of them. My experience with my own recursive descent parsers is
that it's generally straightforward to get decent error messages
for the style of languages that I create, and usually simple to
tweak the result to give clearer errors in some specific situations
(<a href="https://github.com/siebenmann/sinksmtp/blob/master/rparse.go#L432">eg</a>,
<a href="https://github.com/siebenmann/sinksmtp/blob/master/rparse.go#L575">also</a>).</p>
</div></div>]]>
            </description>
            <link>https://utcc.utoronto.ca/~cks/space/blog/programming/WhyRDParsersForMe</link>
            <guid isPermaLink="false">hacker-news-small-sites-24500860</guid>
            <pubDate>Thu, 17 Sep 2020 03:23:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Hacking on Bug Bounties for Four Years]]>
            </title>
            <description>
<![CDATA[
Score 64 | Comments 8 (<a href="https://news.ycombinator.com/item?id=24500198">thread link</a>) | @infosecau
<br/>
September 16, 2020 | https://blog.assetnote.io/2020/09/15/hacking-on-bug-bounties-for-four-years/ | <a href="https://web.archive.org/web/*/https://blog.assetnote.io/2020/09/15/hacking-on-bug-bounties-for-four-years/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
          <ul>
  <li><a href="https://blog.assetnote.io/2020/09/15/hacking-on-bug-bounties-for-four-years/#intro">Intro &amp; Motivations</a></li>
  <li><a href="https://blog.assetnote.io/2020/09/15/hacking-on-bug-bounties-for-four-years/#findings">Findings</a></li>
  <li><a href="https://blog.assetnote.io/2020/09/15/hacking-on-bug-bounties-for-four-years/#analysis">Analysis</a></li>
  <li><a href="https://blog.assetnote.io/2020/09/15/hacking-on-bug-bounties-for-four-years/#collaboration">Collaboration</a></li>
  <li><a href="https://blog.assetnote.io/2020/09/15/hacking-on-bug-bounties-for-four-years/#methodology">Methodology</a></li>
</ul>

<hr>





<p>I value transparency a lot, especially when it comes to the bug bounty space. Bug bounty hunters all around the world are submitting a range of reports where the issues found span across multiple domains, often leveraging numerous techniques and methodologies. However, if you‚Äôre not already an active bug bounty hunter who has a good understanding of what a bounty program expects, or will pay out for, you have a major disadvantage compared to someone who does have this knowledge. I hope through this blog post, I can demystify the sort of issues bug bounty programs pay for.</p>

<p>The last blog post I did in this series was around four years ago, <a href="https://shubs.io/high-frequency-security-bug-hunting-120-days-120-bugs/">120 days, 120 bugs</a>. In the last four years, a lot has happened. I moved to Europe for six months, I moved interstate in Australia twice, I won a <a href="https://www.youtube.com/watch?v=VojwIY4GL-4">live hacking event</a>, I co-founded a company and helped build an <a href="https://assetnote.io/">attack surface management platform</a> with a team of people I consider family.</p>

<p>Unlike my previous blog post, I did not set myself a goal to find a bug a day. Instead, I participated in bug bounties whenever time allowed. There were many months where I found nothing at all, which often terrified me when it came to evaluating my self worth as a hacker. I also admitted to myself, that I might be a good hacker, but there is always going to be a better hacker out there, and I‚Äôve made my peace with that as a hyper-competitve person.</p>

<p>If you don‚Äôt have an excellent understanding of fundamental application security <a href="http://projects.webappsec.org/w/page/13246978/Threat%20Classification">attacks and weaknesses</a> before you approach bug bounties, in my opinion, you are wasting your time. <a href="https://portswigger.net/web-security">Practice and learn more here</a>.</p>

<p>If you‚Äôre looking for a paid, more extensive resource, check out and practice with <a href="https://pentesterlab.com/">PentesterLab</a>.</p>

<p>Participating so heavily in bug bounties has given us the knowledge at Assetnote about what security teams <em>actually</em> care about. It‚Äôs the reason we can maintain high signal when we are continuously finding exposures.</p>

<p>My primary motivation for this blog post is to educate the masses on what bug bounty programs are paying out for.</p>

<p>For example, would you know that you could submit a dangling EC2 IP (subdomain pointing to an EC2 IP that is no longer owned by the company) as a bug report without reading the proof in the pudding below? I‚Äôve been paid for this by programs, so clearly they value this sort of information.</p>

<hr>




<p>Below are all of my findings for the last four years. I‚Äôve redacted information where necessary, but by reading the titles, it should give you a good understanding of what I was reporting to programs.</p>

<table data-order="[[ 0, &quot;desc&quot; ]]" id="bugs">
<thead><tr><th title="Field #1">Date</th>
<th title="Field #2">Bug</th>
<th title="Field #3">Payout</th>
</tr></thead>
<tbody><tr>
<td>2020-09-02 14:04:11 UTC</td>
<td>[redacted] Hosted Zone Takeover</td>
<td>$1,000.00</td>
</tr>
<tr>
<td>2020-07-16 18:39:22 UTC</td>
<td>Spring debugging endpoints exposed leading to disclosure of all secrets via heapdump on [redacted] &amp; Account takeover by Trace</td>
<td>$2,500.00</td>
</tr>
<tr>
<td>2020-06-30 22:54:07 UTC</td>
<td>Blind SSRF on [redacted] through invoicing API - access to internal hosts</td>
<td>$60.00</td>
</tr>
<tr>
<td>2020-06-10 13:53:43 UTC</td>
<td>Full Account takeover through subdomain takeover via [redacted]</td>
<td>$300.00</td>
</tr>
<tr>
<td>2020-06-10 13:24:10 UTC</td>
<td>Full Account takeover through subdomain takeover via [redacted]</td>
<td>$300.00</td>
</tr>
<tr>
<td>2020-06-10 13:21:57 UTC</td>
<td>Full Account takeover through subdomain takeover via  [redacted]</td>
<td>$300.00</td>
</tr>
<tr>
<td>2020-06-08 14:28:05 UTC</td>
<td>Amazon S3 Subdomain Hijack - [redacted]</td>
<td>$256.00</td>
</tr>
<tr>
<td>2020-06-08 05:29:58 UTC</td>
<td>Route53 Hosted Zone Takeover of [redacted]</td>
<td>$500.00</td>
</tr>
<tr>
<td>2020-06-05 16:27:42 UTC</td>
<td>Admin panel for Cisco IP Conference Station CP-7937G exposed on the internet on [redacted] IP ranges</td>
<td>$400.00</td>
</tr>
<tr>
<td>2020-06-03 21:07:51 UTC</td>
<td>Pre-auth Blind MSSQL Injection affecting [redacted]</td>
<td>$1,024.00</td>
</tr>
<tr>
<td>2020-06-03 14:18:24 UTC</td>
<td>Pre-auth MSSQL Injection affecting [redacted]</td>
<td>$1,024.00</td>
</tr>
<tr>
<td>2020-06-02 15:28:50 UTC</td>
<td>Pre-auth SQL Injection affecting [redacted]</td>
<td>$1,024.00</td>
</tr>
<tr>
<td>2020-06-02 15:26:58 UTC</td>
<td>RCE via arbitrary file write and path traversal [redacted]</td>
<td>$1,024.00</td>
</tr>
<tr>
<td>2020-06-02 15:25:08 UTC</td>
<td>RCE via arbitrary file write and path traversal [redacted]</td>
<td>$1,024.00</td>
</tr>
<tr>
<td>2020-05-18 10:12:38 UTC</td>
<td>Route53 Hosted Zone Takeover of [redacted]</td>
<td>$1,000.00</td>
</tr>
<tr>
<td>2020-05-18 10:11:58 UTC</td>
<td>Route53 Hosted Zone Takeover of [redacted]</td>
<td>$1,000.00</td>
</tr>
<tr>
<td>2020-05-18 10:06:22 UTC</td>
<td>Route53 Hosted Zone Takeover of [redacted]</td>
<td>$1,000.00</td>
</tr>
<tr>
<td>2020-05-18 10:05:20 UTC</td>
<td>Route53 Hosted Zone Takeover of [redacted]</td>
<td>$1,000.00</td>
</tr>
<tr>
<td>2020-05-11 18:47:54 UTC</td>
<td>Route53 Hosted Zone Takeover of [redacted]</td>
<td>$100.00</td>
</tr>
<tr>
<td>2020-05-11 14:59:23 UTC</td>
<td>Account takeover through Subdomain Takeover of [redacted] (Cookie Disclosure -&gt; Account Takeover)</td>
<td>$2,500.00</td>
</tr>
<tr>
<td>2020-05-11 14:31:18 UTC</td>
<td>Account takeover through Subdomain Takeover of [redacted] (Cookie Disclosure -&gt; Account Takeover)</td>
<td>$2,500.00</td>
</tr>
<tr>
<td>2020-05-07 01:47:49 UTC</td>
<td>View all metadata for any [redacted] IDOR [redacted]</td>
<td>$1,000.00</td>
</tr>
<tr>
<td>2020-04-29 22:58:57 UTC</td>
<td>IDOR view all [redacted]</td>
<td>$4,000.00</td>
</tr>
<tr>
<td>2020-04-29 22:57:55 UTC</td>
<td>IDOR view the [redacted]</td>
<td>$2,500.00</td>
</tr>
<tr>
<td>2020-04-24 18:19:23 UTC</td>
<td>Subdomain takeover of [redacted] through Heroku</td>
<td>$300.00</td>
</tr>
<tr>
<td>2020-04-24 18:18:45 UTC</td>
<td>Subdomain takeover of [redacted] through Heroku</td>
<td>$300.00</td>
</tr>
<tr>
<td>2020-04-23 19:45:04 UTC</td>
<td>Ability to horizontal bruteforce [redacted] accounts by abusing [redacted] sign up flow</td>
<td>$500.00</td>
</tr>
<tr>
<td>2020-04-22 17:44:29 UTC</td>
<td>View all metadata for any [redacted] IDOR [redacted]</td>
<td>$500.00</td>
</tr>
<tr>
<td>2020-04-22 17:42:51 UTC</td>
<td>IDOR view the [redacted] for any [redacted] for today [redacted]</td>
<td>$500.00</td>
</tr>
<tr>
<td>2020-04-22 17:42:06 UTC</td>
<td>IDOR view all [redacted] for a [redacted] [redacted]</td>
<td>$500.00</td>
</tr>
<tr>
<td>2020-04-06 19:13:19 UTC</td>
<td>Facebook - Payout For [redacted]</td>
<td>$5,000.00</td>
</tr>
<tr>
<td>2020-03-07 15:12:24 UTC</td>
<td>Accessing Querybuilder on [redacted] to gain access to secrets</td>
<td>$3,000.00</td>
</tr>
<tr>
<td>2020-02-25 15:02:20 UTC</td>
<td>Subdomain takeover of [redacted] via Amazon S3</td>
<td>$750.00</td>
</tr>
<tr>
<td>2020-02-20 23:01:58 UTC</td>
<td>HTML injection, DOS of email receipts and potentially template injection within [redacted] via "Expense Info" section</td>
<td>$500.00</td>
</tr>
<tr>
<td>2020-02-18 14:45:40 UTC</td>
<td>Admin account bruteforce via [redacted]/libs/granite/core/content/login.html</td>
<td>$500.00</td>
</tr>
<tr>
<td>2020-02-15 12:24:57 UTC</td>
<td>Blind XSS via registering on [redacted]</td>
<td>$500.00</td>
</tr>
<tr>
<td>2020-02-04 03:45:38 UTC</td>
<td>HTML Injection in email when contributing to a [redacted]</td>
<td>$700.00</td>
</tr>
<tr>
<td>2020-01-21 17:13:58 UTC</td>
<td>Ability to attach malicious attachments (of any name and of any content type) to [redacted] support staff via [redacted]</td>
<td>$2,000.00</td>
</tr>
<tr>
<td>2020-01-15 11:41:59 UTC</td>
<td>No authentication required to view and delete Terraform locks at [redacted]</td>
<td>$250.00</td>
</tr>
<tr>
<td>2019-12-12 16:25:11 UTC</td>
<td>[redacted] Webhook URL + object leaked in JavaScript on [redacted]</td>
<td>$3,000.00</td>
</tr>
<tr>
<td>2019-11-21 22:15:20 UTC</td>
<td>AWS &amp; Screenhero JWT Credentials from [redacted] not rotated, still working</td>
<td>$1,000.00</td>
</tr>
<tr>
<td>2019-10-17 13:44:23 UTC</td>
<td>RCE on [redacted] via IBM Aspera exploit leading to compromise of secure file storage </td>
<td>$1,000.00</td>
</tr>
<tr>
<td>2019-10-15 14:29:25 UTC</td>
<td>SSO bypass on [redacted] leading to access of internal documents and portals</td>
<td>$250.00</td>
</tr>
<tr>
<td>2019-10-11 18:07:51 UTC</td>
<td>Admin access to [redacted] via guessing credentials</td>
<td>$1,500.00</td>
</tr>
<tr>
<td>2019-10-11 18:06:15 UTC</td>
<td>3rd party subdomain hijack - EC2 IP of [redacted] is no longer controlled by [redacted]</td>
<td>$250.00</td>
</tr>
<tr>
<td>2019-09-30 16:56:50 UTC</td>
<td>Multiple server-side issues affecting [redacted] (SSRF, admin panels)</td>
<td>$2,660.00</td>
</tr>
<tr>
<td>2019-09-25 22:10:00 UTC</td>
<td>Read any [redacted] details using UUID - IDOR in [redacted]</td>
<td>$1,000.00</td>
</tr>
<tr>
<td>2019-09-10 16:17:59 UTC</td>
<td>SSRF in [redacted]</td>
<td>$2,000.00</td>
</tr>
<tr>
<td>2019-09-03 15:28:36 UTC</td>
<td>SSRF in [redacted]</td>
<td>$17,900.00</td>
</tr>
<tr>
<td>2019-08-29 00:43:00 UTC</td>
<td>Bypassing email whitelists for organisation signup flows on [redacted]</td>
<td>$250.00</td>
</tr>
<tr>
<td>2019-08-09 05:15:44 UTC</td>
<td>[Pre-Submission] SSRF in [redacted] (Iframely)</td>
<td>$2,970.30</td>
</tr>
<tr>
<td>2019-07-29 16:32:59 UTC</td>
<td>[Bypass] SSRF via [redacted] leads to internal network access, ability to read internal JSON responses</td>
<td>$23,000.00</td>
</tr>
<tr>
<td>2019-07-24 02:52:42 UTC</td>
<td>PHPInfo exposed at [redacted]</td>
<td>$100.00</td>
</tr>
<tr>
<td>2019-07-24 02:46:02 UTC</td>
<td>SSRF on [redacted] leading to AWS breach via security credentials</td>
<td>$5,000.00</td>
</tr>
<tr>
<td>2019-07-08 14:44:23 UTC</td>
<td>Remote command execution on production [redacted] (via tsi parameter) - CVE-2017-12611</td>
<td>$2,000.00</td>
</tr>
<tr>
<td>2019-06-12 17:42:53 UTC</td>
<td>Username/Password for Aspera and other secrets leaked in [redacted]</td>
<td>$1,500.00</td>
</tr>
<tr>
<td>2019-06-12 17:42:08 UTC</td>
<td>SSO/Authorization bypass for APIs hosted on [redacted]</td>
<td>$1,500.00</td>
</tr>
<tr>
<td>2019-06-12 14:45:09 UTC</td>
<td>Remote Code Execution (many endpoints) - [redacted]</td>
<td>$4,500.00</td>
</tr>
<tr>
<td>2019-06-10 17:29:35 UTC</td>
<td>Extract email, dob, full address, federal tax ID and other PII for all leads in [redacted]</td>
<td>$1,800.00</td>
</tr>
<tr>
<td>2019-06-10 16:53:22 UTC</td>
<td>Obtain email, mobile of customers of [redacted] by iterating through Lead IDs via the API</td>
<td>$12,600.00</td>
</tr>
<tr>
<td>2019-06-10 16:52:40 UTC</td>
<td>Ability to pull out all opportunities (IDOR) extract PII for customers of [redacted]</td>
<td>$12,600.00</td>
</tr>
<tr>
<td>2019-06-07 18:51:24 UTC</td>
<td>[redacted][IDOR] - Accessing all accounts via regression / new attack vector by abusing [redacted] (regression?)</td>
<td>$2,500.00</td>
</tr>
<tr>
<td>2019-06-07 18:17:31 UTC</td>
<td>Blind SSRF on [redacted] through RPC call to checkAvailableLivechatAgents</td>
<td>$62.50</td>
</tr>
<tr>
<td>2019-06-07 18:07:22 UTC</td>
<td>HTML injection in emails when adding a reviewer to [redacted]</td>
<td>$125.00</td>
</tr>
<tr>
<td>2019-06-07 17:42:09 UTC</td>
<td>[IDOR] Impersonating an [redacted] employee via /api/readHandler on [redacted]</td>
<td>$1,500.00</td>
</tr>
<tr>
<td>2019-06-07 15:33:31 UTC</td>
<td>Extract mobile number and [redacted] using only an email address, for any [redacted]</td>
<td>$750.00</td>
</tr>
<tr>
<td>2019-06-07 14:36:01 UTC</td>
<td>Zendesk Ticket IDOR / Ability to enumerate  IDs via [redacted]</td>
<td>$125.00</td>
</tr>
<tr>
<td>2019-06-07 14:24:15 UTC</td>
<td>Extract mobile number and [redacted] using only an email address, for any [redacted] user</td>
<td>$750.00</td>
</tr>
<tr>
<td>2019-06-07 14:11:20 UTC</td>
<td>HTML Injection in [redacted] receipts if printed from [redacted]</td>
<td>$100.00</td>
</tr>
<tr>
<td>2019-06-07 13:56:46 UTC</td>
<td>Ability to access the airwatch admin panels and APIs in [redacted]</td>
<td>$1,000.00</td>
</tr>
<tr>
<td>2019-06-07 13:21:31 UTC</td>
<td>IDOR on [redacted] allows you to access [redacted] information for any [redacted] user</td>
<td>$250.00</td>
</tr>
<tr>
<td>2019-06-07 10:13:20 UTC</td>
<td>[redacted][IDOR] - Accessing all accounts via regression / new attack vector by abusing [redacted] (regression?)</td>
<td>$15,000.00</td>
</tr>
<tr>
<td>2019-05-22 19:33:27 UTC</td>
<td>SQLi and Authentication Bypass in [redacted]</td>
<td>$4,500.00</td>
</tr>
<tr>
<td>2019-04-29 14:14:42 UTC</td>
<td>Reflected XSS in [redacted]</td>
<td>$500.00</td>
</tr>
<tr>
<td>2019-04-29 14:14:29 UTC</td>
<td>SSRF in [redacted]</td>
<td>$1,500.00</td>
</tr>
<tr>
<td>2019-04-25 07:33:22 UTC</td>
<td>Local file disclosure through Rails CVE-2019-5418 in [redacted]</td>
<td>$100.00</td>
</tr>
<tr>
<td>2019-04-19 02:28:54 UTC</td>
<td>SSRF - [redacted]</td>
<td>$4,950.00</td>
</tr>
<tr>
<td>2019-04-19 02:28:35 UTC</td>
<td>SSRF at [redacted] via the 'url' parameter</td>
<td>$4,950.00</td>
</tr>
<tr>
<td>2019-03-29 11:23:14 UTC</td>
<td>AWS S3 secrets leaked in [redacted] meeting connector ‚Ä¶</td></tr></tbody></table></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.assetnote.io/2020/09/15/hacking-on-bug-bounties-for-four-years/">https://blog.assetnote.io/2020/09/15/hacking-on-bug-bounties-for-four-years/</a></em></p>]]>
            </description>
            <link>https://blog.assetnote.io/2020/09/15/hacking-on-bug-bounties-for-four-years/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24500198</guid>
            <pubDate>Thu, 17 Sep 2020 01:29:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Voxel Terrain: Storage]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24499261">thread link</a>) | @firloop
<br/>
September 16, 2020 | https://zeux.io/2017/03/27/voxel-terrain-storage/ | <a href="https://web.archive.org/web/*/https://zeux.io/2017/03/27/voxel-terrain-storage/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p><span>

27 Mar 2017

</span></p><p>It‚Äôs been about almost two years since we shipped the first version of <a href="https://blog.roblox.com/2015/06/create-all-new-worlds-with-smooth-terrain/">smooth voxel terrain</a> at <a href="https://www.roblox.com/">Roblox</a>, and with it being live for a while and seeing a lot of incremental improvements I wanted to write about the internals of the technology - this feature required implementing serialization, network replication, collision detection, ray casting, rendering and in-memory storage support and within each area some implementation details ended up being quite interesting. Today we‚Äôll talk about voxel definition and storage.</p>

<!--more-->

<p><img src="https://zeux.io/images/voxstorage_0.jpg" alt="Prototype"></p>

<h2 id="whats-in-a-voxel">What‚Äôs in a voxel?</h2>

<p>Whenever you design a voxel system you have to answer a basic question - what defines a voxel? We wanted our terrain to implicitly define a mostly smooth surface with each point on the surface having a material value, so we could use some kind of contouring algorithm to generate polygons from the surface. Since it was important to have control over the surface in 3 dimensions (heightfield would not cut it), we needed to define the data that represents the surface. During a prototyping phase a few options became clear:</p>

<ul>
  <li>Material. In this model we‚Äôd store just a material (an enum value) per voxel, and rely on neighboring voxels to construct the surface.</li>
  <li>Signed distance field. In this model we‚Äôd store the distance to the surface from the center of the voxel, with sign determining whether the center is outside or inside. This is a very well known model that‚Äôs frequently used to drive algorithms like Marching Cubes. We would also store the material per voxel.</li>
  <li>Hermite data. In this model instead of storing data about voxels, you store data about the intersections between surface and grid edges. Assuming the surface only intersects each voxel edge at most once, you have to store a bit for every edge that defines whether surface intersects this edge, an intersection point (which is defined by a 0..1 scalar), surface normal at the intersection point and the material at the vertices.</li>
  <li>Occupancy. In this model we‚Äôd store a material and the occupancy which defines the amount of matter around the voxel center - 0 meaning roughly that the voxel is completely empty and 1 meaning that the voxel is full.</li>
</ul>

<p><img src="https://zeux.io/images/voxstorage_1.png" alt="Voxel models"></p>

<p>We experimented with the material model and rejected it because it did not give us enough flexibility for tools - our voxels had to be pretty big for the solution to be practical for low end platforms, and thus we needed to be able to represent sub-voxel information (for example, to have a tool that can ‚Äúerode‚Äù terrain on a scale much finer than a voxel size).</p>

<p>Hermite data was very interesting - you could build pretty rich tooling based on boolean operations and allow a fine control over smoothness of the surface. However, what wasn‚Äôt clear was how we would present this to developers in a form of API. We felt like CSG-based API such as ‚Äúsubtract a sphere out of terrain‚Äù was not sufficient - how do you implement a smoothing tool if this is all you have? - and we wanted to give our developers an API that allows full control over the terrain data such that you can implement any tool with it (in fact, all our existing terrain manipulation tools are using the public terrain API and are written in Lua). We didn‚Äôt feel like exposing raw Hermite data was an option due to its complexity so we had to discard this approach.</p>

<p>Signed distance field was more expressive than occupancy model, but ultimately resulted in similarly looking content and ended up having a more complicated mental model (how do I fill voxels that are far away from the surface? Does it even matter? How is the distance clamped? etc.) so we did not feel like it was worth the tradeoff.</p>

<p>Thus we settled on the occupancy model, where every voxel would be defined by a material and occupancy pair. Our definition of occupancy is a bit peculiar because due to how our meshing algorithm works matter ‚Äúoverflows‚Äù from one voxel to another - occupancy 1 does not mean that the voxel looks like a cube, rather it just means that the voxel has as much matter as it can possibly contain. By discarding the Hermite model we lost an ability to precisely define sharp edges on the surface, which we decided to reclaim by using the material value - in addition to the texture that is applied the material also defines how terrain is shaped around the voxel; thus what defines geometry is the material and occupancy in the voxel and in voxel‚Äôs neighborhood. A screenshot from an early prototype shows how different materials with the same occupancy data can produce very different results:</p>

<p><img src="https://zeux.io/images/voxstorage_2.jpg" alt="Material based shaping"></p>

<h2 id="memory-format">Memory format</h2>

<p>To represent a voxel, you need a material (which is an enum) and occupancy (which is a floating-point value in 0..1 range). Material storage is straightforward - we just store an index into the material table, which currently has 23 entries. To conserve space, we store occupancy as a quantized 8-bit value, which adds up to two bytes per voxel.</p>

<p>In a material-occupancy definition there is inherent ambiguity in terms of empty voxel representation - you can define it as occupancy = 0 but then the material choice does not matter; or you can define it as material = air but then the occupancy does not matter. We chose the model with an explicit <code>Air</code> material, and we decode occupancy as <code>(value + 1) / 256.0</code> for non-air materials and 0.0 for air materials (which means that the occupancy is precisely represented in a floating point number which is not true for decoding methods like <code>value / 255.0</code>). Voxels with material = <code>Air</code> and occupancy != 0 are not valid; we make sure they never appear in the grid with simple branchless code:</p>

<div><div><pre><code><span>// make sure occupancy is always 0 for Air material (0)</span>
<span>this</span><span>-&gt;</span><span>material</span> <span>=</span> <span>material</span><span>;</span>
<span>this</span><span>-&gt;</span><span>occupancy</span> <span>=</span> <span>occupancy</span> <span>&amp;</span> <span>(</span><span>-</span><span>static_cast</span><span>&lt;</span><span>int</span><span>&gt;</span><span>(</span><span>material</span><span>)</span> <span>&gt;&gt;</span> <span>31</span><span>);</span>
</code></pre></div></div>

<p>When we originally developed the system, we decided to settle on a simple sparse storage format: all voxels would be stored in chunks 32x32x32 with each chunk represented as a linear 3D array (since each voxel needs two bytes for storage, this adds up to 64 KB per chunk; we also experimented with 16x16x16 chunks but the difference wasn‚Äôt very noticeable), and the entire voxel grid is simply a hash map, mapping the index of the chunk to the chunk contents itself:</p>

<div><div><pre><code><span>HashMap</span><span>&lt;</span><span>Vector3int32</span><span>,</span> <span>Chunk</span><span>&gt;</span> <span>chunks</span><span>;</span>
</code></pre></div></div>

<p>It‚Äôs worth noting that we needed a sparse unbounded storage because our worlds do not have set size limits and you can use voxel content at any point; of course, voxel access in a local region needed to be very fast. A simple two-level storage scheme (hash map + 3D array) turned out to work really well for this - it‚Äôs simple to implement and reason about, and provides an easy way to trade ‚Äúsparseness‚Äù for increased locality by adjusting chunk size. We ended up using this way of storing voxel data throughout the entire engine, with individual systems adjusting the chunk size to match the expected workload better (storage uses 32^3 chunks, network uses 16^3 chunks for initial replication and 4^3 chunks for updates, physics uses 8^3 chunks, rendering first used 32x16x32 chunks and later switched to chunks that increase in size from 16^3 up to 256^3 voxels).</p>

<p>Inside the chunk we ended up storing several 3D arrays - we call a 3D array of voxels ‚Äúbox‚Äù - of different sizes, forming a mipmap pyramid for our voxel content. We have 32^3 Box for the original content, and 16^3, 8^3 and 4^3 mipmaps that contain downsampled voxel data. The extra storage cost of mipmaps ends up being negligible, and the small penalty that we take for updating the mip levels when writing voxels to the voxel grid is well worth it considering that we are using them for Level Of Detail which allows us to render a lot fewer triangles in the distance, as well as for some other optimizations. The downsample algorithm that we use guarantees that if a voxel at a certain level of mip pyramid is filled with <code>Air</code>, all voxels corresponding to this area in the upper levels of the pyramid are also filled with <code>Air</code> - for example, if the bottom mip level has all 64 voxels empty then the entire chunk is empty.</p>

<h2 id="disk-format">Disk format</h2>

<p>When it comes to storing voxels on disk, we wanted a more compact representation than a 3D array. There are a lot of ways to store voxels - we needed an encoding scheme that stored voxels as bytes (without any cross-byte bit packing to avoid efficiency loss of a byte-level lossless compressor - we usually take the encoded voxels and compress them further with LZ4), was reasonably efficient on the types of content we see frequently, and was simple - we could always upgrade the format later if we needed to spend more time doing it.</p>

<p>Our previous experiments in voxel technology suggested that if you take each chunk and do RLE compression on it, efficiently representing runs of voxels with the same contents, it resulted in pretty good compression rates and pretty efficient compression code. Remember, we don‚Äôt need to be optimal - we need to compress data to reduce it in size for storage efficiency, but we do frequently have a LZ codec running on top of that. Running RLE before LZ may seem counter-intuitive, but it significantly reduces the size of data making LZ faster, and in some cases means you don‚Äôt even need to do LZ compression because RLE on its own is enough - voxel data is frequently very regular.</p>

<p>An additional quirk is that each voxel in our system occupies two bytes; we wanted to have a more compact baseline representation so that even if RLE can‚Äôt find runs of sufficient length we still end up with a smaller file. A key realization is that many voxels are completely solid - if you imagine a mountain built from voxels, usually all interior voxels in the mountain only carry material information (that is still meaningful in case you want to dig a hole through the mountain later) - occupancy is usually 1 for these cells. Similarly, for <code>Air</code> we <em>never</em> need to store occupancy - it‚Äôs always zero! With this and RLE in mind, here‚Äôs the encoding we came up with:</p>

<p><img src="https://zeux.io/images/voxstorage_3.png" alt="Byte RLE encoding"></p>

<p>Each run of voxels starts with a byte that ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://zeux.io/2017/03/27/voxel-terrain-storage/">https://zeux.io/2017/03/27/voxel-terrain-storage/</a></em></p>]]>
            </description>
            <link>https://zeux.io/2017/03/27/voxel-terrain-storage/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24499261</guid>
            <pubDate>Wed, 16 Sep 2020 23:25:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Build Your Own PM2.5 / CO2 Air Quality Sensor]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24498836">thread link</a>) | @ahaucnx
<br/>
September 16, 2020 | https://www.airgradient.com/diy/ | <a href="https://web.archive.org/web/*/https://www.airgradient.com/diy/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main">
    <section id="services">
        <div>
            
            
            <p>As part of the AirGradient for Education series, this instruction teaches how to build a powerful PM2.5
                fine dust sensor with AirGradient.</p>

            <p>The sensor will display PM2.5, CO2, Temperature and Humidity on the display and can optionally send
                the data to any server for data logging (e.g. the AirGradient platform or any other cloud backend).</p>

            <p>You will need some basic soldering skills and experiences with microcontrollers are a plus. However, even
                if you are a beginner, don't worry we made our instructions really easy! Also, if you get stuck please
                get in touch with us. We are more than happy to help!</p>

            <p><img src="https://www.airgradient.com/img/diy/ag_diy_complete.jpg" alt="Air Quality Sensor Complete" width="100%">
            </p>

            <h2>Not having the PCB available</h2>
            <p>In case you do not have the AirGradient PCB, you can make your own by using our <a target="_blank" href="https://www.airgradient.com/diy/AirGradient_Gerber_PCBv2.rar">Gerber files </a>.</p>

            <p>Alternatively, you can open the PCB in the <a target="_blank" href="https://easyeda.com/airgradient/diypm">Easyeda editor</a> and order additional PCBs from there.</p>



            <p>You can also build the sensor without the PCB by just soldering the sensor modules with wires directly to the Wemos D1 Mini.</p>
            <p>It will then look like this.</p>

            <p><img src="https://www.airgradient.com/img/diy/no_pcb.png" alt="Air Quality Sensor without PCB" width="100%">
            </p>


            <p>And you can use the following schematics:</p>

            <p><img src="https://www.airgradient.com/img/diy/schematics.png" alt="Air Quality Schematics" width="100%">
            </p>


            <p>We would still strongly recommend you assemble it with a PCB as it will be easier and also more robust.</p>


            <h2>Skills and Equipment required</h2>

            <p>For this project you should be familiar with the following:</p>

            <ul>
                <li><strong data-rich-text-format-boundary="true">Basic soldering skills</strong>. Both the D1 mini
                    microprocessor and some of the components we use like the OLED display need to get the pins soldered
                    onto it. It is not very difficult and you can learn it easily. Look for example on this <a target="_blank" href="https://www.makerspaces.com/how-to-solder/">tutorial</a>.
                </li>
                <li><strong>Soldering iron</strong> and <strong>solder</strong> for above</li>
                <li>A <strong>breadboard</strong> is helpful to fix the components during soldering</li>
                <li>A <strong>computer</strong> (Linux, Mac, or Windows) with the Arduino IDE installed to flash the
                    software onto the D1 mini.
                </li>
                <li>A <strong>micro USB data cable</strong> to connect the D1 Mini to the computer for flashing and
                    later for electricity. <strong><em>IMPORTANT</em></strong>: Many micro USB cables only provide
                    charging but do not allow the data transfer for flashing. So please make sure you have a micro USB
                    DATA cable.
                </li>
            </ul>


            <h2>Components:</h2>

            <ul>
                <li><a href="https://www.aliexpress.com/item/32651747570.html" target="_blank">Wemos D1 Mini</a> USD
                    2.00
                </li>
                <li><a href="https://www.aliexpress.com/item/32800979738.html" target="_blank">Wemos OLED display</a>
                    USD 2.50
                </li>
                <li><a href="https://www.aliexpress.com/item/32944660534.html" target="_blank">Plantower PMS5003 PM
                    Sensor</a> USD 12.50
                </li>
                <li><a href="https://www.aliexpress.com/item/32863793412.html" target="_blank">Senseair S8 CO2
                    Sensor</a> USD 24.70
                </li>
                <li><a href="https://www.aliexpress.com/item/4000246473736.html" target="_blank">SHT30 or SHT31
                    Temperature and Humidity Sensor Module</a> USD 2.00
                </li>
            </ul>

            <p>So you can actually build an AirVisual or Kaiterra Clone for less than USD 50 that should deliver you a
                similar quality of readings. If you just want to measure PM2.5 you can do so for less than USD 20.</p>

            <p>You do not need to put all sensors on the PCB, e.g. if you only want to measure PM2.5 you can just leave
                the CO2 and Temperature/Humidity sensor out.</p>

            <h2>Arduino Software Instructions and flashing of the D1 Mini with the AirGradient firmware</h2>

            <p>All software for the AirGradient DIY sensor is open source and you are free to use it in any way. For
                flashing the D1 Mini microcontroller with the firmware we will be using the well-known Arduino software.
                Please read the following blog post on how to install the Arduino software and also on how to install
                the D1 Mini board and the AirGradient Arduino library.</p>

            <p>
                <a href="https://www.airgradient.com/blog/basic-setup-skills-and-equipment-needed-to-build-our-airgradient-diy-sensor/" target="_blank">AirGradient Arduino Software Setup Instructions</a></p>

            <h2>Flashing of the D1 Mini with the AirGradient firmware</h2>

            <p>Once you have the Arduino Software setup for the D1 Mini, you can flash it with the AirGradient
                firmware.</p>

            <ul>
                <li>Go to Tools, Manage Libraries, and then search for AirGradient and install the AirGradient
                    library.
                </li>
                <li>Once it is installed, go to File, Example, AirGradient and select the PM OLED code</li>
                <li><strong>Read the instructions on top of the example code</strong> and install the additional
                    libraries and set the true/false for the sensors you are using
                </li>
                <li>Then flash this code the same way you flashed the BLINK example</li>
                <li>Once you have successfully uploaded the code you can continue building the hardware</li>
            </ul>

            <h2>Soldering the Components</h2>

            <p>Now that you have the firmware flashed, you can solder the components onto the PCB. Please make sure you
                solder the pins in the correct direction. We recommend you start in the following order:</p>

            <h3>OLED Display Soldering</h3>

            <p>If you have a breadboard at hand, we recommend that you fix the pins with the breadboard to ensure that
                they are straight as shown on this picture.</p>

            <p><img src="https://www.airgradient.com/img/diy/ag_diy_oled_shield.jpg" alt="Air Quality Display" width="100%">
            </p>

            <h3>Wemos D1 Mini Soldering</h3>

            <p>Put the long female and male pins through the D1 Mini. Nake sure that the female parts are on top of the
                D1 Mini as shown on this immage:</p>

            <p><img src="https://www.airgradient.com/img/diy/ag_diy_wemos_soldering.jpg" alt="Air Quality Wemos D1" width="100%">
            </p>

            <p>Then connect the freshly soldered OLED display into the female pins to better hold them in place. Then
                turn the D1 Mini with the OLED display attached around and solder the pins onto the D1 Mini</p>

            <h3>Wemos D1 Mini Soldering onto PCB</h3>

            <p>The next step is to solder the D1 Mini onto the PCB. Please make sure you solder it the correct way. The
                micro USB port needs to face outwards. You can also compare the PIN labels on the PCB with the ones on
                the D1 Mini</p>

            <p><img src="https://www.airgradient.com/img/diy/ag_diy_wemos_pcb_soldering.jpg" alt="Air Quality Wemos D1" width="100%">
            </p>

            <p>Now depending on what sensor modules you want to use, please proceed as below.</p>

            <h3>Soldering the SHT30/31 Module (Temperature and Humidity)</h3>

            <p>To solder the small pins onto the SHT30/31 module, you can use a breadboard again to fix it into
                place.</p>
            <p>Then put the SHT30/31 module through the corresponding holes on the PCB and solder it onto the board.</p>

            <h3>Soldering the Sensirion S8 Module (CO2 Sensor)</h3>

            <p>To solder the small pins onto the SHT30/31 module, you can use a breadboard again to fix it into
                place.</p>
            <p>Please make sure that the PINS face downwards as can be seen on this image.</p>

            <p><img src="https://www.airgradient.com/img/diy/ag_diy_s8.jpg" alt="Air Quality S8 CO2 Sensor" width="100%">
            </p>

            <p>Then solder the CO2 sensor onto the PCB. It is important that the bottom side of the CO2 has enough air
                flow. So make sure the gap is sufficient. It might be a good idea to put it on a female pin socket but
                you can also solder it directly.</p>


            <h3>Soldering the PMS5003 Module (PMS Sensor)</h3>
            <p>Normally the PMS5003 comes with a cable. As we will solder one end of the cable directly onto the PCB you
                can cut it in half. Then prepare the following four wires as per this image. Please make sure you cut
                the correct wires. </p>

            <p><img src="https://www.airgradient.com/img/diy/ag_diy_pms_cable.jpg" alt="Air Quality PMS Cable" width="100%">
            </p>

            <p>Then solder the cable onto the PCB. Please make sure that you solder the correct cable into the correct
                pin.</p>

            <p><img src="https://www.airgradient.com/img/diy/ag_diy_pms_connector.jpg" alt="Air Quality PMS Connection" width="100%">
            </p>

            <p>After you have soldered the cable onto the PCB connect the PMS5003 with the other end of the cable. Then
                screw the PMS5003 onto the PCB or use double sided tape.</p>

            <h3>Done &amp; Enjoy</h3>

            <p>That's all and you can now connect the D1 Mini with power and you should be able to see the display
                lighting up. If you flashed the Wifi version, you need to connect the D1 Mini to the wifi. To do this
                open youw Wifi Settings on the phone and look for a hot spot called "AirGradient xxx". Then connect to
                it and enter your Wifi network credentials. It will then connect to Wifi and start displaying and
                sending the air quality data.</p>

            <p>If there are any issues, you can double check this tutorial and also the images. If you still have
                problems, please feel free and get in touch with us!</p>



<!--            <h3>Get more AirGradient PCBs</h3>-->

<!--            <p>If you want to build more sensors, you can either directly order the PCBs or contact us and purchase them-->
<!--                for a small fee.</p>-->

            <h3>Solutions for Schools</h3>

            <p>AirGradient offers a sophisticated <a href="https://www.airgradient.com/schools/" target="_blank">Air
                Quality Monitoring Solution for Schools</a>. You can connect these DIY sensors to our platform,
                integrate with many exosting brands or use our professional AirGradient sensor.</p>


            <p>
                <video width="100%" poster="https://www.airgradient.com/video/preview1.png" controls="">
                    <source src="https://www.airgradient.com/video/airgradient-schools.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>

            </p>

            <p>If you are intersted for a free trial, please contact us.</p>

            <h3>MIT License</h3>

            <p>The AirGradient DIY sensor's hardware and software is Open Source and licensed under the MIT license. So
                feel free to use it any way you like! However we would be happy to hear from you and also appreciate any
                link back to our page.</p>

            <p>Copyright 2020 AirGradient</p>

            <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software
                and associated documentation files (the "Software"), to deal in the Software without
                restriction, including without limitation the rights to use, copy, modify, merge, publish,
                distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the
                Software is furnished to do so, subject to the following conditions:</p>

            <p> The above copyright notice and this permission notice shall be included in all copies or
                substantial portions of the Software.</p>

            <p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING
      ‚Ä¶</p></div></section></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.airgradient.com/diy/">https://www.airgradient.com/diy/</a></em></p>]]>
            </description>
            <link>https://www.airgradient.com/diy/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24498836</guid>
            <pubDate>Wed, 16 Sep 2020 22:39:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[On Secure-Shell Security]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24498784">thread link</a>) | @mooreds
<br/>
September 16, 2020 | https://sysdogs.com/on-secure-shell-security/ | <a href="https://web.archive.org/web/*/https://sysdogs.com/on-secure-shell-security/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><div><div><article id="post-5785">
<div>
<div>
<p>It is 2020, and we can say for sure, that <em>ssh-server</em> is still one of the most popular services on Linux systems. During various meetings, I was often asked: <em>How to secure SSH?&nbsp; </em>Even though this question seems trivial, it is not. There are a lot of things to remember to accomplish well-designed service security. Secure shell is used not only for a remote-shell, <em>per se</em>. Many other technologies depend on it, for various reasons. For example:</p>
<ul><li>Git to download and push the code.&nbsp;<span id="eb462557-2983-4179-9c24-ea9a947c5da3" data-items="[&quot;2050246254&quot;]" contenteditable="false">‚Äã[1]‚Äã</span></li><li>Ansible to apply tasks. <span id="d575a00a-c8b1-4fb1-89ce-1e71d53d95d8" data-items="[&quot;2756985050&quot;]" contenteditable="false">‚Äã[2]‚Äã</span></li><li>Cloudera for installation procedures. <span id="51d860cf-fd45-4b09-b73b-ca4df154d347" data-items="[&quot;1280041206&quot;]" contenteditable="false">‚Äã[3]‚Äã</span><br>(Do not ask us, we do not understand it too.)&nbsp;&nbsp;</li></ul>
<p>I have decided to answer the above question once and forever, and always refer to this document, trying to keep it up-date and consistent with current security practices. The purpose of this post is to answer the question: <em>How to secure SSH?</em> It is a comprehensive document for <em>infosec</em> and <em>devops</em> teams, that will guide them through all known best-practices and hardening rules.</p>
<h2>Server</h2>
<p>This paragraph focuses on secure-shell server risks assesment, hardening practices and configuration best-practices. The server configuration is mostly put at <code>/etc/sshd/sshd_config</code>. </p>
<hr>
<h3><strong>Contest the need&nbsp;</strong></h3>
<p>The first and the most basic question the Reader should ask himself: <em>Is there even a need for an OpenSSH server at all, for my specific use-case?</em> At the time of writing this article, it is not uncommon to build fully declarative, golden-image infrastructures. We have a wide set of serverless services and technologies that only run a process inside the container. I would say, for sure, that the majority of the infrastructures we, as @sysdogs, provision for our customers, do not have <em>OpenSSH</em> enabled at all. (You can always <a href="https://sysdogs.com/contact/">contact us</a>, if you want to know, how we do it.) </p>
<p>Another perfect example for disabled ssh-server is a local-workstation.<br>There is no need for a secure-shell server on a local laptop, for instance.</p>
<hr>
<h3>Management interfaces-only</h3>
<p>While reading a variety of resources, like <em>Security Technical Implementation Guidelines</em>, they always mark&nbsp; access management as the most crucial part, and top priority. It is required to bind the server only to the interface that is trusted.</p>
<ul><li>For Enterprise infrastructures virtual-machines can have their own management interface with proper <code>firewalld</code> rules. <span id="ff61a54c-2d19-493d-a01c-883274db1866" data-items="[&quot;3975247616&quot;]" contenteditable="false">‚Äã[4]‚Äã</span></li><li>For virtual private servers, we can align this rule to the trusted subset of public addresses that are whitelisted in the firewall.&nbsp;</li><li>In the Cloud environments, we can build a specific security group that defines the access to the server or use other cloud services, like DigitalOcean Firewall. ‚Äã<span id="bbb71312-611f-4a8e-9184-57aaeccfafcd" data-items="[&quot;1459351913&quot;]" contenteditable="false">‚Äã[5]‚Äã</span> <span id="8a1875df-b48b-4a34-ad28-5c296e754e33" data-items="[&quot;4020271495&quot;]" contenteditable="false">‚Äã[6]‚Äã</span></li></ul>
<p><code><strong>Listing.</strong></code> <code>firewalld</code> trusted zone set on interface <code>eth1</code>.</p>
<pre><code>firewall-cmd --set-default-zone=drop
firewall-cmd --zone=trusted --change-interface=eth1 --permanent
firewall-cmd --zone=trusted --add-service=ssh --permanent</code></pre>
<hr>
<h3>Mandatory Access Control ‚Äì SELinux</h3>
<p>I am the guy, that would do <code>setenforce 1</code> even if it was already set to <code>1</code>.<br>Just in case. To be sure. Being absolutely honest, I strongly believe SELinux is one of the most helpful services in the Linux world to improve and harden your operating system.</p>
<p>I have read a lot of documentations and tutorials that recommend the end-user to disable SELinux or AppArmor. I completely understand their authors. They told you to do that, because it simplifies the process of software installation and removes the burden of hardening. On the other hand, I fully believe it is like getting your house alarm wrongly configured, getting upset because of the false-positives, then disabling it for the good feeling of yourself.</p>
<p><code><strong>Listing.</strong></code> Enabled SELinux and labeled sshd process.</p>
<pre><code>[<a href="https://sysdogs.com/cdn-cgi/l/email-protection" data-cfemail="3f4d50504b7f53505c5e5357504c4b">[email&nbsp;protected]</a> ~]# sestatus
SELinux status:                 enabled
SELinuxfs mount:                /sys/fs/selinux
SELinux root directory:         /etc/selinux
Loaded policy name:             targeted
Current mode:                   enforcing
Mode from config file:          enforcing
Policy MLS status:              enabled
Policy deny_unknown status:     allowed
Memory protection checking:     actual (secure)
Max kernel policy version:      31
[<a href="https://sysdogs.com/cdn-cgi/l/email-protection" data-cfemail="72001d1d06321e1d11131e1a1d0106">[email&nbsp;protected]</a> ~]#</code></pre>
<pre><code>[<a href="https://sysdogs.com/cdn-cgi/l/email-protection" data-cfemail="75071a1a0135191a1614191d1a0601">[email&nbsp;protected]</a> ~]# netstat -pnltuZ | grep ":22"
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      696/sshd             system_u:system_r:sshd_t:s0-s0:c0.c1023
tcp6       0      0 :::22                   :::*                    LISTEN      696/sshd             system_u:system_r:sshd_t:s0-s0:c0.c1023
[<a href="https://sysdogs.com/cdn-cgi/l/email-protection" data-cfemail="15677a7a6155797a7674797d7a6661">[email&nbsp;protected]</a> ~]#</code></pre>
<hr>
<div><figure><img src="https://sysdogs.com/wp-content/uploads/2020/08/this-is-fine.png" alt="" width="404" height="597"></figure></div>
<hr>
<h3>Use <code>Protocol 2</code></h3>
<p>Sincerely, I have never seen any <em>secure-shell</em> server with enabled <code>Protocol&nbsp;1</code>. To maintain the state of the art and comprehensiveness of this article, it is important to note it here, that it is insecure and it is not recommended to use <code>Protocol 1</code>.&nbsp; It has a set of vulnerabilities and problems with security. <code>Protocol 1</code> support was removed in RHEL7.4.</p>
<p><code><strong>Listing.</strong></code> <code>sshd</code> configuration parameter for <code>Protocol</code>.</p>
<pre><code>Protocol 2</code></pre>
<hr>
<h3>Use <code>tcp/22</code></h3>
<p>I have seen a lot of write-ups that recommend using a different port than <code>tcp/22</code>. I completely disagree with this argument.&nbsp; It is not very difficult to scan all possible ports on the target.&nbsp; Secondly, security by obscurity <strong>always</strong> leads to something weird. By definition, OpenSSH always presents itself first. Last, but not least; using SELinux, you are forced to run the secure-shell server on <code>tcp/22</code>.</p>
<p><code><strong>Listing.</strong></code> Port configuration.</p>
<pre><code>Port 22</code></pre>
<p><code><strong>Listing.</strong></code> sshd listening on <code>tcp/22</code>.</p>
<pre><code>[<a href="https://sysdogs.com/cdn-cgi/l/email-protection" data-cfemail="4634292932062a2925272a2e293532">[email&nbsp;protected]</a> ~]# ss -pnltu | grep 22
tcp     LISTEN   0        128              0.0.0.0:22            0.0.0.0:*       users:(("sshd",pid=696,fd=4))
tcp     LISTEN   0        128                 [::]:22               [::]:*       users:(("sshd",pid=696,fd=6))
[<a href="https://sysdogs.com/cdn-cgi/l/email-protection" data-cfemail="8af8e5e5fecae6e5e9ebe6e2e5f9fe">[email&nbsp;protected]</a> ~]#</code></pre>
<hr>
<div><figure><img src="https://i1.wp.com/imgs.xkcd.com/comics/code_talkers.png?zoom=2" alt=""></figure></div>
<hr>
<h3>&nbsp;Do not use <code>tcpwrapperd</code></h3>
<p>A set of known Linux websites still recommend using tcp-wrappers as another security layer for sshd. I think it is wrong.&nbsp;</p>
<p>The very first argument for that is that <code>tcpwrappers</code> seems to be a deprecated technology. <span id="974356e0-6dbc-4a2e-8917-dbf1fd443e41" data-items="[&quot;2776761352&quot;]" contenteditable="false">‚Äã[7]‚Äã</span> It was released over 20 years ago (8 April 1997) and does not seem to be developed anymore. Another factor is that, through this deprecation, maintenance of another security layer, may in paradox add another attack vector for the system and networking.&nbsp; The modern firewalls, intrusion detection systems and possibilities of isolation may completely replace tcp-wrappers functionalities. In the end, fresh operating systems do not link <code>libwrapd</code> to <code>sshd</code>.</p>
<p><code><strong>Listing.</strong></code> No <code>tcpwrappersd</code> library linked to <code>sshd</code> binary on <code>Centos/8</code>.</p>
<pre><code>[<a href="https://sysdogs.com/cdn-cgi/l/email-protection" data-cfemail="40322f2f34002c2f23212c282f3334">[email&nbsp;protected]</a> ~]# ldd /sbin/sshd
	linux-vdso.so.1 (0x00007fff47b1a000)
	libfipscheck.so.1 =&gt; /lib64/libfipscheck.so.1 (0x00007f107113a000)
	libaudit.so.1 =&gt; /lib64/libaudit.so.1 (0x00007f1070f10000)
	libpam.so.0 =&gt; /lib64/libpam.so.0 (0x00007f1070d00000)
	libsystemd.so.0 =&gt; /lib64/libsystemd.so.0 (0x00007f10709bc000)
	libcrypto.so.1.1 =&gt; /lib64/libcrypto.so.1.1 (0x00007f10704d9000)
	libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f10702d5000)
	libutil.so.1 =&gt; /lib64/libutil.so.1 (0x00007f10700d1000)
	libz.so.1 =&gt; /lib64/libz.so.1 (0x00007f106feba000)
	libcrypt.so.1 =&gt; /lib64/libcrypt.so.1 (0x00007f106fc91000)
	libresolv.so.2 =&gt; /lib64/libresolv.so.2 (0x00007f106fa7a000)
	libselinux.so.1 =&gt; /lib64/libselinux.so.1 (0x00007f106f84f000)
	libgssapi_krb5.so.2 =&gt; /lib64/libgssapi_krb5.so.2 (0x00007f106f5ff000)
	libkrb5.so.3 =&gt; /lib64/libkrb5.so.3 (0x00007f106f30f000)
	libk5crypto.so.3 =&gt; /lib64/libk5crypto.so.3 (0x00007f106f0f3000)
	libcom_err.so.2 =&gt; /lib64/libcom_err.so.2 (0x00007f106eeef000)
	libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f106eb2d000)
	libcap-ng.so.0 =&gt; /lib64/libcap-ng.so.0 (0x00007f106e927000)
	libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f106e707000)
	librt.so.1 =&gt; /lib64/librt.so.1 (0x00007f106e4fe000)
	liblzma.so.5 =&gt; /lib64/liblzma.so.5 (0x00007f106e2d7000)
	liblz4.so.1 =&gt; /lib64/liblz4.so.1 (0x00007f106e0c0000)
	libcap.so.2 =&gt; /lib64/libcap.so.2 (0x00007f106deba000)
	libmount.so.1 =&gt; /lib64/libmount.so.1 (0x00007f106dc60000)
	libgcrypt.so.20 =&gt; /lib64/libgcrypt.so.20 (0x00007f106d944000)
	libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007f106d72c000)
	/lib64/ld-linux-x86-64.so.2 (0x00007f1071613000)
	libpcre2-8.so.0 =&gt; /lib64/libpcre2-8.so.0 (0x00007f106d4a8000)
	libkrb5support.so.0 =&gt; /lib64/libkrb5support.so.0 (0x00007f106d297000)
	libkeyutils.so.1 =&gt; /lib64/libkeyutils.so.1 (0x00007f106d093000)
	libblkid.so.1 =&gt; /lib64/libblkid.so.1 (0x00007f106ce41000)
	libuuid.so.1 =&gt; /lib64/libuuid.so.1 (0x00007f106cc39000)
	libgpg-error.so.0 =&gt; /lib64/libgpg-error.so.0 (0x00007f106ca18000)
[<a href="https://sysdogs.com/cdn-cgi/l/email-protection" data-cfemail="e694898992a68a8985878a8e899592">[email&nbsp;protected]</a> ~]#</code></pre>
<hr>
<h3><strong>Do not accept password-logins</strong></h3>
<p>The only allowed authentication method should be Public-Key authentication. Passwords are way easier to break, brute-force and this configuration limit the attack-vector.</p>
<p><code><strong>Listing.</strong></code> Configuration parameters to disable password logins.</p>
<pre><code>AuthenticationMethods publickey
PasswordAuthentication no
PermitEmptyPasswords no</code></pre>
<hr>
<h3>Do not accept forwarding</h3>
<p><code>X11Forwarding</code> is a Linux mechanism created to expose X11-server into the remote-shell. It very is difficult to imagine the reason to use graphics software on Linux server, <em>per se</em>. That being said, I do only see enabling this as another vector of possible attack, and risk to omit firewalls.</p>
<p>Port-forwarding is the functionality that allows the client to bind local-port to a remote address. It is a very straight and easy way to omit and skip firewall-rules and break compliance.</p>
<p>Agent forwarding is a mechanism of pass</p>
<p><code><strong>Listing.</strong></code> Configuration parameters to disable forwarding.</p>
<pre><code>X11Forwarding no
AllowTcpForwarding no
AllowAgentForwarding no</code></pre>
<hr>
<h3><strong>Minimize <code>MaxSessions</code> and <code>MaxAuthTries</code></strong></h3>
<p>The authorised user should not have any difficulties with logging in successfully.. Of course, there are exceptions to that statement, but, in general, it is safe to assume it should be completely sufficient to have two tries during one connection session. In contrast, the attacker trying to apply brute-force attacks needs as much login tries as possible. Therefore, i think we can all agree, minimizing <code>MaxAuthTries</code> is a good way of hardening.</p>
<p>Another ‚Ä¶</p></div></div></article></div></div></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://sysdogs.com/on-secure-shell-security/">https://sysdogs.com/on-secure-shell-security/</a></em></p>]]>
            </description>
            <link>https://sysdogs.com/on-secure-shell-security/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24498784</guid>
            <pubDate>Wed, 16 Sep 2020 22:32:45 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Twenty Minutes to Learn Go]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24498189">thread link</a>) | @ibraheemdev
<br/>
September 16, 2020 | https://ibraheem.ca/posts/go-in-twenty | <a href="https://web.archive.org/web/*/https://ibraheem.ca/posts/go-in-twenty">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>A lot of thanks goes to <a href="https://fasterthanli.me/about">Amos</a> for inspiring this article with <a href="https://fasterthanli.me/articles/a-half-hour-to-learn-rust">A half-hour to learn Rust</a>. I thought I'd try it out, but instead of Rust, this article will try to explain Go in half an hour.</p>
<p>Instead of focusing on one or two concepts, I'll try to go through as many Go snippets as I can, and explain what the keywords and symbols they contain mean. This article can be used as a cheat sheet for developers familiar with Go, or a tutorial for developers new to Go, but familiar with other languages.</p>
<p>Ready? Go!</p>
<h4 id="packages"><a href="#packages" aria-label="packages permalink"></a><strong>Packages</strong></h4>
<p>Every Go program is made up of packages,</p>
<p>Programs start by running in package <code>main</code>.</p>
<p>You can use external packages by importing them:</p>
<div data-language="go"><pre><code><span>package</span> main

<span>import</span> <span>"fmt"</span></code></pre></div>
<p>You can use exported names in an imported package by using the package name as a qualifier:</p>
<div data-language="go"><pre><code><span>import</span> <span>(</span>
  <span>"fmt"</span>
  <span>"math/rand"</span>
<span>)</span>

fmt<span>.</span><span>Println</span><span>(</span><span>"My favorite number is"</span><span>,</span> rand<span>.</span><span>Intn</span><span>(</span><span>10</span><span>)</span><span>)</span></code></pre></div>
<p>You can create a local alias for any import:</p>
<div data-language="go"><pre><code><span>import</span> <span>(</span>
  formatter <span>"fmt"</span>
<span>)</span>

formatter<span>.</span><span>Println</span><span>(</span><span>""</span><span>)</span> </code></pre></div>
<p>Or use a dot to access it without any qualifier:</p>
<div data-language="go"><pre><code><span>import</span> <span>(</span>
  <span>.</span> <span>"math/rand"</span>
<span>)</span>

<span>Intn</span><span>(</span><span>10</span><span>)</span> </code></pre></div>
<p>A name is exported if it begins with a capital letter. This is similar to <code>public</code> and <code>private</code> in other languages:</p>
<div data-language="go"><pre><code>x <span>:=</span> <span>"hello"</span> 
A <span>:=</span> <span>"hello"</span> </code></pre></div>
<p>Packages can have an <code>init</code> function. This will be executed as soon as the package is imported:</p>
<div data-language="go"><pre><code><span>func</span> <span>init</span><span>(</span><span>)</span> <span>{</span>
  <span>performSideEffects</span><span>(</span><span>)</span>
<span>}</span></code></pre></div>
<h4 id="scope"><a href="#scope" aria-label="scope permalink"></a><strong>Scope</strong></h4>
<p>A pair of brackets declares a block, which has its own scope:</p>
<div data-language="go"><pre><code>
<span>func</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
  x <span>:=</span> <span>"out"</span>
  <span>{</span>
    
    x <span>:=</span> <span>"in"</span>
    <span>println</span><span>(</span>x<span>)</span>
  <span>}</span>
  <span>println</span><span>(</span>x<span>)</span>
<span>}</span></code></pre></div>
<p>A variable defined outside of any function is considered "global". If capitalized, it can be accessed by other packages:</p>
<div data-language="go"><pre><code><span>package</span> mypackage

<span>var</span> Global <span>string</span> <span>=</span> <span>"I am a global variable!"</span></code></pre></div>
<h4 id="variables"><a href="#variables" aria-label="variables permalink"></a><strong>Variables</strong></h4>
<p><code>var</code> declares a variable of a given type:</p>

<p>This can also be written as a single line:</p>

<p>You can specify a variable's type implicitly:</p>

<p>Inside of a function body, this can also be written in short form:</p>

<p>You can declare many variables at the same time:</p>
<div data-language="go"><pre><code><span>var</span> x<span>,</span> y <span>int</span>
x<span>,</span> y <span>=</span> <span>10</span><span>,</span> <span>20</span></code></pre></div>
<p>If you declare a variable without initializing it, it will implicitly be assigned to the zero value of its type:</p>
<div data-language="go"><pre><code><span>var</span> b <span>bool</span>
<span>var</span> x <span>int</span>
<span>var</span> y <span>string</span>
<span>var</span> z <span>[</span><span>]</span><span>int</span>

<span>println</span><span>(</span>b<span>)</span> 
<span>println</span><span>(</span>x<span>)</span> 
<span>println</span><span>(</span>y<span>)</span> 
<span>println</span><span>(</span>z<span>)</span> </code></pre></div>
<h4 id="type-conversions"><a href="#type-conversions" aria-label="type conversions permalink"></a><strong>Type Conversions</strong></h4>
<p>You can convert values between different types:</p>
<div data-language="go"><pre><code><span>var</span> f <span>float64</span> <span>=</span> <span>1</span> 
i <span>:=</span> <span>int</span><span>(</span>f<span>)</span>       </code></pre></div>
<p>Note that this must be done explicitly. Unlike other languages, you cannot pass an <code>int</code> as a <code>float</code> argument and depend on an implicit conversion by the compiler.</p>
<h4 id="constants"><a href="#constants" aria-label="constants permalink"></a><strong>Constants</strong></h4>
<p>Unchanging values can be declared with the <code>const</code> keyword. Constants can be characters, strings, booleans, or numeric values:</p>

<p>You can group the declaration of multiple constants or variables:</p>

<h4 id="iota"><a href="#iota" aria-label="iota permalink"></a><strong>Iota</strong></h4>
<p>The <code>iota</code> keyword represents successive integer constants:</p>
<div data-language="go"><pre><code><span>const</span> <span>(</span>
  zero <span>=</span> <span>iota</span>
  one  <span>=</span> <span>iota</span>
  two  <span>=</span> <span>iota</span>
<span>)</span>
fmt<span>.</span><span>Println</span><span>(</span>zero<span>,</span> one<span>,</span> two<span>)</span> </code></pre></div>
<p>This can be written in short form:</p>
<div data-language="go"><pre><code><span>const</span> <span>(</span>
  zero <span>=</span> <span>iota</span>
  one
  two
<span>)</span>
fmt<span>.</span><span>Println</span><span>(</span>zero<span>,</span> one<span>,</span> two<span>)</span> </code></pre></div>
<p>You can perform operations on an iota:</p>
<div data-language="go"><pre><code><span>const</span> <span>(</span>
  four <span>=</span> <span>iota</span> <span>+</span> <span>4</span>
  five
  six
<span>)</span>

fmt<span>.</span><span>Println</span><span>(</span>four<span>,</span> five<span>,</span> six<span>)</span> </code></pre></div>
<p>And use the blank identifier to skip a value:</p>
<div data-language="go"><pre><code><span>const</span> <span>(</span>
  zero <span>=</span> <span>iota</span>
  <span>_</span>    
  two
  three
<span>)</span>
fmt<span>.</span><span>Println</span><span>(</span>zero<span>,</span> two<span>,</span> three<span>)</span> </code></pre></div>
<p>Iota's are most commonly used to represent enums, which Go does not support natively.</p>
<h4 id="the-blank-identifier"><a href="#the-blank-identifier" aria-label="the blank identifier permalink"></a><strong>The Blank Identifier</strong></h4>
<p>The blank identifier <code>_</code> is an anonymous placeholder. It basically means to throw away something:</p>
<div data-language="go"><pre><code>
<span>_</span> <span>:=</span> <span>42</span>



<span>_</span><span>,</span> <span>_</span> <span>:=</span> <span>getThing</span><span>(</span><span>)</span><span>;</span></code></pre></div>
<p>You can use it to import a package solely for its <code>init</code> function:</p>

<p>Or to avoid compiler errors during development:</p>

<h4 id="looping"><a href="#looping" aria-label="looping permalink"></a><strong>Looping</strong></h4>
<p>Go has only one loop, the <code>for</code> loop. It has three components:</p>
<ul>
<li>The init statement: executed before the first iteration</li>
<li>The condition: evaluated before every iteration</li>
<li>The post statement: executed at the end of every iteration</li>
</ul>
<p>Here's an example:</p>
<div data-language="go"><pre><code>sum <span>:=</span> <span>0</span>
<span>for</span> i <span>:=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>10</span><span>;</span> i<span>++</span> <span>{</span>
  sum <span>++</span>
<span>}</span>
</code></pre></div>
<p>The init and post statements are optional:</p>
<div data-language="go"><pre><code>
yup <span>:=</span> <span>true</span>
<span>for</span> yup <span>{</span>
  <span>println</span><span>(</span><span>"yup!"</span><span>)</span>
<span>}</span></code></pre></div>
<p>An infinite for loop can also be written like this:</p>

<p>You can use break to <code>break</code> out of a loop:</p>
<div data-language="go"><pre><code><span>for</span> <span>{</span>
  <span>if</span> <span>shouldBreak</span><span>(</span><span>)</span> <span>{</span>
    <span>break</span>
  <span>}</span>
<span>}</span></code></pre></div>
<p>And <code>continue</code> to skip to the next iteration</p>
<div data-language="go"><pre><code><span>for</span> i <span>:=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>5</span><span>;</span> i<span>++</span> <span>{</span>
  
  <span>if</span> i <span>==</span> <span>2</span> <span>{</span>
    <span>continue</span>
  <span>}</span>
  <span>print</span><span>(</span>i<span>)</span>
<span>}</span>

</code></pre></div>
<h4 id="control-flow"><a href="#control-flow" aria-label="control flow permalink"></a><strong>Control Flow</strong></h4>
<p>Go's <code>if</code> statements have a similar syntax to its loops:</p>
<div data-language="go"><pre><code>
<span>if</span> <span>1</span> <span>==</span> <span>1</span> <span>{</span>
  <span>println</span><span>(</span><span>"true"</span><span>)</span>
<span>}</span></code></pre></div>
<p><code>if</code> conditions can also have an init statement:</p>
<div data-language="go"><pre><code>
<span>if</span> x <span>:=</span> <span>"hello"</span><span>;</span> x <span>!=</span> <span>nil</span> <span>{</span>
  <span>println</span><span>(</span>x<span>)</span>
<span>}</span>
</code></pre></div>
<p>Go also has <code>else</code> and <code>else if</code> statements:</p>
<div data-language="go"><pre><code><span>if</span> something <span>{</span>
  <span>doSomething</span><span>(</span><span>)</span>
<span>}</span> <span>else</span> <span>if</span> somethingElse <span>{</span>
  <span>doSomethingElse</span><span>(</span><span>)</span>
<span>}</span> <span>else</span> <span>{</span>
  <span>return</span>
<span>}</span></code></pre></div>
<p>If your <code>if - else</code> statement is getting long, switch to a <code>switch</code> statement :)</p>
<div data-language="go"><pre><code><span>switch</span> <span>{</span>
<span>case</span> something<span>:</span>
  <span>doSomething</span><span>(</span><span>)</span>
<span>case</span> somethingElse <span>&gt;</span> <span>10</span><span>:</span>
  <span>doSomethingElse</span><span>(</span><span>)</span>
<span>default</span><span>:</span>
  <span>return</span>
<span>}</span></code></pre></div>
<p>You can also switch on a condition:</p>
<div data-language="go"><pre><code><span>switch</span> x <span>:=</span> <span>2</span><span>;</span> x <span>{</span>

<span>case</span> <span>1</span><span>:</span>
  <span>doSomething</span><span>(</span><span>)</span>

<span>case</span> <span>2</span><span>:</span>
  <span>doSomethingElse</span><span>(</span><span>)</span>

<span>default</span><span>:</span>
  <span>return</span>
<span>}</span></code></pre></div>
<p>You can use <code>fallthrough</code> to fall through to the case below the current case:</p>
<div data-language="go"><pre><code><span>switch</span> <span>1</span> <span>{</span>
<span>case</span> <span>1</span><span>:</span>
    <span>print</span><span>(</span><span>"1"</span><span>)</span>
    <span>fallthrough</span>
<span>case</span> <span>2</span><span>:</span>
    <span>print</span><span>(</span><span>"2"</span><span>)</span>
<span>}</span>

</code></pre></div>
<p>In a switch statement, only the first matched case is executed.</p>
<p>Go also has <em>labels</em> to help manage control flow:</p>

<p>You can jump to a specific label with the <code>goto</code> keyword:</p>
<div data-language="go"><pre><code><span>print</span><span>(</span><span>1</span><span>)</span>


<span>goto</span> Three
<span>print</span><span>(</span><span>2</span><span>)</span>

Three<span>:</span>
<span>print</span><span>(</span><span>3</span><span>)</span>

</code></pre></div>
<p>Labels have a very specific use case. They can make code less readable and should be avoided most of the time.</p>
<h4 id="arrays"><a href="#arrays" aria-label="arrays permalink"></a><strong>Arrays</strong></h4>
<p>In Go, arrays have a fixed length:</p>
<div data-language="go"><pre><code><span>var</span> a <span>[</span><span>2</span><span>]</span><span>string</span> 
a<span>[</span><span>0</span><span>]</span> <span>=</span> <span>"Hello"</span>
a<span>[</span><span>1</span><span>]</span> <span>=</span> <span>"World"</span>
<span>println</span><span>(</span>a<span>)</span> </code></pre></div>
<p>You create arrays using <em>array literals</em>:</p>
<div data-language="go"><pre><code>helloWorld <span>:=</span> <span>[</span><span>2</span><span>]</span><span>string</span><span>{</span><span>"Hello"</span><span>,</span> <span>"World"</span><span>}</span></code></pre></div>
<p>You cannot increase an array beyond its capacity. Doing so will panic:</p>
<div data-language="go"><pre><code>helloWorld <span>:=</span> <span>[</span><span>2</span><span>]</span><span>string</span><span>{</span><span>"Hello"</span><span>,</span> <span>"World"</span><span>}</span>
helloWorld<span>[</span><span>10</span><span>]</span> <span>=</span> <span>"Space"</span>


</code></pre></div>
<p>To get around this issue, Go provides slices.</p>
<h4 id="slices"><a href="#slices" aria-label="slices permalink"></a><strong>Slices</strong></h4>
<p>Slices are more common than arrays. They do not have a fixed length, and are therefore more flexible:</p>
<div data-language="go"><pre><code>nums <span>:=</span> <span>[</span><span>]</span><span>int</span><span>{</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>5</span><span>}</span></code></pre></div>
<p>Slices can also be created with the built-in function <code>make</code>:</p>
<div data-language="go"><pre><code><span>make</span><span>(</span><span>[</span><span>]</span><span>string</span><span>,</span> initialLength<span>)</span>


<span>make</span><span>(</span><span>[</span><span>]</span><span>string</span><span>,</span> initialLength<span>,</span> initialCapacity<span>)</span></code></pre></div>
<p>You can also create a slice by <em>slicing</em> an existing array:</p>
<div data-language="go"><pre><code>nums <span>:=</span> <span>[</span><span>6</span><span>]</span><span>int</span><span>{</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>5</span><span>,</span> <span>6</span><span>}</span>
s <span>:=</span> nums<span>[</span><span>1</span><span>:</span><span>4</span><span>]</span>

fmt<span>.</span><span>Println</span><span>(</span>s<span>)</span>
</code></pre></div>
<p>You can omit the start or end index when slicing an array, so for this array:</p>

<p>These expressions are equivalent:</p>
<div data-language="go"><pre><code>a<span>[</span><span>:</span><span>]</span>
a<span>[</span><span>0</span><span>:</span><span>]</span>
a<span>[</span><span>:</span><span>10</span><span>]</span>
a<span>[</span><span>0</span><span>:</span><span>10</span><span>]</span></code></pre></div>
<p>Modifying the elements of a slice will modify its underlying array:</p>
<div data-language="go"><pre><code>nums <span>:=</span> <span>[</span><span>6</span><span>]</span><span>int</span><span>{</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>5</span><span>,</span> <span>6</span><span>}</span>

s <span>:=</span> nums<span>[</span><span>0</span><span>:</span><span>4</span><span>]</span>
s<span>[</span><span>0</span><span>]</span> <span>=</span> <span>999</span>

fmt<span>.</span><span>Println</span><span>(</span>nums<span>)</span>
</code></pre></div>
<p>Slices are just a fancy way to manage an underlying array. You cannot increase a slice beyond its capacity. Doing so will panic, just like with an array:</p>
<div data-language="go"><pre><code>nums <span>:=</span> <span>[</span><span>]</span><span>int</span><span>{</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>5</span><span>,</span> <span>6</span><span>}</span>
nums<span>[</span><span>20</span><span>]</span> <span>=</span> <span>9</span>


</code></pre></div>
<p>However, Go has built-in functions to make slices feel like arrays, such as the <code>append</code> function, which can be used to add items to the end of a slice:</p>
<div data-language="go"><pre><code>nums <span>:=</span> <span>[</span><span>]</span><span>int</span><span>{</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>5</span><span>}</span>
nums <span>=</span> <span>append</span><span>(</span>nums<span>,</span> <span>6</span><span>)</span>

fmt<span>.</span><span>Println</span><span>(</span>nums<span>)</span>
</code></pre></div>
<p>You can iterate over slices and arrays with <code>range</code>:</p>
<div data-language="go"><pre><code>names <span>:=</span> <span>[</span><span>]</span><span>string</span><span>{</span><span>"john"</span><span>,</span> <span>"joe"</span><span>,</span> <span>"jessica"</span><span>}</span>
<span>for</span> index<span>,</span> name <span>:=</span> <span>range</span> names <span>{</span>
  <span>println</span><span>(</span>index<span>,</span> name<span>)</span>
<span>}</span>



</code></pre></div>
<p>We can use the blank identifier to omit the index or the value from <code>range</code>:</p>
<div data-language="go"><pre><code><span>for</span> <span>_</span><span>,</span> name <span>:=</span> <span>range</span> names


<span>for</span> index<span>,</span> <span>_</span> <span>:=</span> <span>range</span> names
<span>for</span> index <span>:=</span> <span>range</span> names</code></pre></div>
<p>Slices are more complicated than they seem. To understand the inner workings of slices and arrays in detail, check out: <a href="https://blog.golang.org/slices-intro">Go Slices: Usage and Internals</a></p>
<h4 id="maps"><a href="#maps" aria-label="maps permalink"></a><strong>Maps</strong></h4>
<p>Maps are like hashes in ruby or dictionaries in python. You create them like this:</p>
<div data-language="go"><pre><code><span>var</span> m <span>map</span><span>[</span><span>string</span><span>]</span><span>string</span>
m<span>[</span><span>"key"</span><span>]</span> <span>=</span> <span>"value"</span>

x <span>=</span> m<span>[</span><span>"key"</span><span>]</span> </code></pre></div>
<p>Or with a <em>map literal</em>:</p>
<div data-language="go"><pre><code>m <span>:=</span> <span>map</span><span>[</span><span>int</span><span>]</span><span>string</span><span>{</span><span>1</span><span>:</span> <span>"one"</span><span>,</span> <span>2</span><span>:</span> <span>"two"</span><span>}</span></code></pre></div>
<p>Or the <code>make</code> function:</p>
<div data-language="go"><pre><code>m <span>:=</span> <span>make</span><span>(</span><span>map</span><span>[</span><span>int</span><span>]</span><span>string</span><span>)</span></code></pre></div>
<p>You can delete map keys:</p>

<p>Check whether a key is present:</p>
<div data-language="go"><pre><code><span>var</span> m <span>map</span><span>[</span><span>string</span><span>]</span><span>string</span>
m<span>[</span><span>"key"</span><span>]</span> <span>=</span> <span>"value"</span>

x<span>,</span> ok <span>=</span> m<span>[</span><span>"key"</span><span>]</span> 
x<span>,</span> ok <span>=</span> m<span>[</span><span>"doesnt-exist"</span><span>]</span> </code></pre></div>
<p>And range over their keys and values:</p>
<div data-language="go"><pre><code><span>var</span> m <span>=</span> <span>map</span><span>[</span><span>int</span><span>]</span><span>string</span><span>{</span><span>1</span><span>:</span> <span>"one"</span><span>,</span> <span>2</span><span>:</span> <span>"two"</span><span>}</span>
<span>for</span> key<span>,</span> value <span>:=</span> <span>range</span> names <span>{</span>
  <span>println</span><span>(</span>key<span>,</span> value<span>)</span>
<span>}</span>


</code></pre></div>
<h4 id="functions"><a href="#functions" aria-label="functions permalink"></a><strong>Functions</strong></h4>
<p><code>func</code> declares a function.</p>
<p>Here's a void function:</p>
<div data-language="go"><pre><code><span>func</span> <span>greet</span><span>(</span><span>)</span> <span>{</span>
  <span>println</span><span>(</span><span>"Hi there!"</span><span>)</span>
<span>}</span></code></pre></div>
<p>And here's a function that returns an integer:</p>
<div data-language="go"><pre><code><span>func</span> <span>fairDiceRoll</span><span>(</span><span>)</span> <span>int</span> <span>{</span>
  <span>return</span> <span>4</span>
<span>}</span></code></pre></div>
<p>Functions can return multiple values:</p>
<div data-language="go"><pre><code><span>func</span> <span>oneTwoThree</span><span>(</span><span>)</span> <span>(</span><span>int</span><span>,</span> <span>int</span><span>,</span> <span>int</span><span>)</span> <span>{</span>
  <span>return</span> <span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span>
<span>}</span></code></pre></div>
<p>They can also take specified arguments:</p>
<div data-language="go"><pre><code><span>func</span> <span>sayHello</span><span>(</span>name <span>string</span><span>)</span> <span>{</span>
  fmt<span>.</span><span>Printf</span><span>(</span><span>"hello %s"</span><span>,</span> name<span>)</span>
<span>}</span></code></pre></div>
<p>Or an arbitrary number of arguments:</p>
<div data-language="go"><pre><code><span>func</span> <span>variadic</span><span>(</span>nums <span>...</span><span>int</span><span>)</span> <span>{</span>
  <span>println</span><span>(</span>nums<span>)</span>
<span>}</span></code></pre></div>
<p>These are called <em>Variadic Functions</em>. They can be called just like regular functions:</p>

<p>Or you can pass in a slice directly:</p>
<div data-language="go"><pre><code>nums <span>:=</span> <span>[</span><span>]</span><span>int</span><span>{</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>}</span>
<span>variadic</span><span>(</span>nums<span>)</span> </code></pre></div>
<p>If a function takes two or more arguments of the same type, you can group them together:</p>
<div data-language="go"><pre><code><span>func</span> <span>multiply</span><span>(</span>x<span>,</span> y <span>int</span><span>)</span> <span>int</span> <span>{</span>
  <span>return</span> x <span>*</span> y
<span>}</span></code></pre></div>
<p>The <code>defer</code> statement defers the execution of a function until the surrounding function returns:</p>
<div data-language="go"><pre><code><span>defer</span> fmt<span>.</span><span>Print</span><span>(</span><span>"world"</span><span>)</span>
fmt<span>.</span><span>Print</span><span>(</span><span>"hello "</span><span>)</span>

</code></pre></div>
<p>Defer is often used with an anonymous function:</p>
<div data-language="go"><pre><code><span>defer</span> <span>func</span><span>(</span><span>)</span> <span>{</span>
  <span>println</span><span>(</span><span>"I'm done!"</span><span>)</span>
<span>}</span><span>(</span><span>)</span></code></pre></div>
<h4 id="anonymous-functions"><a href="#anonymous-functions" aria-label="anonymous functions permalink"></a><strong>Anonymous Functions</strong></h4>
<p>Go supports anonymous functions. Anonymous functions are useful when you want to define a function inline without having to name it:</p>
<div data-language="go"><pre><code><span>func</span> <span>printNumber</span><span>(</span>getNum <span>func</span><span>(</span><span>)</span> <span>int</span><span>)</span> <span>{</span>
  num <span>:=</span> <span>getNum</span><span>(</span><span>)</span>
  <span>println</span><span>(</span>num<span>)</span>
<span>}</span>

one <span>:=</span> <span>func</span><span>(</span><span>)</span> <span>int</span> <span>{</span> 
  <span>return</span> <span>1</span> 
<span>}</span>
<span>printNumber</span><span>(</span>one<span>)</span>

</code></pre></div>
<p>A function can also return an anonymous function:</p>
<div data-language="go"><pre><code><span>func</span> <span>getOne</span><span>(</span><span>)</span> <span>func</span><span>(</span><span>)</span> <span>int</span> <span>{</span>
  <span>return</span> <span>func</span><span>(</span><span>)</span> <span>int</span> <span>{</span>
    <span>return</span> <span>1</span>
  <span>}</span>
<span>}</span>

one <span>:=</span> <span>getOne</span><span>(</span><span>)</span>
<span>println</span><span>(</span><span>one</span><span>(</span><span>)</span><span>)</span> 

</code></pre></div>
<p>Anonymous functions allow us to dynamically change what a function does at runtime:</p>
<div data-language="go"><pre><code>DoStuff <span>:=</span> <span>func</span><span>(</span><span>)</span> <span>{</span>
  fmt<span>.</span><span>Println</span><span>(</span><span>"Doing stuff!"</span><span>)</span>
<span>}</span>
<span>DoStuff</span><span>(</span><span>)</span>

DoStuff <span>=</span> <span>func</span><span>(</span><span>)</span> <span>{</span>
  fmt<span>.</span><span>Println</span><span>(</span><span>"Doing other stuff."</span><span>)</span>
<span>}</span>
<span>DoStuff</span><span>(</span><span>)</span>


</code></pre></div>
<p>Anonymous functions can form <em>closures</em>. A closure is an anonymous function that references a variable from outside itself:</p>
<div data-language="go"><pre><code>n <span>:=</span> <span>0</span>
counter <span>:=</span> <span>func</span><span>(</span><span>)</span> <span>int</span> <span>{</span>
  n <span>+=</span> <span>1</span>
  <span>return</span> n
<span>}</span>
<span>println</span><span>(</span><span>counter</span><span>(</span><span>)</span><span>)</span>
<span>println</span><span>(</span><span>counter</span><span>(</span><span>)</span><span>)</span>


</code></pre></div>
<p>Note how <code>counter</code> has access to <code>n</code>, even though it was never passed as a parameter.</p>
<h4 id="pointers"><a href="#pointers" aria-label="pointers permalink"></a><strong>Pointers</strong></h4>
<p>Go has pointers. A pointer holds the memory address of a value.</p>

<p>The <code>&amp;</code> operator generates a pointer to its operand:</p>

<p>The <code>*</code> operator denotes the pointer's underlying value:</p>
<div data-language="go"><pre><code>i <span>:=</span> <span>42</span>
p <span>:=</span> <span>&amp;</span>i     
<span>println</span><span>(</span><span>*</span>p<span>)</span> </code></pre></div>
<p>You can use <code>*</code> to modify the original value:</p>

<h4 id="custom-types"><a href="#custom-types" aria-label="custom types permalink"></a><strong>Custom Types</strong></h4>
<p>You can create a type with the <code>type TypeName SourceType</code> syntax:</p>

<p>This is called a <em>ty‚Ä¶</em></p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://ibraheem.ca/posts/go-in-twenty">https://ibraheem.ca/posts/go-in-twenty</a></em></p>]]>
            </description>
            <link>https://ibraheem.ca/posts/go-in-twenty</link>
            <guid isPermaLink="false">hacker-news-small-sites-24498189</guid>
            <pubDate>Wed, 16 Sep 2020 21:29:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What happened to all the non-programmers? (2015)]]>
            </title>
            <description>
<![CDATA[
Score 99 | Comments 118 (<a href="https://news.ycombinator.com/item?id=24497470">thread link</a>) | @harporoeder
<br/>
September 16, 2020 | https://www.benkuhn.net/nonprog/ | <a href="https://web.archive.org/web/*/https://www.benkuhn.net/nonprog/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><p>This week I found myself at yet another dinner party that mysteriously contained only two people who were not involved with the tech industry in some way.</p><p>As I looked around and realized for the hundredth time that I was surrounded by people exactly like me, something inside me snapped. I downloaded the latest <a href="http://www.census.gov/acs/www/data_documentation/public_use_microdata_sample/" target="_blank">American Community Survey microdata</a>, fired up R and started calculating feverishly.</p><p>It turns out that among people who</p><ul><li>are under 35</li><li>live in San Francisco, Berkeley or Oakland</li><li>and have at least a bachelor‚Äôs degree</li></ul><p>about 10% have a computer-related occupation. An additional 5% are employed in some other capacity by a strongly computer-related industry.</p><p>That‚Äôs not <em>nearly</em> large enough to explain how saturated with coders my social groups are. I have plenty of social circles that are (at least nominally) totally different from my work: contra dancers, people interested in effective altruism, folk musicians, friends from college, and so on. And yet I keep finding myself in the middle of a programmer monoculture. Why?</p><p>As <a href="http://xkcd.com/1480/" target="_blank">Randall Munroe recently suggested</a>, suggests, maybe taking up a sport would help expose me to a broader range of people. But which one? Obviously not football, since I‚Äôm barely 150 pounds and don‚Äôt like traumatic brain injuries. Preferably a more elegant sport that doesn‚Äôt require a bunch of awkward equipment. Maybe Ultimate or rock climbing‚Äì</p><p>Wait, crap.</p><p>Part of the problem is that my taste in hobbies is influenced by class lines and subculture in ways that I hadn‚Äôt realized before.<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup> It turns out that even when it‚Äôs totally up to me, most of the things I‚Äôm interested in are strongly associated with a very particular band of socioeconomic status‚Äîa much smaller band than the set of ‚Äúall bachelor‚Äôs degree holders‚Äù in my ACS analysis.</p><p>This stronger selection sneaks in when I try to pick a sport based on things like ‚Äúelegance,‚Äù instead of ‚Äúsize of community‚Äù or ‚Äúwhat I‚Äôve been playing since I was five years old‚Äù or whatever other things people might pick sports for. In fact, just the fact that I‚Äôm interested in doing sports for leisure is associated with class, since it‚Äôs not something that would be so easy for, say, manual laborers or shift workers.</p><p>But I don‚Äôt think socioeconomic selection explains all of it. My parents‚Äô friends were similarly selected, but they didn‚Äôt all have <em>literally the same job</em>, and the ones that did were usually coworkers‚Äînot people they had met socially who bizarrely all happened to work on the same stuff. My friends in other occupations with similar base rates‚Äîsay, school teachers‚Äîdon‚Äôt wonder where all the non-teachers are at social events. And I don‚Äôt even feel like I‚Äôm from a similar subculture to many programmers. What else could be going on?</p><ul><li><p>Maybe that crackpot-sounding stuff about the ‚Äúprogrammer‚Äôs brain‚Äù actually has something to it. Maybe programmers are all drawn to the same activities because those activities are friendly to the programmer‚Äôs innately logical, systematizing and abstract habits of thought.</p></li><li><p>Programmers could talk about programming too much, or smell bad, or something, so people from other professions are less likely to put up with them at social events.</p></li><li><p>Perhaps the various subcultures of programmers are closer together, and more distinct from other subcultures, than I perceive. Maybe ‚Äúprogrammer culture‚Äù is less analogous to other single professions and more analogous to ‚Äúacademic culture‚Äù or ‚Äúhippie culture,‚Äù where it would be more reasonable to have that be your entire social group.</p></li><li><p>Maybe I miscalculated from the ACS data and there are actually way more programmers than the 10% number suggests.</p></li></ul><p>Unless I‚Äôve miscalculated pretty badly, though, it‚Äôs clear that these social bubble effects are way stronger and more tenacious than I would have expected. And this is just one of the axes where it‚Äôs <em>obvious</em> that all the variance is being selected out. I wonder what more subtle facts are being selected for this strongly in my social groups?</p><section role="doc-endnotes"><hr><ol><li id="fn:1" role="doc-endnote"><p>When I lived in Boston, the people I associated with were determined mostly by my parents or my private high school/college, which is plenty enough to explain a monoculture without getting into class effects. <a href="#fnref:1" role="doc-backlink">‚Ü©Ô∏é</a></p></li></ol></section></article></div>]]>
            </description>
            <link>https://www.benkuhn.net/nonprog/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24497470</guid>
            <pubDate>Wed, 16 Sep 2020 20:33:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Rockset: 1B Events in a Day with 1-Second Data Latency]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24497202">thread link</a>) | @box2A1
<br/>
September 16, 2020 | https://rockset.com/blog/rockset-1-billion-events-in-a-day-with-1-second-data-latency/ | <a href="https://web.archive.org/web/*/https://rockset.com/blog/rockset-1-billion-events-in-a-day-with-1-second-data-latency/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><h3>YADB (Yet Another Database Benchmark)</h3>
<p>The world has a plethora of database benchmarks, starting with the <a href="http://pages.cs.wisc.edu/~dewitt/includes/benchmarking/vldb83.pdf">Wisconsin Benchmark</a> which is my favorite. Firstly, that benchmark was from Dr David Dewitt, who taught me Database Internals when I was a graduate student at University of Wisconsin. Secondly, it is probably the earliest conference paper (circa 1983) that I ever read. And thirdly, the results of this paper displeased Larry Ellison so much that he inserted a clause in newer Oracle releases to prevent researchers from benchmarking the Oracle database.</p>
<p>The Wisconsin paper clearly describes how a benchmark measures very specific features of databases, so it follows that as database capabilities evolve, new benchmarks are needed. If you have a database that has new behavior not found in existing databases, then it is clear that you need a new benchmark to measure this new behavior of the database.</p>
<p>Today, we are introducing a new benchmark, RockBench, that does just this. RockBench is designed to measure the most important characteristics of a real-time database.</p>
<h3>What Is a Real-Time Database?</h3>
<p>A real-time database is one that can sustain a high write rate of new incoming data, while at the same time allowing applications to make queries based on the freshest of data. It is different from a transactional database where the most significant characteristic is the ability to perform transactions, which is why TPC-C is the most cited benchmark for transactional databases.</p>
<p>In typical database ACID parlance, a real-time database provides Atomicity and Durability of updates just like most other databases. It supports an eventual Consistency model, where updates show up in query results as quickly as possible. This time lag is referred to as data latency.  A real-time database is one that is designed to minimize data latency.</p>
<p>Different applications need different data latencies, and the ability to measure data latency allows users to choose one real-time database configuration over another based on the needs of their application. RockBench is the only benchmark at present that measures the data latency of a database at varying write rates.</p>
<p>Data latency is different from query latency, which is what is typically used to benchmark transactional databases. We posit that one of the distinguishing factors that differentiates one real-time database from another is data latency. We designed a benchmark called <a href="https://github.com/rockset/rockbench">RockBench</a> that can measure the data latency of a real-time database.</p>
<h3>Why Is This Benchmark Relevant in the Real World?</h3>
<p><strong>Real-time analytics use cases.</strong> There are many decision-making systems that leverage large volumes of streaming data to make quick decisions. When a truck arrives at a loading dock, a fleet management system would need to produce a loading list for the truck by examining delivery deadlines, delay-charge estimates, weather forecasts and modeling of other trucks that are arriving in the near future. This type of decision-making system would use a real-time database. Similarly, a product team would look at product clickstreams and user feedback in real time to determine which feature flags to set in the product. The volume of incoming click logs is very high and the time to gather insights from this data is low. This is another use case for a real-time database. Such use cases are becoming the norm these days, which is why measuring the data latency of a real-time database is useful. It allows users to pick the right database for their needs based on how quickly they want to extract insights from their data streams.</p>
<p><strong>High write rates.</strong> The most critical measurement for a real-time database is the write rate it can sustain while supporting queries at the same time. The write rate could be bursty or periodic, depending on the time of the day or the day of the week. This behavior is like a streaming logging system that can take in large volumes of writes. However, one difference between a real-time database and a streaming logging system is that the database provides a query API that can perform random queries on the event stream. With writing and querying of data, there is always an inherent tradeoff between high write rates and the visibility of data in queries, and this is precisely what RockBench measures.</p>
<p><strong>Semi-structured data.</strong> Most of real-life decision-making data is in semi-structured form, e.g. JSON, XML or CSV. New fields get added to the schema and older fields are dropped. The same field can have multi-typed values. Some fields have deeply nested objects. Before the advent of real-time databases, a user would typically use a data pipeline to clean and homogenize all the fields, flatten nested fields, denormalize nested objects and then write it out it to a data warehouse like Redshift or Snowflake. The data warehouse is then used to gather insights from their data. These data pipelines add to data latency. On the other hand, a real-time database eliminates the need for some of these data pipelines and simultaneously offers lower data latency. This benchmark uses data in JSON format to simulate more of these types of real-life scenarios.</p>
<h3>Overview of RockBench</h3>
<p>RockBench comprises a Data Generator and a Data Latency Evaluator. The Data Generator simulates a real-life event workload, where every generated event is in JSON format and schemas can change frequently. The Data Generator produces events at various write rates and writes them to the database. The Data Latency Evaluator queries the database periodically and outputs a metric that measures the data latency at that instant.  A user can vary the write rate and measure the observed data latency of the system.</p>
<p><img src="https://images.ctfassets.net/1d31s1aajogl/4hh0BRpcquIlrm5cK2ivEf/20edd90be6b0660e2c1689b0da67965d/rockbench-database-test.png" alt="rockbench-database-test">
<em>Multiple instances of the benchmark connect to the database under test</em></p>
<p>The <a href="https://rockset.com/Evaluating_Data_Latency_for_Real_Time_Databases.pdf">Evaluating Data Latency for Real-Time Databases</a> white paper provides a detailed description of the benchmark. The size of an event is chosen to be around 1K bytes, which is what we found to be the sweet spot for many real-life systems. Each event has nested objects and arrays inside it. We looked at a lot of publicly available events streams like Twitter events, stock market events and online gaming events to pick these characteristics of the data that this benchmark uses.</p>
<h3>Results of Running RockBench on Rockset</h3>
<p>Before we analyze the results of the benchmark, let‚Äôs refresh our memory of Rockset‚Äôs <a href="https://rockset.com/blog/aggregator-leaf-tailer-an-architecture-for-live-analytics-on-event-streams/">Aggregator Leaf Tailer</a> (ALT) architecture. The ALT architecture allows Rockset to scale ingest compute and query compute separately. This benchmark measures the speed of indexing in Rockset‚Äôs <a href="https://rockset.com/blog/converged-indexing-the-secret-sauce-behind-rocksets-fast-queries/">Converged Index‚Ñ¢</a>, which maintains an inverted index, a columnar store and a record store on all fields. The benefit of building all indices is that queries are fast because it can leverage any of these pre-built indices. The data latency that we record in our benchmarking is a measure of how fast Rockset can index streaming data. Complete results can be found <a href="https://rockset.com/Evaluating_Data_Latency_for_Real_Time_Databases.pdf">here</a>.</p>
<p><img src="https://images.ctfassets.net/1d31s1aajogl/1q7BFjCAsnbWNb10jzBnlo/3c56104981e2e264b7a788c36962270c/rockbench-rockset-4xl-50.png" alt="rockbench-rockset-4xl-50">
<em>Rockset p50 and p95 data latency using a 4XLarge Virtual Instance at a batch size of 50</em></p>
<p>The first observation is that a Rockset 4XLarge Virtual Instance can support a billion events flowing in every day (approx. 12K events/sec) while keeping the data latency to under 1 second. This write rate is sufficient to support a variety of use cases, ranging from fleet management operations to handling events generated from sensors.</p>
<p>The second observation is that if you have to support a higher write rate, it is as simple as upgrading to the next higher Rockset Virtual Instance. Rockset is scalable, and depending on the amount of resources you dedicate, you can reduce your data latency or support higher write rates. Extrapolating from these benchmark results: an online gaming system that produces 40K events/sec and requires a data latency of 1 second may be satisfied with a Rockset 16XLarge Virtual Instance. Also, migrating from one Rockset Virtual Instance to another does not cause any downtime, which makes it easy for users to migrate from one instance to another.</p>
<p>The third observation is that if you are running on a fixed Rockset Virtual Instance and your write rate increases, the benchmark results show that there is a gradual and linear increase in the data latency until CPU resources are saturated. In all these cases, the compute resource on the leaf is the bottleneck, because this compute is the resource that makes recently written data queryable immediately. Rockset delegates compaction CPU to <a href="https://rockset.com/blog/remote-compactions-in-rocksdb-cloud">remote compactors</a>, but some minimum CPU is still needed on the leaves to copy files to and from cloud storage.</p>
<p>Rockset uses a specialized <a href="https://rockset.com/blog/optimizing-bulk-load-in-rocksdb/">bulk-load</a> mechanism to index stationary data and that can load data at terabytes/hour, but this benchmark is not to measure that functionality. This benchmark is purposely used to measure the data latency of high-velocity data when new data is arriving at a fast rate and needs to be immediately queried.</p>
<h3>Futures</h3>
<p>In its current form, the workload generator issues writes at a specified constant rate, but one of the improvements that users have requested is to make this benchmark simulate a bursty write rate. Another improvement is to add an overwrite feature that overwrites some documents that already exists in the database. Yet another requested feature is to vary the schema of some of the generated documents so that some fields are sparse.</p>
<p>RockBench is designed to be extensible, and we hope that developers in the database community would contribute code to make this benchmark run on other real-time databases as well.</p>
<p>I am thrilled to see the results of RockBench on Rockset. It demonstrates the value of real-time databases, like Rockset, in enabling real-time analytics by supporting streaming ingest of thousands of events per second while keeping data latencies in the low seconds. My hope is that RockBench will provide developers an essential tool for measuring data latency and selecting the appropriate real-time database configuration for their application requirements.</p>
<p><strong>Resources:</strong></p>
<ul>
<li><a href="https://github.com/rockset/rockbench">RockBench GitHub repository</a></li></ul></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://rockset.com/blog/rockset-1-billion-events-in-a-day-with-1-second-data-latency/">https://rockset.com/blog/rockset-1-billion-events-in-a-day-with-1-second-data-latency/</a></em></p>]]>
            </description>
            <link>https://rockset.com/blog/rockset-1-billion-events-in-a-day-with-1-second-data-latency/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24497202</guid>
            <pubDate>Wed, 16 Sep 2020 20:15:23 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How is 10k written in Roman Numerals? ‚Äì Integers.co]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24496805">thread link</a>) | @kamaraju
<br/>
September 16, 2020 | https://www.integers.co/questions-answers/how-is-10000-written-in-roman-numerals.html | <a href="https://web.archive.org/web/*/https://www.integers.co/questions-answers/how-is-10000-written-in-roman-numerals.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div>
        <div>
            
            <!-- Integers.co Responsive -->
            <h2>Why is 10,000 written in Roman Numerals as <label>X</label>?</h2>
            <p>Roman Numerals are an ancient way of writing numbers that originated in ancient Rome.</p>
            <p>It is still used today, but mainly for date purposes (like with Super Bowl L for Super Bowl 50) or for movie
                series (Star Wars IV - A New Hope).</p>

            <p>Here are the main symbols that are used:</p>

            <h3>Basic Roman Numeral Symbols</h3>
            <div>
                <table>
                    <tbody><tr>
                        <td>1</td>
                        <td>5</td>
                        <td>10</td>
                        <td>50</td>
                        <td>100</td>
                        <td>500</td>
                        <td>1,000</td>
                    </tr>
                    <tr>
                        <td><strong>I</strong></td>
                        <td><strong>V</strong></td>
                        <td><strong>X</strong></td>
                        <td><strong>L</strong></td>
                        <td><strong>C</strong></td>
                        <td><strong>D</strong></td>
                        <td><strong>M</strong></td>
                    </tr>
                </tbody></table>
            </div>
            <h3>Basic Combinations</h3>
            <div>
                <table>
                    <tbody><tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>5</td>
                        <td>6</td>
                        <td>7</td>
                        <td>8</td>
                        <td>9</td>
                    </tr>
                    <tr>
                        <td><strong>I</strong></td>
                        <td><strong>II</strong></td>
                        <td><strong>III</strong></td>
                        <td><strong>IV</strong></td>
                        <td><strong>V</strong></td>
                        <td><strong>VI</strong></td>
                        <td><strong>VII</strong></td>
                        <td><strong>VIII</strong></td>
                        <td><strong>IX</strong></td>
                    </tr>
                </tbody></table>
            </div>
            <div>
                <table>
                    <tbody><tr>
                        <td>10</td>
                        <td>20</td>
                        <td>30</td>
                        <td>40</td>
                        <td>50</td>
                        <td>60</td>
                        <td>70</td>
                        <td>80</td>
                        <td>90</td>
                    </tr>
                    <tr>
                        <td><strong>X</strong></td>
                        <td><strong>XX</strong></td>
                        <td><strong>XXX</strong></td>
                        <td><strong>XL</strong></td>
                        <td><strong>L</strong></td>
                        <td><strong>LX</strong></td>
                        <td><strong>LXX</strong></td>
                        <td><strong>LXXX</strong></td>
                        <td><strong>XC</strong></td>
                    </tr>
                </tbody></table>
            </div>
            <div>
                <table>
                    <tbody><tr>
                        <td>100</td>
                        <td>200</td>
                        <td>300</td>
                        <td>400</td>
                        <td>500</td>
                        <td>600</td>
                        <td>700</td>
                        <td>800</td>
                        <td>900</td>
                    </tr>
                    <tr>
                        <td><strong>C</strong></td>
                        <td><strong>CC</strong></td>
                        <td><strong>CCC</strong></td>
                        <td><strong>CD</strong></td>
                        <td><strong>D</strong></td>
                        <td><strong>DC</strong></td>
                        <td><strong>DCC</strong></td>
                        <td><strong>DCCC</strong></td>
                        <td><strong>CM</strong></td>
                    </tr>
                </tbody></table>
            </div>
            <h3>Large Numbers</h3>
            <p>For numbers over 1,000, you put a dash over the top of the Roman Numeral to indicate multiplied by 1,000.</p>
            <div>
                <table>
                    <tbody><tr>
                        <td>5,000</td>
                        <td>10,000</td>
                        <td>50,000</td>
                        <td>100,000</td>
                        <td>500,000</td>
                        <td>1,000,000</td>
                    </tr>
                    <tr>
                        <td><span><strong>V</strong></span></td>
                        <td><span><strong>X</strong></span></td>
                        <td><span><strong>L</strong></span></td>
                        <td><span><strong>C</strong></span></td>
                        <td><span><strong>D</strong></span></td>
                        <td><span><strong>M</strong></span></td>
                    </tr>
                </tbody></table>
            </div>
            <h2>How is 10,000 converted to Roman Numerals?</h2>
            <p>To convert 10,000 to Roman Numerals we need to split it up into place values (ones, tens, hundreds, etc.), like this:</p>
            <div>
                <table>
                    <thead>
                    <tr>
                        <th>Place Value</th>
                        <th>Number</th>
                        <th>Roman Numeral</th>
                    </tr>
                    </thead>
                    <tbody><tr><td>Ten Thousands</td><td>10,000</td><td><label>X</label></td>                </tr></tbody></table>
            </div>
            <p><span>Please note, we skipped place values that equal 0.</span></p>
            <p>You then combine them all together (starting from the top) to get <strong><label>X</label></strong>.</p>
                            <h2>How are the numbers near 10,000 written in Roman Numerals?</h2>
                
                                </div>
    </div>
</div></div>]]>
            </description>
            <link>https://www.integers.co/questions-answers/how-is-10000-written-in-roman-numerals.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24496805</guid>
            <pubDate>Wed, 16 Sep 2020 19:48:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: How many U.S. cities can you name?]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24496685">thread link</a>) | @iafisher
<br/>
September 16, 2020 | https://iafisher.com/projects/cities/usa | <a href="https://web.archive.org/web/*/https://iafisher.com/projects/cities/usa">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div class="page">
  <p>
    Warning!
    <span id="warning-message"></span>
  </p>
  <p>
    Sorry, an error occurred.
    <span id="error-message"></span>
  </p>

  
<p>
  <strong>New!</strong>
  <a href="https://iafisher.com/projects/cities/asia">How many Asian cities can you name?</a>
</p>


  
  

  
  <svg id="map" width="960" height="600"></svg>
  

  

  <div id="stats-box">
    
<p>
  You named <span id="stat-total">0 cities</span>, with a total population of <span id="stat-pop">0</span> (<span id="stat-pop-perc">0.00</span>% of the national urban population in 2010).
</p>


    <p id="population-radio">
      Bubble size:
      <label>
        
        by population
      </label>
      <label>
        
        normal
      </label>
      <label>
        
        small
      </label>
      <label>
        
        tiny
      </label>
    </p>

    

    
<p id="try-it">
  Like this game? Try <a href="https://iafisher.com/projects/cities/europe">the Europe map</a>!
</p>




    

    
  </div>
</div></div>]]>
            </description>
            <link>https://iafisher.com/projects/cities/usa</link>
            <guid isPermaLink="false">hacker-news-small-sites-24496685</guid>
            <pubDate>Wed, 16 Sep 2020 19:38:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Dark Theme for Jupyter Lab]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24496408">thread link</a>) | @DataCrayon
<br/>
September 16, 2020 | https://datacrayon.com/posts/tools/jupyter/theme-purple-please-for-jupyter-lab/ | <a href="https://web.archive.org/web/*/https://datacrayon.com/posts/tools/jupyter/theme-purple-please-for-jupyter-lab/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content" role="main">
    <div>
        <!--Body content-->
        
        
<article itemscope="itemscope" itemtype="http://schema.org/Article"><div>
    
        <div>
            <div>
            <div>
                <div>
                <div>
                    <h2>Get the Books</h2>
                    <p>
                    Enjoying these notebooks and want to support the work? Check out the practical books on Data Science, Visualisation, and Evolutionary Algorithms.
                    </p>
                    <p><a href="https://datacrayon.com/shop/product/data-is-beautiful/">Get the books</a>
                </p></div>
                <p><img src="https://datacrayon.com/images/datacrayon/shop/covertops.jpg">
</p>
                </div>
            </div>
            </div>
        </div>
    
    
    <header>

        
        

    </header><div itemprop="articleBody text">
    <!--% if post.meta('has_toc'):-->
    

        

        


    
    
                
                    

                        






    <div>

<div>

<div>
<div>
<h2 id="Installation-through-Jupyter-Lab">Installation through Jupyter Lab<a href="#Installation-through-Jupyter-Lab">¬∂</a>
</h2>
<p>You can install it through the Jupyter Lab Extension Manager UI, or with the following command:</p>
<p><code>jupyter labextension install @shahinrostami/theme-purple-please</code></p>
<h2 id="GitHub-Repository">GitHub Repository<a href="#GitHub-Repository">¬∂</a>
</h2>
<p>You can navigate and download the source code at <a href="https://github.com/shahinrostami/theme-purple-please">https://github.com/shahinrostami/theme-purple-please</a>.</p>

</div>
</div>
</div>

</div>




                    <div id="support-this-work-bottom">
                                    <p>Support this work</p>
                                    <p>
        You can support this work by <a href="https://datacrayon.com/shop/">getting the e-books</a>. This notebook will always be available for free in its online format.
        </p>
                                </div>
                            </div>
                            <!-- Modal -->

                            <!-- Modal -->
</div>
                    </article><!--End of body content-->
</div>
</div></div>]]>
            </description>
            <link>https://datacrayon.com/posts/tools/jupyter/theme-purple-please-for-jupyter-lab/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24496408</guid>
            <pubDate>Wed, 16 Sep 2020 19:19:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to Test Complex Data in Python]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24496317">thread link</a>) | @miguendes
<br/>
September 16, 2020 | https://miguendes.me/how-to-test-complex-data-in-python-ckf4e1gso006vpos1gh6fhsh4 | <a href="https://web.archive.org/web/*/https://miguendes.me/how-to-test-complex-data-in-python-ckf4e1gso006vpos1gh6fhsh4">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="text"><p>In this tutorial, we'll learn how to test complex data structures in Python. Examples of such data include images, nested dictionaries, dictionaries of <em>numpy</em> arrays and even file contents. Learning how to test complex data is a very helpful skill, especially if you work in Data Science, Machine Learning or other kinds of scientific programming.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#creating-a-demo-app">Creating a Demo App</a><ul>
<li><a href="#testing-nested-dictionaries">Testing Nested Dictionaries</a></li>
<li><a href="#testing-images">Testing Images</a></li>
<li><a href="#testing-dictionaries-of-numpy-arrays">Testing Dictionaries of Numpy Arrays</a></li>
<li><a href="#testing-files">Testing Files</a></li>
</ul>
</li>
<li><a href="#conclusion">Conclusion</a></li>
</ol>
<h2 id="requirements">Requirements</h2>
<p>For this tutorial we'll use <em>Python 3.6+</em>, <em>pytest</em>, <em>poetry</em>, <em>pandas</em>, <em>numpy</em>, <em>PIL</em> and <code>pytest-regressions</code>.</p>
<h2 id="installation">Installation</h2>
<p>To create a new project, we‚Äôll use poetry. If you don‚Äôt know what poetry is and how to use it, please the amazing <a target="_blank" href="https://python-poetry.org/">official docs</a>.</p>
<p>The first step is to create a new directory and initialize the project.</p>
<pre><code>mkdir -p complex_data/app
mkdir -p complex_data/tests
<span>cd</span> complex_data
</code></pre>
<p>Then, you can install all the dependencies required from the <code>pyproject.toml</code> file. </p>
<pre><code>$ cat &lt;&lt;EOF &gt; pyproject.toml
[tool.poetry]
name = "complex_data"
version = "0.1.0"
description = "Sample project to learn how to test complex data in Python"
authors = ["miguendes"]
license = "MIT"

[tool.poetry.dependencies]
python = "^3.7"
pytest = "^6.0.1"
pytest-regressions = "^2.0.1"
numpy = "^1.19.1"
pandas = "^1.1.2"
pillow = "^7.2.0"

[tool.poetry.dev-dependencies]

[build-system]
requires = ["poetry-core&gt;=1.0.0a5"]
build-backend = "poetry.core.masonry.api"
EOF
</code></pre>
<p>Now that we have all setup, let's install the packages. Poetry will take care of the <em>virtualenv</em> creation for you and will install everything there.</p>
<pre><code>poetry install
</code></pre>
<h2 id="creating-a-demo-app">Creating a Demo App</h2>
<p>Now, let‚Äôs create a demo app so we can build tests for it. This demo will be very basic and enough to demonstrate how to test complex data. The concepts can be applied to any domain that deals with a similar type of data.</p>
<p>To start with, we‚Äôll create two files. The first one will be the actual demo implementation. The next one will hold all the test case we are going to build. Alternatively, you can also clone the  <a target="_blank" href="https://github.com/miguendes/tutorials/tree/master/complex_data">project from github</a> .</p>
<pre><code>touch app/__init__.py
touch app/complex_app.py
touch tests/__init__.py
touch tests/test_complex_app.py
</code></pre>
<h3 id="testing-nested-dictionaries">Testing Nested Dictionaries</h3>
<p>A public REST API is a popular way to get data from third party entities. They usually return the data in a <em>json</em> format. And sometimes the data is organized in a deep nested structure. In Python this data will most likely be represented as a dictionary. To exemplify a function that returns a deep dictionary, consider the following example.</p>
<pre><code>
<span><span>def</span> <span>config_data</span>(<span>verbose_desc: str, simple_desc: str</span>) -&gt; dict:</span>
    <span>return</span> {
        <span>"agg_results"</span>: {
            <span>"t1"</span>: [<span>True</span>, <span>False</span>, <span>True</span>, <span>False</span>],
            <span>"nums"</span>: [<span>1.3</span>, <span>3.4</span>, <span>23.456</span>, <span>21.3456</span>],
            <span>"count"</span>: <span>120</span>,
        },
        <span>"sample"</span>: {<span>"desc"</span>: {<span>"verbose"</span>: verbose_desc, <span>"simple"</span>: simple_desc}},
    }
</code></pre>
<p>This function takes two parameters, <code>verbose_desc</code> and  <code>simple_desc</code>, and set it under sample -&gt; desc.
Now, how can we test this function? One way is to test it by inspecting each key-&gt;value pair.</p>
<pre><code>
<span><span>def</span> <span>test_config_data</span>():</span>
    actual = config_data(verbose_desc=<span>"first experiment"</span>, simple_desc=<span>"first"</span>)
    <span>assert</span> actual[<span>"agg_results"</span>][<span>"t1"</span>] == [<span>True</span>, <span>False</span>, <span>True</span>, <span>False</span>]
    <span>assert</span> actual[<span>"agg_results"</span>][<span>"nums"</span>] == [<span>1.3</span>, <span>3.4</span>, <span>23.456</span>, <span>21.3456</span>]
    <span>assert</span> actual[<span>"agg_results"</span>][<span>"count"</span>] == <span>120</span>

    <span>assert</span> actual[<span>"sample"</span>][<span>"desc"</span>][<span>"verbose"</span>] == <span>"first experiment"</span>
    <span>assert</span> actual[<span>"sample"</span>][<span>"desc"</span>][<span>"simple"</span>] == <span>"first"</span>
</code></pre>
<p>If we run the test, we can see that it works, but... You know, it‚Äôs too verbose and error-prone. For example, if we add new keys we will need to update the test to add more <em>assert</em> statements. Also, it doesn‚Äôt scale at all if the dictionary contains large data. So what is the alternative?</p>
<h4 id="pytest-regressions">pytest-regressions</h4>
<p>It turns out there‚Äôs a very interesting <em>pytest</em> plugin that makes this kind of test very easy and simple. With just a few lines of code, you can test this config data.</p>
<pre><code>
<span><span>def</span> <span>test_config_data_with_pytest_regressions</span>(<span>data_regression</span>):</span>
    actual = config_data(verbose_desc=<span>"first experiment"</span>, simple_desc=<span>"first"</span>)
    data_regression.check(actual)
</code></pre>
<p>That's it! The only step needed is using the <code>data_regression</code> fixture and check the actual data returned. <code>pytest-regressions</code> will create a <code>yaml</code> file with the expected data the first time you run the test. Then it will use this file when you call the test again. As a result, if a regression is introduced, the plugin will detect the diff and the test will fail.</p>
<p>When you run the test for the first time, the test will fail and <code>pytest-regressions</code> will store the output in a directory with the name of the test file.</p>
<pre><code>test_complex_app.py::test_config_data_with_pytest_regressions FAILED     [100%]
test_complex_app.py:23 (test_config_data_with_pytest_regressions)
data_regression = &lt;pytest_regressions.data_regression.DataRegressionFixture object at 0x7ff6c4b4f130&gt;

    def test_config_data_with_pytest_regressions(data_regression):
        actual = config_data(verbose_desc="first experiment", simple_desc="first")
&gt;       data_regression.check(actual)
E       Failed: File not found in data directory, created:
E       - /home/miguel/projects/tutorials/complex_data/tests/test_complex_app/test_config_data_with_pytest_regressions.yml
</code></pre>
<p>If you run it again, the test pass.</p>
<pre><code>test_complex_app.py::test_config_data_with_pytest_regressions PASSED     [100%]
</code></pre>
<h3 id="testing-images">Testing Images</h3>
<p>Image manipulation is a very common task in AI. In order to train Machine Learning algorithms, images must be pre-processed. For instance, some algorithms require the image to be in gray-scale. Sometimes, images must be scaled down, or up. In other occasions you might want to do image augmentation, which usually consists in rotating or skewing the image.</p>
<p>Now, let‚Äôs say that we need to resize down an image to 100x100 and convert it to gray as a pre-processing step. We can write a very simple function called <code>convert_image_to_gray</code>. To test this function, we can rely on the great fixture called <code>image_regression</code> provided by <code>pytest-regressions</code>. The following example illustrates that.</p>
<pre><code>
<span><span>def</span> <span>convert_image_to_gray</span>(<span>
    input_path: str, output_path: str, size: Tuple[int, int] = (<span><span>200</span>, <span>200</span></span>)
</span>):</span>
    image = Image.open(input_path)
    gray_image = image.convert(<span>"L"</span>)
    gray_image.thumbnail(size, Image.ANTIALIAS)
    gray_image.save(output_path, <span>"PNG"</span>)
</code></pre>
<p> The test for it is just like this:</p>
<pre><code>
<span><span>def</span> <span>test_convert_image_to_gray</span>(<span>image_regression</span>):</span>
    output_file = Path(<span>"tests/resources/python_logo_gray.png"</span>)
    convert_image_to_gray(
        <span>"tests/resources/python_logo.png"</span>, str(output_file), size=(<span>100</span>, <span>100</span>)
    )
    image_regression.check(output_file.read_bytes(), diff_threshold=<span>1.0</span>)
</code></pre>
<p>And that's it again! No extra setup steps, no complex asserts, just one line.</p>
<h3 id="testing-dictionaries-of-numpy-arrays">Testing Dictionaries of Numpy Arrays</h3>
<p>Another common practice in Data Science is to manipulate <em>numpy</em> arrays. It‚Äôs very usual to have dictionaries composed of string keys and <em>numpy</em> arrays as values. Testing that is just as annoying as testing nested dictionaries. It tends to get worse when the arrays are made up of float numbers.</p>
<p>Again, as our previous examples, let's consider a function that returns a dictionary of <em>numpy</em> arrays.</p>
<pre><code>
<span><span>def</span> <span>element_wise_mult</span>(<span>a: np.array, b: np.array</span>) -&gt; Dict[str, np.array]:</span>
    res = a * b
    <span>return</span> {<span>"res"</span>: res}
</code></pre>
<p>This function just multiplies two 1D <em>numpy</em> arrays and stores the result in a dictionary. To test that we can use <code>num_regression</code> fixture. As you may have guessed, the interface is the same as the other fixtures using the <code>check</code> method. A full test definition goes like this:</p>
<pre><code>
<span><span>def</span> <span>test_elemwise_multi_calculation</span>(<span>num_regression</span>):</span>
    np.random.seed(<span>0</span>)
    a = np.random.randn(<span>6</span>)
    b = np.random.randn(<span>6</span>)
    result = element_wise_mult(a, b)
    num_regression.check(result)
</code></pre>
<h3 id="testing-files">Testing Files</h3>
<p>Python can represent a file object in three categories: raw binary files, buffered binary files and text files.
A binary file can be used to store any kind of binary data such as images, mp3s, videos and so on. A text file, on the other hand, can be a simple <code>.txt</code> or a <code>.html</code>, <code>.md</code> or just your gold old <code>.py</code> script.</p>
<h4 id="binary-file-example">Binary File Example</h4>
<p>The simplest example of binary file would be a function that takes a path string and loads a binary file from disk and returns its bytes. <code>pytest-regression</code> comes with a fixture <code>file_regression</code> that helps a lot when testing file contents.</p>
<pre><code>
<span><span>def</span> <span>read_from_file</span>(<span>path: str</span>) -&gt; bytes:</span>
    <span>with</span> open(path, <span>"rb"</span>) <span>as</span> f:
        <span>return</span> f.read()
</code></pre>
<p>The test goes like this:</p>
<pre><code>
<span><span>def</span> <span>test_read_from_file</span>(<span>file_regression, datadir</span>):</span>
    contents = read_from_file(<span>"tests/resources/data.bin"</span>)
    file_regression.check(contents, binary=<span>True</span>, extension=<span>".bin"</span>)
</code></pre>
<h4 id="text-file-example">Text File Example</h4>
<p>Like I said before, an <code>.html</code> file is just a text file. In this example we'll consider a function that converts an dictionary to a HTML table.</p>
<pre><code>
<span><span>def</span> <span>dict_to_html</span>(<span>data: dict</span>) -&gt; str:</span>
    html = <span>"&lt;table&gt;&lt;tr&gt;&lt;th&gt;"</span> + <span>"&lt;/th&gt;&lt;th&gt;"</span>.join(data.keys()) + <span>"&lt;/th&gt;&lt;/tr&gt;"</span>

    <span>for</span> row <span>in</span> zip(*data.values()):
        html += <span>"&lt;tr&gt;&lt;td&gt;"</span> + <span>"&lt;/td&gt;&lt;td&gt;"</span>.join(row) + <span>"&lt;/td&gt;&lt;/tr&gt;"</span>

    html += <span>"&lt;/table&gt;"</span>

    <span>return</span> html
</code></pre>
<p>And the test...</p>
<pre><code>
<span><span>def</span> <span>test_dict_to_html</span>(<span>file_regression</span>):</span>
    data = {
        <span>"Heights"</span>: [<span>"30"</span>, <span>"12"</span>, <span>"12"</span>],
        <span>"IDs"</span>: [<span>"XXDDUBAB"</span>, <span>"LOPSKSKSS"</span>, <span>"KIOTGGAGA"</span>],
        <span>"Download Count"</span>: [<span>"123"</span>, <span>"34"</span>, <span>"2"</span>],
    }

    html = dict_to_html(data)
    file_regression.check(html, extension=<span>".html"</span>)
</code></pre>
<blockquote>
<p>Well... We could just assert the string returned, right?</p>
</blockquote>
<p>You might be asking. We could just assert the string returned. Yes, that‚Äôs a fair point, however if the string is too big, the test setup will become polluted and overly verbose. As an alternative, we could store it as a file and then load it. Well, that‚Äôs actually what <code>pytest-regressions</code> does, with the benefit of hiding that complexity.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Testing complex data can be tricky and cumbersome. Fortunately, <code>pytest</code> allows great extensibility as plugins. <code>pytest-regression</code> is a non popular but very useful plugin that makes ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://miguendes.me/how-to-test-complex-data-in-python-ckf4e1gso006vpos1gh6fhsh4">https://miguendes.me/how-to-test-complex-data-in-python-ckf4e1gso006vpos1gh6fhsh4</a></em></p>]]>
            </description>
            <link>https://miguendes.me/how-to-test-complex-data-in-python-ckf4e1gso006vpos1gh6fhsh4</link>
            <guid isPermaLink="false">hacker-news-small-sites-24496317</guid>
            <pubDate>Wed, 16 Sep 2020 19:14:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I suspect many task deadlines are designed to force engineers to work for free]]>
            </title>
            <description>
<![CDATA[
Score 263 | Comments 186 (<a href="https://news.ycombinator.com/item?id=24496219">thread link</a>) | @sT370ma2
<br/>
September 16, 2020 | http://misc-stuff.terraaeon.com/articles/engineering-deadlines.html | <a href="https://web.archive.org/web/*/http://misc-stuff.terraaeon.com/articles/engineering-deadlines.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>http://misc-stuff.terraaeon.com/articles/engineering-deadlines.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24496219</guid>
            <pubDate>Wed, 16 Sep 2020 19:05:22 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Downsampling Data with Postgres Window Functions]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24496033">thread link</a>) | @christoomey
<br/>
September 16, 2020 | https://ctoomey.com/writing/downsampling-data-with-postgres-window-functions/ | <a href="https://web.archive.org/web/*/https://ctoomey.com/writing/downsampling-data-with-postgres-window-functions/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        
  <p><a href="https://www.postgresql.org/docs/current/tutorial-window.html">SQL window functions</a> are one of those topics that never quite clicked for me
in the abstract, but I‚Äôve been able to take advantage of them on a few recent
projects and wanted to share some of what I‚Äôve learned.</p>

<p>As context for this particular example, I‚Äôve been in the habit of weighing
myself daily for the past ~11 years. Aside from providing a <em>very</em> interesting
data set, it just ends up being a lot of data to query, serialize, transmit, and
then render on the client. I‚Äôve got just over 4000 records currently, and I
recently wanted to add an overview chart that would show the full history
below the normal chart that shows a smaller subset of the data.</p>

<p><img src="https://d33wubrfki0l68.cloudfront.net/1276cbb84af72431a462be52b35a6f9fe821c691/4d390/assets/images/downsample-example-1276cbb8.png" alt="Downsample example"></p>

<p>This image shows the overview graph (the one on the bottom) as it exists now, downsampled to
include every 10th record, but I initially implemented the overview using the
full weigh-in history. I found that including them all added around 250kB of
data and a few seconds downloading the page content (on a ‚Äúfast 3G‚Äù network
setting). I liked the functionality but realized I could likely get by with only
a subset of the records. So I looked into how I could downsample the data, and a
window function turned out to be the perfect tool.</p>

<h2 id="basic-downsampling-example">Basic Downsampling Example</h2>

<p>If I just wanted to grab all the weigh-in records, ordered by date, I could
use:</p>

<div><pre><code><span>SELECT</span> <span>id</span><span>,</span> <span>date</span><span>,</span> <span>weight</span> <span>FROM</span> <span>weighins</span> <span>ORDER</span> <span>BY</span> <span>date</span><span>;</span>
</code></pre></div>
<p>In order to downsample this data, I can use a window function to add a
<code>ROW_NUMBER</code> value for the records ordered by date:</p>

<div><pre><code><span>SELECT</span> <span>id</span><span>,</span> <span>date</span><span>,</span> <span>weight</span><span>,</span> <span>ROW_NUMBER</span><span>()</span> <span>OVER</span> <span>(</span><span>ORDER</span> <span>BY</span> <span>date</span><span>)</span> <span>FROM</span> <span>weighins</span><span>;</span>
</code></pre></div>
<p>Now I had the computed row number but in order to use it to filter the records
I had to include it as a sub-query and then filter in the outer query:</p>

<div><pre><code><span>SELECT</span> <span>id</span><span>,</span> <span>date</span><span>,</span> <span>weight</span> <span>FROM</span> <span>(</span>
  <span>SELECT</span> <span>id</span><span>,</span> <span>date</span><span>,</span> <span>weight</span><span>,</span> <span>ROW_NUMBER</span><span>()</span> <span>OVER</span> <span>(</span><span>ORDER</span> <span>BY</span> <span>date</span><span>)</span> <span>FROM</span> <span>weighins</span><span>;</span>
<span>)</span> <span>x</span> <span>WHERE</span> <span>mod</span><span>(</span><span>ROW_NUMBER</span><span>,</span> <span>10</span><span>)</span> <span>=</span> <span>0</span><span>;</span>
</code></pre></div>
<p>I only want to return the <code>id</code>, <code>date</code>, and <code>weight</code> fields, but I‚Äôm able to
use the <code>ROW_NUMBER</code> in our <code>WHERE</code> clause to grab every 10th record using
<code>mod(ROW_NUMBER, 10) = 0</code> filter.</p>

<p><em>Note</em> - the <code>x</code> here is a name I‚Äôm giving to the sub-query. Postgres requires a
name, but I‚Äôm not actually using it in the rest of the query.</p>

<p><em>Other Note</em> - you‚Äôll likely want to have an <a href="https://www.postgresql.org/docs/8.3/indexes-ordering.html">index on the <code>date</code>
column</a> to make that
<code>ORDER BY</code> clause efficient.</p>

<h2 id="make-it-user-specific">Make It User Specific</h2>

<p>Let‚Äôs say I have the same setup as above, but the records in the
table I want to downsample are user-specific and I want to provide a similar
overview graph for each user. Some users will have long histories with
thousands of records, but others will only have a handful, and I‚Äôd like to
return a consistent number of records for the overview graph for all users.</p>

<p>In this case I can use another sub-query to determine the relevant downsample
rate on a per-user basis. Let‚Äôs say I want to show a maximum of 300 data points
in the overview graph; I can use a query like the following to get the
downsample rate:</p>

<div><pre><code><span>SELECT</span> <span>COUNT</span><span>(</span><span>*</span><span>)</span> <span>/</span> <span>300</span> <span>FROM</span> <span>weighins</span> <span>WHERE</span> <span>user_id</span> <span>=</span> <span>7</span><span>;</span>
</code></pre></div>
<p>Now, rather than using the fixed value <code>10</code> as in the first query (aka, grab
every 10th record), we‚Äôll have a value that will vary for each user to ensure
we get ~300 records in the returned data set.</p>

<p>I can then combine that with the original query to efficiently grab the
downsampled overview with the desired ~300 records:</p>

<div><pre><code><span>SELECT</span> <span>id</span><span>,</span> <span>date</span><span>,</span> <span>weight</span> <span>FROM</span> <span>(</span>
  <span>SELECT</span> <span>id</span><span>,</span> <span>date</span><span>,</span> <span>weight</span><span>,</span> <span>ROW_NUMBER</span><span>()</span> <span>OVER</span> <span>(</span><span>ORDER</span> <span>BY</span> <span>date</span><span>)</span>
    <span>FROM</span> <span>weighins</span>
    <span>WHERE</span> <span>user_id</span> <span>=</span> <span>7</span>
<span>)</span> <span>x</span> <span>WHERE</span> <span>mod</span><span>(</span><span>ROW_NUMBER</span><span>,</span> <span>(</span><span>SELECT</span> <span>COUNT</span><span>(</span><span>*</span><span>)</span> <span>/</span> <span>300</span> <span>FROM</span> <span>weighins</span> <span>WHERE</span> <span>user_id</span> <span>=</span> <span>7</span><span>))</span> <span>=</span> <span>0</span><span>;</span>
</code></pre></div>
<p><em>Note</em> - you‚Äôll likely already have this, but just as a reminder, you‚Äôll want to
have an index on <code>user_id</code> for the relevant table to make sure the sub-query
won‚Äôt slow things down too much.</p>

<h2 id="a-final-tweak-for-very-large-tables">A Final Tweak for Very Large Tables</h2>

<p>There‚Äôs one last trick that has helped in the
case of a very large table where <code>COUNT(*)</code> is slow enough to be noticed. In
this case I don‚Äôt actually care about getting an <em>exact</em> count, so I can take
advantage of postgres metadata to get an approximate count:</p>

<div><pre><code><span>(</span><span>SELECT</span> <span>reltuples</span> <span>FROM</span> <span>pg_class</span> <span>WHERE</span> <span>relname</span> <span>=</span> <span>'weighins'</span><span>)::</span><span>int</span><span>;</span>
</code></pre></div>
<p>A bit cryptic, but this query gets the approximate record count for the table.
It lags a bit behind the actual value as it‚Äôs only updated when postgres runs
<code>VACUUM</code> or <code>ANALYZE</code> or similar housekeeping operations, but it‚Äôs more than
sufficient for our needs. I‚Äôve tacked <code>::int</code> to explicitly typecast the
result to allow us to use this in our <code>WHERE mod(ROW_NUMBER, ...)</code> filter.</p>

<p>I can combine this as a sub-query to get a reasonably performant downsampled
version of our data, even for very large tables:</p>

<div><pre><code><span>SELECT</span> <span>id</span><span>,</span> <span>date</span><span>,</span> <span>weight</span> <span>FROM</span> <span>(</span>
  <span>SELECT</span> <span>id</span><span>,</span> <span>date</span><span>,</span> <span>weight</span><span>,</span> <span>ROW_NUMBER</span><span>()</span> <span>OVER</span> <span>(</span><span>ORDER</span> <span>BY</span> <span>date</span><span>)</span> <span>FROM</span> <span>weighins</span>
<span>)</span> <span>x</span> <span>WHERE</span> <span>mod</span><span>(</span><span>ROW_NUMBER</span><span>,</span> <span>(</span><span>SELECT</span> <span>reltuples</span> <span>/</span> <span>300</span> <span>FROM</span> <span>pg_class</span> <span>WHERE</span> <span>relname</span> <span>=</span> <span>'weighins'</span><span>)::</span><span>int</span><span>)</span> <span>=</span> <span>0</span><span>;</span>
</code></pre></div>
<h2 id="further-reading">Further Reading</h2>

<p>The <a href="https://www.postgresql.org/docs/current/functions-window.html">Postgres Documentation on Window Functions</a> is, unsurprisingly, very
solid. The <a href="https://sqlite.org/windowfunctions.html">SQLite Introduction to Window Functions</a> is also quite good, and
<a href="https://thoughtbot.com/blog/postgres-window-functions">thoughtbot has a great article on using window functions</a>.</p>



    </div></div>]]>
            </description>
            <link>https://ctoomey.com/writing/downsampling-data-with-postgres-window-functions/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24496033</guid>
            <pubDate>Wed, 16 Sep 2020 18:49:23 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The parallel evaluation of IIR filters ‚Äì An Implementation]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24495644">thread link</a>) | @agent_sim
<br/>
September 16, 2020 | https://agentsim.github.io/2020/09/16/implementing_parallel_evaluation_of_iirs.html | <a href="https://web.archive.org/web/*/https://agentsim.github.io/2020/09/16/implementing_parallel_evaluation_of_iirs.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <h2 id="introduction">Introduction</h2>

<p>This is an attempt to understand Raph Levien‚Äôs <a href="https://raphlinus.github.io/audio/2019/02/14/parallel-iir.html">IIR filters can be evaluated in parallel</a> by a person with no particular knowledge of DSP, filtering or relevant mathematics, just an interest in evaluating an IIR filter in parallel and a good deal of programming experience! The goal is to produce an implementation of this article demonstrating in code the approach Raph describes. The code won‚Äôt be optimal by any means, but should serve as a sufficient base for building something much better.</p>

<p>Right from the get go we get an inkling this might not be as straight-forward as we might hope:</p>

<blockquote>
  <p>Author‚Äôs note: I got slightly stuck writing this, so am publishing a somewhat unfinished draft</p>
</blockquote>

<p>Throughout the article focuses on a simple RC-lowpass filter, given by the equation:</p>

<blockquote>
  <p><code>y[i] = x[i] * c + y[i - 1] * (1 - c)</code></p>
</blockquote>

<p>Raph also points out that this formulation of an IIR filter, while easy to understand has been superseded by the state space approach:</p>

<blockquote>
  <p>Rather than writing it it in direct form, which emphasizes the serial evaluation strategy, it‚Äôs better to use matrices. Basically, y becomes a state vector, and a becomes a matrix. This is known as the state space approach to filters and has many advantages. I‚Äôd go so far to say that direct form is essentially obsolete now, optimizing for the number of multiplies at the expense of parallelism, numerical stability, and good modulation properties.</p>
</blockquote>

<p>The state space approach will become important later. It is worth taking a little detour to clear it up.</p>

<hr>
<h2 id="state-space-detour">State Space Detour</h2>

<p>All IIR filters are difference equations, which for our purposes are recursive equations that rely on one or more outputs from previous steps. Simply speaking, the deeper the recursion (more previous outputs), the more ‚Äúpowerful‚Äù it can be. This recursive level is the <code>order</code> of the filter. For example, to create a low-pass filter with a steeper cut-off, like a brick-wall filter, it will need more than just the single level of recursion of the RC-lowpass filter ‚Äì it will have a higher order.</p>

<p>A possible building block of such high-order IIRs is the biquad. A biquad is a second order (order = 2) filter. Biquads can be chained together to create even higher-order filters, a representation called second order sections.</p>

<p>This gets us to the <code>direct form</code> referenced in the quote above. Direct Form is a way to represent a biquad. One of the Direct Forms uses the following equation:</p>

<p><code>y[n] = b0 * x[n] + b1 * x[n - 1] + b2 * x[n - 2] - a1 * y[n - 1] - a2 * y[n - 2]</code></p>

<p>This is a second order filter because it relies on two historical values (<code>y[n - 1]</code> and <code>y[n - 2]</code>.) Thinking of the RC-lowpass filter in this way tells us that <code>b0</code> is <code>c</code> and <code>a1</code> is <code>c - 1</code> and the other constants are zero (our filter is first-order.)</p>

<h3 id="conversion-to-state-space">Conversion to State Space</h3>

<p>All IIR filters can be representated by a transfer function, written as <code>H(z)</code>. <a href="https://en.wikipedia.org/wiki/Digital_biquad_filter">Wiki‚Äôs</a> introduction to biquads shows the transfer function. Mapping it to the direct form is trivial, so it is omitted here.</p>

<p>We want to convert the biquad form to a state space form. More generally it would be useful to be able to convert any IIR filter that can be written in terms of <code>H(z)</code> to state space form. This can be done by hand, but fortunately it can be done easily via GNU Octave‚Äôs or Matlab‚Äôs <a href="https://www.mathworks.com/help/signal/ref/tf2ss.html">tf2ss</a> function:</p>

<div><div><pre><code>c = 0.44
num = [c]
den = [1 c-1]
[A, B, C, D] = tf2ss(num, den)
A: 0.56
B: 1
C: 0.44
D: 0
</code></pre></div></div>

<p>Finally we can write the filter in state-space form. State-space form is generally written as:</p>

<div><div><pre><code>x[n+1] = Ax[n] + Bu[n]
y[n] = Cx[n] + Du[n]
</code></pre></div></div>

<p>So far our equations have had <code>y</code> as the output (i.e the filtered signal) and <code>x</code> as the input (i.e. the signal to be filtered.) State-space changes this, the signal to be filtered is <code>u</code> and <code>x</code> is the <em>state vector</em>. Generally, <code>A</code> and <code>C</code> are matrices and <code>B</code> and <code>D</code> are vectors. Since our filter is first-order, each of these values are simply numbers. <code>D</code> is zero so it can be removed entirely and <code>B</code> is one so it can be simplified to:</p>

<div><div><pre><code>x[n+1] = Ax[n] + u[n]
y[n] = Cx[n]
</code></pre></div></div>

<p>substituting the constant <code>C</code> from the RC-lowpass filter equation:</p>

<div><div><pre><code>x[n+1] = (1 - C)x[n] + u[n]
y[n] = Cx[n]`
</code></pre></div></div>

<hr>

<h2 id="monoid-homomorphism-time">Monoid Homomorphism Time</h2>

<p>This is where the meat of the approach lies. Quoting from the article:</p>

<blockquote>
  <p>The basic insight is that the target monoid is a function from input state to output state, and represents any integral number of samples. The monoid binary operator is function composition, which is by nature associative and has an identity (the identity function).
In general, the amount of state required to represent such a function, as opposed to a single state value, is intractable, but in [this case] it works [‚Ä¶] because the function is linear.</p>
</blockquote>

<p>This is going to require some unpacking.</p>

<hr>
<h3 id="what-is-a-monoid">What is a monoid?</h3>

<p>A monoid is a triplet of:</p>
<ul>
  <li>a set being operated on</li>
  <li>an associative binary operator</li>
  <li>an identity element</li>
</ul>

<p>The set might be the set of real numbers, for example. A binary operator is a function that takes two parameters that are elements of the set. Associativity is the property <code>(a op b) op c = a op (b op c)</code>, i.e. you can place the brackets arbitrarily. An identity element is an element <code>e</code> such that <code>e op x = x op e = x</code>. It is a no-op element.</p>

<p>For example, you might have a monoid representing addition: <code>(f64, +, 0)</code> meaning the set being operated on are the 64-bit floats, the binary operation is addition and the identity is <code>0</code> because <code>0+x = x+0 = x</code>. Similarly you could have a monoid representing multiplication: <code>(i32, *, 1)</code>.</p>

<hr>

<p>Back to the article. Before tackling the homomorphism and what it means, we‚Äôll try to understand what Raph gives us as the path forward:</p>

<blockquote>
  <p>The target monoid is a function of this form:
<code>y_out = a * y_in + b</code>
This can obviously be represented as two floats, we can write the representation as simply <code>(a, b)</code>. The homomorphism then binds a single sample of input into a function. Given the filter above, an input of <code>x</code> maps to <code>(c, x * (1 - c))</code>.
Similarly, we can write out the effect of function composition in the two-floats representation space. Given <code>(a1, b1)</code> and <code>(a2, b2)</code>, their composition is <code>(a1 * a2, a2 * b1 + b2)</code>. Not especially complicated or difficult to compute.</p>
</blockquote>

<p>We have to understand:</p>

<ol>
  <li>What is a monoid homomorphism?</li>
  <li>How does the input mapping result in <code>(c, x * (1 - c)</code>?</li>
  <li>Why is <code>y_out = a * y_in + b</code> our target monoid?</li>
  <li>Why is our target monoid represented as <code>(a , b)</code>?</li>
  <li>How is the binary operation (function composition) applied?</li>
</ol>

<p>We‚Äôll do it backwards, from easiest to hardest to understand.</p>

<h3 id="how-is-the-binary-operation-function-composition-applied">How is the binary operation (function composition) applied?</h3>

<p>Raph makes the following statement:</p>

<blockquote>
  <p>Given <code>(a1, b1)</code> and <code>(a2, b2)</code>, their composition is <code>(a1 * a2, a2 * b1 + b2)</code>.</p>
</blockquote>

<p>What is function composition? Say we have two functions, <code>f1</code> and <code>f2</code>, composition is simply <code>f2(f1(x))</code>. In our case the two functions are:</p>
<div><div><pre><code>f1: y[n] = a1 * y[n-1] + b1
f2: y[n] = a2 * y[n-1] + b2
</code></pre></div></div>

<p>The function composition, <code>f2(f1(x))</code> is thus:</p>
<div><div><pre><code>y[n] = a2 * (a1 * y[n-1] + b1) + b2
</code></pre></div></div>
<p>which multiplies out to:</p>
<div><div><pre><code>y[n] = a2 * a1 * y[n-1] + a2 * b1 + b2
</code></pre></div></div>
<p>This is clearly still of the form <code>y[n] = a * y[n-1] + b</code>, with <code>(a, b)</code> now being <code>(a2 * a1, a2 * b1 + b2)</code>.</p>

<h3 id="why-is-our-target-monoid-represented-as-a--b">Why is our target monoid represented as <code>(a , b)</code>?</h3>

<p>This is now easier to understand. To represent the history of all prior invocations of the monoid, all we need are the <code>(a, b)</code> pair of the most recent function.</p>

<p>In other words, the history <code>fn(fn-1(fn-2(fn-3(...f0(0)...))))</code> can be represented as simply <code>fn(0)</code> provided we know the <code>(a, b)</code> pair.</p>

<p>Why do we know the initial input is zero? This chain of functions starts with <code>y[0] = ...</code>. But <code>y[0]</code> cannot be defined by a prior <code>y[-1]</code>; by definition there is nothing before the first element. Therefore the initial value for <code>y[n-1]</code> must be zero.</p>

<h3 id="why-is-y_out--a--y_in--b-our-target-monoid">Why is <code>y_out = a * y_in + b</code> our target monoid?</h3>

<p>The state space representation for our filter was written as two equations:</p>
<div><div><pre><code>x[n+1] = (1-C)x[n] + u[n]
y[n] = Cx[n]
</code></pre></div></div>

<p>Our goal is to evaluate the filter in parallel, so we want to get rid of recursion. The equation for the <em>state vector</em>, <code>x[n]</code> is recursive, so that‚Äôs our target. We already know we can evaluate this equation without requiring the prior values provided we can compute values for <code>(a, b)</code>.</p>

<p>Also, from the introduction to this section, we‚Äôre told:</p>
<blockquote>
  <p>The basic insight is that the target monoid is a function from input state to output state</p>
</blockquote>

<p><code>x[n]</code> is the <em>state vector</em> so our target monoid is evaluating the state of the filter at any <code>n</code> and producing the corresponding output state.</p>

<h3 id="how-does-the-input-mapping-result-in-c-x--1---c">How does the input mapping result in <code>(c, x * (1 - c)</code>?</h3>

<p>All the pieces are in place, now we just need to compute those <code>(a, b)</code> values. We‚Äôve got our target monoid:</p>

<p><code>x[n+1] = (1 - C) * x[n] + u[n]</code></p>

<p>let‚Äôs write it as:</p>

<p><code>y_out = (1 - C) * y_in + b</code></p>

<p>Remember <code>u[n]</code> is the signal, so when we feed in a single sample <code>x</code>, it takes the place of <code>u[n]</code> which is <code>b</code> in our target form:</p>

<p><code>y_out = (1 - C) * y_in + x</code>.</p>

<p>Pretty clearly, <code>(a, b)</code> is <code>(1 - C, x)</code>. That‚Äôs not what we expected. There are two reasons for this.</p>

<ul>
  <li>First, there‚Äôs a mistake in the article. The mapping should result in <code>(1 - C, x * C)</code>. That‚Äôs still not the result we have.</li>
  <li>Second, we are computing the state, not the final output. Once we have the state we still need to apply <code>y[n] = Cx[n]</code> to compute the final filtered result. Since that‚Äôs not a recursive function it is trivial to compute in parallel. It turns out that <code>(1 - C, x * C)</code> will both compute the state and apply the <code>y[n]</code> equation. I‚Äôm not sure how to derive this result, I stumbled upon it by accident. Furthermore, in the general case I‚Äôm not sure <code>y[n]</code> can be computed in one step along with the state vector (consider the case where <code>D</code> is non-zero.)</li>
</ul>

<h3 id="what-is-a-monoid-homomorphism">What is a Monoid Homomorphism?</h3>

<p>A per usual, <a href="https://en.wikipedia.org/wiki/Monoid#Monoid_homomorphisms">Wiki</a> is a good source for this.</p>

<p>In a nutshell, if you have two monoids with binary operators <code>M1</code> and <code>M2</code> and a function <code>f</code> that translates inputs for <code>M1</code> into <code>M2</code>, then you have a homomorphism if:</p>

<p><code>f(M1(x, y)) = M2(f(x), f(y))</code> and given identity elements for the monoids <code>I1</code> and <code>I2</code> <code>f(I1) = I2</code>.</p>

<p>I‚Äôm not sure what the homomorphism is in this case since it requires two ‚Ä¶</p></div></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://agentsim.github.io/2020/09/16/implementing_parallel_evaluation_of_iirs.html">https://agentsim.github.io/2020/09/16/implementing_parallel_evaluation_of_iirs.html</a></em></p>]]>
            </description>
            <link>https://agentsim.github.io/2020/09/16/implementing_parallel_evaluation_of_iirs.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24495644</guid>
            <pubDate>Wed, 16 Sep 2020 18:21:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Parsing: A Timeline]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24495543">thread link</a>) | @jez
<br/>
September 16, 2020 | https://jeffreykegler.github.io/personal/timeline_v3 | <a href="https://web.archive.org/web/*/https://jeffreykegler.github.io/personal/timeline_v3">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
    <mytitle>Parsing: a timeline</mytitle>
    <version>Version 3.1</version>
    <datestamp>Revision 2, 23 October 2019</datestamp>
    <author>Jeffrey Kegler</author>
    
    <p>In India, Pannini creates an exact and complete description of
      the Sanskrit language, including pronunciation. Sanskrit could be
      recreated using nothing but Pannini's grammar.
      Pannini's grammar is
      probably the first formal system of any kind, predating Euclid.
      In the future, nothing like it will exist for any other natural language of
      significant size or corpus.
      By 2018,
      Pannini will be the object of serious study.
      But in the 1940's and 1950's Pannini will be almost unknown in
      the West.
      This means that Pannini will have no direct effect
      on the other events in this timeline.
    </p>
    
    <p>In her translator's note on an article on Babbage's
    computer, Ada Lovelace becomes the first person to
    clearly distinguish programming a computer (software)
    as a separate field from
    building the computer itself (hardware).<a id="footnote-1-ref" href="#footnote-1">[1]</a>
    Ada is also the first to
    think of software in linguistic terms --
    she originates the idea that,
    in writing software,
    we communicate with the computer,
    and that the means that we use to do that is a "language".<a id="footnote-2-ref" href="#footnote-2">[2]</a>
    </p>
    <blockquote>
     A new, a vast, and a powerful language is developed for the future
     use of analysis, in which to wield its truths so that these may
     become of more speedy and accurate practical application for the
     purposes of mankind than the means hitherto in our possession have
     rendered possible. Thus not only the mental and the material, but
     the theoretical and the practical in the mathematical world, are
     brought into more intimate and effective connexion with each other.<a id="footnote-3-ref" href="#footnote-3">[3]</a>
    </blockquote>
    <p>Here "analysis" means the branch of mathematics that studies limits
    and continuous functions, and which includes calculus.
    </p>
    
    <p>Andrey Markov introduces his
      <term>chains</term>
      -- a set of
      states with transitions between them.<a id="footnote-4-ref" href="#footnote-4">[4]</a>
      One offshoot of Markov's work will be what will
      come to be known as regular expressions.
      Markov uses his chains,
      not for parsing,
      but to deal with a problem in probability --
      does the law of large numbers require that events be
      independent?
      Indirectly, Markov is addressing the question 
      of the existence of free will.<a id="footnote-5-ref" href="#footnote-5">[5]</a>.
    </p>
    
    <p>In 1913, Markov revisits his chains,
      applying them to the sequence of vowels and consonants
      in Pushkin's
      <cite>Eugene Onegin</cite><a id="footnote-6-ref" href="#footnote-6">[6]</a>.
      Again, Markov's interest is not in parsing.
      Nonetheless,
      this is an application to language
      of what later will be regarded
      as a parsing technique,
      and apparently for the first time in the West.
    </p>
    
    <p>Leonard Bloomfield,
      as part of his effort to create a linguistics that
      would be taken seriously as a science,
      publishes his "Postulates".<a id="footnote-7-ref" href="#footnote-7">[7]</a>
      Known as structural linguistics,
      Bloomfield's approach will
      dominate American lingustics for
      over two decades.
    </p>
    
    <p>
      Bloomfield's "Postulates" defines a "language" as
    </p>
    <blockquote>
      [t]he totality of utterances that can be made in a speech
      community<a id="footnote-8-ref" href="#footnote-8">[8]</a>
    </blockquote>
    <p>
      Note that there is no reference in this definition to the usual view --
      that the utterances of a language "mean" something.
    </p>
    <p>
      This omission is not accidental.<a id="footnote-9-ref" href="#footnote-9">[9]</a>
      Bloomfield excludes meaning from his definition of language
      because he wants linguistics to be taken
      seriously as science.
      Behaviorist thought is very influential at this
      time and behavorists believe that,
      while human behaviors can be observed and verified
      and therefore made the subject of science,
      mental states cannot be verified.
      Claiming to know what someone means
      by a word
      is claiming to read his mind.
      And "mind-reading" is not science.
    </p>
    
    <p>Emil Post defines and studies a formal rewriting system<a id="footnote-10-ref" href="#footnote-10">[10]</a>
      using productions.
      With this, the process of rediscovering Pannini in the
      West begins.</p>
    
    <p>Alan Turing discovers the stack as part of his design of the
      ACE machine. This will be important in parsing because recursive parsing
      requires stacks. The importance of Turing's discovery is not noticed
      in 1945 and stacks will be rediscovered many times over the
      next two decades<a id="footnote-11-ref" href="#footnote-11">[11]</a>.
    </p>
    
    <p>Claude Shannon publishes the foundation paper of information theory<a id="footnote-12-ref" href="#footnote-12">[12]</a>.
      In this
      paper, Shannon models English using Andrey Markov's
      chains<a id="footnote-13-ref" href="#footnote-13">[13]</a>.
      The approach is similar to Markov's but the intent
      is different --
      Shannon's is a serious attempt at a contribution
      to parsing human languages.
    </p>
    
    <p>From 1949 to 1951 at the ETH Zurich, Heinz Rutishauser works on
      the design of what we will come to call a compiler<a id="footnote-14-ref" href="#footnote-14">[14]</a>.
      Rutishauser's arithmetic expression parser
      does not honor precedence but it does allow nested parentheses.
      It is perhaps the first algorithm which can really be considered a
      parsing method.
      Rutishauser's compiler is never implemented.</p>
    
    <p>
      In the form of arithmetic expressions, operator expressions
      are the target of the first efforts at automatic parsing.
      We will not see this issue go away.
      Very informally<a id="footnote-15-ref" href="#footnote-15">[15]</a>,
      we can say that
      an operator expression is an expression
      built up from operands
      and operators.
      It is expected that the operand might be another operator expression,
      so operator expressions raise the issue of recursion.
    </p>
    <p>
      The archetypal examples of operator expressions are arithmetic expressions:
    </p><pre><tt>
         2+(3*4)
         13^2^-5*9/11
         1729-42*8675309
      </tt></pre>
    <p>
      In Western mathematics arithmetic expressions have been read
      according to traditional
      ideas of
      associativity and precedence:
    </p><ul>
      <li><tt>^</tt>
        is exponentiation.
        It right associates and has tightest<a id="footnote-16-ref" href="#footnote-16">[16]</a>
        precedence.
      </li>
      <li>
        Multiplication (<tt>*</tt>) and division (<tt>/</tt>) left associate.
        They have a precedence equal to each other
        and less tight than that of exponentiation.
      </li>
      <li>
        Addition ('+') and subtraction ('-') left associate.
        They have a precedence equal to each other
        and less tight than that of multiplication and division.
      </li>
      <li>
        Parentheses, when present, override the traditional
        associativity and precedence.
      </li>
    </ul>
    <p>
      Rutishauser's language
      is structured line-by-line,
      as will be all languages until LISP.
      No language until ALGOL will be truly block-structured.
    </p>
    <p>
      The line-by-line languages
      are parsed using string manipulations.
      A parsing theory is not helpful for describing these
      ad hoc string manipulations,
      so they don't give rise to one.
      The only logic in these early compilers that really deserves to be called
      a parsing method
      is that which tackles arithmetic expressions.
    </p>
    
    <p>During 1950, Corrado Boehm, also at the ETH Zurich,
      develops his own compiler.
      Rutishauser and Boehm are working at the same institution at the same
      time, but Boehm is unaware of Rutishauser's work until his own is
      complete.
      Boehm's is also the first self-compiling compiler -- it is written
      in its own language.
    </p>
    <p>
      Like Rutishauser, Boehm's language is line-by-line and
      parsed ad hoc, except for expressions. Boehm's expression parser
      <em>does</em>
      honor precedence, making it perhaps the first operator precedence
      parser<a id="footnote-17-ref" href="#footnote-17">[17]</a>.
      In Norvell's taxonomy<a id="footnote-18-ref" href="#footnote-18">[18]</a>,
      Boehm's algorithm inaugurates
      the
      <q>classic approach</q>
      to operator parsing.
    </p>
    <p>
      Boehm's compiler also allows parentheses, but the two cannot
      be mixed -- an expression can either be parsed using precedence
      or have parentheses, but not both.
      Also like Rutishauser's, Boehm's compiler is never
      implemented<a id="footnote-19-ref" href="#footnote-19">[19]</a>.
    </p>
    
    <p>Grace Hopper writes a linker-loader,
      and calls it a
      <term>compiler</term><a id="footnote-20-ref" href="#footnote-20">[20]</a>. Hopper seems to be the first
      person to use this term for a computer program.</p>
    
    <p>Hopper uses the term
      <term>compiler</term>
      in a meaning very close to one of its traditional senses:
      <q>to compose out of materials from other
        documents</q><a id="footnote-21-ref" href="#footnote-21">[21]</a>.
      Specifically, in 1952,
      subroutines were new,
      and automated programming
      (what we will come to call
      <q>compiling</q>)
      often is viewed as providing a interface
      for calling a collection of
      carefully chosen assembler subroutines<a id="footnote-22-ref" href="#footnote-22">[22]</a>.
      Hopper's new
      program takes this subroutine calling
      one step further -- instead of calling the subroutines
      it expands them (or in Hopper's terms
      <q>compiles</q>
      them) into
      a single program.
    </p>
    <p>
      After Hopper the term
      <term>compiler</term>
      will acquire a different meaning,
      one specific to the computer field.
      By 1956, programs like Hoppers will
      no longer be called
      <term>compilers</term><a id="footnote-23-ref" href="#footnote-23">[23]</a>.
    </p>
    
    <p>Kleene discovers regular languages<a id="footnote-24-ref" href="#footnote-24">[24]</a>.
      Kleene does not use regular expression notation,
      but his regular languages are the idea behind
      it.
    </p>
    
    <p>
      Glennie discovers what Knuth will later
      call the first
      <q>real</q><a id="footnote-25-ref" href="#footnote-25">[25]</a>
      compiler.
      (By this Knuth will mean that
      AUTOCODE was actually implemented and used by someone to translate
      algebraic statements into machine language.)
      Glennie's AUTOCODE
      is very close to the machine -- just above machine language.
      It does not allow operator expressions.
    </p>
    <p>
      AUTOCODE is hard-to-use,
      and apparently sees little use by anybody but
      Glennie himself.
      Because
      Glennie works for the British atomic weapons projects his papers
      are routinely classified,</p></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://jeffreykegler.github.io/personal/timeline_v3">https://jeffreykegler.github.io/personal/timeline_v3</a></em></p>]]>
            </description>
            <link>https://jeffreykegler.github.io/personal/timeline_v3</link>
            <guid isPermaLink="false">hacker-news-small-sites-24495543</guid>
            <pubDate>Wed, 16 Sep 2020 18:14:52 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[433% Keyboard]]>
            </title>
            <description>
<![CDATA[
Score 138 | Comments 128 (<a href="https://news.ycombinator.com/item?id=24495046">thread link</a>) | @_salmon
<br/>
September 16, 2020 | https://relivesight.com/projects/433/ | <a href="https://web.archive.org/web/*/https://relivesight.com/projects/433/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

            <h2>433% Keyboard</h2>
            <p>‚Äî„Äå0X://Explanation„Äç<br>
            IT IS FINALLY (mostly) COMPLETED. If anyone has ever heard directly from God Himself, the conception of this keyboard was definitely the message. 450 keys of solid non-mx-browness and
            433% the size of a normal full size, what more could you ask for? This keyboard fits 2 (two) full football fields on it {diagram on page 9 of your textbooks}. and um yeah thats kinda it idk can you see it there isnt much to say.

            {and yes for anyone who is new, i know the images load slow, im using some jankery just bear with it plz and ty}
            </p>
            <p><a target="_blank" href="https://www.reddit.com/r/MechanicalKeyboards/comments/it7a0p/i_present_my_433_ortho_endgame_is_only_a_lie_if/">reddit post</a> - thanks for 13.1k upvotes and 58 awards &lt;3</p>
              <p><a id="back" href="https://relivesight.com/ongoing/">back a page</a></p>
              <p><img src="https://drive.google.com/uc?export=view&amp;id=1OKPmow5-rwRyFS-_zcOYHDpGRSjjKVej" width="500px"></p><p>Specs:</p>
        <ul>
          <li>PCB: ScrabblePad</li>
          <li>Microcontrollers: Teensy2.0++(x2)</li>
          <li>Switches: Gateron Yellows</li>
          <li>Keycaps: xda 9009 from kpreublic (98), dsa dark gray blanks (90), xda light grey blanks (12), cherry relegenadble keycaps (tipro rebrand) (120), dsa "retro beige" (26), cherry beige keycaps (52), dsa black blanks (38), and stroke and structure set keycaps (14)</li>
        </ul>
            
              
             <p>i've acquired all the materials, i intend to 3d print some "feet" for this board and maybe tent it a bit, here are the pcbs:</p>
             <p><img src="https://drive.google.com/uc?export=view&amp;id=1uWil1XZH2ctQViab6xnskC4BIYivAWeG" width="500px"></p><p>this one should be pretty straight forward, i just need some free time to build it. two "scrabblepads" by donutcables btw.</p>
             
             <p>the dautning task beings, and spoiler: i finish it all in one weekend (kinda). well you know what they say, show dont tell (and my hands ache from this build) so heres some pics of the board while i soldered the 450 diodes, switches, etc:</p>
             <p><img src="https://drive.google.com/uc?export=view&amp;id=1tlF20EdGLjFh_IJowFcZ7qy07jmj-w6s" width="300px">
             <img src="https://drive.google.com/uc?export=view&amp;id=1ykB1evyrh2UrNnkfX7z3bR4keEpgLMhG" width="300px">
             <img src="https://drive.google.com/uc?export=view&amp;id=1Ws5bUOHTzRmT6kGS_D4HoMzPZvrE81Hj" width="300px">
             <img src="https://drive.google.com/uc?export=view&amp;id=1pRKCnqxWew30dc5mC4INyfA1pUxMgCOr" width="300px"></p><p>wow! what only took you a couple seconds to look at took me a couple dozen hours, astonishing. well now the simple part (i so naively thought) choosing keycaps!
               lets just skip all of my indecsision and skip to what i finally settled on. a xda 9009 set, dsa dark gray blanks, xda light grey blanks, cherry relegenadble keycaps (tipro rebrand), dsa "retro beige", cherry beige keycaps, dsa black blanks, and stroke and structure set keycaps.
            
              </p>
               <p><img src="https://drive.google.com/uc?export=view&amp;id=1CYfMDgvnOXaQEQv89GwsMRd-nMT4Tl66" width="400px">
               <img src="https://drive.google.com/uc?export=view&amp;id=1SxTfFaIz_Mv9gzYm4qFMZsB8LYYQCbD-" width="200px">
               <img src="https://drive.google.com/uc?export=view&amp;id=1jSCz7vcr3Nc26TKKhYej4uAPvN6-HPih" width="500px">
               <img src="https://drive.google.com/uc?export=view&amp;id=1h-45yK6HDq2VmC7mxl1NMAaWgQM8IGI_" width="500px">
               <img src="https://drive.google.com/uc?export=view&amp;id=1q99gN9PK-m8a6wxMlPnEBEt9rFs3SRws" width="500px"></p><p>alot of cutting and frusturating placement of the paper (relegndable caps) later and its done! here's this board next to some other favorites of mine:</p>
               <p><img src="https://drive.google.com/uc?export=view&amp;id=1iRszdMNP3aFmEIkVCuBkOScToGBlz_Gd" width="300px">
               <img src="https://drive.google.com/uc?export=view&amp;id=1tkfGJU4lo1WCN7LOQSl1MJhVLyvJe55L" width="300px"></p><p>sadly i cant officially call this project done until i add the 3d printed feet and finish the qmk, tho fun fact: i typed this whole post on the board~
                 its honestly not as hard as i thought it would be to switch, its still 123897421987 times better than any staggered non split torture. anyway thanks for reading so far! its been fun~
               </p>

            

   <p><a id="back" href="https://relivesight.com/ongoing/">back a page</a></p>
   <p>‚îà ren ‚Äã‚ô°</p>


  </div></div>]]>
            </description>
            <link>https://relivesight.com/projects/433/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24495046</guid>
            <pubDate>Wed, 16 Sep 2020 17:36:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Thoughts on Compile-Time Function Evaluation and Type Systems]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24494859">thread link</a>) | @pcr910303
<br/>
September 16, 2020 | https://www.ralfj.de/blog/2018/07/19/const.html | <a href="https://web.archive.org/web/*/https://www.ralfj.de/blog/2018/07/19/const.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="-content">
      <header>
    
    
</header>

<p>For some time now (since the 1.26 release, to be precise), Rust has a <a href="https://github.com/rust-lang/rust/pull/46882">very powerful machinery for CTFE</a>, or compile-time function evaluation.
Since then, there have been various discussions about which operations should be allowed during CTFE, which checks the compiler should do, how this all relates to promotion and which kinds of guarantees we should be able to expect around CTFE.
This post is my take on those topics, and it should not be surprising that I am going to take a very type-system centric view.
Expect something like a structured brain dump, so there are some unanswered questions towards the end as well.</p>

<!-- MORE -->

<h2 id="some-background">Some Background</h2>

<p>CTFE is the mechanism used by the compiler, primarily, to evaluate items like <code>const x: T = ...;</code>.
The <code>...</code> here is going to be Rust code that must be ‚Äúrun‚Äù at compile-time, because it can be used as a constant in the code ‚Äì for example, it can be used for array lengths.</p>

<p>Notice that CTFE is <em>not</em> the same as constant propagation: Constant propagation is an optimization pass done by compilers like LLVM that will opportunistically change code like <code>3 + 4</code> into <code>7</code> to avoid run-time work.
Being an optimization, constant propagation must, by definition, not change program behavior and will not be observable at all (other than performance).
CTFE, on the other hand, is about code that <em>must</em> be executed at compile-time because the compiler needs to know its result to proceed ‚Äì for example, it needs to know the size of an array to compute how to lay out data in memory.
You can statically see, just from the syntax of the code, whether CTFE applies to some piece of code or not:
CTFE is only used in places like the value of a <code>const</code> or the length of an array.</p>

<figure><pre><code data-lang="rust"><span>fn</span> <span>demo</span><span>()</span> <span>{</span>
  <span>const</span> <span>X</span><span>:</span> <span>u32</span> <span>=</span> <span>3</span> <span>+</span> <span>4</span><span>;</span> <span>// CTFE</span>
  <span>let</span> <span>x</span><span>:</span> <span>u32</span> <span>=</span> <span>4</span> <span>+</span> <span>3</span><span>;</span> <span>// no CTFE (but maybe constant propagation)</span>
<span>}</span></code></pre></figure>

<p>We say that the <code>3 + 4</code> above is in <em>const context</em> and hence subject to CTFE, but the <code>4 + 3</code> is not.</p>

<h2 id="const-safety">Const Safety</h2>

<p>Not all operations can be used in const context.
For example, it makes no sense to compute your array length as ‚Äúplease go read that file from disk and compute something‚Äù ‚Äì we can‚Äôt know what will be on the disk when the program actually runs.
We could use the disk of the machine compiling the program, but that does not sound very appealing either.
Things get even worse when you consider letting the program send information to the network.
Clearly, we don‚Äôt want CTFE to have actually observable side-effects outside of compilation.</p>

<p>In fact, just naively letting programs read files would also be grossly unsafe:
When computing the length of an array twice, it is important that we obtain the same result.
<strong>Update:</strong> As @eddyb points out, things get even worse once you consider const generics, traits, and coherence: At that point, you have to <a href="https://internals.rust-lang.org/t/mir-constant-evaluation/3143/47">rely on evaluating the same expression in different crates to produce the same result</a>. <strong>/Update</strong></p>

<blockquote>
  <p><em>CTFE must be deterministic.</em></p>
</blockquote>

<p>If not, the compiler could end up thinking that two arrays have the same length, but then later compute different layouts.
That would be a disaster.
So, any kind of external input and any kind of non-determinism is a complete no-go for CTFE.
This does not just concern I/O, even converting a reference to a <code>usize</code> is not deterministic.</p>

<p>The compiler will throw a CTFE error if such an operation is ever attempted to be executed.
Those programs that <em>are</em> executable in const context are called <em>const safe</em>:</p>

<blockquote>
  <p><em>A program is const safe if it can be executed by CTFE without hitting an error (panics are allowed).</em></p>
</blockquote>

<p>This is very much in analogy with the idea that a <em>safe</em> (or <em>run-time safe</em>, to distinguish it from const safe) program is a program that does not cause any memory errors or data races.
In fact, we will see that this analogy between ‚Äúprograms that are well-behaved under CTFE‚Äù (const safety) and ‚Äúprograms that do not cause UB‚Äù (run-time safety) can carry us very far.</p>

<p>One very interesting question now is whether some given function <code>foo</code> should be allowed to be called in const context.
We could just always say ‚Äúyes‚Äù, and rely on the fact that CTFE will throw an error when <code>foo</code> does anything fishy.
The problem with this approach is that, if <code>foo</code> is in a library, updating the library might change <code>foo</code> in a way that makes it no longer const-safe.
In other words, making <em>any</em> function not const-safe any more would be a semver violation because it could break downstream crates.</p>

<p>The typical mechanism to solve that problem is to have an annotation that explicitly marks a function as ‚Äúusable in const context‚Äù.
In Rust, the proposed mechanism for this purpose is <a href="https://github.com/rust-lang/rust/issues/24111"><code>const fn</code></a>; in C++ it is called <code>constexpr</code>.
The compiler can now reject calling non-<code>const</code> functions in const context, so library authors can add non-const-safe operations without breaking semver.</p>

<h2 id="const-type-system-and-const-soundness">Const Type System and Const Soundness</h2>

<p>This leads us to the interesting situation that the compiler will reject code in const context that it would accept just fine outside of const context.
In particular, the body of a <code>const fn</code> is <em>also</em> considered to be in const context ‚Äì otherwise, if we allowed calling arbitrary functions, we would have the same problem again.
One useful way to think about this is that we have a second type system, a ‚Äúconst type system‚Äù, that is used to type-check code in const context.
This type system does not allow calls to non-<code>const</code> functions.</p>

<p>It should probably also not allow casting a reference to an integer, because (as discussed above) that is a non-deterministic operation which cannot be performed during CTFE.
What else?</p>

<p>Before we go on and add random additional checks, let us step back and think about what our goals are here.
Typically, the purpose of a type system is to establish some sort of guarantee for a well-typed program.
For Rust‚Äôs ‚Äúmain‚Äù (‚Äúrun-time‚Äù) type system, that guarantee is ‚Äúno undefined behavior‚Äù, which means no memory errors and no data races.
What is the guarantee for our new const type system?
We have already talked about it above: It‚Äôs const safety!
This leads us to the definition of const soundness:</p>

<blockquote>
  <p><em>Our const type system is sound if well-typed programs are const-safe.</em></p>
</blockquote>

<p>Again, notice how this is very similar to the correctness statement for the run-time type system, which guarantees run-time safety.</p>

<p>However, we have to be a bit careful here.
Consider the following piece of code:</p>

<figure><pre><code data-lang="rust"><span>const</span> <span>fn</span> <span>is_eight_mod_256</span><span>(</span><span>x</span><span>:</span> <span>usize</span><span>)</span> <span>-&gt;</span> <span>bool</span> <span>{</span> <span>x</span> <span>%</span> <span>256</span> <span>==</span> <span>8</span> <span>}</span></code></pre></figure>

<p>We will definitely want to allow this code.
Why should <code>==</code> or <code>%</code> not be const-safe?
Well, we could call our function as follows:</p>

<figure><pre><code data-lang="rust"><span>is_eight_mod_256</span><span>(</span><span>Box</span><span>::</span><span>into_raw</span><span>(</span><span>Box</span><span>::</span><span>new</span><span>(</span><span>0</span><span>))</span> <span>as</span> <span>usize</span><span>);</span></code></pre></figure>

<p>That statement is certainly <em>not</em> const-safe as the result depends on where exactly the allocator puts our <a href="https://doc.rust-lang.org/stable/std/boxed/struct.Box.html"><code>Box</code></a>.
However, we want to blame the <code>as usize</code> for this issue, not the <code>is_eight_mod_256</code>.</p>

<p>The solution is for the const type system to not just have separate rules about which operations are allowed, we also must change our notion of which values are ‚Äúvalid‚Äù for a given type.
An integer obtained from a pointer is valid for <code>usize</code> at run-time, but it is <em>not</em> valid for <code>usize</code> in const mode!
After all, there are basic arithmetic operations that we expect all <code>usize</code> to support, that CTFE cannot support for pointers.</p>

<blockquote>
  <p><em>A function is const-safe if, when executed with const-valid arguments, it does not trigger a CTFE error and returns a const-valid result (if it returns at all).</em></p>
</blockquote>

<p>Under this definition, <code>is_eight_mod_256</code> is const-safe because whenever <code>x</code> is an actual integer, it will evaluate without any error.
At the same time, this shows that converting a reference into <code>usize</code> is <em>not</em> const-safe, because the input of this operation is const-valid, but the output is not!
This provides a solid justification for rejecting such casts in const context.</p>

<h2 id="ctfe-correctness">CTFE correctness</h2>

<p>In Rust, CTFE is performed by miri, a MIR interpreter that used to be a <a href="https://github.com/solson/miri/">separate project</a> but whose core engine has been integrated into rustc.
miri will execute the code in const context step-by-step and just complain and fail with an error when an operation cannot be performed.
This does not just concern non-determinism; miri does not support everything it could support because @oli-obk is <a href="https://github.com/rust-lang/rust/blob/5ba21844f6c85a0cd55c8ea0250d5cd758134f84/src/librustc_mir/interpret/const_eval.rs#L199">super careful</a> about not accidentally stabilizing behavior that should undergo an RFC.</p>

<p>In fact, right now miri will reject all operations on raw pointers.
They all raise a CTFE error and hence must all be rejected by the const type system.
The plan is to change miri so that it can support more operations, but we have to be careful in doing so.
I have already mentioned that miri must be deterministic, but there is another point to consider that you might have expected to play a much more prominent role:
CTFE, at least if it succeeds, should match run-time behavior!</p>

<blockquote>
  <p><em>CTFE is correct if, when it loops forever, completes with a result, or panics, that behavior matches the run-time behavior of the same code.</em></p>
</blockquote>

<p>We clearly do not want code to behave differently when it lives in const context and is run by CTFE, and when it is compiled to machine-code and executed ‚Äúfor real‚Äù.</p>

<p>Or, do we?
Don‚Äôt get me wrong, I am not advocating for deliberately breaking that property, but it sure is worth considering what would go wrong if miri was <em>not</em> CTFE-correct.
Maybe surprisingly, it turns out that this would not be a soundness issue!
All we care about for the purpose of soundness is for CTFE to be deterministic, as already discussed.
We don‚Äôt re-run the same code at run-time and rely on it still doing the same, so nothing actually breaks if CTFE behavior diverges from run-time behavior.</p>

<p>That said, not being CTFE correct is surely very surprising and we should avoid it best we can.
However, I am told that actually predicting the result of floating-point operations deterministically <a href="https://gafferongames.com/post/floating_point_determinism/">is extremely hard</a> and <a href="https://github.com/rust-lang/rust/issues/24111#issuecomment-386765720">LLVM isn‚Äôt exactly helping</a>.
So, we will likely have to live with either considering floating point operations to be const-unsafe (raising a CTFE error), or not having CTFE correctness when floating point operations are ‚Ä¶</p></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.ralfj.de/blog/2018/07/19/const.html">https://www.ralfj.de/blog/2018/07/19/const.html</a></em></p>]]>
            </description>
            <link>https://www.ralfj.de/blog/2018/07/19/const.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24494859</guid>
            <pubDate>Wed, 16 Sep 2020 17:20:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Remembering Roger Boisjoly, Challenger disaster whistleblower (1938-2012)]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24494854">thread link</a>) | @vezycash
<br/>
September 16, 2020 | https://whistleblowing.us/2012/02/remembering-roger-m-boisjoly-challenger-disaster-whistleblower-1938-2012/ | <a href="https://web.archive.org/web/*/https://whistleblowing.us/2012/02/remembering-roger-m-boisjoly-challenger-disaster-whistleblower-1938-2012/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		<p>by Linda Lewis</p>
<p>Published Feb. 12, 2012</p>
<p>Belatedly, the world has learned that Roger M. Boisjoly, the whistleblower who tried to prevent the <em>Challenger</em> space shuttle explosion, passed away recently in Nephi, Utah.</p>

<p>Roger M. Boisjoly, the son of a mill worker, was born April 25, 1938, in Lowell, Massachusetts. &nbsp;From childhood, he was known for his&nbsp;<a href="http://www.lowellsun.com/news/ci_19902357?source=rss#ixzz1mDSiN0rn">honesty</a>&nbsp;and ‚Äúwould not back down from what he believed in,‚Äù say family members. After earning a&nbsp;<a href="http://www.lowellsun.com/news/ci_19902357?source=rss#ixzz1mDOGMpcw">mechanical engineering</a>&nbsp;degree from the University of Lowell, he began working in the aircraft industry. After a move to California, then to Utah, he took a job with&nbsp; Morton Thiokol, working on solid rocket boosters for the space shuttle program.</p>
<p>In 1985, he&nbsp;<a href="http://www.dailymail.co.uk/news/article-2097973/Roger-Boisjoly-dead-Engineer-foresaw-Challenger-explosion-dies-age-73.html">warned</a>&nbsp;managers that 0-rings used to seal joints in the booster rockets could fail at freezing temperatures. ‚ÄòThe result would be&nbsp;<a href="http://www.dailymail.co.uk/news/article-2097973/Roger-Boisjoly-dead-Engineer-foresaw-Challenger-explosion-dies-age-73.html">a catastrophe of the highest order</a>&nbsp;‚Äî loss of human life,‚Äô he wrote in a memo.&nbsp; But, the problem had not been resolved when the space shuttle&nbsp;<em>Challenger</em>&nbsp;was prepared for launch on January 28, 1986.</p>
<p>On the night of January 27, temperatures fell below freezing.&nbsp;<a href="http://www.telegraph.co.uk/news/obituaries/science-obituaries/9067491/Roger-Boisjoly.html">Boisjoly and four other engineers</a>&nbsp;tried desperately to convince management that the launch should be scrubbed.&nbsp; They warned that the cold would cause rubber o-rings to become brittle and fail, allowing hot gases to leak at the joints. Morton Thiokol and NASA managers dismissed the arguments, and decided to&nbsp;<a href="http://www.christianpost.com/news/roger-boisjolys-death-goes-unnoticed-predicted-1986-nasa-rocket-explosion-68897/">go ahead</a>&nbsp;with the launch.</p>
<p>The next day, Challenger lifted off from its pad at Kennedy Space Center.&nbsp; At first, the launch appeared normal, but 73 seconds into flight the shuttle exploded, sending fragments arcing across the bright Florida sky.&nbsp; In view of a horrified public, including thousands of&nbsp;<a href="http://www.historyplace.com/speeches/reagan-challenger.htm">schoolchildren</a>&nbsp;watching a live broadcast, seven astronauts plummeted to their deaths in the Atlantic ocean.</p>
<p>NASA‚Äôs actions following the disaster were typical for a government agency with a scandal on its hands: it impounded documents and told employees and others connected with the program&nbsp;<a href="http://books.google.com/books?id=SwuCxfZn_kEC&amp;pg=PA39&amp;lpg=PA39&amp;dq=%22NASA+Had+Warning+of+a+Disaster+Risk+Posed+by+Booster%22&amp;source=bl&amp;ots=PxrIMhhWBM&amp;sig=8jGg4rLQy4_dX4_bloIqwa5NW8I&amp;hl=en&amp;sa=X&amp;ei=9RE4T5nfLaTb0QHw6tnhAg&amp;ved=0CD0Q6AEwBQ#v=onepage&amp;q=%22NASA%20Had%20Warning%20of%20a%20Disaster%20Risk%20Posed%20by%20Booster%22&amp;f=false">not to talk to reporters</a>, even off the record.</p>
<p>President Ronald Reagan established a commission, known as the ‚ÄúRogers Commission,‚Äù to search for the cause of the explosion and, initially, NASA managers were successful in &nbsp;<a href="http://books.google.com/books?id=SwuCxfZn_kEC&amp;pg=PA39&amp;lpg=PA39&amp;dq=%22NASA+Had+Warning+of+a+Disaster+Risk+Posed+by+Booster%22&amp;source=bl&amp;ots=PxrIMhhWBM&amp;sig=8jGg4rLQy4_dX4_bloIqwa5NW8I&amp;hl=en&amp;sa=X&amp;ei=9RE4T5nfLaTb0QHw6tnhAg&amp;ved=0CD0Q6AEwBQ#v=onepage&amp;q=%22NASA%20Had%20Warning%20of%20a%20Disaster%20Risk%20Posed%20by%20Booster%22&amp;f=false">diverting attention</a>&nbsp;from the o-rings. &nbsp;But, the dissenting engineers refused to let an important truth be swept under the carpet.</p>
<blockquote><p>It was clear to the engineers that NASA was bent on minimizing the pre-launch concern over the cold. Boisjoly was sufficiently concerned that he took his&nbsp;personal files&nbsp;into a sort of protective custody. He emptied his desk and took the critical memos with him to Huntsville. He slept with them in his motel room. He hid them in the locked trunk of his rented car when he went to work at the Marshall Space Flight Center. He sent copies home to Roberta. And still he worried that someone might try to lose or destroy them. ‚Äì&nbsp;William C. Rempel, <a href="http://articles.latimes.com/1987-01-28/news/mn-1361_1_engineers/3">Los Angeles Times</a></p></blockquote>
<p>The investigation took a new direction after February 9, when the New York Times published a&nbsp;<a href="http://books.google.com/books?id=6f6LrdOXO6wC&amp;pg=PA9&amp;lpg=PA9&amp;dq=new+york+times+february+9+challenger+closed+session&amp;source=bl&amp;ots=ycL-vpTDJY&amp;sig=poGvZlXOiWbefMO3NCP8jvXlbyY&amp;hl=en&amp;sa=X&amp;ei=Jlo4T5SNOuPu0gHU5MHfAg&amp;ved=0CCsQ6AEwAA#v=onepage&amp;q=new%20york%20times%20february%209%20challenger%20closed%20session&amp;f=false">front-page story</a>&nbsp;(‚ÄúNASA Had Warning of a Disaster Risk Posed by Booster‚Äù) citing concerns about o-ring failure expressed in documents it had obtained from an ‚Äúanonymous solid fuel rocket analyst.‚Äù&nbsp; Afterward, the commission held three&nbsp;<a href="http://books.google.com/books?id=6f6LrdOXO6wC&amp;pg=PA9&amp;lpg=PA9&amp;dq=new+york+times+february+9+challenger+closed+session&amp;source=bl&amp;ots=ycL-vpTDJY&amp;sig=poGvZlXOiWbefMO3NCP8jvXlbyY&amp;hl=en&amp;sa=X&amp;ei=Jlo4T5SNOuPu0gHU5MHfAg&amp;ved=0CCsQ6AEwAA#v=onepage&amp;q=new%20york%20times%20february%209%20challenger%20closed%20session&amp;f=false">closed sessions</a>&nbsp;where personnel from Morton Thiokol and Marshall Space Flight center were questioned, including participants in the teleconference that took place on the eve of Challenger‚Äôs launch.&nbsp; As a result, the o-ring issues became a major focus of the investigation.</p>
<p>Boisjoly, who had been known as a ‚Äúcrackerjack troubleshooter,‚Äù was re-branded a ‚Äú<a href="http://www.ocregister.com/news/boisjoly-248703-boyd-chapman.html">whistleblower</a>.‚Äù ‚ÄúAfter he finally passed [his] files personally to Major Gen. Donald J. Kutyna of the presidential commission, Boisjoly was&nbsp;<a href="http://articles.latimes.com/1987-01-28/news/mn-1361_1_engineers/3">accused</a>&nbsp;of ‚Äòairing the company‚Äôs dirty laundry‚Äô in front of the whole country,‚Äù wrote the LA Times.</p>
<p>In June 1986, the commission confirmed that the o-rings and cold weather led to the disaster.&nbsp; But, it did not attach blame to any of the individuals who ignored the engineers‚Äô warnings.&nbsp; Instead, the commission criticized the ‚Äúflawed‚Äù&nbsp;<a href="http://books.google.com/books?id=EP9D_30SpkMC&amp;pg=RA1-PA9&amp;lpg=RA1-PA9&amp;dq=NASA+HAD+WARNING+OF+A+DISASTER+RISK+POSED+BY+BOOSTER&amp;source=bl&amp;ots=ZsOwDSnG83&amp;sig=YgXOJqYLqYNITsW9iFk8pvKbEEg&amp;hl=en&amp;sa=X&amp;ei=3BQ4T-_vBqL50gG43JDTBQ&amp;ved=0CEMQ6AEwBw#v=onepage&amp;q=NASA%20HAD%20WARNING%20OF%20A%20DISASTER%20RISK%20POSED%20BY%20BOOSTER&amp;f=false">process</a>&nbsp;of decision-making.</p>
<p>The pre-launch effort by Boisjoly and others to stop the launch did not qualify as&nbsp;<a href="http://www.nspe.org/Ethics/EthicsResources/Otherresources/whistle.html">whistleblowing</a>, some experts say, because the engineers did not go outside approved channels. But, that legal definition is unrealistically narrow.</p>
<blockquote><p>If it is a distinguishing mark of actions labeled whistleblowing that the agent intends to&nbsp;force attention to a serious moral problem, both Boisjoly‚Äôs and MacDonald‚Äôs responses qualify. This feature is the foundation of the public‚Äôs interest in whistleblowing. By bringing such serious problems to light, whistleblowers contribute to protecting the public‚Äôs welfare.&nbsp;<em>‚Äì Vivian Weill, <a href="http://www.nspe.org/Ethics/EthicsResources/Otherresources/whistle.html">Illinois Institute of Technology</a> (1996)</em></p></blockquote>
<p>We now know that Boisjoly&nbsp;<a href="http://keranews.org/post/remembering-roger-boisjoly-he-tried-stop-shuttle-challenger-launch">met secretly</a>&nbsp;with an NPR reporter shortly after the shuttle disaster to provide information about the problems at Morton Thiokol ‚Äî clearly not an approved channel. Unquestionably, that was an act of whistleblowing, but Boisjoly‚Äôs request for&nbsp;<a href="http://keranews.org/post/remembering-roger-boisjoly-he-tried-stop-shuttle-challenger-launch">anonymity</a>&nbsp;prevented it from becoming public knowledge.</p>
<p>The clearest evidence of whistleblowing, writes Weill, may be its most predictable consequence:&nbsp;&nbsp;<a href="https://whistleblowing.us/2012/02/remembering-roger-m-boisjoly-challenger-disaster-whistleblower-1938-2012/Weil%20nevertheless%20suggests%20that%20Boisjoly%20was%20a%20whistleblower,%20under%20different%20standards.%20Retaliation%20may%20be%20the%20most%20predictable%20feature%20of%20whistleblowing,%20perhaps%20enough%20to%20make%20it%20a%20defining%20feature.writes">retaliation</a>. There was no shortage of that after the engineers exposed the truth of o-ring failures. &nbsp;Along with Allan MacDonald, another engineer who tried to stop the Challenger launch, Boisjoly was&nbsp;<a href="http://www.standard.net/topics/atk/2011/01/27/two-men-fought-prevent-challenger-launch">taken off the investigation team</a>&nbsp;by Morton Thiokol management. The environment, he said, was hostile.</p>
<blockquote><p>‚Äú[Thiokol managers] were extremely angry when I turned in my documentation and that anger increased as I continued to testify,‚Äù says Boisjoly. During testimony at a committee hearing, he publicly refuted a manager‚Äôs assertion that Thiokol engineers weren‚Äôt unanimous in recommending that the launch be canceled. ‚ÄúWhen I finished they were so damn mad&nbsp;that I think if they had guns they would have shot me on the spot,‚Äù he says. ‚Äì Molly Gavin, Engineering Times (August, 1995), <a href="https://www.nspe.org/resources/blogs/nspe-blog/pe-warned-space-shuttle-disaster">republished</a> by NSPE.</p></blockquote>
<p>Later, in ‚ÄúTruth, Lies and O-Rings,‚Äù MacDonald wrote that ‚ÄúRoger and I already felt like&nbsp;<a href="http://www.standard.net/topics/atk/2011/01/27/two-men-fought-prevent-challenger-launch">lepers</a>, but when we returned to Utah following the May 2 session our colleagues treated us as if we had just been arrested for child sexual abuse.‚Äù</p>
<p>Colleagues and even neighbors&nbsp;<a href="http://www.guardian.co.uk/world/feedarticle/10084988">shunned</a>&nbsp;Boisjoly. Thiokol ‚Äú<a href="http://www.nytimes.com/2012/02/04/us/roger-boisjoly-73-dies-warned-of-shuttle-danger.html">cut him off</a>&nbsp;from space work,‚Äù and NASA ‚Äútried to&nbsp;<a href="http://articles.latimes.com/2012/feb/07/local/la-me-roger-boisjoly-20120207">blackball him</a>&nbsp;from the industry.‚Äù ‚ÄúManagers isolated him in his position and ‚Äú<a href="http://community.nspe.org/blogs/nspeblog/archive/2012/02/06/dhfh.aspx">made life a living hell</a>&nbsp;on a day-to-day basis.‚Äù</p>
<p>‚ÄúWhen I realized what was happening, it absolutely destroyed me,‚Äù Boisjoly told The Associated Press in a 1988 telephone interview. ‚Äú<a href="http://www.guardian.co.uk/world/feedarticle/10084988">It destroyed my career, my life, everything else.</a>‚Äù&nbsp; Boisjoly hung on for six months before deciding to take&nbsp;<a href="http://community.nspe.org/blogs/nspeblog/archive/2012/02/06/dhfh.aspx">long-term disability</a>&nbsp;leave, having been diagnosed with post-traumatic stress disorder. He would not return to Thiokol.</p>
<p>Boisjoly filed lawsuits against Thiokol and NASA, including a&nbsp;<em><a href="http://en.wikipedia.org/wiki/Qui_tam">qui tam</a></em>&nbsp;claim that Morton Thiokol had defrauded the public. The&nbsp;<a href="http://articles.latimes.com/1987-06-04/news/mn-4921_1_justice-department-spokeswoman">Justice Department refused</a>&nbsp;to join the suit as expected, and the lawsuits were&nbsp;<a href="http://ut.findacase.com/research/wfrmDocViewer.aspx/xq/fac.19880831_0000002.DUT.htm/qx">dismissed</a>.&nbsp; The chilling spectacle of a whistleblower‚Äôs fall from grace sent a powerful message to others in the industry to stay silent about the next disaster in the making.</p>
<p>Boisjoly viewed the lawsuits as ‚Äú<a href="http://community.nspe.org/blogs/nspeblog/archive/2012/02/06/dhfh.aspx">an exercise in total futility</a>.‚Äù</p>
<blockquote><p>‚ÄúI think [the court system was]&nbsp;afraid of what they‚Äôd find.‚Äù The suits never even made it to the discovery process, he says. Boisjoly decided not to pursue the lawsuits further. ‚ÄúI tried to get on with my life,‚Äù he says. ‚Äì Gavin, 1995</p></blockquote>
<p>Boisjoly‚Äôs moral courage earned him multiple&nbsp;<a href="http://www.onlineethics.org/cms/12717.aspx">awards</a>, including one from the American Association for the Advancement of Science in 1988, and another from the Cavallo Foundation in 1990. Despite the awards, Boisjoly saw no hope of returning to his former career.&nbsp; Like many other blacklisted whistleblowers, he decided to&nbsp;<a href="http://community.nspe.org/blogs/nspeblog/archive/2012/02/06/dhfh.aspx">go into business for himself</a>.&nbsp; He obtained a professional engineering license and began consulting as a forensic engineer. In additon, he wrote papers and lectured to engineering students on a subject dear to him:&nbsp;&nbsp;<a href="http://www.dailymail.co.uk/news/article-2097973/Roger-Boisjoly-dead-Engineer-foresaw-Challenger-explosion-dies-age-73.html#ixzz1locDb6ls">ethical decision making.</a></p>
<p>NASA‚Äôs management culture failed to preserve the costly lessons of the&nbsp;<em>Challenger&nbsp;</em>disaster. In January 2003, NASA launched&nbsp;<a href="http://en.wikipedia.org/wiki/Space_Shuttle_Columbia_disaster">another space shuttle</a>&nbsp;under circumstances that worried engineers. &nbsp;Foam insulation broke off during&nbsp;<em>Columbia‚Äôs&nbsp;</em>lift-off and punched a hole in a wing, leaving it vulnerable to the extreme forces of reentry. On February 1, as it re-entered earth‚Äôs atmosphere,&nbsp;<em><a href="http://en.wikipedia.org/wiki/Space_Shuttle_Columbia_disaster">Columbia disintegrated</a></em>&nbsp;in the skies above Texas, sending another seven astronauts to their deaths.</p>
<p>The space shuttle program&nbsp;<a href="http://www.nasa.gov/mission_pages/shuttle/main/index.html">ended</a>, several flights later, on July 21, 2011.&nbsp; Less than six months after, on&nbsp;<a href="http://www.dailymail.co.uk/news/article-2097973/Roger-Boisjoly-dead-Engineer-foresaw-Challenger-explosion-dies-age-73.html#ixzz1locDb6ls">January 6, 2012</a>, Roger Boisjoly finally found peace.&nbsp; At the age of 73 ‚Äî one year for every second of Challenger‚Äôs last flight ‚Äî he died in his sleep of cancer.</p>
<p>* * *</p>
<p><strong>More information about Roger Boisjoly and the Challenger disaster</strong></p>
<p><a href="http://www.youtube.com/watch?v=On9p0Q9eKr4">Roger Boisjoly</a>&nbsp;on Ethics in Business (video)</p>
<p><a href="http://www.onlineethics.org/Topics/ProfPractice/Exemplars/BehavingWell/RB-intro.aspx">Workplace ethics</a>&nbsp;(paper by Roger Boisjoly)</p>
<p>The&nbsp;<a href="http://www.youtube.com/watch?v=AfnvFnzs91s">Challenger launch</a>&nbsp;and explosion (video)</p>
<p><a href="https://books.google.com/books?id=o8TuAAAAMAAJ">Truth, Lies, and O-rings: Inside the Space Shuttle Challenger Disaster</a>&nbsp;by&nbsp;Allan J. McDonald.&nbsp;University Press of Florida, 2009.</p>
<p><a href="https://books.google.com/books?id=6f6LrdOXO6wC">The Challenger Launch Decision: Risky Techology, Culture, and Deviance at NASA</a> by Diane Vaughan. University of Chicago Press, 1997.</p>
			</div></div>]]>
            </description>
            <link>https://whistleblowing.us/2012/02/remembering-roger-m-boisjoly-challenger-disaster-whistleblower-1938-2012/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24494854</guid>
            <pubDate>Wed, 16 Sep 2020 17:20:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to Raise a Rolling Fund]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24494643">thread link</a>) | @simonpure
<br/>
September 16, 2020 | https://www.notion.so/How-to-Raise-a-Rolling-Fund-99220e692e5e40598c2230e5c7e8dce7 | <a href="https://web.archive.org/web/*/https://www.notion.so/How-to-Raise-a-Rolling-Fund-99220e692e5e40598c2230e5c7e8dce7">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.notion.so/How-to-Raise-a-Rolling-Fund-99220e692e5e40598c2230e5c7e8dce7</link>
            <guid isPermaLink="false">hacker-news-small-sites-24494643</guid>
            <pubDate>Wed, 16 Sep 2020 17:03:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Large-scale Abuse of Contact Discovery in Mobile Messengers [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 282 | Comments 84 (<a href="https://news.ycombinator.com/item?id=24494505">thread link</a>) | @sizzle
<br/>
September 16, 2020 | https://encrypto.de/papers/HWSDS21.pdf | <a href="https://web.archive.org/web/*/https://encrypto.de/papers/HWSDS21.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://encrypto.de/papers/HWSDS21.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-24494505</guid>
            <pubDate>Wed, 16 Sep 2020 16:51:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[BPF based live debugging for Go/C++/Rust in prod with no code changes]]>
            </title>
            <description>
<![CDATA[
Score 16 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24494486">thread link</a>) | @roopakv
<br/>
September 16, 2020 | https://blog.pixielabs.ai/blog/ebpf-function-tracing/post/ | <a href="https://web.archive.org/web/*/https://blog.pixielabs.ai/blog/ebpf-function-tracing/post/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><p>This is the first in a series of posts describing how we can debug applications in production using eBPF, without recompilation/redeployment. This post describes how to use <a href="https://github.com/iovisor/gobpf" target="_blank" rel="noopener noreferrer">gobpf</a> and uprobes to build a function argument tracer for Go applications. This technique is also extendable to other compiled languages such as C++, Rust, etc. The next sets of posts in this series will discuss using eBPF for tracing HTTP/gRPC data, SSL, etc.</p><p>When debugging, we are typically interested in capturing the state of a program. This allows us to examine what the application is doing and determine where the bug is located in our code. A simple way to observe state is to use a debugger to capture function arguments. For Go applications, we often use Delve or gdb.</p><p>Delve and gdb work well for debugging in a development environment, but they are not often used in production. The features that make these debuggers powerful can also make them undesirable to use in production systems. Debuggers can cause significant interruption to the program and even allow mutation of state which might lead to unexpected failures of production software.</p><p>To more cleanly capture function arguments, we will explore using enhanced BPF (<a href="https://ebpf.io/" target="_blank" rel="noopener noreferrer">eBPF</a>), which is available in Linux 4.x+, and the higher level Go library <a href="https://github.com/iovisor/gobpf" target="_blank" rel="noopener noreferrer">gobpf</a>.</p><p>Extended BPF (eBPF) is a kernel technology that is available in Linux 4.x+. You can think of it as a lightweight sandboxed VM that runs inside of the Linux kernel and can provide verified access to kernel memory.</p><p>As shown in the overview below, eBPF allows the kernel to run BPF bytecode. While the front-end language used can vary, it is often a restricted subset of C. Typically the C code is first compiled to the BPF bytecode using Clang, then the bytecode is verified to make sure it's safe to execute. These strict verifications guarantee that the machine code will not intentionally or accidentally compromise the Linux kernel, and that the BPF probe will execute in a bounded number of instructions every time it is triggered. These guarantees enable eBPF to be used in performance-critical workloads like packet filtering, networking monitoring, etc.</p><p>Functionally, eBPF allows you to run restricted C code upon some event (eg. timer, network event or a function call). When triggered on a function call we call these functions probes and they can be used to either run on a function call within the kernel (kprobes), or a function call in a userspace program (uprobes). This post focuses on using uprobes to allow dynamic tracing of function arguments.</p><p>Uprobes allow you to intercept a userspace program by inserting a debug trap instruction (<code>int3</code> on an x86) that triggers a soft-interrupt . This is also <a href="https://eli.thegreenplace.net/2011/01/27/how-debuggers-work-part-2-breakpoints" target="_blank" rel="noopener noreferrer">how debuggers work</a>. The flow for an uprobe is essentially the same as any other BPF program and is summarized in the diagram below. The compiled and verified BPF program is executed as part of a uprobe, and the results can be written into a buffer.</p><div><figure>
    <span>
      <span></span>
  <p><img alt="BPF for tracing (from Brendan Gregg)" title="BPF for tracing (from Brendan Gregg)" src="https://blog.pixielabs.ai/static/a11d6d9cb78e055d59136a97665907d3/073a0/bpf-tracing.jpg" srcset="https://blog.pixielabs.ai/static/a11d6d9cb78e055d59136a97665907d3/8356d/bpf-tracing.jpg 259w,https://blog.pixielabs.ai/static/a11d6d9cb78e055d59136a97665907d3/bc760/bpf-tracing.jpg 518w,https://blog.pixielabs.ai/static/a11d6d9cb78e055d59136a97665907d3/073a0/bpf-tracing.jpg 610w" sizes="(max-width: 610px) 100vw, 610px" loading="lazy"></p>
    </span>
    <figcaption>BPF for tracing (from Brendan Gregg)</figcaption>
  </figure></div><p>Let's see how uprobes actually function. To deploy uprobes and capture function arguments, we will be using <a href="https://github.com/pixie-labs/pixie/blob/main/demos/simple-gotracing/app.go" target="_blank" rel="noopener noreferrer">this</a> simple demo application. The relevant parts of this Go program are shown below.</p><p><code>main()</code> is a simple HTTP server that exposes a single <em>GET</em> endpoint on <em>/e</em>, which computes Euler's number (<strong>e</strong>) using an iterative approximation. <code>computeE</code> takes in a single query param(<em>iters</em>), which specifies the number of iterations to run for the approximation. The more iterations, the more accurate the approximation, at the cost of compute cycles. It's not essential to understand the math behind the function. We are just interested in tracing the arguments of any invocation of <code>computeE</code>.</p><pre><div><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4zMzYgNUg4LjA0OEM2LjkxNjQ4IDUgNiA1LjkxNjQ4IDYgNy4wNDhWMjEuMzg0SDguMDQ4VjcuMDQ4SDIwLjMzNlY1Wk0yMy40MDggOS4wOTZIMTIuMTQ0QzExLjAxMjUgOS4wOTYgMTAuMDk2IDEwLjAxMjUgMTAuMDk2IDExLjE0NFYyNS40OEMxMC4wOTYgMjYuNjExNSAxMS4wMTI1IDI3LjUyOCAxMi4xNDQgMjcuNTI4SDIzLjQwOEMyNC41Mzk1IDI3LjUyOCAyNS40NTYgMjYuNjExNSAyNS40NTYgMjUuNDhWMTEuMTQ0QzI1LjQ1NiAxMC4wMTI1IDI0LjUzOTUgOS4wOTYgMjMuNDA4IDkuMDk2Wk0xMi4xNDQgMjUuNDhIMjMuNDA4VjExLjE0NEgxMi4xNDRWMjUuNDhaIiBmaWxsPSIjNEE0QzRGIi8+Cjwvc3ZnPgo=" alt="" title="Copy to clipboard" aria-label="copy"></p></div></pre><p>To understand how uprobes work, let's look at how symbols are tracked inside binaries. Since uprobes work by inserting a debug trap instruction, we need to get the address where the function is located. Go binaries on Linux use ELF to store debug info. This information is available, even in optimized binaries, unless debug data has been stripped. We can use the command <code>objdump</code> to examine the symbols in the binary:</p><pre><div><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4zMzYgNUg4LjA0OEM2LjkxNjQ4IDUgNiA1LjkxNjQ4IDYgNy4wNDhWMjEuMzg0SDguMDQ4VjcuMDQ4SDIwLjMzNlY1Wk0yMy40MDggOS4wOTZIMTIuMTQ0QzExLjAxMjUgOS4wOTYgMTAuMDk2IDEwLjAxMjUgMTAuMDk2IDExLjE0NFYyNS40OEMxMC4wOTYgMjYuNjExNSAxMS4wMTI1IDI3LjUyOCAxMi4xNDQgMjcuNTI4SDIzLjQwOEMyNC41Mzk1IDI3LjUyOCAyNS40NTYgMjYuNjExNSAyNS40NTYgMjUuNDhWMTEuMTQ0QzI1LjQ1NiAxMC4wMTI1IDI0LjUzOTUgOS4wOTYgMjMuNDA4IDkuMDk2Wk0xMi4xNDQgMjUuNDhIMjMuNDA4VjExLjE0NEgxMi4xNDRWMjUuNDhaIiBmaWxsPSIjNEE0QzRGIi8+Cjwvc3ZnPgo=" alt="" title="Copy to clipboard" aria-label="copy"></p></div></pre><p>From the output, we know that the function <code>computeE</code> is located at address <code>0x6609a0</code>. To look at the instructions around it, we can ask <code>objdump</code> to disassemble to binary (done by adding <code>-d</code>). The disassembled code looks like:</p><pre><div><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4zMzYgNUg4LjA0OEM2LjkxNjQ4IDUgNiA1LjkxNjQ4IDYgNy4wNDhWMjEuMzg0SDguMDQ4VjcuMDQ4SDIwLjMzNlY1Wk0yMy40MDggOS4wOTZIMTIuMTQ0QzExLjAxMjUgOS4wOTYgMTAuMDk2IDEwLjAxMjUgMTAuMDk2IDExLjE0NFYyNS40OEMxMC4wOTYgMjYuNjExNSAxMS4wMTI1IDI3LjUyOCAxMi4xNDQgMjcuNTI4SDIzLjQwOEMyNC41Mzk1IDI3LjUyOCAyNS40NTYgMjYuNjExNSAyNS40NTYgMjUuNDhWMTEuMTQ0QzI1LjQ1NiAxMC4wMTI1IDI0LjUzOTUgOS4wOTYgMjMuNDA4IDkuMDk2Wk0xMi4xNDQgMjUuNDhIMjMuNDA4VjExLjE0NEgxMi4xNDRWMjUuNDhaIiBmaWxsPSIjNEE0QzRGIi8+Cjwvc3ZnPgo=" alt="" title="Copy to clipboard" aria-label="copy"></p></div></pre><p>From this we can see what happens when <code>computeE</code> is called. The first instruction is <code>mov 0x8(%rsp),%rax</code>. This moves the content offset <code>0x8</code> from the <code>rsp</code> register to the <code>rax</code> register. This is actually the input argument <code>iterations</code> above; Go's arguments are passed on the stack.</p><p>With this information in mind, we are now ready to dive in and write code to trace the arguments for <code>computeE</code>.</p><p>To capture the events, we need to register a uprobe function and have a userspace function that can read the output. A diagram of this is shown below. We will write a binary called <code>tracer</code> that is responsible for registering the BPF code and reading the results of the BPF code. As shown, the uprobe will simply write to a perf-buffer, a linux kernel data structure used for perf events.</p><div><figure><img src="https://blog.pixielabs.ai/static/9f8b26f88f9b132440ef1b9d48b5a341/app-tracer.svg"><figcaption>High-level overview showing the Tracer binary listening to perf events generated from the App</figcaption></figure></div><p>Now that we understand the pieces involved, let's look into the details of what happens when we add an uprobe. The diagram below shows how the binary is modified by the Linux kernel with an uprobe. The soft-interrupt instruction (<code>int3</code>) is inserted as the first instruction in <code>main.computeE</code>. This causes a soft-interrupt, allowing the Linux kernel to execute our BPF function. We then write the arguments to the perf-buffer, which is asynchronously read by the tracer.</p><div><figure><img src="https://blog.pixielabs.ai/static/87301c7282e8f8270fee2afb9fe85c81/app-trace.svg"><figcaption>Details of how a debug trap instruction is used call a BPF program</figcaption></figure></div><p>The BPF function for this is relatively simple; the C code is shown below. We register this function so that it's invoked every time <code>main.computeE</code> is called. Once it's called, we simply read the function argument and write that the perf buffer. Lots of boilerplate is required to set up the buffers, etc. and this can be found in the complete example <a href="https://github.com/pixie-labs/pixie/blob/main/demos/simple-gotracing/trace_example/trace.go" target="_blank" rel="noopener noreferrer">here</a>.</p><pre><div><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4zMzYgNUg4LjA0OEM2LjkxNjQ4IDUgNiA1LjkxNjQ4IDYgNy4wNDhWMjEuMzg0SDguMDQ4VjcuMDQ4SDIwLjMzNlY1Wk0yMy40MDggOS4wOTZIMTIuMTQ0QzExLjAxMjUgOS4wOTYgMTAuMDk2IDEwLjAxMjUgMTAuMDk2IDExLjE0NFYyNS40OEMxMC4wOTYgMjYuNjExNSAxMS4wMTI1IDI3LjUyOCAxMi4xNDQgMjcuNTI4SDIzLjQwOEMyNC41Mzk1IDI3LjUyOCAyNS40NTYgMjYuNjExNSAyNS40NTYgMjUuNDhWMTEuMTQ0QzI1LjQ1NiAxMC4wMTI1IDI0LjUzOTUgOS4wOTYgMjMuNDA4IDkuMDk2Wk0xMi4xNDQgMjUuNDhIMjMuNDA4VjExLjE0NEgxMi4xNDRWMjUuNDhaIiBmaWxsPSIjNEE0QzRGIi8+Cjwvc3ZnPgo=" alt="" title="Copy to clipboard" aria-label="copy"></p></div></pre><p>Now we have a fully functioning end-to-end argument tracer for the <code>main.computeE</code> function! The results of this are shown in the video clip below.</p><div><figure><img src="https://blog.pixielabs.ai/static/4de8713a5b05e1f9132350f333572174/e2e-demo.gif"><figcaption>End-to-End demo</figcaption></figure></div><p>One of the cool things is that we can actually use GDB to see the modifications made to the binary. Here we dump out the instructions at the <code>0x6609a0</code> address, before running our tracer binary.</p><pre><div><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4zMzYgNUg4LjA0OEM2LjkxNjQ4IDUgNiA1LjkxNjQ4IDYgNy4wNDhWMjEuMzg0SDguMDQ4VjcuMDQ4SDIwLjMzNlY1Wk0yMy40MDggOS4wOTZIMTIuMTQ0QzExLjAxMjUgOS4wOTYgMTAuMDk2IDEwLjAxMjUgMTAuMDk2IDExLjE0NFYyNS40OEMxMC4wOTYgMjYuNjExNSAxMS4wMTI1IDI3LjUyOCAxMi4xNDQgMjcuNTI4SDIzLjQwOEMyNC41Mzk1IDI3LjUyOCAyNS40NTYgMjYuNjExNSAyNS40NTYgMjUuNDhWMTEuMTQ0QzI1LjQ1NiAxMC4wMTI1IDI0LjUzOTUgOS4wOTYgMjMuNDA4IDkuMDk2Wk0xMi4xNDQgMjUuNDhIMjMuNDA4VjExLjE0NEgxMi4xNDRWMjUuNDhaIiBmaWxsPSIjNEE0QzRGIi8+Cjwvc3ZnPgo=" alt="" title="Copy to clipboard" aria-label="copy"></p></div></pre><p>Here it is after we run the tracer binary. We can clearly see that the first instruction is now <code>int3</code>.</p><pre><div><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4zMzYgNUg4LjA0OEM2LjkxNjQ4IDUgNiA1LjkxNjQ4IDYgNy4wNDhWMjEuMzg0SDguMDQ4VjcuMDQ4SDIwLjMzNlY1Wk0yMy40MDggOS4wOTZIMTIuMTQ0QzExLjAxMjUgOS4wOTYgMTAuMDk2IDEwLjAxMjUgMTAuMDk2IDExLjE0NFYyNS40OEMxMC4wOTYgMjYuNjExNSAxMS4wMTI1IDI3LjUyOCAxMi4xNDQgMjcuNTI4SDIzLjQwOEMyNC41Mzk1IDI3LjUyOCAyNS40NTYgMjYuNjExNSAyNS40NTYgMjUuNDhWMTEuMTQ0QzI1LjQ1NiAxMC4wMTI1IDI0LjUzOTUgOS4wOTYgMjMuNDA4IDkuMDk2Wk0xMi4xNDQgMjUuNDhIMjMuNDA4VjExLjE0NEgxMi4xNDRWMjUuNDhaIiBmaWxsPSIjNEE0QzRGIi8+Cjwvc3ZnPgo=" alt="" title="Copy to clipboard" aria-label="copy"></p></div></pre><p>Although we hardcoded the tracer for this particular example, it's possible to make this process generalizable. Many aspects of Go, such as nested pointers, interfaces, channels, etc. make this process challenging, but solving these problems allows for another instrumentation mode not available in existing systems. Also, since this process works at the binary level, it can be used with natively compiled binaries for other languages (C++, Rust, etc.). We just need to account for the differences in their respective ABI's.</p><p>BPF tracing using uprobes comes with its own set of pros and cons. It's beneficial to use BPF when we need observability into the binary state, even when running in environments where attaching a debugger will be problematic or harmful (ex. production binaries). The biggest downside is the code required to get even trivial visibility into the application state. While BPF code is relatively accessible, it's complex to write and maintain. Without substantial high-level tooling, it's unlikely this can be used for generic debugging.</p><div><figure><img src="https://blog.pixielabs.ai/static/12645e1cb582041085ede1877e97c812/wavingnaut.svg"><figcaption></figcaption></figure></div><p>Go dynamic logging is something we are working on at Pixie. You can checkout <a href="https://docs.pixielabs.ai/tutorials/simple-go-tracing/" target="_blank" rel="noopener noreferrer">this</a> to see how Pixie traces Go applications running on K8s clusters. If this post's contents are interesting, please give <a href="https://pixielabs.ai/" target="_blank" rel="noopener noreferrer">Pixie</a> a try, or check out our <a href="https://pixielabs.ai/career" target="_blank" rel="noopener noreferrer">open positions</a>.</p><h2>References</h2><ul><li><a href="https://github.com/iovisor/gobpf" target="_blank" rel="noopener noreferrer">iovisor/gobpf</a></li><li><a href="https://github.com/iovisor/bcc" target="_blank" rel="noopener noreferrer">iovisor/bcc</a></li><li>GoPoland Meetup <a href="https://www.youtube.com/watch?v=SlcBq3xDc7I" target="_blank" rel="noopener noreferrer">Video</a> + <a href="https://www.slideshare.net/ZainAsgar/go-logging-using-ebpf" target="_blank" rel="noopener noreferrer">Slides</a></li><li>GoBangalore Meetup <a href="https://www.youtube.com/watch?v=0mxUU_--dDM&amp;feature=youtu.be" target="_blank" rel="noopener noreferrer">Video</a>. Checkout Below:</li></ul><iframe width="560" height="315" src="https://www.youtube.com/embed/0mxUU_--dDM?start=15" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div></div></div>]]>
            </description>
            <link>https://blog.pixielabs.ai/blog/ebpf-function-tracing/post/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24494486</guid>
            <pubDate>Wed, 16 Sep 2020 16:50:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Signals and Threads: Andrey Mokhov on build systems (a la carte)]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24494109">thread link</a>) | @yminsky
<br/>
September 16, 2020 | https://signalsandthreads.com/build-systems/ | <a href="https://web.archive.org/web/*/https://signalsandthreads.com/build-systems/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		<h2 id="003">0:03</h2>


<div><p>Welcome to Signals &amp; Threads, in-depth conversations about every layer of the tech stack, from Jane Street. I‚Äôm Ron Minsky.  </p><p>Today, I‚Äôm going to have a conversation with Andrey Mokhov about build systems. Build systems are an important but I think poorly understood and often unloved part of programming. Developers often end up with only a hazy understanding of what‚Äôs going on with their build system learning just enough to figure out what arcane invocation they need to get the damn thing working and then stop thinking about it at that point, and that‚Äôs a shame because build systems matter a lot to our experience as developers.  </p><p>A lot of what underlies a good developer experience really comes out of the build system that you use and also there‚Äôs a lot of beautiful ideas and structure inside of build systems. Sadly, a lot of that beauty is obscured by a complex thicket of messy systems of different kinds and a complicated ecosystem of different build systems for different purposes, and I‚Äôm hoping that Andrey can help us see through some of that thicket down to some of the elegance of all of this underneath.  </p><p>Andrey is a great person to have that conversation with because he‚Äôs had a long and interesting experience with build systems having done some work on Hadrian, which is the build system for the <a href="https://www.haskell.org/ghc">Glasgow Haskell Compiler</a> and having written a few important papers that try and analyze and break down the ecosystem of build systems and help you understand kind of what‚Äôs going on fundamentally underneath, and finally, in the last few years, Andrey has been working here working on Jane Street build systems.  </p><p>So, thanks Andrey for joining me, and maybe to start with, you can start by explaining to us a little bit about what a build system is.</p></div>

<h2 id="140">1:40</h2>


<div><p>Hi, Ron. It‚Äôs great to be on the podcast. So what is a build system?  Build systems automate the execution of various tasks of individual developers like me and whole companies like Jane Street. So, as a software developer, what are the kind of tasks that I need to do every day? I need to compile and recompile source files. I need to run some tests. I need to keep my documentation up to date. There are lots of tasks like this.  </p><p>Every task is pretty simple and straightforward on its own, but there are a lot of them, and they are tedious and I need to remember to do them in the right order, so it‚Äôs great to have some automation that does it for me. In the old days, like, how would you do this without automation, you would just write a script, and the script was your build system. And that‚Äôs how I worked myself when I used to work on projects with just a few files. And it works perfectly fine in those settings.</p></div>

<h2 id="223">2:23</h2>


<p>Beyond just using simple scripts, what‚Äôs the next step up available to developers in terms of automation?</p>

<h2 id="227">2:27</h2>


<div><p>Well, before, I don‚Äôt know, 1976 when Make was developed, there was nothing else and people were just writing scripts. And projects were getting bigger and bigger, it became difficult and at some point Make was developed to automate this. So Make was a huge breakthrough. It‚Äôs very simple. It allows you to write down the tasks that you need to execute and each task has some inputs and some outputs and the task itself, so what kind of command line you need to run to execute this task.  </p><p>And this very simple approach worked very well and it‚Äôs still being used these days. So these days I would say Make is still the most popular build system out there. If you go to a random open source project you will find a Makefile there.</p></div>

<h2 id="308">3:08</h2>


<p>Which on some level is kind of astonishing, just given how old Make is.</p>

<h2 id="311">3:11</h2>


<p>I‚Äôm amazed at how successful Make was and still is.</p>

<h2 id="314">3:14</h2>


<p>What was the thing that made Make such a big step forward?</p>

<h2 id="316">3:16</h2>


<p>Well, it was easy to use, right? You just write a few rules and the format for specifying those rules is pretty straightforward. It‚Äôs just a text file. And Make is available to you on pretty much any system. You type Make and it works. I guess it‚Äôs that kind of conceptual simplicity which attracted a lot of people to it, and of course also the pain that they had experienced before when they had to run all those tasks manually and they kept forgetting to run things in the right order. And I think this was one of the direct motivations of creating Make.</p>

<h2 id="345">3:45</h2>


<p>So, you talk about having a simple conceptual model, and what is that model on some level when you configure a job in Make, what you‚Äôre doing is specifying a collection of rules. Each rule says what you do, what‚Äôs the command you run to execute that rule, what it depends on and what it produces, and now Make has what is essentially a graph like model representing what are the things you need to do and what are the dependencies. Given that simple model, what are the services that Make now provides to you that you didn‚Äôt have before?</p>

<h2 id="412">4:12</h2>


<div><p>The main benefit of using Make compared to a script is that Make only reruns the tasks that need to be rerun. So how does it figure it out?  When you have like 1000 files in your project and you edit a single source file, if you run the script, it will basically recompile all 1000 files and then maybe relink some executables and rerun all the tests. And obviously that‚Äôs very wasteful. If you‚Äôve only edited one file, only one file need to be recompiled.  </p><p>Make figures this out by just looking at timestamps. So, it just looks at the time of the file that you‚Äôve just edited and it‚Äôs newer than the file that depends on it, so that files that depends on it needs to be recompiled and then its timestamp is updated, and so this wave of changes propagates through the build graph that you have and at the end for every task that you have in your description, you have the simple rule that everything that all the inputs of the task produced before the task, the outputs of the task have reproduced. This is before/after relationship is enforced everywhere in the build graph.</p></div>

<h2 id="511">5:11</h2>


<p>Right. Service number one that‚Äôs provided is incrementality. Small changes require small amounts of work in response to them.</p>

<h2 id="519">5:19</h2>


<p>That‚Äôs right. Yeah.</p>

<h2 id="520">5:20</h2>


<div><p>And this is important to developers kind of for obvious reasons, which is to say a key thing you want from your tools is responsiveness. You want to do something, see the results, think about whether that was the right thing to do and go back and make other changes, and so having tools that are responsive is enormously helpful. There‚Äôs a couple of the things that come to mind for me in terms of what Make helps out with. One of them is, it helps get the build right. One of the tricks with rebuilding your software is making sure that you‚Äôve done all the things that you need to do. Like you could imagine that you changed a file and then you remember to rebuild that but you didn‚Äôt remember to rebuild everything that depended on it.  </p><p>And so having a simple language where you can express the dependencies and then once you get it right, you have a system that takes care of running things in the right order. There‚Äôs just a whole class of errors that you can make either in manual construction of a script or a manual kicking off of build tasks that just go away. I guess another thing is parallelism. There‚Äôs the incrementality of only having to do a small amount of work, but having this graph structured representation of the build also helps you kick off things in parallel.</p></div>

<h2 id="620">6:20</h2>


<p>Yeah. Absolutely. Like trying to maintain this parallelism by hand in a build script would be pretty annoying, right? You add a new file and suddenly you have a new dependency and need to rearrange the parallelism. Having some automation here is great as well.</p>

<h2 id="633">6:33</h2>


<p>Okay. This all sounds like a very short story. We had this problem, how to build things. A nice system like Make came out. It has a clean way of expressing dependencies and giving you some services off the back of that specification. All done, problem solved. What‚Äôs missing?  Why is the story of Make from 1976 not enough?</p>

<h2 id="651">6:51</h2>


<div><p>There are few things that are missing in Make. One of them as I mentioned, the way Make determines that a task needs to be rebuilt, is by looking at timestamps but very often this is too limiting. Let me give you a common example. You edit a source file by just adding a comment and as a result, you recompile that file and the result doesn‚Äôt change, but the timestamp does change anyway.  </p><p>It means that everything that depended on that file needs to be recompiled if you‚Äôre using Make. This is one of the problems that basically sometimes you want what we call ‚Äúearly cutoff‚Äù in build systems. If you recompile a file and the result is the same, you don‚Äôt want to recompile everything else that depends on it, so this is one feature that was missing.</p></div>

<h2 id="729">7:29</h2>


<p>Right. Essentially the problem is that the heuristic that Make uses for figuring out what needs to be redone is overly conservative, right? It will refire when it doesn‚Äôt strictly speaking need to refire.</p>

<h2 id="738">7:38</h2>


<p>That‚Äôs right. It‚Äôs overly conservative, at the same time I like it a lot because it basically just repurposes existing information. It‚Äôs just the information that is out there. The file system records modification times. Make itself doesn‚Äôt store anything at all, which is a very nice property to have. But if you want to support things like early cutoff you now need to start storing some information.</p>

<h2 id="757">7:57</h2>


<p>Right. I guess in addition Make‚Äôs timestamp-based recomputation is, as you say, overly conservative. It‚Äôs also under conservative, isn‚Äôt it?  I.e., it will fail to rebuild in some cases where it should.</p>

<h2 id="808">8:08</h2>


<p>Yeah and it‚Äôs fairly common for example, that various like backup software, for example, would mess up modification times, which would basically cause your project not to compile correctly and then you would have to go for the so-called ‚Äúclean build‚Äù to just get around that limitation. Yes. Make‚Äôs reliance on timestamps is problematic.</p>

<h2 id="825">8:25</h2>


<p>Something goes wrong with Make, ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://signalsandthreads.com/build-systems/">https://signalsandthreads.com/build-systems/</a></em></p>]]>
            </description>
            <link>https://signalsandthreads.com/build-systems/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24494109</guid>
            <pubDate>Wed, 16 Sep 2020 16:17:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Modern mindfulness meditation has lost its beating communal heart]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24494021">thread link</a>) | @canada_random1
<br/>
September 16, 2020 | https://psyche.co/ideas/modern-mindfulness-meditation-has-lost-its-beating-communal-heart | <a href="https://web.archive.org/web/*/https://psyche.co/ideas/modern-mindfulness-meditation-has-lost-its-beating-communal-heart">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p><strong>In our tumultuous</strong> present, mindfulness and meditation can seem like attractive ways to process difficult feelings and emotions. Meditative practices have long been a support strategy for traditional cultures facing collective trauma, and a method for bringing individuals and communities into mutual solidarity. Tibetan refugees, who have lived through cultural genocide, use meditation and ritual to join with their spiritual ancestors. In this way, they experience their own suffering as a doorway into compassion for others.</p>
<p>Tibetan culture, through its resilience, kindness, intelligence and joy, has inspired millions of people in the West to take up meditation. But are the practices that many of us turn to the same in substance as the rituals that other communities have relied upon for centuries? In most cases, the answer is no: they have a profoundly different orientation and, significantly, they lack the crucial communal features that make traditional meditation so vital and nurturing for the brain and body. In fact, modern meditation can often work against us √¢‚Ç¨‚Äú reinforcing our separation from others, rather than strengthening the social bonds that are needed to overcome adversity and barriers to compassion.</p>
<p>The traditional and modern approaches to meditation are shaped by two distinct visions of the person. Those in traditional contemplative cultures typically understand persons to be constituted by their relationship to others, as the historian David McMahan <a href="https://oxford.universitypressscholarship.com/view/10.1093/acprof:oso/9780195183276.001.0001/acprof-9780195183276">notes</a> in <em>The Making of Buddhist Modernism</em> (2008). As a consequence, practitioners first learn to experience themselves in meditation as empowered and supported by the care, compassion and wisdom of their spiritual ancestors and community. By contrast, citizens of the modern West often see persons as individual selves that exist prior to the community √¢‚Ç¨‚Äú atomistic individuals who choose whether or not to enter into relationships.</p>
<p>These different conceptions of the person have important consequences for meditation. In the modern view, practitioners tend to think of meditation as an autonomous project of self-help: through their own efforts, they try to foster beneficial states of mind. Socially conditioned in this way, Westerners enter into √¢‚Ç¨Àúlovingkindness meditation√¢‚Ç¨‚Ñ¢ (<em>metta</em>) as a way of summoning up a sense of love for themselves and those they feel close to; then, for those they√¢‚Ç¨‚Ñ¢re neutral towards; and, finally, for people they dislike.</p>
<p>For traditional Buddhist communities, any such meditation wouldn√¢‚Ç¨‚Ñ¢t begin with an atomistic self who is trying to generate a positive mindset from scratch. In such cultures, practitioners begin meditation with rituals and prayers that remind them that they are part of a connected community, blessed and supported by a lineage of spiritual ancestors that spans many generations. This starting point is shared by contemplative and ritual forms of Buddhism, Christianity, Confucianism, Hinduism, Islam, Judaism and many indigenous religions. In Tibetan Buddhism, for example, meditators envision a field of refuge that includes buddhas, bodhisattvas, spiritual teachers and other inspiring figures, who bless and sustain them and their world within qualities of unconditional love, compassion and wisdom. Practitioners√¢‚Ç¨‚Ñ¢ efforts to cultivate those same qualities begin not with self-help, but with the support and empowerment of their teachers and communities. In this way, the person meditating learns to become an extension of that field of love and compassion in which they are held, by progressively extending love and compassion to others.</p>
<p>Modern meditation and mindfulness, beginning with an atomistic sense of self, can reinforce an individual√¢‚Ç¨‚Ñ¢s sense of disconnection</p>
<p><strong>This kind of</strong> deeply supportive framework, found in all contemplative traditions, is mostly absent from modern meditation programmes. Because these communal dimensions of blessing and empowerment are embedded in premodern, ritualised cosmologies, they are often deemed an unneeded byproduct of √¢‚Ç¨Àúprimitive cultures√¢‚Ç¨‚Ñ¢, which can be jettisoned in order to √¢‚Ç¨Àúmodernise√¢‚Ç¨‚Ñ¢ the practice. However, these cosmologies serve a valuable function that maps directly onto attachment theory, one of the most influential approaches to developmental and social psychology.</p>
<p>Attachment theory is based on the idea that the care that children receive in infancy stays with them through their lifespan √¢‚Ç¨‚Äú for better or worse. Infants who receive sensitive and responsive care go on to develop a self that they feel is worthy of love. In turn, this supports their curiosity and courage to explore the world, because they trust that a source of security and support is available when needed. Sporadic or unreliable care, on the other hand, fosters insecurity and a distrust in support from others in times of need.</p>
<p>But the experience of security and insecurity is not locked in at infancy. Feelings of security and insecurity accrue throughout one√¢‚Ç¨‚Ñ¢s life from relationships with peers, mentors, romantic partners and so on. This means that we all have traces of security and insecurity in different relational contexts. Through the lens of attachment theory, the ritual and devotional practices of traditional contemplative cultures, which are repeated many thousands of times throughout a person√¢‚Ç¨‚Ñ¢s life, offer a powerful field of care in which practitioners experience themselves as recipients of love, compassion and wisdom. From this secure base, they are empowered to extend sustainable, inclusive and unconditional care to others.</p>
<p>From an evolutionary perspective, humans come prepared with capacities for care and compassion. But without the experience of actually receiving care, people can develop inner psychological blocks to compassion √¢‚Ç¨‚Äú including a lack of inner security, courage and confidence. Lack of security can foster aversion to others√¢‚Ç¨‚Ñ¢ suffering, a sense of isolation and biases against others. These psychological barriers interact with and are reinforced by systemic inequities such as racism, classism, sexism and homophobia.</p>
<p>Modern meditation and mindfulness, by beginning with an atomistic sense of self, can increase an individual√¢‚Ç¨‚Ñ¢s sense of disconnection. They can present meditation as a passive source of comfort for the self, instead of a practice that uses discomfort to create solidarity with other sufferers. In her <a href="https://yalebooks.yale.edu/book/9780300215809/american-dharma">book</a> <em>American Dharma</em> (2019), the Buddhist scholar Ann Gleig documents how communally oriented meditation can help people to become conscious of socially conditioned traumas, to heal internalised racism, and to tolerate the discomfort that conversations about race and privilege can generate.</p>
<p>Traditional cultures of compassion training strive to dismantle barriers to compassion by bringing to mind a field of care in which practitioners are held and supported, and from which they can learn to hold and support others. This relational starting point promotes resilience and connectivity, and bolsters the psychological and social resources we need today to confront systemic injustice. But how might secular people in modern individualistic cultures gain access to such communal benefits?</p>
<p>By reinhabiting moments of supportive caring connection, we can establish a core of inner safety that can be returned to again and again</p>
<p><strong>Research findings in psychology</strong> show that feelings of security can be temporarily increased, including among people who have predominantly insecure attachment histories. Social psychologists developed a method called <em>attachment security priming</em>, in which participants are asked to visualise a moment of receiving care from a loving figure, a trusted friend, or simply by thinking of words such as √¢‚Ç¨Àúlove√¢‚Ç¨‚Ñ¢, √¢‚Ç¨Àúsafety√¢‚Ç¨‚Ñ¢ or √¢‚Ç¨Àúcare√¢‚Ç¨‚Ñ¢ for a moment. These simple priming <a href="https://pubmed.ncbi.nlm.nih.gov/16351370/">exercises</a> temporarily increase feelings of security, safety and courage. In turn, participants are more likely to offer help to others, have more patience listening to others√¢‚Ç¨‚Ñ¢ difficult emotions, and possess less bias against other groups. This research suggests that attachment security priming could be integrated into meditation to recover the relational basis of the practice.</p>
<p>In an <a href="https://mindrxiv.org/dmxj7/">article</a> forthcoming in the journal <em>Perspectives on Psychological Science</em>, we introduce a relational starting point of support for meditation, derived from traditional Tibetan practice, and informed by research on attachment security priming. There are various ways to engage a relational starting point for meditation, depending on one√¢‚Ç¨‚Ñ¢s own life experience, background and worldview:</p><ul>
<li>You can recall a simple moment of supportive caring connection with another person, from any time in your life, and re-inhabit that caring moment as if it√¢‚Ç¨‚Ñ¢s happening now √¢‚Ç¨‚Äú evoking a rich experience of loving qualities and energies in mind and body. For example, Paul can call to mind playing cards with his loving grandmother at her kitchen counter, and John can recall a moment visiting a joyfully welcoming aunt as a young child.</li>
<li>A second option is to bring to mind someone to whom you feel grateful for their impact on your life, and experience the uplifting quality of imagining that person as present with you now.</li>
<li>A third option, if you practise in any spiritual tradition, is to bring to mind a saint, divine figure or field of spiritual ancestors, with whom you feel a deep connection.</li>
<li>If none of those options resonate, you might recall a time you spent somewhere special to you in the natural world √¢‚Ç¨‚Äú a place that felt deeply welcoming or peaceful. Or recall a loving moment with a pet. Or bring vividly to mind a moment when you were a loving presence to another person.</li>
</ul><p>According to <a href="https://www.frontiersin.org/research-topics/78/embodied-and-grounded-cognition#overview">theories</a> of embodied cognition, when we recall any such caring moment, it is simulated and re-enacted in multiple systems of the brain and body, including perceptual, motor, visual and affective systems. During the caring moment practice, we can visualise and simulate a felt sense of security, by experiencing that moment as if it were happening now, along with ‚Ä¶</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://psyche.co/ideas/modern-mindfulness-meditation-has-lost-its-beating-communal-heart">https://psyche.co/ideas/modern-mindfulness-meditation-has-lost-its-beating-communal-heart</a></em></p>]]>
            </description>
            <link>https://psyche.co/ideas/modern-mindfulness-meditation-has-lost-its-beating-communal-heart</link>
            <guid isPermaLink="false">hacker-news-small-sites-24494021</guid>
            <pubDate>Wed, 16 Sep 2020 16:10:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[On Modern Web Applications Stability]]>
            </title>
            <description>
<![CDATA[
Score 61 | Comments 30 (<a href="https://news.ycombinator.com/item?id=24493865">thread link</a>) | @blazeeboy
<br/>
September 16, 2020 | https://www.emadelsaid.com/on-modern-web-applications-stability/ | <a href="https://web.archive.org/web/*/https://www.emadelsaid.com/on-modern-web-applications-stability/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
    <div>
    <section dir="auto">
  


  

  <div dir="auto">
    <p>I don‚Äôt like how modern web applications are built. Many of the web applications
are too unstable, That you can‚Äôt imagine having the system running without a
team supporting it. The fact that we try to automate manual processes then the
automation needs manual intervention defies the purpose. Some companies has an
army of developers if they were to do the business by hand they would make a
better job than the programmed system. There are many reasons for this
situation. One of the reasons is the excessive use of third party dependencies.</p>

<p>Lets take a look on a basic modern web based system, There are several layers
on software running on the machine, starting from firmware to your business
logic.</p>

<p><img src="https://www.emadelsaid.com/images/IMG_20200915_212438.jpg" alt="IMG_20200915_212438.jpg"></p>

<p>I don‚Äôt think this is very helpful to understand the gravity of the situation.
There are many actors that are not considered in this picture. Layers are also
missing because they are implicit in other layers. Lets expand these hidden
layers and actors. It will help us understand better why that small Nodejs or
RubyOnRails application we wrote isn‚Äôt just one layer in this picture.</p>

<p><img src="https://www.emadelsaid.com/images/IMG_20200915_214548.jpg" alt="IMG_20200915_214548.jpg"></p>

<p>Here are the layers we added this time:</p>

<ul>
  <li>System core utilities</li>
  <li>Other processes your application depends on like ‚Äúmemcached, Redis, MySQL,
Postgres‚Ä¶etc‚Äù</li>
  <li>Third party code your application depends on an ORM, Template engine,
pagination library, a library that <a href="https://www.theregister.com/2016/03/23/npm_left_pad_chaos/">pads your string with
spaces</a> just
because.</li>
  <li>Server applications that sits in front of your code handling HTTP and response
compression‚Ä¶etc.</li>
</ul>

<p>For each of these layers there is <strong>at least</strong> one team responsible for
maintaining it.</p>

<p>Again, We missed other layers and people in this picture. Most of the
applications are using external SAAS providers for logs or monitoring or bug
reporting or provide parts of the system functionality that can take more time
to build by the company team. lets add them to the picture along with their
teams.</p>

<p><img src="https://www.emadelsaid.com/images/IMG_20200915_221047.jpg" alt="IMG_20200915_221047.jpg"></p>

<p>This picture is for one application, I won‚Äôt expand it to a whole system with
different services and programs that is the reality of all companies.
Lets stick to one application for the sake of simplicity.</p>

<p>So here is the first point I want to make: With every service you use you‚Äôre not
just a user, This service is now part of your application, You are held
responsible for it‚Äôs behavior and misbehaving. You will inherit bugs in their
system. When this service team is affected by COVID-19 and get reduced to the
point where they can‚Äôt fix issues you will be affected too. When They get slower
your application will get slower too. When their service is down your
application will experience malfunction too, Your system and theirs is now
connected. So add external services integration cautiously. By adding an
external system you‚Äôre putting your trust in this service team and their ability
in delivering what the service is promising now <strong>and</strong> in the future. This is not
an easy decision and it should be treated as such.</p>

<p><img src="https://www.emadelsaid.com/images/IMG_20200915_224907.jpg" alt="IMG_20200915_224907.jpg"></p>

<p>Now lets move to the direct dependencies of your application. If you‚Äôre using
any modern programming language it‚Äôll have a way to package code into reusable
format that could be reused by other applications. one package can use code from
other packages, these packages can use other packages and so on like a tree.</p>

<p><img src="https://www.emadelsaid.com/images/IMG_20200915_231326.jpg" alt="IMG_20200915_231326.jpg"></p>

<p>With every package in this tree we depend on the code inside this package and
the team that maintains it. A freshly generated rails project depends on 74
packages for ruby and <code>Yarn list</code> that lists JavaScript dependencies output 3102
lines, that‚Äôs 3176 packages with teams maintaining them and bugs and new
versions all the time.</p>

<p>This is wrong for many reasons. I will list some of them here for the sake of
clarity.</p>

<ul>
  <li>You have put your trust in at least 3176 other developers. You have never met
them, never talked to them, there are no guarantee they will continue to
maintain this package. There are no guarantee they won‚Äôt put code in their
package to show <a href="https://www.zdnet.com/article/npm-bans-terminal-ads/">ads in your
terminal</a> or <a href="https://www.trendmicro.com/vinfo/dk/security/news/cybercrime-and-digital-threats/hacker-infects-node-js-package-to-steal-from-bitcoin-wallets">code that
steals your bitcoin wallets
</a>.</li>
  <li>You are not really using all of this code. When someone is writing an open
source package it will suffer sooner or later from <a href="https://en.wikipedia.org/wiki/Feature_creep">feature
creeping</a> You are probably using
couple features of this package and don‚Äôt need the rest, but you wanted the
banana and got the whole forest now.</li>
  <li>With every package update you‚Äôre inventing unnecessary work for yourself. New
versions of packages are released all the time. Updating your project to <strong>get
the latest bug fixes and features</strong> is usually what people do. Most of the
time because of feature creeping these versions changes are not relevant to
you at all, but you won‚Äôt know until you read the change log. If it‚Äôs relevant
to your project you‚Äôll need to do an update. if something is deprecated or
changed you‚Äôll need to change your code. So suddenly someone somewhere is
telling you to change your code. That‚Äôs part of the control you have over your
code handed over to someone you never talked to or knew.</li>
  <li>When your programming language has a new release you can‚Äôt update unless all of
your dependencies are up to date. For ruby 2.7.0 for example some language syntax is
now deprecated and shows warning when you run your project. So to fix that you
either fix it in the package and open a PR with the change or wait for the
maintainer to update it.</li>
  <li>When you encounter a bug in a dependency you will have to understand this
package code, fork, branch, fix rinse and repeat. That requires a some
cooperation from the library maintainer which is most of the time isn‚Äôt
possible because most of the open source projects are voluntarily maintained.</li>
  <li>Developing new features or modifying existing features are ordre of magnitude
harder. You‚Äôll need to dig into the documentation of the dependencies looking
for support for this little feature you want to add. That is if there is any
documentation at all for that part of the code. Otherwise you‚Äôll have to dig
in to the library code.</li>
</ul>

<p>This is the second point I want to make: Using external library implies that you
trust the maintainer and you also inherit his decisions about using other
libraries and so forth. This decision should be weighed based on the benefit of
the library and how many of it‚Äôs features you‚Äôre going to use and other factors
like the maturity and how responsive is the maintainer, please don‚Äôt use GitHub
stars as a factor in your decision it‚Äôs misleading. And if the part you use from
the library isn‚Äôt too big I recommend using the library to save some time and
effort upfront but make sure you get rid of it and implement the part you need.
An example of that is a pagination library like rails ‚ÄúKaminari‚Äù if you‚Äôre using
it to save you some time then sure. But keep on your todo list a task to remove
it and implement the feature yourself. An example of libraries that‚Äôs hard to
get rid of it ‚ÄúOpenCV‚Äù This is something that reimplementing the part you need
probably will be a huge task so it can stay. You‚Äôll need to use your best
judgment to decide between these 2 sides of the spectrum.</p>

<p>I like to think of what I do as building an automated system, I would like this
system to run by itself, keep itself clean and healthy, doesn‚Äôt need manual
intervention. If the whole team disappeared out of existence I would like that
system to work for a very long time without any supervision.</p>

<p>More code means more bugs for me to fix, by extension more code that I didn‚Äôt write
means more bugs that I probably can‚Äôt solve. This is dangerous and shouldn‚Äôt be
taken lightly. Extending your code with external libraries or systems can cut
down effort hence the cost of development. But when this is taken lightly it
backfires badly.</p>

<p>HN comments: <a href="https://news.ycombinator.com/item?id=24493865">https://news.ycombinator.com/item?id=24493865</a></p>

  </div>
</section>

<hr>



    </div>
  </section></div>]]>
            </description>
            <link>https://www.emadelsaid.com/on-modern-web-applications-stability/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24493865</guid>
            <pubDate>Wed, 16 Sep 2020 15:56:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why distributed apps need dependency management]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24493737">thread link</a>) | @thorgaardian
<br/>
September 16, 2020 | https://www.architect.io/blog/why-distributed-apps-need-dependency-management | <a href="https://web.archive.org/web/*/https://www.architect.io/blog/why-distributed-apps-need-dependency-management">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p><img src="https://www.architect.io/images/blog/why-distributed-apps-need-dependency-management/dependency-mgmt@2x.png" alt="Dependency management"></p>
<p>Distributed cloud applications (aka microservices) have introduced an enormous
amount of complexity into the design and operation of cloud software. What used
to manifest itself as complexity hidden within a single process or runtime now
finds itself spread across tens or hundreds of loosely coupled services. While
all of these services can use different languages and can scale independently
from one another, the distributed nature can often make the app as a whole hard
to navigate, hard to deploy, and hard secure.</p>
<p>This new complexity makes it increasingly difficult to manage and contribute to
cloud-native applications, and beckons questions as to how we can maintain
healthy cloud software. How can we take advantage of the benefits of
service-oriented design without introducing friction and cost elsewhere?</p>
<p>Fortunately we've run into this problem before. Microservices aren't the first
pattern that has forced developers to figure out how to collaborate and
contribute to endless webs of interconnected components. For the last few
decades the solution has been the same: <strong>dependency management</strong>.</p>
<p>We use dependency managers every day to re-use public and private software
packages, build upon the work of others, and gracefully encapulate the details
of our own work into consumable formats. There are a number of reasons why
dependency management is the key to unlocking the power of distributed software,
and it's high time we learn from the past to power the future of cloud-native
development.</p>
<h2 id="1-developer-collaboration"><a href="#1-developer-collaboration" aria-label="1 developer collaboration permalink"></a>1. Developer collaboration</h2>
<p>One of the most important functions of dependency managers like
<a href="https://www.npmjs.com/">NPM</a>, <a href="https://pip.pypa.io/">Pip</a>,
<a href="https://maven.apache.org/what-is-maven.html">Maven</a>, and others, is to broker
collaboration amongst developers. By providing a consistent packaging mechanic
that seamlessly enables code to be extended, dependency managers have enabled
otherwise unrelated teams to consume each other's work. While these tools can be
used within the walls of enterprises to enable teams to publish and collaborate
on their work, we've seen dependency managers used at a much grander scale to
broker collaboration within the open-source community. The consistency of the
tooling and width of adoption has enabled the creation of enormously powerful
and freely accessible libraries for all to use and continue to build upon.</p>
<p>While this level of collaboration has been realized within the communities for
individual languages (NPM for Javascript, Pip for Python, etc.), it has yet to
be fully realized within the cloud-native community. We fortunately have Docker
to create consistency in how cloud services are packaged, but containers don't
have enough information about the relationships between services to resolve and
extend dependencies. Adding proper dependency management to index and resolve
relationships to peer apps and services is critical if we want to realize for
microservices what others already do with libraries in individual languages.</p>
<h2 id="2-self-service-environments"><a href="#2-self-service-environments" aria-label="2 self service environments permalink"></a>2. Self-service environments</h2>
<p>The collaborative effects of dependency managers don't happen by magic. The main
reason consistent dependency resolvers are so powerful is because developers all
around the world are able to reproduce their effects using the same commands and
processes. Reproducibility is a key element of dependency managers. Without it,
no one would be able to download and operate libraries and packages created by
others without complex, custom bootstrapping logic ‚Äì the creation of which would
be an enormous barrier to adoption and distribution.</p>
<p>Service-oriented applications are no different from language-specific libraries
in this regard. Our ability to extend the work of others is predicated on our
ability to run or otherwise access the services and applications we hope to make
calls to. Teams have been able to make due by operating centralized QA or
sandbox environments, but the inability to reproduce these environments creates
a new set of problems. Engineers can't operate their own development
environments, services that depend on others can't be easily shipped, developers
are forced to write their own scripts to run their app locally and remotely, and
every team needs to about production-grade tools, networking, and network
security. By leveraging a consistent, dependency management solution, teams need
only to assert the network dependencies for their services to give everyone in
the org a consistent way to spin up services in their stack along with its
dependencies ‚Äì allowing everyone to operate their own environments.</p>
<h2 id="3-automation"><a href="#3-automation" aria-label="3 automation permalink"></a>3. Automation</h2>
<p>The self-service benefits of consistent dependency management doesn't just mean
that developers can operate their own environments. It also means that
environments can be provisioned and torn down through automation. The
consistency of a single command or process to resolve dependencies, enrich
networking, and automate security is the perfect recipe for integration into
CI/CD pipelines!</p>
<p>If every service can be run consistently (e.g. with container platforms) and is
aware of its own dependencies, new environments can be provisioned for each
merge request and changes can be seamlessly promoted into staging and production
when merged into relevant branches. This means that every team can achieve
scalable
<a href="https://thenewstack.io/what-is-gitops-and-why-it-might-be-the-next-big-thing-for-devops/">GitOps</a>
for every developer and every new service added to the application.</p>
<h2 id="4-security"><a href="#4-security" aria-label="4 security permalink"></a>4. Security</h2>
<p>One of the risks introduced by microservice architectures is the need for each
service to expose APIs that broker access to their functionality. Since these
services live as separate processes, communication over a network is one of the
only ways for them to connect to each other and receive requests for processing.
This means that each new service exposes an interface that can be accessed by
others, and if developers aren't careful they can accidentally expose it to the
wrong parties.</p>
<p><img src="https://www.architect.io/images/blog/why-distributed-apps-need-dependency-management/declare-data-breach.webp" alt="Cloud Security"></p>
<p>Preventing accidental exposure of network interfaces is yet another area where
dependency management can provide support. With developers providing a
structured index of their own service's network dependencies, not only can we
automatically resolve those dependencies, but we can also enrich the environment
with the corresponding network policies required to lock it down ‚Äì only services
that depend on each other can access each other. This structured approach
drastically reduces the need for developers to understand network security
tooling, and opens them up to create new services more freely.</p>
<h2 id="5-flexibility"><a href="#5-flexibility" aria-label="5 flexibility permalink"></a>5. Flexibility</h2>
<p>Another benefit of dependency management with respect to microservices and
distributed applications is flexibility. With developers capturing the details
of their immediate dependencies and associating them with their own services,
the resolver itself is free to instrument the relationships in unique ways in
each environment that gets deployed. Want to try out a different API gateway or
service mesh? Want to instrument distributed tracing by capturing ingress and
egress traffic from each service? With automation that can hook into the
dependency resolver, operators are free to experiment with new tools and configs
without any code changes to existing services or distractions for developers.</p>
<h2 id="why-doesnt-it-already-exist"><a href="#why-doesnt-it-already-exist" aria-label="why doesnt it already exist permalink"></a>Why doesn't it already exist?</h2>
<p>Dependency resolution would be an enormously powerful tool solution to enable
developers to collaborate and contribute to cloud-native applications, but can't
we use the vast number of package managers that already exist to help with
instrumentation? While it would be nice to use existing tools, resolving
dependencies for networked applications isn't the same as resolving the
relationships between libraries and binaries.</p>
<p>The download of code artifacts that fulfill dependency requirements for
libraries all happens at build-time to create one master binary/library.
Microservices however don't get bundled into single binaries and instead need to
be run as independent services and then connected to over a network. This means
that the resolution strategy has additional steps, and happens at an entirely
different lifecycle stage than regular libraries. Turns out, the earliest point
in an application lifecycle that we can properly resolve dependencies for
distributed applications is at deploy-time. It is at this point that we know
both the relationships between all services in the stack as well as the tooling
and details of the target environment needed to properly provision and connect
services.</p>
<p>To sum it up, it's hard to create a large scale resolver for network
dependencies, but doing so would provide enormous benefits to engineering teams
and the cloud community as a whole. If we're to properly navigate the growing
landscape of cloud-native tools, we'll need to learn from dependency management
practices of the past.</p></div></div></div>]]>
            </description>
            <link>https://www.architect.io/blog/why-distributed-apps-need-dependency-management</link>
            <guid isPermaLink="false">hacker-news-small-sites-24493737</guid>
            <pubDate>Wed, 16 Sep 2020 15:43:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Building things that do [ just one thing ]]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24493084">thread link</a>) | @eightturn
<br/>
September 16, 2020 | https://www.deepsouthventures.com/building-things-that-do-just-one-thing/ | <a href="https://web.archive.org/web/*/https://www.deepsouthventures.com/building-things-that-do-just-one-thing/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="text">
			<p><img loading="lazy" src="https://www.deepsouthventures.com/wp-content/uploads/pig-neon-red-300x212.jpg" alt="Neon Red Pig" width="300" height="212" srcset="https://www.deepsouthventures.com/wp-content/uploads/pig-neon-red-300x212.jpg 300w, https://www.deepsouthventures.com/wp-content/uploads/pig-neon-red-700x494.jpg 700w, https://www.deepsouthventures.com/wp-content/uploads/pig-neon-red.jpg 1130w" sizes="(max-width: 300px) 100vw, 300px">There‚Äôs no need to make this complicated. People want to make it complicated.</p>
<p>My brain isn‚Äôt that smart ‚Äì I need to dumb things down. And it ends up, dumbing things down can usually elevate your chances of success. </p>
<p>When I consider a project, I like to compare it to a washing machine.</p>
<p>Washing machines do <span>one thing</span>. </p>
<p>Set a cycle, mash a button, and the receptacle goes to work.</p>
<p>It doesn‚Äôt dry clothes. It doesn‚Äôt fold clothes. It doesn‚Äôt warn you when you throw a red shirt in with all your whites.</p>
<p>It just washes.</p>
<p>Here in the United States, consumers purchase one metal box to clean, plus one metal box to dry. You‚Äôd think we‚Äôd have combined them by now, like Europe has, but no ‚Äì ‚Äì separate. And we sorta prefer it that way.</p>
<p>I admire that simplicity. Simplicity can be an unfair advantage, if you think about it.</p>
<p>One of my projects involves <a href="https://www.deepsouthventures.com/i-sell-onions-on-the-internet/">selling sweet Vidalia onions</a>. A lot of my customers ask: ‚ÄúWhat else does your farm sell online, Peter?‚Äù</p>
<p>My answer: ‚ÄúNothing, just onions.‚Äù</p>
<p>At the beginning of that project, my monkey brain kept insisting we expand into other categories.</p>
<p><strong><em>‚ÄúSELL <span>&nbsp;GEORGIA PEACHES!&nbsp;</span>‚Äú</em></strong>&nbsp;&nbsp; it‚Äôd say. </p>
<p><strong><em>‚ÄúOH OH! <span>&nbsp;GEORGIA PECANS!&nbsp;</span>‚Äú</em></strong></p>
<p>I allowed it to chirp over the course of two shipping seasons, but by the third, I‚Äôd duct taped its mouth.</p>
<p><em>Where my internal monologue wound up, was here</em>: Why downshift into another category when our primary continues to grow 25%-50% every year? Why water down my attention when our principal has clearly struck a nerve? And hell, we‚Äôre still tweaking logistics, customer support, quality control, etal on Vidalia anyway. It‚Äôs nowhere near perfected.</p>
<p>Growth for growth‚Äôs sake doesn‚Äôt make sense to me. We‚Äôre not Amazon. We don‚Äôt want to be Amazon. We‚Äôre privately owned &amp; family operated ‚Äì we don‚Äôt have to listen to that diatribe.</p>
<p><em><strong>What does make sense</strong> is controlled growth</em>, with a strong connection to our product &amp; customers. Correction, an <em><strong>intense</strong></em> connection with our product &amp; customers.</p>
<p><img loading="lazy" src="https://www.deepsouthventures.com/wp-content/uploads/penny-gumball-machine-glass-top-ford-225x300.jpg" alt="Penny gumball machine" width="225" height="300" srcset="https://www.deepsouthventures.com/wp-content/uploads/penny-gumball-machine-glass-top-ford-225x300.jpg 225w, https://www.deepsouthventures.com/wp-content/uploads/penny-gumball-machine-glass-top-ford.jpg 375w" sizes="(max-width: 225px) 100vw, 225px">One product, though. It doesn‚Äôt have to be any fancier than that.</p>
<p>Drop a penny in a gumball machine, slide the lever, and a gumball rolls out.</p>
<p>Happy customer. Problem solved.</p>
<hr>
<p><iframe width="560" height="315" src="https://www.youtube.com/embed/ULKmb3_P_N8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>
<hr>
<p><span><a href="https://twitter.com/searchbound" rel="noopener noreferrer" target="_blank">Follow me on Twitter</a> as I continue to document my journey there. Or get an email when I post new stuff (below):</span></p>


		</div></div>]]>
            </description>
            <link>https://www.deepsouthventures.com/building-things-that-do-just-one-thing/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24493084</guid>
            <pubDate>Wed, 16 Sep 2020 14:34:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[GraphQL over WebSockets]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24493061">thread link</a>) | @enisdenjo
<br/>
September 16, 2020 | https://the-guild.dev/blog/graphql-over-websockets | <a href="https://web.archive.org/web/*/https://the-guild.dev/blog/graphql-over-websockets">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><blockquote><p>A couple of years ago, while I was still working at Apollo, <a href="https://github.com/leebyron" target="_blank" rel="noopener noreferrer">Lee Byron</a>, <a href="https://github.com/robzhu" target="_blank" rel="noopener noreferrer">Rob Zhu</a>, <a href="https://github.com/dotansimha" target="_blank" rel="noopener noreferrer">Dotan simha</a> and <a href="https://github.com/urigo" target="_blank" rel="noopener noreferrer">I</a> worked on the GraphQL Subscriptions spec and the reference implementation.</p></blockquote><blockquote><p>During that work, we created and merged the <a href="https://github.com/graphql/graphql-js/pull/846" target="_blank" rel="noopener noreferrer">reference implementation into graphql-js</a> and created two supporting libraries: <a href="https://github.com/apollographql/graphql-subscriptions" target="_blank" rel="noopener noreferrer">graphql-subscriptions</a> and <a href="https://github.com/apollographql/subscriptions-transport-ws" target="_blank" rel="noopener noreferrer">subscriptions-transport-ws</a>. Here is a <a href="https://youtu.be/Wi7P39sF2nw" target="_blank" rel="noopener noreferrer">talk with deep dive into all the details</a>.</p></blockquote><blockquote><p>Since leaving Apollo, <a href="https://github.com/apollographql/subscriptions-transport-ws/issues/777" target="_blank" rel="noopener noreferrer">not a lot of work has been gone into those libraries</a>.
That's why I was so thrilled that <a href="https://github.com/enisdenjo" target="_blank" rel="noopener noreferrer">Denis</a> decided to pick up that important work and create a new library for the WebSocket Protocol.</p></blockquote><blockquote><p>We will support his work of maintaining the library and standardizing it with the GraphQL over HTTP working group.
This is a part of a lot of exciting work coming up about GraphQL and real-time, so follow us for new things in this space!</p></blockquote><blockquote><p>Denis will take it away from here!</p></blockquote><h3>Introduction</h3><p>At some point in time during your web development journeys, you may‚Äôve been faced with the challenge to add a real-time component. The synonym for realtime in the browser is the WebSocket API. <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API" target="_blank" rel="noopener noreferrer">This is how MDN‚Äôs describes it</a>:</p><blockquote><p>The WebSocket API is an advanced technology that makes it possible to open a two-way interactive communication session between the user‚Äôs browser and a server. With this API, you can send messages to a server and receive event-driven responses without having to poll the server for a reply.</p></blockquote><p>Google Chrome was the first browser to support the WebSocket Protocol, adding support in 2009 - two years before it was officially standardised in 2011. As the need for full-duplex server-client communications rose, other browsers followed suit.</p><p>As of today, all major browsers support the WebSocket Protocol - see the <a href="https://caniuse.com/?search=Web%20Sockets" target="_blank" rel="noopener noreferrer">Can I Use table</a>.</p><h3>WebSockets ‚ù§Ô∏è GraphQL</h3><p>Okay, so, how do I use WebSockets to add support for the <a href="https://spec.graphql.org/June2018/#sec-Subscription" target="_blank" rel="noopener noreferrer">GraphQL <code>subscription</code> operation</a>? Doing a basic Google search, you‚Äôd be faced with a single solution, namely <a href="https://github.com/apollographql/subscriptions-transport-ws" target="_blank" rel="noopener noreferrer"><code>subscriptions-transport-ws</code></a>. Looking through the repository, checking recent comments, reading through the issues and open PRs - might have you notice the abundance of bugs and their security implications. <a href="https://github.com/enisdenjo/graphql-transport-ws/issues/3" target="_blank" rel="noopener noreferrer">A summary can be found here</a>.</p><p>The authors have done a brilliant job, but unfortunately other projects and needs have reduced their disposable time for maintaining and nurturing this well accomplished, yet needy, idea. But, it did indeed inspire me to take up their legacy and revitalised it! Having faced various WebSocket challenges with GraphQL myself - I jumped in writing a new library from scratch.</p><p>With no further ado - I humbly introduce <a href="https://github.com/enisdenjo/graphql-transport-ws" target="_blank" rel="noopener noreferrer"><code>graphql-transport-ws</code></a>. A coherent, feature-full, zero-dependency, plug-n-play, lazy, simple, server and client implementation of the <a href="https://github.com/enisdenjo/graphql-transport-ws/blob/master/PROTOCOL.md" target="_blank" rel="noopener noreferrer">new, security first GraphQL over WebSocket Protocol</a> with full support for all 3 GraphQL operations: <code>Queries</code>, <code>Mutations</code> and <code>Subscriptions</code>. The protocol aims to be standardised and become a part of GraphQL with the help of the foundation‚Äôs <a href="https://github.com/graphql/graphql-over-http/pull/140" target="_blank" rel="noopener noreferrer">GraphQL over HTTP work group</a>.</p><p>The library is written in TypeScript and the full implementation totals merely ~1000 lines of well formatted, commented, code. It leverages modern JavaScript primitives and the well established presence of WebSockets.</p><h3>How do I get started?</h3><p>I am glad you asked! This is how:</p><h4>Install</h4><pre><pre>$ <span>yarn</span> <span>add</span> graphql-transport-ws
</pre></pre><h4>Create a GraphQL schema</h4><pre><pre><span>import</span> <span>{</span> buildSchema <span>}</span> <span>from</span> <span>'graphql'</span><span>;</span>


<span>const</span> schema <span>=</span> <span>buildSchema</span><span>(</span><span><span>`</span><span>
  type Query {
    hello: String
  }
  type Subscription {
    greetings: String
  }
</span><span>`</span></span><span>)</span><span>;</span>


<span>const</span> roots <span>=</span> <span>{</span>
  query<span>:</span> <span>{</span>
    <span>hello</span><span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>'Hello World!'</span><span>,</span>
  <span>}</span><span>,</span>
  subscription<span>:</span> <span>{</span>
    <span>greetings</span><span>:</span> <span>async</span> <span>function</span><span>*</span> <span>sayHiIn5Languages</span><span>(</span><span>)</span> <span>{</span>
      <span>for</span> <span>(</span><span>const</span> hi <span>of</span> <span>[</span><span>'Hi'</span><span>,</span> <span>'Bonjour'</span><span>,</span> <span>'Hola'</span><span>,</span> <span>'Ciao'</span><span>,</span> <span>'Zdravo'</span><span>]</span><span>)</span> <span>{</span>
        <span>yield</span> <span>{</span> greetings<span>:</span> hi <span>}</span><span>;</span>
      <span>}</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</pre></pre><h4>Start the server</h4><pre><pre><span>import</span> http <span>from</span> <span>'http'</span><span>;</span>
<span>import</span> <span>{</span> execute<span>,</span> subscribe <span>}</span> <span>from</span> <span>'graphql'</span><span>;</span>
<span>import</span> <span>{</span> createServer <span>}</span> <span>from</span> <span>'graphql-transport-ws'</span><span>;</span>

<span>const</span> server <span>=</span> http<span>.</span><span>createServer</span><span>(</span><span>function</span> <span>weServeSocketsOnly</span><span>(</span><span>_<span>,</span> res</span><span>)</span> <span>{</span>
  res<span>.</span><span>writeHead</span><span>(</span><span>404</span><span>)</span><span>;</span>
  res<span>.</span><span>end</span><span>(</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>

<span>createServer</span><span>(</span>
  <span>{</span>
    schema<span>,</span> 
    roots<span>,</span> 
    execute<span>,</span>
    subscribe<span>,</span>
  <span>}</span><span>,</span>
  <span>{</span>
    server<span>,</span>
    path<span>:</span> <span>'/graphql'</span><span>,</span>
  <span>}</span>
<span>)</span><span>;</span>

server<span>.</span><span>listen</span><span>(</span><span>443</span><span>)</span><span>;</span>
</pre></pre><h4>Use the client</h4><pre><pre><span>import</span> <span>{</span> createClient <span>}</span> <span>from</span> <span>'graphql-transport-ws'</span><span>;</span>

<span>const</span> client <span>=</span> <span>createClient</span><span>(</span><span>{</span>
  url<span>:</span> <span>'wss://welcomer.com/graphql'</span><span>,</span>
<span>}</span><span>)</span><span>;</span>


<span>(</span><span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>const</span> result <span>=</span> <span>await</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span><span>resolve<span>,</span> reject</span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>let</span> result<span>;</span>
    <span>const</span> dispose <span>=</span> client<span>.</span><span>subscribe</span><span>(</span>
      <span>{</span>
        query<span>:</span> <span>'{ hello }'</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>next</span><span>:</span> <span>(</span><span>data</span><span>)</span> <span>=&gt;</span> <span>(</span>result <span>=</span> data<span>)</span><span>,</span>
        error<span>:</span> reject<span>,</span>
        <span>complete</span><span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
          <span>dispose</span><span>(</span><span>)</span><span>;</span>
          <span>resolve</span><span>(</span>result<span>)</span><span>;</span>
        <span>}</span><span>,</span>
      <span>}</span>
    <span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>

  <span>expect</span><span>(</span>result<span>)</span><span>.</span><span>toEqual</span><span>(</span><span>{</span> hello<span>:</span> <span>'Hello World!'</span> <span>}</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>(</span><span>)</span><span>;</span>


<span>(</span><span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>const</span> <span>onNext</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
    
  <span>}</span><span>;</span>

  <span>await</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span><span>resolve<span>,</span> reject</span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>const</span> dispose <span>=</span> client<span>.</span><span>subscribe</span><span>(</span>
      <span>{</span>
        query<span>:</span> <span>'subscription { greetings }'</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        next<span>:</span> onNext<span>,</span>
        error<span>:</span> reject<span>,</span>
        <span>complete</span><span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
          <span>dispose</span><span>(</span><span>)</span><span>;</span>
          <span>resolve</span><span>(</span><span>)</span><span>;</span>
        <span>}</span><span>,</span>
      <span>}</span>
    <span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>

  <span>expect</span><span>(</span>onNext<span>)</span><span>.</span><span>toBeCalledTimes</span><span>(</span><span>5</span><span>)</span><span>;</span> 
<span>}</span><span>)</span><span>(</span><span>)</span><span>;</span>
</pre></pre><h3>Want to find out more?</h3><p>Check the repo out to for <a href="https://github.com/enisdenjo/graphql-transport-ws#getting-started" target="_blank" rel="noopener noreferrer">Getting Started</a> quickly with some <a href="https://github.com/enisdenjo/graphql-transport-ws#recipes" target="_blank" rel="noopener noreferrer">Recepies</a> for vanilla usage, or with <a href="https://relay.dev/" target="_blank" rel="noopener noreferrer">Relay</a> and <a href="https://www.apollographql.com/docs/react/" target="_blank" rel="noopener noreferrer">Apollo Client</a>. Opening issues, contributing with code or simply improving the documentation is always welcome!</p><p>I am <a href="https://github.com/enisdenjo" target="_blank" rel="noopener noreferrer">@enisdenjo</a> and you can chat with me about this topic on the <a href="https://graphql.slack.com/" target="_blank" rel="noopener noreferrer">GraphQL Slack workspace</a> anytime.</p><p>Thanks for reading and happy coding! üëã</p></div></div>]]>
            </description>
            <link>https://the-guild.dev/blog/graphql-over-websockets</link>
            <guid isPermaLink="false">hacker-news-small-sites-24493061</guid>
            <pubDate>Wed, 16 Sep 2020 14:33:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: New Speech Recognition Option for Twilio from Voicegain]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24492950">thread link</a>) | @DrJJ
<br/>
September 16, 2020 | https://www.voicegain.ai/post/announcing-twilio-twiml-connect-stream-support | <a href="https://web.archive.org/web/*/https://www.voicegain.ai/post/announcing-twilio-twiml-connect-stream-support">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-hook="post-description"><article><div><div data-rce-version="7.19.2"><div dir="ltr"><div><div id="viewer-bmeph"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.voicegain.ai/post/announcing-twilio-twiml-connect-stream-support" data-pin-media="https://static.wixstatic.com/media/e90723_063ad1c343624a9291cfd11ddbf05454~mv2.png/v1/fit/w_1300,h_600,al_c,q_80/file.png" src="https://static.wixstatic.com/media/e90723_063ad1c343624a9291cfd11ddbf05454~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png"></p></div></div></div></div><h2 id="viewer-2smec">Build Speech IVRs, Voice Bots</h2><p id="viewer-5rgbf">Voicegain launched an extension to Voicegain <strong>/asr/recognize API</strong> that supports <strong>Twilio</strong><a href="https://www.twilio.com/media-streams" target="_blank" rel="noopener"><strong><u> Media Streams </u></strong></a><strong>via TwiML </strong><a href="https://www.twilio.com/docs/voice/twiml/connect#stream" target="_blank" rel="noopener"><strong><u>&lt;Connect&gt;&lt;Stream&gt;</u></strong></a>. With this launch,  developers using Twilio's Programmable Voice get an <a href="https://www.voicegain.ai/post/speech-to-text-accuracy-benchmark-september-2020" target="_blank" rel="noopener"><u>accurate</u></a><u>,</u> <a href="https://www.voicegain.ai/pricing" target="_blank" rel="noopener"><u>affordable</u></a>, and easy to use ASR/Speech-to-text platform to build speech-IVRs or Voice Bots.</p><h2 id="viewer-3b1oa">Key Features of Twilio Media Streams support</h2><p id="viewer-2dncc">Voicegain Twilio Media Streams support gives developers the following features:</p><ol><li id="viewer-aa64c"><p><strong>Grammar Support: </strong>Developers can now write speech IVR applications that use <strong>grammars</strong>. Many traditional VoiceXML IVRs are built using grammars. However, until now Twilio TwiML did not support use of speech grammars as the &lt;Gather&gt; command supports only text capture. This made it hard to migrate existing VoiceXML IVR applications to the Twilio platform. Mapping of text to semantic meaning had to be done separately, plus large vocabulary recognizer was more likely  to return spurious recognitions. Voicegain solves these problems by supporting both <strong>GRXML </strong>and <strong>JSGF </strong>speech grammars at the core speech-to-text (ASR) engine level. This delivers higher accuracy compared to an ASR that uses a large vocabulary language model to recognize text and then applies grammars to the recognized text. </p></li><li id="viewer-2lkid"><p><strong>90% Savings on ASR Licensing costs: </strong>Build <strong>low cost</strong> speech IVR application. -- A big advantage for developers of the Twilio Programmable Voice platform has been its affordable pricing. However, that was not necessarily true for existing ASR options like &lt;Gather&gt; that is priced at 2 cents for 15 seconds (with 15 second minimum) or 8 cents per minute. With Voicegain the <a href="https://www.voicegain.ai/pricing" target="_blank" rel="noopener"><strong><u>price</u></strong></a><strong> is 1.25 cents per minute</strong> measured at 1 second increments.  Including the billing increment, <strong>we are 90% cheaper. </strong></p></li><li id="viewer-df1pl"><p><strong>Better Timeout Support: </strong>Voicegain supports configurable timeouts for no-input, <strong>complete timeout</strong> and incomplete timeout. Because the grammar is integrated with the recognizer, Voicegain ASR is able to deliver accurate complete timeout response which is not possible with &lt;Gather&gt; command for which the only way to tell if the caller stopped speaking is a large enough pause. </p></li><li id="viewer-7mckv"><p>Simplify <strong>dynamic prompt playback</strong>. -- In order to make use of &lt;Connect&gt;&lt;Stream&gt; as easy as possible, we support passing prompts when invoking &lt;Stream&gt;. Prompts can be provided either as text or as URLs. If provided as text then Voicegain will either use TTS or perform dynamic concatenation of prerecorded prompts.  A prompt manager for such prerecorded prompts is provided as part of Voicegain Web Portal. 
Configurable <strong>barge-in </strong>is supported for the prompts.</p></li><li id="viewer-auc98"><p><strong>Fine-tune and test grammars</strong>. -- Voicegain Web Portal includes a tool for reviewing and fine tuning grammars. The tool also supports regression tests. With this functionality you will never have to deploy grammars without knowing how well they are going to perform after changes.</p></li></ol><h2 id="viewer-9t19d">How Twilio Media Streams works with Voicegain </h2><div id="viewer-f0q42"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.voicegain.ai/post/announcing-twilio-twiml-connect-stream-support" data-pin-media="https://static.wixstatic.com/media/e90723_efa9609d4fc345188b98e3e91f4dd19d~mv2.png/v1/fit/w_901,h_509,al_c,q_80/file.png" src="https://static.wixstatic.com/media/e90723_efa9609d4fc345188b98e3e91f4dd19d~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png"></p></div></div></div></div><p id="viewer-f3v81">TwiML &lt;Stream&gt; requires a websocket url. This url can be obtained by invoking Voicegain /asr/recognize/async API. When invoking this API the grammar to be used in the recognition has to be provided. The websocket URL will be returned in the response.  </p><div id="viewer-1tiqr"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.voicegain.ai/post/announcing-twilio-twiml-connect-stream-support" data-pin-media="https://static.wixstatic.com/media/e90723_04f7848807a349069c88b747fca35bcc~mv2.png/v1/fit/w_896,h_555,al_c,q_80/file.png" src="https://static.wixstatic.com/media/e90723_04f7848807a349069c88b747fca35bcc~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png"></p></div></div></div></div><p id="viewer-4cgk5">In addition to the wss url, Custom Parameters within &lt;Connect&gt;&lt;Stream&gt; command are used to pass information about the question prompt to be played  to the caller by Voicegain. This can be a text or a url to a service that will provide the audio.</p><p id="viewer-chsps">Once &lt;Connect&gt;&lt;Stream&gt; has been invoked, Voicegain platform takes over-  it:</p><ul><li id="viewer-4k6o4"><p>Plays the prompt via the back channel of &lt;Stream&gt;</p></li><li id="viewer-dl5vs"><p>As soon as caller starts speaking, the prompt playback is stopped (if it it was still playing) exactly like in &lt;Gather&gt;</p></li><li id="viewer-400cn"><p>Spoken words are are recognized using grammar. Recognition result is then provided as a callback from Voicegain Platform. In case of no-input or no-match an appropriate callback will also be made.</p></li><li id="viewer-39pqs"><p>&lt;Stream&gt; connection is stopped and the TwiML application will continue with a next command.</p></li></ul><p id="viewer-5oe9j">BTW, we do support DTMF input as an alternative to speech input. </p><p id="viewer-4bi5v">[UPDATE: you can see more details of how to use Voicegain with Twilio Media Streams in this new <a href="https://www.voicegain.ai/post/how-to-use-voicegain-with-twilio-media-streams" target="_blank" rel="noopener"><u>Blog post</u></a>.]</p><h2 id="viewer-5rju5">Other features of the Voicegain Platform</h2><p id="viewer-afees"><strong>1. On Premise Edge Support: </strong>While Voicegain APIs are available as a cloud PaaS service, Voicegain also supports OnPrem/Edge deployment. Voicegain can be deployed as a containerized service on a single node Kubernetes cluster, or onto multi-node high-availability Kubernetes cluster (on your GPU hardware or your VPC).</p><p id="viewer-e2nci"><strong>2. Acoustic model customization:</strong> This allows to achieve very high accuracy beyond what is possible with out of the box recognizers. The grammar tuning and regression tool mentioned earlier, can be used to collect training data for acoustic model customization.</p><h2 id="viewer-9md6b">More Features Coming </h2><p id="viewer-1ghtq">On our near-term roadmap for Twilio users we have several more features:</p><ul><li id="viewer-1th58"><p>Advanced <strong>Answering Machine Detection</strong> (AMD) -- will be invoked using &lt;Connect&gt;&lt;Stream&gt; and will provide very accurate answering machine detection using speech recognition.</p></li><li id="viewer-93p29"><p><strong>Large vocabulary language model </strong>to just capture the spoken words (no grammars are used) and integrate with any NLU Engine of your choice. We think it will be attractive because of the lower cost compared to &lt;Gather&gt;.</p></li><li id="viewer-9luup"><p><strong>Real-time agent assist</strong> - we are combining our real-time speech recognition with speech analytics to deliver an API that will allow for building real-time agent assist and monitoring applications.</p></li></ul><p id="viewer-c9mgf">You can sign up to <a href="https://voicegain.ai/trial" target="_blank" rel="noopener"><u>try our</u></a> platform. We are offering 600 minutes of free monthly use of the platform. If you have questions about integration with Twilio, send us a note at support@voicegain.ai.</p><p id="viewer-9jpkh">Twilio, TwiML and Twilio Programmable Voice are registered trademarks of <a href="https://www.twilio.com/" target="_blank" rel="noopener"><u>Twilio, Inc</u></a></p></div></div></div></div></article></div></div>]]>
            </description>
            <link>https://www.voicegain.ai/post/announcing-twilio-twiml-connect-stream-support</link>
            <guid isPermaLink="false">hacker-news-small-sites-24492950</guid>
            <pubDate>Wed, 16 Sep 2020 14:21:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Using a mobile device as a rotation controller (2019)]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24492735">thread link</a>) | @andersource
<br/>
September 16, 2020 | https://andersource.dev/2019/09/17/device-as-rotation-controller.html | <a href="https://web.archive.org/web/*/https://andersource.dev/2019/09/17/device-as-rotation-controller.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <h2 id="demo">Demo</h2>
<p>Use a QR code scanner with a mobile device to scan this code, and start moving the Earth!</p>



<h2 id="putting-it-together">Putting it together</h2>
<p>This actually was a classic case of stacking existing components like lego.</p>
<ul>
  <li>The <a href="https://www.w3.org/TR/orientation-event/">DeviceOrientation</a> event is part of the W3C standards, and while it‚Äôs still an experimental feature, many browsers already support it.
The documentation even helps you out converting Euler angles (the event‚Äôs representation of the device orientation) to quaternions, which are generally useful when dealing with rotations and orientations.</li>
  <li><a href="https://threejs.org/">three.js</a> is a powerful 3D javascript library; the globe was adapted from <a href="https://threejs.org/examples/software_geometry_earth.html">this example</a>.</li>
  <li><a href="https://peerjs.com/">PeerJS</a> is a javascript p2p library wrapping WebRTC with a very easy-to-use API, and they even provide a default, free broker server for the initial connection.</li>
  <li>I used <a href="https://github.com/kazuhikoarase/qrcode-generator#readme">qrcode-generator</a> to generate the QR code.</li>
</ul>

<h3 id="code">Code</h3>
<p>The code is available on Github:
<a href="https://github.com/andersource/andersource.github.io/blob/master/_includes/device-rotation-controller/globe.html">globe.html</a>,
<a href="https://github.com/andersource/andersource.github.io/blob/master/assets/device-rotation-controller/globe.js">globe.js</a>,
<a href="https://github.com/andersource/andersource.github.io/blob/master/static/rotation-controller-client.html">client.html</a>,
<a href="https://github.com/andersource/andersource.github.io/blob/master/assets/device-rotation-controller/client.js">client.js</a>.</p>

  </div>
</article>


      </div>
    </div></div>]]>
            </description>
            <link>https://andersource.dev/2019/09/17/device-as-rotation-controller.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24492735</guid>
            <pubDate>Wed, 16 Sep 2020 13:55:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Challenging LR Parsing]]>
            </title>
            <description>
<![CDATA[
Score 120 | Comments 41 (<a href="https://news.ycombinator.com/item?id=24492675">thread link</a>) | @dilap
<br/>
September 16, 2020 | https://rust-analyzer.github.io/blog/2020/09/16/challeging-LR-parsing.html | <a href="https://web.archive.org/web/*/https://rust-analyzer.github.io/blog/2020/09/16/challeging-LR-parsing.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p>Consider this incomplete snippet of Rust code:</p>
<div>
<div>
<pre><code data-lang="rust"><table><tbody><tr><td><pre>1
2
3
4
5
</pre></td><td><pre><span>fn</span> <span>foo</span><span>(</span>

<span>struct</span> <span>S</span> <span>{</span>
   <span>f</span><span>:</span> <span>u32</span>
<span>}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>I want to see an LR parser which produces the following syntax tree
(from <a href="https://rust-analyzer.github.io/manual.html#show-syntax-tree"><strong>Show Syntax Tree</strong></a> rust-analyzer command, with whitespace nodes elided for clarity):</p>
<div>
<div>
<pre><code><table><tbody><tr><td><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td><pre>SOURCE_FILE@0..32
  FN@0..7
    FN_KW@0..2 "fn"
    NAME@3..6
      IDENT@3..6 "foo"
    PARAM_LIST@6..7
      L_PAREN@6..7 "("
  STRUCT@9..31
    STRUCT_KW@9..15 "struct"
    NAME@16..17
      IDENT@16..17 "S"
    RECORD_FIELD_LIST@18..31
      L_CURLY@18..19 "{"
      RECORD_FIELD@23..29
        NAME@23..24
          IDENT@23..24 "f"
        COLON@24..25 ":"
        PATH_TYPE@26..29
          PATH@26..29
            PATH_SEGMENT@26..29
              NAME_REF@26..29
                IDENT@26..29 "u32"
      R_CURLY@30..31 "}"
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>The most error-resilient LR-style parser I know, <a href="https://github.com/tree-sitter/tree-sitter">tree sitter</a>, produces this instead (tree sitter is GLR, this is <strong>not</strong> the style of parsing advocated by the article):</p>
<div>
<div>
<pre><code><table><tbody><tr><td><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td><pre>source_file [0, 0] - [5, 0])
  ERROR [0, 0] - [4, 1])
    identifier [0, 3] - [0, 6])
    struct_pattern [2, 0] - [4, 1])
      type: type_identifier [2, 0] - [2, 6])
      ERROR [2, 7] - [2, 8])
        identifier [2, 7] - [2, 8])
      field_pattern [3, 3] - [3, 9])
        name: field_identifier [3, 3] - [3, 4])
        pattern: identifier [3, 6] - [3, 9])
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>Note two things about the rust-analyzer‚Äôs tree:</p>
<div>
<ul>
<li>
<p>There‚Äôs an (incomplete) ‚Äúfunction‚Äù node for <code>fn foo(</code>.
Unclosed parenthesis doesn‚Äôt preclude the parser from recognizing parameter list.</p>
</li>
<li>
<p>Incomplete function does not prevent struct definition from being recognized.</p>
</li>
</ul>
</div>
<p>These are important for IDE support.</p>
<p>For example, suppose that the cursor is just after <code>(</code>.
If we have rust-analyzer‚Äôs syntax tree, than we can figure out that we are completing a function parameter.
If we are to get fancy we might find the calls to the (not yet fully written) <code>foo</code>, run type inference to figure out the type of the first argument, and than suggest parameter name &amp; type based on that (not currently implemented‚Äâ‚Äî‚Äâthere‚Äôs soooooo much yet to be done in rust-analyzer).
And correctly recognizing <code>struct S</code> is important to not break type-inference in the code which uses <code>S</code>.</p>
<p>There‚Äôs a lot of literature about error recovery for LR parsers, how come academics haven‚Äôt figured this out already?
I have a bold claim to make: error-recovery research in academia is focusing on a problem irrelevant for IDEs.
Specifically, the research is focused on finding ‚Äúminimal cost repair sequence‚Äù:</p>
<div>
<ul>
<li>
<p>a set of edit operations is defined (skip, change or insert token),</p>
</li>
<li>
<p>a ‚Äúcost‚Äù metric is defined to distinguish big and small edits,</p>
</li>
<li>
<p>an algorithm is devised to find the smallest edit which makes the current text parse.</p>
</li>
</ul>
</div>
<p>This is a very academia-friendly problem‚Äâ‚Äî‚Äâthere‚Äôs a precise mathematical formulation, there‚Äôs an obvious brute force solution (try all edits), and there‚Äôs ample space for finding polynomial algorithm.</p>
<p>But IDEs don‚Äôt care about actually guessing &amp; repairing the text!
They just need to see as much of (possibly incomplete) syntax nodes in the existing text as possible.
When rust-analyzer‚Äôs parser produces</p>
<div>
<div>
<pre><code><table><tbody><tr><td><pre>1
2
3
</pre></td><td><pre>  PARAM_LIST@6..7
    L_PAREN@6..7 "("
STRUCT@9..31
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>it doesn‚Äôt think ‚ÄúOh, I need to insert <code>)</code> here to complete the list of parameters‚Äù.
Rather, it sees <code>struct</code> and thinks ‚ÄúOh wow, didn‚Äôt expect that! I guess I‚Äôll just stop parsing parameter list right here‚Äù.</p>
<p>So, here‚Äôs</p>
<div>
<table>
<tbody><tr>
<td>
<i title="Important"></i>
</td>
<td>
<p>First Challenge</p>
Design error <em>resilient</em> (and not just error <em>recovering</em>) LR parsing algorithm.
</td>
</tr>
</tbody></table>
</div>
<p>Note that error resilience is a topic orthogonal to error reporting.
I haven‚Äôt payed much attention to error reporting (in my experience, synchronous reporting of syntax errors in the editor compensates for bad syntax error messages), but it might be the case that MCRS are a good approach to there.</p>
</div></div>]]>
            </description>
            <link>https://rust-analyzer.github.io/blog/2020/09/16/challeging-LR-parsing.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24492675</guid>
            <pubDate>Wed, 16 Sep 2020 13:48:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: 5 Kb Spreadsheet for the Web with copy paste]]>
            </title>
            <description>
<![CDATA[
Score 22 | Comments 6 (<a href="https://news.ycombinator.com/item?id=24492647">thread link</a>) | @lecarore
<br/>
September 16, 2020 | https://renanlecaro.github.io/importabular/ | <a href="https://web.archive.org/web/*/https://renanlecaro.github.io/importabular/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"> <section> <div>  <ul> <li title="Once minified and gzipped">Under 5 Kb</li> <li title="Basic support, double tap a cell to edit it, not tried on iphone">Mobile friendly</li> <li title="Works from libre office, should work for other software">Copy / paste</li> <li>MIT License</li> </ul> </div>  </section> <section> <div> <h2>Usage</h2> <p>Install it from npm</p> <pre><code>npm install importabular</code></pre> <p>Instanciate it on a dom node</p>
<pre><code lang="javascript">import Importabular from 'importabular'
const sheet=new Importabular({
  node:document.getElementById('editorNode'),
})</code></pre> <p>Get the current data as a 2D array</p>
<pre><code lang="javascript">sheet.data.toArr()</code></pre> <p>Destroy it to remove event listeners</p>
<pre><code lang="javascript">sheet.destroy()</code></pre> </div> </section> <section> <div> <h2>Goals and limitations</h2> <p> I've created this lib because I was tired of having to remove 90% of the features offered by the very few open source libs for web spreadsheets. </p> <p> Some common use cases have options, for the rest you should just read <a href="https://github.com/renanlecaro/importabular">the source</a> and subclass it of fix the code. </p> <p> So for this reinventing the wheel to make sense, I should not add any extra features to this core. </p><ul> <li>No virtual rendering</li> <li>No sorting, pivot, formula, etc ..</li> <li>Only basic keyboard shortcuts</li> <li>Only strings as data type</li> <li>Only for recent browsers</li> </ul>  <p> The lib is fresh and not battle tested, probably has some bugs. Feel free to <a href="https://github.com/renanlecaro/importabular/issues/new"> create an issue</a> if you find a bug. </p> </div> <div> <pre><code lang="javascript">import Importabular from 'importabular'

const sheet=new Importabular({
  node:document.getElementById('editorNode'),

  // Prefill the table
  data:[['This','is','the','first','row']],

  // Called after each change to the table data
  onChange:data=&gt;console.log('new data : ',data),

  // Called every time the user changes selection,
  // useful for real time collaborative editing
  onSelectionChange:sel=&gt;console.log('new selection',sel),

  // Each cell is rendered as a TD with inside either
  // a div or an input. This will override the TD style
  cellStyle:(x,y,{selected,editing})=&gt;
    ({
      backgroundColor:!selected &amp;&amp; !editing &amp;&amp; y%2?
        '#fafafa':null
    }),

  // and this will override the style of the text
  // input or div.
  contentStyle:()=&gt;({fontFamily:'sherif'}),

  // Starting size of the grid on instanciation
  minWidth:5,
  minHeight:10,

  // Limits to the growth of the grid
  maxWidth:5,
  maxHeight:10,
})
</code></pre> </div>
</section> 
</div>]]>
            </description>
            <link>https://renanlecaro.github.io/importabular/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24492647</guid>
            <pubDate>Wed, 16 Sep 2020 13:44:37 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Direct sales for SaaS startups ‚Äì our experience and tips]]>
            </title>
            <description>
<![CDATA[
Score 158 | Comments 19 (<a href="https://news.ycombinator.com/item?id=24492609">thread link</a>) | @pau_alcala
<br/>
September 16, 2020 | https://blog.palabra.io/learning-to-listen-direct-sales-tips-for-early-stage-startups | <a href="https://web.archive.org/web/*/https://blog.palabra.io/learning-to-listen-direct-sales-tips-for-early-stage-startups">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><p><em>By Pau Alcal√° - Co-founder of Palabra</em></p><p>While finding product-market fit for <a href="https://www.palabra.io/?utm_medium=direct-sales-tips-startups&amp;utm_source=blog">Palabra</a>, our marketing strategy was exclusively organic and our first sales came from 1-1 conversations with potential users. After a month of difficult conversations and failed demos, I learned a very new and innovative approach to direct sales: actually listening to what people are saying. In this post I'll share my experience and some tips to listen to users, in the hopes of saving founders &amp; early startup teams some time and energy.</p><h2>What we mean by direct sales</h2><p>As the name suggest, direct sales means you talk directly to your prospect and try to sell them your solution via a 1-1 conversation. This conversation usually starts by reaching the prospect you think your product would work for, and sharing why you think your solution would be good for them.</p><p>Taking a direct approach is more common for B2B businesses, because the decision to purchase is strategical and the price is higher, which means you get a bigger return for each user you convert. But I think it's a good strategy to follow for any early stage SaaS, because it's an easy and direct way of learning about your users and implementing solutions that work for them.</p><p>The biggest challenges to direct sales is finding the right prospects and knowing how to show them value as quickly as possible. With direct conversations you'll probably get a higher conversion rate than self-served sales, but at a much slower rate.</p><h2>Why direct sales in a SaaS startup?</h2><p>When we launched <a href="https://www.palabra.io/?utm_medium=direct-sales-tips-startups&amp;utm_source=blog">Palabra</a> we had no audience and not enough user data to understand who we should be targeting or how to convert them into paying users. We had two possible paths to follow:</p><ol><li>Awareness-first: Experimenting with low-budget ads or organic strategies in different channels, with different messages to see which stick better. This approach is the startup playbook, feeding the top of the funnel with as many prospects as possible assuming most of them will not end up buying, and learn how to convert them better later on.</li><li>Conversion-first: Spending almost no time to feed the top of the funnel (keep a low stream of leads and prospects) but improving that funnel to have better conversions. Leads would be scarce, but we'd learn how to qualify them and provide value so they are willing to buy and stay around.</li></ol><p>The first path was the riskier for us. First, because we had little experience with paid acquisition, and wouldn't know if our misses would be due to lack of experience or just wrong channels.</p><p>Second, we wanted to engage in deep conversations with users as soon as possible. We didn't really care about general trends, we wanted to actually understand what people were struggling with in email automation, and where to take our product so that it worked for them. That's why we decided to take the second path.</p><p>Our initial strategy was to ask a bunch of questions about people's current email automation strategies and try to turn the initial conversation into a sales pitch. We'd learn fast and get a few sales in the meantime.</p><p>Sounds easy, right? Well, it was not.</p><h2>What a failed sales conversation looks like</h2><p>After my first couple of calls I knew I was doing something wrong, but didn't know what it was. Sign ups were rarely because of my "sales" 1-1s, and every conversation left me with a sour feeling.</p><p>What usually happened was that I got to a call, asked the person a couple of questions about their strategies, and at some point I'd get nervous and start talking a lot. People are usually nice and would listen to what I had to say, but I could feel they weren't really interested, and felt like I was wasting time.</p><p>So what was I doing wrong?</p><p>After talking with my co-founder and a couple of friends in the SaaS industry, I found that I wasn't really paying attention to what prospects were saying. My team would ask questions about our prospects that I didn't know how to answer.</p><p>That meant I wasn't really selling, but I also wasn't learning about our users. I found I had to learn how to listen first, and sell later.</p><h2>How to talk less and sell more</h2><p>Listening to prospects is not at easy as it sounds when you are worried about selling them your solution. Specially if you're in early stage and don't have much experience selling software, it'll be hard to keep a clear mind and letting the user take the conversation where they want to.</p><p>But here's the thing: selling isn't about convincing people to try your product, it's about identifying how your product can solve a problem for them.</p><p>In a direct sales conversation, you should have two take outs:</p><ol><li>Identifying if the person you're talking to has a problem you could solve (the more details the better)</li><li>Communicating clearly how your product is a solution to their problem.</li></ol><p>If you fail at #1, you'll end up trying to convince people who don't actually have a problem you could help them with. Those are not your users, and there's nothing you can do today to make their life easier. Even if you somehow convince them to sign up, they'll probably cancel their subscription, making your churn go up.</p><p>Failing at #2 is usually connected to #1, because the only way of communicating a solution clearly is to understand the problem perfectly. You have to <strong>listen really carefully</strong> to understand what those problems are.</p><p>Most of your conversations with prospects should be about #1. Make a lot of questions. Listen closely and follow up on what isn't clear. Make the other person feel listened to. Worst case scenario, you end up with valuable insights about what problems people have. As an early stage startup, this information is crucial to find product-market fit.</p><p>Here are some lessons I learned while taking a direct sales approach to SaaS. Most of them came from reading <a href="http://momtestbook.com/">The Mom Test</a>, talking to awesome people and experimenting on my own.</p><h2>3 direct sales tips to listen to your users</h2><h3>Writing down what you want to get from the conversation</h3><p>This list should be really short. My initial conversation guide had 15+ questions to get to understand the problem, and then a short demo. It worked kinda fine, but I usually got lost by question 5, and then started thinking about what to ask next instead of listening to the answer.</p><p>The Mom Test suggests you should "prepare your list of 3". Three things you want to get from each conversation, depending on who you'll be talking to. And that was magic.</p><p>In early Palabra demos, when I asked to have a quick chat to someone in a startup, I usually had three different scenarios:</p><ul><li>The founder talked to me directly, who had no details about the email automation strategies his/her team was using but could provide context.</li><li>I talked to a marketer in the startup, who usually had many years of experience and had tried a bunch of other email automation tools.</li><li>I talked to a technical co-founder or dev, who had a lot of questions about technical aspects of Palabra and had tried different integrations before.</li></ul><p>I prepared three different notes to look at before each conversation, one for each "buyer" persona, and wrote down my list of three.</p><p>I started asking questions that came to mind from listening to what people were saying, and spend almost no time looking at my notes. If I ever felt I was starting to get lost, I just glanced to my list of three for that particular person to check if I was missing something. Freedom.</p><h3>Having a structured set of questions</h3><p>This advice came from a great friend and the <a href="http://sofandrade.com/">best UX designer I've met</a>. She knows all about user interviews, and since I was also trying to learn from our prospects, I knew it would help. Her advice was to divide my questions into chunks or topics I wanted to know about.</p><p>Having differentiated topics gives you flexibility to follow the conversation and not worry about what to ask after each answer. If you ask a question from the first topic and your user's answer goes to a slightly different topic, you can go to that part of your guide and then come back after that's done.</p><p>As an example, this was the structure I ended up using for each guide:</p><ul><li>About them/their job/their goals</li><li>About their emails, what they were using them from</li><li>About their email automation tools, what they were using and how</li><li>About their pains, what was missing from their current tools?</li></ul><p>What usually happened is that my email questions got answers related to tools. So I just moved over to the "tools" set of questions and then looked to see if I was missing something important at the end.</p><p>A smart move was to leave questions about pains for last. By then I usually had enough information about their problem and could offer a clear solution with <a href="https://www.palabra.io/?utm_medium=direct-sales-tips-startups&amp;utm_source=blog">Palabra</a>.</p><p>If we had a solution, I'd briefly tell people why I thought this would work, and offered to show them in a demo. By focusing on their specific solution in the demo, I only showed one feature and not the whole product, which was a much better use of everyone's time.</p><h3>Doing some background research - but still ask people</h3><p>You can't go into a sales pitch without knowing who you're talking to. For B2B sales you need to know about the company and the person you're actually going to talk to. The key here is to use that information wisely.</p><p>I used to start conversations on what I'd learned from their landing page, to let people know I had done my homework. But his was actually making me start with the wrong foot -by talking too much.</p><p>Asking about their company and what they do there gives you inside information you wouldn't get from LinkedIn or a landing page. And it also helps break the ice, since it's an easy answer for anyone.</p><p>My solution was full transparency. I started each conversation by saying I had done a bit of research about them but still wanted to hear from themselves. Then I would ask what they usually do.</p><p>This was incredibly effective. Being honest took away all of my nervousness and allowed me to relax into the conversation. I felt like I had no secrets, I was just telling the truth and asking questions. And I think this works both ways: the person you're talking to will probably trust you more if you're ‚Ä¶</p></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.palabra.io/learning-to-listen-direct-sales-tips-for-early-stage-startups">https://blog.palabra.io/learning-to-listen-direct-sales-tips-for-early-stage-startups</a></em></p>]]>
            </description>
            <link>https://blog.palabra.io/learning-to-listen-direct-sales-tips-for-early-stage-startups</link>
            <guid isPermaLink="false">hacker-news-small-sites-24492609</guid>
            <pubDate>Wed, 16 Sep 2020 13:40:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to Make Friends as an Adult]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 6 (<a href="https://news.ycombinator.com/item?id=24492550">thread link</a>) | @lemonberry
<br/>
September 16, 2020 | https://psyche.co/guides/how-to-make-new-friends-when-youre-busy-with-adulthood | <a href="https://web.archive.org/web/*/https://psyche.co/guides/how-to-make-new-friends-when-youre-busy-with-adulthood">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><section><div><h2 data-guide-section-number="1"><span>Need to know</span></h2><div><p>Friends are a treasure. In an uncertain world, they provide a comforting sense of stability and connection. We laugh together and cry together, sharing our good times and supporting each other through the bad. Yet a defining feature of friendship is that it√¢‚Ç¨‚Ñ¢s voluntary. We√¢‚Ç¨‚Ñ¢re not wedded together by law, or through blood, or via monthly payments into our bank accounts. It is a relationship of great freedom, one that we retain only because we want to.</p>
<p>But the downside of all this freedom, this lack of formal commitment, is that friendship often falls by the wayside. Our adult lives can become a monsoon of obligations, from children, to partners, to ailing parents, to work hours that trespass on our free time. A <a href="https://psycnet.apa.org/doiLanding?doi=10.1037%2Febs0000046">study</a> of young adults√¢‚Ç¨‚Ñ¢ social networks by researchers at the University of Oxford found that those in a romantic relationship had, on average, two fewer close social ties, including friends. Those with kids had lost out even more. Friendships crumble, not because of any deliberate decision to let them go, but because we have other priorities, ones that aren√¢‚Ç¨‚Ñ¢t quite as voluntary. The title of the Oxford paper summed up things well: √¢‚Ç¨ÀúRomance and Reproduction Are Socially Costly√¢‚Ç¨‚Ñ¢.</p>
<p>Such is the pace and busyness of many people√¢‚Ç¨‚Ñ¢s adult lives that they can lose contact with their friends at a rapid rate. For instance, a <a href="https://www.sciencedirect.com/science/article/pii/S0378873313001056?via%3Dihub">study</a> by the Dutch sociologist Gerald Mollenhorst found that, over a period of seven years, people had lost touch with half of their closest friends, on average. What√¢‚Ç¨‚Ñ¢s especially alarming is that many of us seem to be losing friends faster than we can replace them. A <a href="https://psycnet.apa.org/record/2012-13785-001">meta-analysis</a> by researchers in Germany published in 2013 combined data from 177,635 participants across 277 studies, concluding that friendship networks had been shrinking for the preceding 35 years. For example, in studies conducted between 1980 and 1985, participants reportedly had four more friends on average, compared with the participants who√¢‚Ç¨‚Ñ¢d taken part in studies between 2000 and 2005.</p>
<p>If we√¢‚Ç¨‚Ñ¢re not careful, we risk living out our adulthoods friendless. This is a situation that√¢‚Ç¨‚Ñ¢s worth avoiding. Friends are not only a great source of fun and <a href="https://www.pewforum.org/2018/11/20/where-americans-find-meaning-in-life/">meaning</a> in life, but studies <a href="https://academic.oup.com/psychsocgerontology/article/74/2/222/3760165">suggest</a> that, without them, we√¢‚Ç¨‚Ñ¢re also at greater risk of feeling more depressed. It√¢‚Ç¨‚Ñ¢s telling that in their <a href="https://journals.sagepub.com/doi/10.1111/1467-9280.00415">study</a> √¢‚Ç¨ÀúVery Happy People√¢‚Ç¨‚Ñ¢ (2002), the American psychologists Ed Diener and Martin Seligman found that a key difference between the most unhappy and most happy people was how socially connected they were. Friends give us so much, which is why we need to invest in making them. Here√¢‚Ç¨‚Ñ¢s how.</p></div></div></section><section><div><h2 data-guide-section-number="2"><span>What to do</span></h2><div><p>Making more friends in adulthood is going to take some deliberate effort on your part. It√¢‚Ç¨‚Ñ¢s an exciting challenge in theory, but one of the first obstacles you√¢‚Ç¨‚Ñ¢ll encounter is having enough confidence. Especially if you are shy by nature, putting yourself out there can seem scary, triggering fears of rejection. These fears might lead you to engage in two types of avoidance that will inhibit your ability to make friends. First, you might practise √¢‚Ç¨Àúovert avoidance√¢‚Ç¨‚Ñ¢, by not putting yourself in situations where it√¢‚Ç¨‚Ñ¢s possible to meet new people. Instead of going to your friend√¢‚Ç¨‚Ñ¢s movie night, with the chance to meet others, you end up staying at home. Second, you might find yourself engaging in √¢‚Ç¨Àúcovert avoidance√¢‚Ç¨‚Ñ¢, which means that you show up but don√¢‚Ç¨‚Ñ¢t engage with people when you arrive. You go to the movie night, but while everyone else is analysing the film after it√¢‚Ç¨‚Ñ¢s over, you stay silent in the corner, petting someone√¢‚Ç¨‚Ñ¢s pet corgi and scrolling through Instagram.</p>
<p><strong>Assume that people like you</strong></p>
<p>Both these forms of avoidance are caused by understandable fears of rejection. So imagine how much easier it would be if you knew that, were you to show up in a group of strangers, most of them would love you and find you interesting. This mindset actually has a self-fulfilling quality √¢‚Ç¨‚Äú an American <a href="https://doi.apa.org/doiLanding?doi=10.1037%2F0022-3514.51.2.284">study</a> from the 1980s found that volunteers who were led to believe that an interaction partner liked them began to act in ways that made this belief more likely to come true √¢‚Ç¨‚Äú they shared more about themselves, disagreed less, and had a more positive attitude. This suggests that if you go into social situations with a positive mindset, assuming people like you, then it√¢‚Ç¨‚Ñ¢s more likely that this will actually turn out to be the case.</p>
<p>Of course, you might still be reluctant to assume others like you because you don√¢‚Ç¨‚Ñ¢t believe it√¢‚Ç¨‚Ñ¢s true. If this is you, you might take comfort from research that found, on average, that strangers like us more than we realise. The <a href="https://journals.sagepub.com/doi/10.1177/0956797618783714">paper</a>, by Erica J Boothby at Cornell University and colleagues, involved having pairs of strangers chat together for five minutes, to rate how much they liked their interaction partner, and to estimate how much their partner liked them. Across a variety of settings and study durations √¢‚Ç¨‚Äú in the lab, in a college dorm, at a professional development workshop √¢‚Ç¨‚Äú the same pattern emerged. People underestimated how much they were liked, a phenomenon that Boothby and her colleagues labelled √¢‚Ç¨Àúthe liking gap√¢‚Ç¨‚Ñ¢.</p>
<p>What wisdom should we take from this research? It can remind us to go into new social events assuming that people will like us. It can keep us from being paralysed by fears of rejection, pushing us to question some of these fears. Try working on your internal dialogue, your inner voice that perhaps makes overly negative assumptions about how people will respond to you. Doing this will help give you the confidence to go out there and start initiating friendly contact with strangers.</p>
<p><strong>Initiate</strong></p>
<p>In <em>We Should Get Together: The Secret to Cultivating Better Friendships</em> (2020), Kat Vellos describes being inspired to write her book after a moment of feeling utterly alone. She was looking for a friend to hang out with, so she posted on Facebook: √¢‚Ç¨ÀúWho wants to go eat French fries and talk about life with me?√¢‚Ç¨‚Ñ¢ Everyone who responded lived in another state; her local San Francisco Bay Area friends were all booked up. As she put it:</p>
<blockquote>I didn√¢‚Ç¨‚Ñ¢t just want to eat snacks and talk about life. I was craving a different kind of life √¢‚Ç¨‚Äú one that would give me abundant access to friends who wanted to see me as much as I wanted to see them.</blockquote>
<p>This experience made Vellos realise that she needed more friends, so she created and executed a plan to make some. Eventually, she was running two successful meetup groups, and had established friendships with people she liked and wanted to get closer to. How did she change her life? She initiated. Vellos set aside time to reach out to people regularly, to revitalise old relationships and to awaken new ones, to check in, to find time to hang out. Her story reveals how initiative can change the course of our friendships.</p>
<p>To embrace the importance of initiating, you must to let go of the myth that friendship happens organically. You have to take responsibility rather than waiting passively. Science backs this up. Consider a <a href="https://journals.sagepub.com/doi/pdf/10.1177/0265407509106718">study</a> of older adults in the Canadian province of Manitoba. The participants who thought friendship was something that just happened based on luck tended to be less socially active and to feel lonelier when the researchers caught up with them five years later. By contrast, those who thought friendship took effort actually made more effort √¢‚Ç¨‚Äú for example, by showing up at church or at community groups √¢‚Ç¨‚Äú and this paid dividends, in that they felt less lonely at the five-year follow-up.</p>
<p>But it√¢‚Ç¨‚Ñ¢s not just showing up that matters, it√¢‚Ç¨‚Ñ¢s saying √¢‚Ç¨Àúhello√¢‚Ç¨‚Ñ¢ when you get there. This means introducing yourself to other people, asking them for their phone numbers, following up and asking them to hang out. Initiating is a process, one that we must do over and over again to make new friendships.</p>
<p>Initiation is particularly important for people who find themselves in new social settings √¢‚Ç¨‚Äú such as people who have moved to a new city, started a new school or job. In a <a href="https://psycnet.apa.org/record/1987-97266-009">study</a> of first-year undergraduates at the University of Denver in 1980, it was those students who rated themselves as having superior social skills who managed to develop more satisfying social relationships. Moreover, in the Fall, when everyone was new, it was specifically √¢‚Ç¨Àúinitiation skill√¢‚Ç¨‚Ñ¢ that was most important. Once friendships were more stable, it didn√¢‚Ç¨‚Ñ¢t matter as much.</p>
<p>Although we might fear that other people will turn us down if we initiate with them, the research finds that this is a lot less likely than we might think. When the American psychologists Nicholas Epley and Juliana Schroeder <a href="https://psycnet.apa.org/record/2014-28833-001">asked</a> research participants to open up conversations with their fellow train commuters, can you guess how many of them were shot down? None! Epley and Schroder concluded that: √¢‚Ç¨ÀúCommuters appeared to think that talking to a stranger posed a meaningful risk of social rejection. As far as we can tell, it posed no risk at all.√¢‚Ç¨‚Ñ¢</p>
<p><strong>Keep showing up</strong></p>
<p>Once you√¢‚Ç¨‚Ñ¢ve initiated some new contacts, the challenge of turning them into genuine friendships begins. I learned this lesson when I moved to Atlanta to start a job as assistant professor. At first, I was proactive at making friends. I showed up to events, asked my friends if they knew anyone in the area, and went to some meetup groups. I met a few people, but most of these friendships fizzled. I was good at sparking a connection but struggled to sustain it.</p>
<p>According to Rebecca G Adams, professor of sociology and gerontology at the University of North Carolina at Greensboro, sociologists have long <a href="https://www.nytimes.com/2012/07/15/fashion/the-challenge-of-making-friends-as-an-adult.html">recognised</a> that friendships thrive when we have continuous interaction. My problem with sustaining connection was that I lacked the opportunity for repeated encounters. Going to a lecture, or a happy hour, or a networking event afforded me only one opportunity to connect. If you can, it√¢‚Ç¨‚Ñ¢s a better idea to sign up for activities that give you multiple opportunities to connect, such as a language class, a writing course, an ‚Ä¶</p></div></div></section></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://psyche.co/guides/how-to-make-new-friends-when-youre-busy-with-adulthood">https://psyche.co/guides/how-to-make-new-friends-when-youre-busy-with-adulthood</a></em></p>]]>
            </description>
            <link>https://psyche.co/guides/how-to-make-new-friends-when-youre-busy-with-adulthood</link>
            <guid isPermaLink="false">hacker-news-small-sites-24492550</guid>
            <pubDate>Wed, 16 Sep 2020 13:35:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Fixing AWS Architecture Diagrams #2: Distributed Load Testing]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24491905">thread link</a>) | @Veuxdo
<br/>
September 16, 2020 | https://blog.ilograph.com/posts/fixing-aws-architecure-diagrams-distributed-load-testing/ | <a href="https://web.archive.org/web/*/https://blog.ilograph.com/posts/fixing-aws-architecure-diagrams-distributed-load-testing/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            

<!-- <img src="/img/fixing-aws-load-testing/header.png" style="width: 100%;" alt="Fixing AWS Architecure Diagrams: Distributed Load Testing"> -->

<p><em>Amazon Web Services (AWS) provides a vast library of practical solutions to common business problems. In this series, we focus on the architecture diagrams included in these solutions and attempt to expand and improve on them. Read the previous entry <a href="https://blog.ilograph.com/posts/fixing-aws-architecture-diagrams-vod/">here</a>.</em></p>

<p>Below is AWS‚Äôs architecture diagram for their <a href="https://github.com/awslabs/distributed-load-testing-on-aws">Distributed Load Testing on AWS solution</a>. It comes directly from the linked repository. While the solution is excellent, the architecture diagram accompanying it exhibits a number of problems that limit its use as a technical resource.</p>

<p><img src="https://blog.ilograph.com/img/fixing-aws-load-testing/original.png" alt="An AWS diagram"></p>

<p>This diagram has some common issues (see the <a href="https://blog.ilograph.com/posts/fixing-aws-architecture-diagrams-vod/">previous entry</a> in this series) and a few new ones:</p>

<p>‚ÄÉ<strong>-</strong> The diagram lacks a clear purpose. It is referred to simply as an ‚ÄúArchitecture Overview‚Äù in the solution.</p>

<p>‚ÄÉ<strong>-</strong> There are no named resources; only AWS Services (e.g. <em>Amazon S3</em>) are shown. Looking at this diagram, a viewer has no way of knowing <em>what</em> buckets, lambdas and other resources exist or how they are related.</p>

<p>‚ÄÉ<strong>-</strong> All of the arrows are unlabeled. The exact nature of the relations between these resources is a mystery.</p>

<p>‚ÄÉ<strong>-</strong> The diagram mixes run-time and deployment-time concerns.</p>

<p>‚ÄÉ<strong>-</strong> The diagram is missing critical details about security and access management.</p>

<p><strong>In short, this diagram makes an <em>impression</em>, but fails to truly <em>inform</em> the viewer</strong>. This would be acceptable for a decorative element in a blog post or presentation, but as a technical resource, it can be much better. In this article, we remake this diagram with an aim toward creating a valuable source of information in its own right.</p>

<p>Like last time, we split the original into multiple perspectives, each focused on a single goal. We‚Äôll have <strong>nine</strong> perspectives in total. Four will show static relations between the solution‚Äôs resources. The remainder show sample workflows (e.g. creating a new test, or canceling a test) with detailed control flows between the resources. We‚Äôll start with one of the most important perspectives, run-time dependency:</p>

<h4 id="perspective-1-run-time-dependency">Perspective 1: Run-time Dependency</h4>

<h6 id="goal-show-which-resources-depend-on-which-resources-at-run-time">Goal: Show which resources depend on which resources at run-time</h6>

<p><strong>Original</strong>
<img src="https://blog.ilograph.com/img/fixing-aws-load-testing/old_1.png" alt="Run-time dependency (old)"></p>

<p><strong>Updated</strong>
<a rel="noopener" href="https://app.ilograph.com/demo.ilograph.AWS%2520Distributed-Load-Testing/Runtime%2520Dependency"><img src="https://blog.ilograph.com/img/fixing-aws-load-testing/new_1.png" alt="Run-time dependency">
</a></p>

<p>We address the issues in the original head-on. The perspective uses real resource names, and the relationship arrows are labeled. We‚Äôve removed deploy-time concerns (e.g. <em>CodeBuild</em>) to focus on run-time concerns. And we‚Äôve added detail about the testing console, including screen names and their API dependencies.</p>

<p>At first blush the diagram is much busier than the original; however, we can select a resource and see both what resources depend on it and what resources it depends on:</p>



<p>The aforementioned deploy-time dependencies are not <em>truly</em> gone, we‚Äôve just moved them to a different perspective:</p>

<h4 id="perspective-2-deploy-time-dependency">Perspective 2: Deploy-time Dependency</h4>

<h6 id="goal-show-which-resources-depend-on-which-resources-at-deploy-time">Goal: Show which resources depend on which resources at deploy-time</h6>

<p><strong>Original</strong>
<img src="https://blog.ilograph.com/img/fixing-aws-load-testing/old_2.png" alt="Deploy-time dependency (old)"></p>

<p><strong>Updated</strong>
<a rel="noopener" href="https://app.ilograph.com/demo.ilograph.AWS%2520Distributed-Load-Testing/Deployment%2520Dependency"><img src="https://blog.ilograph.com/img/fixing-aws-load-testing/new_2.png" alt="Deploy-time dependency">
</a></p>

<p>This perspective‚Äôs goal is identical to the last one, only it is focused on deploy-time dependencies. Note that this includes external dependencies (a <em>Docker Hub</em> image and a <em>PyPi</em> library). It also shows source code dependencies for the lambdas. Once the solution is successfully deployed, the dependencies described in this perspective are no longer relevant to the solution run-time.</p>

<h4 id="perspective-3-security-and-access-management">Perspective 3: Security and Access Management</h4>

<h6 id="goal-show-which-resources-can-access-which-resources-and-how">Goal: Show which resources can access which resources, and how</h6>

<p><strong>Original</strong>
<img src="https://blog.ilograph.com/img/fixing-aws-load-testing/old_3.png" alt="Security (old)"></p>

<p><strong>Updated</strong>
<a rel="noopener" href="https://app.ilograph.com/demo.ilograph.AWS%2520Distributed-Load-Testing/Access%2520Management"><img src="https://blog.ilograph.com/img/fixing-aws-load-testing/new_3.png" alt="Security">
</a></p>

<p>This perspective describes something the original doesn‚Äôt fully attempt to address: security and access management. For the solution to work, resources need to get data from, send data to, and sometimes (in the case of lambdas) invoke other resources. This is all managed through roles, policies, and permissions governed primary through IAM.</p>

<p>Obviously, this perspective goes into considerably more detail than the original diagram does. Like earlier, we can select individual resources to see what resources it can access and be accessed by (and how).</p>





<h4 id="perspective-4-vpc-egress">Perspective 4: VPC Egress</h4>

<h6 id="goal-show-how-vpc-based-resources-access-the-internet">Goal: Show how VPC-based resources access the internet</h6>

<p><strong>Original</strong>
<img src="https://blog.ilograph.com/img/fixing-aws-load-testing/old_4.png" alt="VPC Egress (old)"></p>

<p><strong>Updated</strong>
<a rel="noopener" href="https://app.ilograph.com/demo.ilograph.AWS%2520Distributed-Load-Testing/VPC%2520Egress"><img src="https://blog.ilograph.com/img/fixing-aws-load-testing/new_4.png" alt="VPC Egress">
</a></p>

<p>Naturally, the load testing cluster requires internet access to work. This simple diagram shows the resources allowing the cluster to access the internet from within the VPC.</p>

<h4 id="perspectives-5-9-example-control-flow-sequences">Perspectives 5-9: Example control-flow sequences</h4>

<h6 id="goal-show-detailed-interactions-between-resources-for-common-workflows">Goal: Show detailed interactions between resources for common workflows</h6>

<p><a rel="noopener" href="https://app.ilograph.com/demo.ilograph.AWS%2520Distributed-Load-Testing/Create%2520Test"><img src="https://blog.ilograph.com/img/fixing-aws-load-testing/sequences.png" alt="Sequences">
</a></p>

<p>All of the previous perspectives are <em>static</em> perspectives. There is no notion of time; the relations they describe are continuously in effect. They do not have steps showing how the resources actually interact. To help the viewer better understand <em>how</em> the resources interact (and how complex those interactions can get), we include five <strong>sequence</strong> perspectives for this solution:</p>

<p><a rel="noopener" href="https://app.ilograph.com/demo.ilograph.AWS%2520Distributed-Load-Testing/Create%2520Test">Create Test</a> - Shows how new tests are created</p>

<p><a rel="noopener" href="https://app.ilograph.com/demo.ilograph.AWS%2520Distributed-Load-Testing/Execute%2520Test">Execute Test</a> - Shows how new tests are executed after being created</p>

<p><a rel="noopener" href="https://app.ilograph.com/demo.ilograph.AWS%2520Distributed-Load-Testing/Write%2520Test%2520Results">Write Test Results</a> - Shows how test results are written to DynamoDB</p>

<p><a rel="noopener" href="https://app.ilograph.com/demo.ilograph.AWS%2520Distributed-Load-Testing/List%2520tests">List tests</a> - Shows how all running tests are fetched</p>

<p><a rel="noopener" href="https://app.ilograph.com/demo.ilograph.AWS%2520Distributed-Load-Testing/Cancel%2520test">Cancel Test</a> - Shows how a running test is canceled</p>

<p>Other workflows that could be documented include getting individual tests and getting test results.</p>

<h4 id="conclusion">Conclusion</h4>

<p>The conclusion of the <a href="https://blog.ilograph.com/posts/fixing-aws-architecture-diagrams-vod/">previous entry</a> listed guidelines for better architecture diagrams, all of which we followed here. We benefited greatly from breaking up the original diagram into multiple perspectives and using real resource names, for example. By making these and other improvements, we hopefully made this diagram much more useful as a technical resource.</p>

<p>If you haven‚Äôt already, <a href="https://app.ilograph.com/demo.ilograph.AWS%2520Distributed-Load-Testing/">click here to browse this diagram yourself</a>. Questions or comments? Please reach out to me <a href="https://twitter.com/ilographs">@Ilographs</a> on Twitter or by email at billy@ilograph.com.</p>

<p><a href="https://twitter.com/intent/tweet?text=Fixing%20AWS%20Architecure%20Diagrams%20#2:%20Distributed%20Load%20Testing&amp;url=https://blog.ilograph.com/posts/fixing-aws-architecture-diagrams-load-testing/" data-size="large">
Share this article on Twitter</a></p>

<p><a href="https://www.facebook.com/sharer/sharer.php?u=https://blog.ilograph.com/posts/fixing-aws-architecture-diagrams-load-testing/&amp;t=Fixing%20AWS%20Architecure%20Diagrams%20#2:%20Distributed%20Load%20Testing" data-size="large">
Share this article on Facebook</a></p>

<p><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.ilograph.com/posts/fixing-aws-architecture-diagrams-load-testing/&amp;title=Fixing%20AWS%20Architecure%20Diagrams%20#2:%20Distributed%20Load%20Testing&amp;source=Ilograph" data-size="large">
Share this article on LinkedIn</a></p>

        </div></div>]]>
            </description>
            <link>https://blog.ilograph.com/posts/fixing-aws-architecure-diagrams-distributed-load-testing/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24491905</guid>
            <pubDate>Wed, 16 Sep 2020 12:23:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Contravariant Functors Are Weird]]>
            </title>
            <description>
<![CDATA[
Score 49 | Comments 22 (<a href="https://news.ycombinator.com/item?id=24491887">thread link</a>) | @gbrown_
<br/>
September 16, 2020 | https://sanj.ink/posts/2020-06-13-contravariant-functors-are-weird.html | <a href="https://web.archive.org/web/*/https://sanj.ink/posts/2020-06-13-contravariant-functors-are-weird.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
            <p>Just a note about nomenclature before we start; I‚Äôll use ‚Äúfunctor‚Äù to represent the <a href="https://bartoszmilewski.com/2015/01/20/functors/">categorical meaning</a> of the concept:</p>
<blockquote>
<p>A functor is a mapping between categories</p>
</blockquote>
<p>and <code>Functor</code> and <code>Contravariant</code> to specify the typeclass encodings of functors.</p>
<hr>
<p>Let‚Äôs begin!</p>
<p>Contravariant functors are odd aren‚Äôt they? Covariant functors (which are modelled by the <code>Functor</code> typeclass) are quite straightforward but <strong>contra</strong>variant functors as their name implies seem to be the complete opposite.</p>
<p>Before we get into what a contravariant functor is, it‚Äôs useful to look at the <code>Functor</code> <a href="https://wiki.haskell.org/Typeclassopedia">typeclass</a> which we know and love.</p>
<h2 id="functor">Functor</h2>
<p>A <code>Functor</code> is defined as:</p>
<div><pre><code><span>class</span> <span>Functor</span> f <span>where</span>
<span>  fmap ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> f a <span>-&gt;</span> f b</code></pre></div>
<p>We often understand a <code>Functor</code> to be a ‚Äúcontainer‚Äù or a ‚Äúproducer‚Äù of some type, where the function supplied to <code>fmap</code> is applied to the elements that are ‚Äúcontained‚Äù or ‚Äúproduced‚Äù in some type constructor<a href="#type-constructor-1"><sup>1</sup></a> <code>f</code>.</p>
<p>A simple example would be the list (<code>[]</code>) type, that can represent zero or more values. Given a <code>[a]</code> we can turn it into a <code>[b]</code> when given a function <code>a -&gt; b</code>.</p>
<div><pre><code><span>data</span> [] a <span>=</span> [] <span>|</span> a <span>:</span> [a]  <span>-- an approximation of the [] data type</span>

<span>instance</span> <span>Functor</span> [] <span>where</span>
  fmap _ [] <span>=</span> []
  fmap f (x<span>:</span>xs) <span>=</span> f x <span>:</span> fmap f xs</code></pre></div>
<p>In the example below we convert a <code>[Int]</code> into a <code>[String]</code> given a function <code>Int -&gt; String</code>:</p>
<div><pre><code><span>import </span><span>Data.Semigroup</span> ((&lt;&gt;))

<span>myInts ::</span> [<span>Int</span>]
myInts <span>=</span> [<span>1</span> <span>..</span> <span>5</span>]

<span>emptyInts ::</span> [<span>Int</span>]
emptyInts <span>=</span> []

<span>intToString ::</span> <span>Int</span> <span>-&gt;</span> <span>String</span>
intToString n <span>=</span> (show n) <span>&lt;&gt;</span> <span>"!"</span>

<span>myStrings ::</span> [<span>String</span>]
myStrings <span>=</span> fmap intToString myInts <span>-- ["1!","2!","3!","4!","5!"]</span>

<span>myEmptyString ::</span> []
myEmptyString <span>=</span> fmap intToString emptyInts  <span>-- []</span></code></pre></div>
<p>Another example would the <code>Maybe</code> data type, that represents a value that may or may not exist.</p>
<div><pre><code><span>data</span> <span>Maybe</span> a <span>=</span> <span>Nothing</span> <span>|</span> <span>Just</span> a

<span>instance</span> <span>Functor</span> <span>Maybe</span> <span>where</span>
  fmap _ <span>Nothing</span> <span>=</span> <span>Nothing</span>
  fmap f (<span>Just</span> x) <span>=</span> <span>Just</span> (f x)</code></pre></div>
<p>In the example below we convert a <code>Maybe Int</code> into a <code>Maybe String</code> given a function <code>Int -&gt; String</code>:</p>
<div><pre><code><span>import </span><span>Data.Semigroup</span> ((&lt;&gt;))

<span>maybeInt ::</span> <span>Maybe</span> <span>Int</span>
maybeInt <span>=</span> <span>Just</span> <span>10</span>

<span>notInt ::</span> <span>Maybe</span> <span>Int</span>
notInt <span>=</span> <span>Nothing</span>

<span>intToString ::</span> <span>Int</span> <span>-&gt;</span> <span>String</span>
intToString n <span>=</span> (show n) <span>&lt;&gt;</span> <span>"!"</span>

<span>maybeString ::</span> <span>Maybe</span> <span>String</span>
maybeString <span>=</span> fmap intToString maybeInt <span>-- Just "10!"</span>

<span>notString ::</span> <span>Maybe</span> <span>String</span>
notString <span>=</span> fmap intToString notInt <span>-- Nothing</span></code></pre></div>
<p>The <code>Functor</code> typeclass has laws, that ensure <code>Functor</code> instances behave in a predictable way.</p>
<h3 id="laws">Laws</h3>
<h4 id="identity">Identity</h4>

<p>Essentially if you do nothing to the value of a <code>Functor</code>, you get the same <code>Functor</code> you started with.</p>
<h4 id="composition">Composition</h4>
<div><pre><code>fmap (f <span>.</span> g) <span>==</span> fmap f <span>.</span> fmap g</code></pre></div>
<p>If you convert the result of a Functor by <code>fmap</code>ing with a function <code>g</code> and then <code>fmap</code>ing that result with a subsequent function <code>f</code>, it‚Äôs the same as composing functions <code>g</code> and <code>f</code> (<code>f . g</code>) and then <code>fmap</code>ing once.</p>
<div>
<p><img src="https://sanj.ink/images/contravariant/functor-laws-ct.png" alt="Functor Laws"></p><p>Functor Laws</p>
</div>
<h3 id="the-wrong-type-of-fmap">The Wrong Type of fmap</h3>
<p>Now let‚Äôs look at something a little different. Let‚Äôs create a data type to wrap a predicate of some sort. A predicate is something that will evaluate to a <code>Bool</code>:</p>
<div><pre><code><span>newtype</span> <span>Predicate</span> a <span>=</span> <span>Predicate</span> {<span> getPredicate ::</span> a <span>-&gt;</span> <span>Bool</span> }</code></pre></div>
<p>An example of a Predicate is <code>greaterThanTen</code>:</p>
<div><pre><code><span>greaterThanTen ::</span> <span>Predicate</span> <span>Int</span>
greaterThanTen <span>=</span> <span>Predicate</span> (\n <span>-&gt;</span> n <span>&gt;</span> <span>10</span>)</code></pre></div>
<p>that tests whether a number is greater than ten.</p>
<p>We can run with it <code>getPredicate</code> and an <code>Int</code>:</p>
<div><pre><code>getPredicate greateThanTen <span>5</span>  <span>-- False</span>
getPredicate greateThanTen <span>11</span> <span>-- True</span></code></pre></div>
<p>It could be useful to define a <code>Functor</code> instance for Predicate - say if we have a <code>Predicate Int</code> and we want to convert it into a <code>Predicate String</code> when we have a <code>Int -&gt; String</code> function. Let‚Äôs try and implement that:</p>
<div><pre><code><span>instance</span> <span>Functor</span> <span>Predicate</span> <span>where</span>
  <span>-- fmap (a -&gt; b) -&gt; Predicate a -&gt; Predicate b</span>
  fmap f (<span>Predicate</span> p) <span>=</span> <span>Predicate</span> (\b <span>-&gt;</span> undefined)
  fmap f (<span>Predicate</span> (a <span>-&gt;</span> <span>Bool</span>)) <span>=</span> <span>Predicate</span> (\b <span>-&gt;</span> undefined)  <span>-- expanding p</span>
  fmap (a <span>-&gt;</span> b) (<span>Predicate</span> (a <span>-&gt;</span> <span>Bool</span>)) <span>=</span> <span>Predicate</span> (\b <span>-&gt;</span> undefined) <span>-- expanding f</span></code></pre></div>
<p>Now we‚Äôve run into a small problem:</p>
<blockquote>
<p>How do we compose (a -&gt; Bool) and (a -&gt; b) to give us a (b -&gt; Bool) ?</p>
</blockquote>
<p>We are given a <code>b</code> but we don‚Äôt have access to any functions that actually use a <code>b</code>.</p>
<p>The problem is that we can‚Äôt. It‚Äôs because of something called ‚Äúpolarity‚Äù of the type variable <code>a</code>. No <code>Functor</code> instance for you <code>Predicate</code>.</p>

<h2 id="polarity">Polarity</h2>
<p>Polarity is a way of representing <a href="https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)">variance</a> using the position of type variables. Let‚Äôs take a simple function <code>a -&gt; b</code> as an example.</p>
<div>
<p><img src="https://sanj.ink/images/contravariant/function-polarity.png" alt="Function Polarity"></p><p>Function Polarity</p>
</div>
<p>If a type variable is in <strong>input</strong> position like <code>a</code> it is given a <strong>negative</strong> polarity. If it is in an <strong>output</strong> position like <code>b</code> then it is given a <strong>positive</strong> polarity.</p>
<p>These polarities map directly to variant types.</p>
<table>
<thead>
<tr>
<th>Polarity</th>
<th>Variance</th>
</tr>
</thead>
<tbody>
<tr>
<td>Positive</td>
<td>Covariant</td>
</tr>
<tr>
<td>Negative</td>
<td>Contravariant</td>
</tr>
<tr>
<td>Both</td>
<td>Invariant</td>
</tr>
</tbody>
</table>
<p>What this means is that <code>Functor</code>s (which are actually covariant functors) require a type constructor in a covariant position in order for you to define a <code>Functor</code> instance for that type.</p>
<p>Let‚Äôs look at a type that we know has a <code>Functor</code> instance like <code>Maybe</code>:</p>
<div>
<p><img src="https://sanj.ink/images/contravariant/maybe-polarity.png" alt="Polarity of the Maybe data type"></p><p>Polarity of the Maybe data type</p>
</div>
<p>We can see that the type variable <code>a</code> occurs in a covariant (or output) position within the definition of the <code>Just</code> constructor.</p>
<p>Now let‚Äôs look at the definition of <code>Predicate</code> data type:</p>
<div>
<p><img src="https://sanj.ink/images/contravariant/predicate-polarity.png" alt="Polarity of the Predicate data type"></p><p>Polarity of the Predicate data type</p>
</div>
<p>We can see that the type variable <code>a</code> occurs in a contravariant (or input) position. This indicates that we can‚Äôt create a (covariant) <code>Functor</code> instance for this data type.</p>
<p>But we want to map things! What do we do?</p>
<h2 id="contravariant">Contravariant</h2>
<p>Welcome the <code>Contravariant</code> typeclass to the stage! It‚Äôs defined as:</p>
<div><pre><code><span>class</span> <span>Contravariant</span> f <span>where</span>
<span>  contramap ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> f b <span>-&gt;</span> f a</code></pre></div>
<p>Snazzy! <code>Contravariant</code> also takes some kind of type constructor <code>f</code> just like <code>Functor</code> but it has this weirdly named <code>contramap</code> function instead of <code>fmap</code>.</p>
<div><pre><code><span>     fmap ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> f a <span>-&gt;</span> f b <span>-- Functor</span>
<span>contramap ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> f b <span>-&gt;</span> f a <span>-- Contravariant</span>
                         <span>^^^</span></code></pre></div>
<p>If we read <code>fmap</code> as:</p>
<blockquote>
<p>If you have an <code>a</code> in some context and a function that takes that <code>a</code> and converts it to a <code>b</code>, I can give you a context with a <code>b</code> in it.</p>
</blockquote>
<p>we can then read <code>contramap</code> as:</p>
<blockquote>
<p>If you have a context that needs an <code>a</code> and a function that can convert <code>b</code>s to <code>a</code>s, I can give you a context that needs <code>b</code>s.</p>
</blockquote>
<p>But that probably doesn‚Äôt make much sense. So let‚Äôs try and look at this in terms of our non-<code>Functor</code>: <code>Predicate</code>. <code>Predicate</code> has a <strong>need</strong> for an <code>a</code>, which it then uses to tell if something about that <code>a</code> is True or False.</p>
<p>Let‚Äôs try and write a <code>Contravariant</code> instance for <code>Predicate</code> given that we know that the type <code>a</code> in <code>Predicate</code> occurs in an input position.</p>
<div><pre><code><span>instance</span> <span>Contravariant</span> <span>Predicate</span> <span>where</span>
  <span>-- contramp (a -&gt; b) -&gt; f b -&gt; f a</span>
  contramap (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Predicate</span> b <span>-&gt;</span> <span>Predicate</span> a <span>-- substituting for `f` for Predicate</span>
  contramap aToB (<span>Predicate</span> bToBool) <span>=</span> <span>Predicate</span> (\a <span>-&gt;</span> undefined)</code></pre></div>
<p>Given that we have a function <code>a -&gt; b</code> and essentially a function of type <code>b -&gt; Bool</code> (wrapped inside a <code>Predicate b</code>), we can if given an <code>a</code>, convert it to a <code>b</code> using <code>aToB</code> and then give that <code>b</code> to <code>bToBool</code> to give us a <code>Bool</code>.</p>
<p>Here‚Äôs a slightly long-form implementation of the <code>Contravariant</code> instance for <code>Predicate</code>:</p>
<div><pre><code><span>instance</span> <span>Contravariant</span> <span>Predicate</span> <span>where</span>
<span>  contramap ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Predicate</span> b <span>-&gt;</span> <span>Predicate</span> a
  contramap aToB (<span>Predicate</span> bToBool) <span>=</span>
    <span>Predicate</span> <span>$</span> \a <span>-&gt;</span>
      <span>let</span> b    <span>=</span> aToB a
          bool <span>=</span> bToBool b
      <span>in</span> bool</code></pre></div>
<div>
<p><img src="https://sanj.ink/images/contravariant/contramap-predicate.png" alt="contramap on Predicate"></p><p>contramap on Predicate</p>
</div>
<p>or more succinctly:</p>
<div><pre><code><span>instance</span> <span>Contravariant</span> <span>Predicate</span> <span>where</span>
<span>  contramap ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Predicate</span> b <span>-&gt;</span> <span>Predicate</span> a
  contramap f (<span>Predicate</span> b) <span>=</span> <span>Predicate</span> <span>$</span> b <span>.</span> f</code></pre></div>
<p>We can see from the definition of <code>Predicate a</code> that all we are doing is running the supplied function <code>f</code> <strong>before</strong> the function within <code>Predicate b</code>. The reason we do that is to adapt a new input type to match an existing input type to gain some functionality.</p>
<p>If we revisit the (covariant) <code>Functor</code> instance for <code>Maybe</code>:</p>
<div><pre><code><span>instance</span> <span>Functor</span> <span>Maybe</span> <span>where</span>
  fmap _ <span>Nothing</span> <span>=</span> <span>Nothing</span>
  fmap aToB (<span>Just</span> a) <span>=</span> <span>Just</span> (aToB a)</code></pre></div>
<p>we can see that the function <code>aToB</code> is run <strong>after</strong> we have a value of <code>a</code>. We do that to convert a result of some type to another type.</p>
<div>
<p><img src="https://sanj.ink/images/contravariant/fmap-maybe.png" alt="fmap on Maybe"></p><p>fmap on Maybe</p>
</div>
<p>These are the essential differences between covariant and contravariant functors:</p>
<table>
<thead>
<tr>
<th>Typeclass</th>
<th>Function runs</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Functor</td>
<td>after</td>
<td>Convert results</td>
</tr>
<tr>
<td>Contravariant</td>
<td>before</td>
<td>Adapt inputs</td>
</tr>
</tbody>
</table>
<p>Now that we know the essential difference between <code>Functor</code> and <code>Contravariant</code>, let‚Äôs look at how we can use <code>contramap</code> with our <code>Predicate</code> class.</p>
<p>Given that we already have a <code>Predicate</code> that determines whether a number is greater than ten:</p>
<div><pre><code><span>numGreaterThanTen ::</span> <span>Predicate</span> <span>Int</span>
numGreaterThanTen <span>=</span> <span>Predicate</span> (\n <span>-&gt;</span> n <span>&gt;</span> <span>10</span>)</code></pre></div>
<p>say we want to write another <code>Predicate</code> that verifies that the length of String is greater than ten characters.</p>
<div><pre><code><span>strLengthGreaterThanTen ::</span> <span>Predicate</span> <span>String</span>
strLengthGreaterThanTen <span>=</span> <span>Predicate</span> (\s <span>-&gt;</span> (length s) <span>&gt;</span> <span>10</span>)</code></pre></div>
<p>Sure, that‚Äôs pretty contrived but bear with me. Let‚Äôs also say we have a <code>Person</code> data type and we want to know if a person‚Äôs name is over ten characters long - if so we consider that to be a long name.</p>
<div><pre><code><span>data</span> <span>Person</span> <span>=</span> <span>Person</span> {<span> personName ::</span> <span>String</span>,<span> personAge ::</span> <span>Int</span> }

<span>personLongName ::</span> <span>Predicate</span> <span>Person</span>
personLongName <span>=</span> <span>Predicate</span> (\p <span>-&gt;</span> (length <span>.</span> personName <span>$</span> p) <span>&gt;</span> <span>10</span>)</code></pre></div>
<p>And we can run these <code>Predicate</code>s as:</p>
<div><pre><code>getPredicate numGreaterThanTen <span>5</span> <span>-- False</span>
getPredicate numGreaterThanTen <span>20</span> <span>-- True</span>

getPredicate strLengthGreaterThanTen <span>"hello"</span>       <span>-- False</span>
getPredicate strLengthGreaterThanTen <span>"hello world"</span> <span>-- True</span>

getPredicate personLongName <span>$</span> <span>Person</span> <span>"John"</span> <span>30</span>        <span>-- False</span>
getPredicate personLongName <span>$</span> <span>Person</span> <span>"Bartholomew"</span> <span>30</span> <span>-- True</span></code></pre></div>
<p>And this is fine, but there‚Äôs some duplication across each of the <code>Predicate</code>s - namely the part where we compare a number to ten:</p>
<div><pre><code>(\n <span>-&gt;</span> n <span>&gt;</span> <span>10</span>)  <span>-- Int</span>
(\s <span>-&gt;</span> (length s) <span>&gt;</span> <span>10</span>) <span>-- String</span>
(\p <span>-&gt;</span> (length <span>.</span> personName <span>$</span> p) <span>&gt;</span> <span>10</span>) <span>-- Person</span></code></pre></div>
<p>It would be nice if we didn‚Äôt have to repeat ourselves.</p>
<p>If we look at the differences between <code>numGreaterThanTen</code>, <code>strLengthGreaterThanTen</code> and <code>personLongName</code> we can see that the only difference is that one works on an <code>Int</code> and the others work on <code>String</code> and <code>Person</code> respectively. <code>strLengthGreaterThanTen</code> and <code>personLongName</code> each convert their input types to an <code>Int</code> and then do the same comparison:</p>
<div><pre><code><span>Predicate</span> (\(<span>n ::</span> <span>Int</span>) <span>-&gt;</span>
  <span>let</span> num <span>=</span> id n
  <span>in</span> num <span>&gt;</span> <span>10</span> <span>-- (1)</span>
) <span>-- numGreaterThanTen</span>


<span>Predicate</span> (\(<span>s ::</span>‚Ä¶</code></pre></div></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://sanj.ink/posts/2020-06-13-contravariant-functors-are-weird.html">https://sanj.ink/posts/2020-06-13-contravariant-functors-are-weird.html</a></em></p>]]>
            </description>
            <link>https://sanj.ink/posts/2020-06-13-contravariant-functors-are-weird.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24491887</guid>
            <pubDate>Wed, 16 Sep 2020 12:21:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[File Transfer with SSH, Tee, and Base64]]>
            </title>
            <description>
<![CDATA[
Score 45 | Comments 61 (<a href="https://news.ycombinator.com/item?id=24491605">thread link</a>) | @susam
<br/>
September 16, 2020 | https://susam.in/blog/file-transfer-with-ssh-tee-and-base64/ | <a href="https://web.archive.org/web/*/https://susam.in/blog/file-transfer-with-ssh-tee-and-base64/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p>By <b>Susam Pal</b> on 19 Nov 2019</p>
<p>
Computer servers deployed in a secure environment may allow SSH sessions
but forbid SCP, SFTP, and execution of remote commands without a login
shell. Such restricted access is typically enforced with SSH gateways
and firewalls. An SSH gateway provides controlled access to the remote
system. A firewall can ensure that only an SSH gateway can connect to
the remote system. Thus, users can be forced to connect to the remote
system only via the SSH gateway which can now control what is allowed
and what isn't.
</p>

<p>
Even if SCP, SFTP, and remote command execution without a login shell
are forbidden, as long as we get a login shell on our terminal and we
can print data on the terminal, we are already able to transfer data
from the remote system to our local system. The data is in the terminal.
It is now only a matter of figuring out how to copy that data to a file.
Assuming that both the remote and local systems are Unix-like, the
following steps show one way to achieve this:
</p>

<ol>
  <li>
    <p>
      Connect to the remote system with <code>ssh</code> and pipe the
      output to <code>tee</code> to write the entire session to a text
      file on the local system.
    </p>
    <pre><code>ssh <em>user</em>@<em>host</em> | tee ssh.txt</code></pre>
    <p>
      This type of pipeline works as intended even while connecting to a
      remote system via a jumphost or an SSH gateway.
    </p>
  </li>

  <li>
    <p>
      In the remote system, create a 10 MB file to serve as an example
      payload to be transferred.
    </p>
    <pre><code>head -c 10485760 /dev/urandom &gt; /tmp/payload</code></pre>
    <p>
       You probably already have a meaningful payload that you want to
       copy, so in that case, you would skip this step.
    </p>
  </li>

  <li>
    <p>
      Compute checksum on the file. This will be used later to verify
      that the entire file is transferred correctly.
    </p>
    <pre><code>sha1sum /tmp/payload</code></pre>
  </li>

  <li>
    <p>
      Print Base64 representation of the file.
    </p>
    <pre><code>base64 /tmp/payload</code></pre>
    <p>
      Depending on the Internet bandwidth, this can take a few seconds
      to a few minutes to complete.
    </p>
  </li>

  <li>
    <p>
      End the SSH session.
    </p>
    <pre><code>exit</code></pre>
  </li>

  <li>
    <p>
      On the local system, extract the Base64 encoded payload and decode
      it. Assuming the shell prompt on the remote system ends with the
      dollar sign (i.e., <code>$</code>), the following command does
      this.
    </p>
    <pre><code>sed '1,/$ base64/d;/$ exit/,$d' ssh.txt | base64 --decode &gt; payload</code></pre>
  </li>

  <li>
    <p>
      Extract the checksum computed on the original file.
    </p>
    <pre><code>grep -A 1 sha1sum ssh.txt</code></pre>
  </li>

  <li>
    <p>
      Compute checksum on the decoded payload.
    </p>
    <pre><code>sha1sum payload</code></pre>
    <p>
      Ensure that the checksum in this step matches the checksum in the
      previous step.
    </p>
  </li>
</ol>

<p>
  The steps above assume the use of the <code>sha1sum</code> command to
  compute checksum. If this command is unavailable, use
  <code>sha1</code>, <code>shasum</code>, or something else that serves
  this purpose well. If you are worried about collision attacks, you
  might want <code>sha256sum</code>, <code>sha256</code>, <code>shasum
  -a 256</code>, etc. instead.
</p>


</div></div>]]>
            </description>
            <link>https://susam.in/blog/file-transfer-with-ssh-tee-and-base64/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24491605</guid>
            <pubDate>Wed, 16 Sep 2020 11:36:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A book every creator should read (summarized for those with no time)]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24491567">thread link</a>) | @elazzabi_
<br/>
September 16, 2020 | https://elazzabi.com/2020/09/16/show-your-work-by-austin-kleon-extended-book-resume/ | <a href="https://web.archive.org/web/*/https://elazzabi.com/2020/09/16/show-your-work-by-austin-kleon-extended-book-resume/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		
<p><em>A new way of operating.</em></p>



<p>This is one of the books every creator should read. It is full of information for those trying to build an online audience. In this new world where information is abundant, it‚Äôs hard to be spotted. How to get people to notice your work? How can you get your stuff out there? And how you can get an audience?</p>



<p>Austin starts by this quote:</p>



<blockquote><p>Be so good they can‚Äôt ignore you.</p><cite>Steve Martin</cite></blockquote>



<p>And while it‚Äôs true, it‚Äôs not enough to be good. In order to be found, you have to be findable. This book goes into details on how sharing your work with the world can help you build an audience. The same audience that will help you get your word out once you‚Äôre ready.</p>



<p>The book helps you think about your work as a never-ending process and how to share it in a way that attracts people who might be interested in what you do.</p>



<h2>You don‚Äôt have to be a genius</h2>



<p>We see a genius as an individual with superhuman talents, free of the influence of a precedent, and with a direct connection to God. When inspiration comes, it strikes like a lighting bolt and then he spends the rest of his time in his studio turning this idea into a masterpiece.</p>



<p>But that‚Äôs not true.</p>



<p>Creative work is done in a group. All group members are contributing ideas, stealing from each other, copying, etc. It‚Äôs not about how smart you are, but about what you have to contribute, the ideas you share, the quality of connections you make, and the conversations you start. Austin calls this group a <strong>scenius</strong>.</p>



<p>Find your scenius, and be a good contributor.</p>



<hr>



<p>Austin then moves to talk about being an ‚Äúexpert‚Äù. He explains how the world is changing at such a rapid pace that it‚Äôs turning us all to amateurs. So instead of fighting it, embrace being an amateur.</p>



<p>An amateur is someone following something in the spirit of love. Because they have little to lose, amateurs are willing to try anything and share results.</p>



<blockquote><p>In the beginner‚Äôs mind, there are many possibilities. In the expert‚Äôs mind, there are only few.</p></blockquote>



<p>On the spectrum of creative work, the difference of mediocre and good is vast. But mediocrity is still on the spectrum, you can move up in increments. The real gap is between doing nothing and doing something. Amateurs know that contributing something is better than contributing nothing.</p>



<p>The best way to start in the path of sharing you work is to commit to learning in front of others. Find a scenius, pay attention to what others are sharing, and then start taking note. Look for voids you can fill with your own efforts, no matter how bad they are at first.</p>



<hr>



<p>On doing what we love, Austin explains how we‚Äôve always been told to find our voice, but we never really know what this means. You can‚Äôt find your voice if you don‚Äôt use it. So talk about the things you love. Your voice will follow.</p>



<p>When talking about your work, make sure you do it online. In this day and age, if your work isn‚Äôt online, it doesn‚Äôt exist. We all have the opportunity to use our voices, to have our say, but so many of us are wasting it. If you want people to know about what you do and the things you care about, you have to share them.</p>



<h2>Think process, not product</h2>



<p>In a pre-digital world, the only way an artist could connect with an audience was through a gallery show or art magazine. But today, with social media, an artist can share whatever she wants, whenever she wants, at almost no cost. By sharing her day-to-day process, she can form a unique bond with her audience. <strong>Take people behind the scenes</strong>.</p>



<blockquote><p>People really want to see how sausages get made</p></blockquote>



<p>Become a documentarian of what you do. Let your audience see the person behind the products.</p>



<p>A lot of us go about our work and feel like we have nothing to show for it at the end of the day. But whatever the nature of your work, there is an art to what you do, and <strong>there are people who would be interested in that art</strong>. If only you presented it to them in the right way!</p>



<p>How can you show your work even when you have nothing to show? You need to make stuff (also see my post on <a href="https://elazzabi.com/2020/05/12/how-to-create-a-public-portfolio-when-what-you-do-is-private-or-proprietary/">how to create a public portfolio when your work is private</a>). No one will give a damn about your r√©sum√©, they want to see what you have made with your little fingers. Start a journal and write your thoughts, or speak in an audio recorder. Take a lot of photographs of your work at different stages. Shoot videos. etc. This is not about making art, it‚Äôs about simply keeping track of what‚Äôs going on around you. When you are ready to share, you‚Äôll have a surplus of material to choose from.</p>



<h2>Share something small every day</h2>



<p>Every success needs decades worth of hard work and perseverance. But thankfully, you don‚Äôt need that time all in one big chunk. And speaking about chunks, forget big chunks. Forget years, months, weeks‚Ä¶ Focus on something small. Focus on days.</p>



<p>Once a day, after you finish your work, go back to your documentation and find one little piece you can share. If you‚Äôre just starting, share your influencers and what‚Äôs inspiring you. If you‚Äôre in the middle, share your process or methods of work. If you completed the project, share the final result. If you have multiple projects in the wild, report how they are doing or share stories about how people are interacting with your work.</p>



<p>The form you use for sharing doesn‚Äôt matter. Blog, tweet, video, it doesn‚Äôt matter. There‚Äôs no one-size-fits-all plan for everybody. Pick what works for you, and stick to it.</p>



<p>Produce and share a lot. <em>Theodore Sturgeon</em>, a fiction author, states that 90% of what we produce is crap, the other 10% is good work. But the problem is we don‚Äôt know which is which until we share it with others. So make sure to share a lot, but keep in mind anything you share will be there forever. So don‚Äôt share something you don‚Äôt want your boss or mom to see.</p>



<hr>



<p>You daily updates will construct what Austin calls the <strong>Flow</strong>. But you need another part to achieve results, and it‚Äôs called the <strong>Stock</strong>. If the <em>flow</em> is the daily stream of updates, the <em>stock</em> is the content that will be still interesting in months and years from publication.</p>



<p>Stock is what people discover via search. It‚Äôs what spreads slowly but surely, building fans over time. And the magic formula is to <strong>maintain your flow, while working on your stock in the background</strong>.</p>



<p>Your stock is made by collecting, organizing, and expanding upon your flow. Social media is a public notebook where we share our ideas and invite others to share their voice with us. But the thing with notebooks is you need to revisit them in order to make the most out of them.</p>



<p>Social networks are good, but they come and go. If you‚Äôre really interested in sharing your work and expressing yourself, nothing beats owning your own space online, a place that you control. Buy a good domain name, and create your blog.</p>



<p>A blog is the perfect machine to turn flow into stocks. One blog post is nothing on its own. But publish a thousand blog posts over a decade, and it turns into your life‚Äôs work. This sounds technical, but a few Google searches will show you the way.</p>



<h2><strong>Open your cabinet of curiosities.</strong></h2>



<p>If you happened to be wealthy and educated in the 16th-17th century, chances are you had a cabinet of curiosities. A room filled with rare objects that served as a kind of external display. Books, skeletons, jewels, shells‚Ä¶ were all part of the cabinet.</p>



<p>Before we are ready to take the leap of sharing our own work with the world, we can share our tastes in the work of others. Where do you get your inspiration? What do you read? Do you subscribe to anything? What movies do you see?‚Ä¶</p>



<p>When you share this online, always credit people and include a link pointing to the website of the creator.  The number one rule of the Internet is <strong>people are lazy</strong>. If you don‚Äôt include a link, no one will bother searching.</p>



<h2>Tell good stories</h2>



<blockquote><p>You might think that the pleasure you get from a painting depends on its color, its shape, and its pattern. And if that‚Äôs right, it shouldn‚Äôt matter if it‚Äôs an original or a forgery. But our brains don‚Äôt work like that. When shown an object, a face‚Ä¶ people‚Äôs assessment -how much they like it- is deeply affected by what you tell them about it</p><cite>Paul Bloom ‚Äì Psychology Professor</cite></blockquote>



<p>Words matter. Your work doesn‚Äôt exist in a vacuum. Whether you realize it or not, you‚Äôre already telling a story about your work. Every email you send, tweet, video, comment‚Ä¶ they are all contributing to the narrative you‚Äôre constantly constructing.  If you want to be more effective when sharing yourself and your work, you need to become a better storyteller. You need to know what a good story is and how to tell one.</p>



<p>To tell a story, you need structure. But sadly, our life is messy. A good pitch has 3 acts: The first act is the past, where you‚Äôve been, what you want, how you came to want it‚Ä¶ The second act is the present, where you are now, how you‚Äôve worked hard and used up most of your resources. The third act is the future, where you‚Äôre going, and how exactly is the person you‚Äôre pitching can help you get there.</p>



<p>Whether you‚Äôre telling a finished or unfinished story, always keep your audience in mind. Speak to them directly in plain language. Be brief. Learn to speak. Lear to write. Use spell-check‚Ä¶</p>



<h2>Teach what you know</h2>



<p>Think about what you can share from your process that would benefit your audience. What are your techniques? Are you skilled at using certain tools/materials? The minute you learn something, turn around and teach it to others. Share your reading list. Point to helpful reference materials. Create some tutorials and post them online. Use pictures, words, and videos. Make people better at something they want to be better at.</p>



<h2>Don‚Äôt turn into human spam</h2>



<p>There is a category of humans called human spam. They‚Äôre everywhere, and they exist in every profession. They don‚Äôt want to pay their dues, they want their piece right away. They don‚Äôt listen to your ideas, they tell you theirs. You should ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://elazzabi.com/2020/09/16/show-your-work-by-austin-kleon-extended-book-resume/">https://elazzabi.com/2020/09/16/show-your-work-by-austin-kleon-extended-book-resume/</a></em></p>]]>
            </description>
            <link>https://elazzabi.com/2020/09/16/show-your-work-by-austin-kleon-extended-book-resume/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24491567</guid>
            <pubDate>Wed, 16 Sep 2020 11:29:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Elixir in Production: Plausible Analytics]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24491317">thread link</a>) | @NaeosPsy
<br/>
September 16, 2020 | https://serokell.io/blog/elixir-in-production-plausible-analytics | <a href="https://web.archive.org/web/*/https://serokell.io/blog/elixir-in-production-plausible-analytics">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><em>Searching for an open-source Google Analytics alternative?</em></p><p><em>Our guest has your back. Uku T√§ht is the founder of <a href="https://plausible.io/">Plausible Analytics</a>, an open-source web analytics project built with Elixir. For the last couple of months, his project has attracted a lot of attention through <a href="https://plausible.io/blog/remove-google-analytics">informative blog posts</a> and very positive user reviews.</em></p><p><em>In this interview, we talk about his use of Elixir in production: the benefits, the downsides, the specifics, and why Elixir is so good for projects like Plausible Analytics.</em></p><h2 id="interview-with-uku-t%C3%A4ht">Interview with Uku T√§ht</h2><p><strong>Could you tell us a little about your company and your role there?</strong></p><p>Plausible Analytics is an open-source project dedicated to making web analytics more privacy-friendly. Our mission is to reduce corporate surveillance by providing an alternative web analytics tool that doesn‚Äôt have any links to AdTech.</p><p>I started building Plausible almost two years ago as a side project. I‚Äôve been working on it full-time since the beginning of this year and I‚Äôve also partnered up with Marko who handles the marketing and communication side of things.</p><p><img src="https://serokell.io/files/uj/ujixp3oy.2_(22)_(1).jpg" alt="ujixp3oy.2_(22)_(1).jpg"></p><hr><center><i>Uku T√§ht, the founder of Plausible Analytics.</i></center><p><strong>What is the key feature or set of features that make using Plausible Analytics a feasible replacement over Google Analytics?</strong></p><p>Google Analytics is overkill for most website owners. Plausible cuts through the noise by presenting all the important website traffic insights and metrics on one single page. You don‚Äôt need training or experience in web analytics to get started.</p><p>Keeping the script lightweight is also a priority. Our script is more than 17 times smaller than the Google Analytics script and more than 45 times smaller than the recommended Google Analytics integration using the Google Tag Manager.</p><p>But the biggest reason to choose Plausible is the fact that we‚Äôre committed to building open source software. The code behind our service is freely available for anyone. By using Plausible you help build software that everyone can benefit from, not just the corporations.</p><p><strong>How did Elixir as the language of choice work for you when implementing these features?</strong></p><p>I think Elixir is perfect for our use-case. It‚Äôs a very productive language once you learn it and it can also handle tons of traffic. Last month we processed 60 million pageviews with absolutely no issues.</p><p>Elixir really shines when you have stateful requirements for the app server. For example, we keep all the active sessions in memory so we don‚Äôt have to look a session up from the database on every event. It was a joy to build this part of the app using the GenServer primitives.</p><p><strong>How much did the fact that your product is not only self-hosted but also a SaaS inform your decision to go with Elixir? Did you choose it to scale a SaaS?</strong></p><p>I do believe that using Elixir allows us to make self-hosting a bit easier. In other languages, it‚Äôs common to use tools like Redis and external message queues but in Elixir we can often avoid these extra tools and keep the infrastructure requirements simple.</p><p>Plausible is currently designed to run on just one node. Once we start building out support for multi-node deployments, things will get really interesting. I feel like Elixir and the BEAM are designed perfectly for our use-case where we need multiple nodes to share state about visitors sessions.</p><p>Hopefully, we can evolve the architecture without needing extra infrastructure bits and pieces. The goal is to keep the requirements as simple as possible so everyone can run the code on their own server. By relying on BEAM fundamentals, we can probably avoid in-memoy stores, external message queues, and cluster managers altogether, making Plausible easy to self-host.</p><p><strong>Could you tell us more about your deployment: where do you host, how do you deploy, do you use the hot code reload functionality?</strong></p><p>We <a href="https://plausible.io/blog/made-in-eu">recently moved</a> from Heroku to using Digital Ocean. I wanted to eat our own dog food when it comes to the Docker infrastructure we built for self-hosting. So now we have a Digital Ocean droplet pre-configured with Docker and we just pull new images from our <a href="https://hub.docker.com/r/plausible/analytics">DockerHub</a>.</p><p>Since we have a single node deployment, we do have around 30 seconds of downtime on each deploy and we don‚Äôt have auto-scaling support. We will deal with these issues as we scale, I just wanted to be upfront about the downsides of how we‚Äôre running it.</p><p>We don‚Äôt use hot code reloading since it doesn‚Äôt play well with the Docker flow.</p><p><strong>What was the biggest challenge while developing Plausible Analytics with Elixir?</strong></p><p>We use a database called Clickhouse for storing our stats. It‚Äôs a fairly new and cutting-edge database and it doesn‚Äôt have a robust integration with Elixir yet. We use a low-level connection library which gives us random errors sometimes.</p><p>I‚Äôm thinking about taking the time to write a proper Ecto adapter for Clickhouse so we can run migrations and have better error handling. It‚Äôs easy to complain about the lack of libraries in the Elixir ecosystem but I‚Äôd like to do my part in helping the ecosystem thrive.</p><p><strong>Are you satisfied with the result?</strong></p><p>Definitely. If I could go back and do it all over, I would choose the same stack again. Elixir+Phoenix is really fun to work with and it performs even better than I expected.</p><p><strong>Any key takeaways that you would like to share with our audience?</strong></p><p>Elixir is a wonderful language and its ecosystem is really coming along. I would encourage everyone to give it a try and contribute back to the ever-growing list of libraries and frameworks to make it even more powerful.</p><hr><p>I‚Äôd like to thank Uku for the interview! If you want to see more examples of Elixir used in production, check out <a href="https://serokell.io/blog/elixir-in-production-venu">our interview</a> with one of the Venu co-founders or read our post about <a href="https://serokell.io/blog/elixir-companies">companies that use Elixir</a>.</p><p>Additionally, if you have your own Elixir in production story to tell (both good and bad), we definitely want to hear it! You are welcome to write to us: <a href="mailto:hi@serokell.io">hi@serokell.io</a>.</p></div></div>]]>
            </description>
            <link>https://serokell.io/blog/elixir-in-production-plausible-analytics</link>
            <guid isPermaLink="false">hacker-news-small-sites-24491317</guid>
            <pubDate>Wed, 16 Sep 2020 10:40:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Corto decompresses meshes significantly faster than DRACO]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24491260">thread link</a>) | @shawticus
<br/>
September 16, 2020 | http://vcg.isti.cnr.it/corto | <a href="https://web.archive.org/web/*/http://vcg.isti.cnr.it/corto">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>


<p><b>Corto</b> is a library for compression and decompression meshes and point clouds (C++ and Javascript).
</p><p>Source code can be found on <a href="https://github.com/cnr-isti-vclab/corto">Github</a></p>

<p>Corto supports point clouds and meshes with per vertex attributes: normals, colors, texture coordinates and custom attributes.</p>


<p>The main focus of this work is on decompression speed, see performances, both for C++ lib and javascript, while still providing good compression rates.</p>

<ul>
<li><a href="#corto">corto</a> is program to compress .ply and .obj models
</li><li><a href="#libcorto">libcorto</a> is a C++ compression/decompression library
</li><li><a href="#corto.js">corto.js</a> a javascript library for .crt decompression
</li><li><a href="#cortoloader">CORTOLoader</a>, a threejs loader.
</li></ul>

<p>This work is based on the compression algorithm developed for the <a href="http://vcg.isti.cnr.it/nexus">Nexus</a> project for creation and visualization of multiresolution models. This approach has many advantages for large models in term of streaming and adaptive rendering.<br>
See <a href="http://vcg.isti.cnr.it/Publications/2015/PD15/">Fast decompression for web-based view-dependent 3D rendering</a>.</p>


<h2><a name="gallery"></a>Gallery</h2>

<div>







<div><p><a href="http://vcg.isti.cnr.it/demo.html?model=buddha.crt">
<img src="http://vcg.isti.cnr.it/img/buddha.jpg" alt="Buddha"></a></p><p>Buddha 0.47MB 0.20MT<br><span>Courtesy of <a href="http://vcg.isti.cnr.it/">VCG</a></span></p>
</div>

<div><p><a href="http://vcg.isti.cnr.it/demo.html?model=tarta.crt">
<img src="http://vcg.isti.cnr.it/img/tarta.jpg" alt="Tarta"></a></p><p>Tarta 5.6MB 5.3MT<br><span>Courtesy of <a href="http://vcg.isti.cnr.it/">VCG</a></span></p>
</div>



</div> <!--row -->

<h2><a name="corto"></a>Corto</h2>

<p>A small executable to convert <em>.ply</em> and <em>.obj</em> into compressed format <em>.crt</em></p>

<pre>Usage:

corto [options] FILE

FILE is the path to a .ply or a .obj 3D model.

	-o &lt;output&gt;: filename of the .crt compressed file.
						if not specified the extension of the input file will be replaced.
	-e &lt;key=value&gt;: add an exif property, or more than one.
	-p : treat the input as a point cloud.
	-v &lt;bits&gt;: vertex bits quantization. If not specified an euristic is used
	-n &lt;bits&gt;: normal bits quantization. Default 10.
	-c &lt;bits&gt;: color bits quantization. Default 6.
	-u &lt;bits&gt;: texture coordinate bits. Default 10.
	-q &lt;step&gt;: quantization step unit (float) instead of bits for vertex coordinates
	-N &lt;prediction&gt;: normal prediction can be:
						delta: use difference from previous normal (fastest)
						 estimated: use difference from compute normals (cheaper)
						border: store difference only for boundary vertices (cheapest)
	-A : compute and add normals to the model.
	-P &lt;file.ply&gt;: decompress and save as .ply for debugging purpouses
</pre>

<p>Material groups for obj (newmtl) and ply with texnumbers are preserved into the crt model, additional properties can be stored in the file using the <em>-e</em> option.</p>

<p><em>-v 12</em> will result in the quantization of the coordinates to 1/4096th of the largest dimension in the bounding box. If not specified the quantization step is set to 1/20th of the average edge.</p>

<p><em>-n 10</em> normals are stored using the octahedron parametrization to a square of 1024x1024 positions, resulting in a better sample distribution than quantization in 3D.</p>


<h2><a name="cortoloader"></a>CORTOLoader</h2>

<p>CORTOLoader.js is similar to THREE.OBJLoader in functionality, and can easily replace it in three.js.</p>

<pre>var loader = new THREE.CORTOLoader({ path: "models/" });  
//materials autocreated, pass otherwise option loadMaterial: false

loader.load("bunny.crt", function(mesh) {
	//needed to render on texture load
	mesh.addEventListener("change", render);

	if(!mesh.geometry.attributes.normal)
		mesh.geometry.computeVertexNormals();

	scene.add(mesh); 
	render();
});
</pre>

<p>CORTOLoader is pretty self-explanatory in how to create a THREE.Mesh:</p>

<pre>var decoder = new CortoDecoder(blob); //where blob is an ArrayBuffer
var model = decoder.decode();

var geometry = new THREE.BufferGeometry();
if(model.nface)
	geometry.setIndex(new THREE.BufferAttribute(model.index, 1));

if(model.groups.length &gt; 0) {
	var start = 0;
	for(var i = 0; i &lt; model.groups.length; i++) {
		var g = model.groups[i];
		geometry.addGroup(start*3, g.end*3, i);
		start = g.end;
	}
}

geometry.addAttribute('position', new THREE.BufferAttribute(model.position, 3));
if(model.color)
	geometry.addAttribute('color', new THREE.BufferAttribute(model.color, 3, true));
if (model.normal)
	geometry.addAttribute('normal', new THREE.BufferAttribute(model.normal, 3, true));
if (model.uv)
	geometry.addAttribute('uv', new THREE.BufferAttribute(model.uv, 2));

var mesh = new THREE.Mesh(geometry);
</pre>



<h2><a name="corto.js"></a>Corto.js</h2>

<p>CortoDecoder class decodes a .crt as an arraybuffer and returns an objects with attributes (positions, index, colors etc).</p>

<pre>&lt;script src="js/corto.js"&gt; &lt;/script&gt;

&lt;script&gt;
var request = new XMLHttpRequest();
request.open('GET', 'bunny.crt');
request.responseType = 'arraybuffer';
request.onload = function() {
	var decoder = new CortoDecoder(this.response);
	var model = decoder.decode();
	console.log(model.nvert, model.nface, model.groups);
	console.log('Index: ', model.index);
	console.log('Positions: ', model.position);
	console.log('Colors: ', model.color);
	console.log('Nornmals: ', model.normal);
	console.log('Tex coords: ', model.uv);
	//custom attributes can be encoded, see cortolib below for details.
}
request.send();
&lt;/script&gt;
</pre>

<h2><a name="libcorto"></a>Libcorto</h2>

<p>Interface is not entirely stable, no mayor change is expected. See src/main.cpp for an extensive example.</p>

<pre>#include &lt;corto/encoder.h&gt;
#include &lt;corto/decoder.h&gt;

std::vector&lt;float&gt; coords;
std::vector&lt;uint32_t&gt; index;
std::vector&lt;float&gt; uv;
std::vector&lt;float&gt; radius;

//fill data arrays...

crt::Encoder encoder(nvert, nface);

//add attributes to be encoded
encoder.addPositions(coords.data(), index.data(), vertex_quantization_step);
encoder.addUvs(uvs.data(), pow(2, -uv_bits));

//add custom attributes
encoder.addAttribute("radius", (char *)radiuses.data(), crt::VertexAttribute::FLOAT, 1, 1.0f);

const char *compressed_data = encoder.stream.data();
const uint32_t compressed_size = encoder.stream.size();
Decoding

crt::Decoder decoder(size, data);

//allocate memory if needed
coords.resize(decoder.nvert*3);
index.resize(decoder.nface*3);

//tell the decoder where to decompress data
decoder.setPositions(coords.data());

if(decoder.data.count("uv")) {
	out.uvs.resize(decoder.nvert*2);
	decoder.setUvs(out.uvs.data());
}
//actually decode
decoder.decode();
</pre>

<h3><a name="encoder"></a>Encoder</h3>

<pre>Encoder(uint32_t _nvert, uint32_t _nface = 0, Stream::Entropy entropy = Stream::TUNSTALL);
</pre>

<p>The Encoder class assume the input is an indexed mesh, specify the number of vertices and faces (0 for point clouds). For debug or entropy compression test Stream supports lzip and lz4, they can be enabled defining ENTROPY_TESTS in the makefile.</p>

<p>Vertex coordinates, attributes and indices are passed to the encoder (assuming they respect the nvert, nface paramenters: 3*nvert for positions and normals, 4*nvert for colors, 2*nvert for uv, 3*nface for indices)</p>

<h4>Coordinates</h4>

<pre>bool addPositions(const float *buffer, float q = 0.0f, Point3f o = Point3f(0.0f)); //for point clouds
bool addPositions(const float *buffer, const uint32_t *index, float q = 0.0f, Point3f o = Point3f(0.0f));
bool addPositions(const float *buffer, const uint16_t *index, float q = 0.0f, Point3f o = Point3f(0.0f));
</pre>

<p><em>q</em> specify the quantization parameter, while <em>o</em> the origin of the quantization (v[i*3+k] = (buffer[i*3+k] - o[k])/q</p>
<p>If q is not specified the quantization step is estimated as 1/20th of the average edge length (or a function of the volume and number of the points
for point clouds).</p>

<pre>bool addPositionsBits(const float *buffer, int bits);
bool addPositionsBits(const float *buffer, uint32_t *index, int bits);
bool addPositionsBits(const float *buffer, uint16_t *index, int bits);
</pre>

<p>It might be more convenient to specify quantization step in term of the bits needed per coordinate</p>

<h4>Attributes</h4>

<pre>bool addNormals(const float *buffer, int bits, NormalAttr::Prediction no = NormalAttr::ESTIMATED);
bool addNormals(const int16_t *buffer, int bits, NormalAttr::Prediction no = NormalAttr::ESTIMATED);

bool addColors(const unsigned char *buffer, int rbits = 6, int gbits = 7, int bbits = 6, int abits = 5);

bool addUvs(const float *buffer, float q = 0);
</pre>

<p>Normal quantization is expressed in bits, referring to the octahedron parametrization space.</p>
<p>Prediction for normal attribute can be</p>
<ul>
<li>DELTA: difference from previous normal, it's fast but provide less compression
</li><li>ESTIMATED: difference from normal estimated from the vertex coordinates (and wont apply to point clouds)
slower than DELTA, but especially when coordinates are saved with high precision will provide better compression
</li><li>BORDER: will only preserve boundary normals. This is especially useful if the model is split into pieces
(for example in <a href="http://vcg.isti.cnr.it/nexus">Nexus</a> multiresolution viewer.
</li></ul>
<p>Color quantization for red, green, blue, alpha. Internally the color is stored as 
poor man YCbCr color space (where G estimates Y!), might be changed to something better and quantization refer to the internal space</p>

<h4>Generic attributes</h4>

<pre>bool addAttribute(const char *name, const char *buffer, VertexAttribute::Format format, 
	int components, float q, uint32_t strategy = 0);
bool addAttribute(const char *name, char *buffer, VertexAttribute *attr);
</pre>

<h4>Groups</h4>

<pre>void addGroup(int end_triangle);
void addGroup(int end_triangle, std::map<std::string, std::string=""> &amp;props);
</std::string,></pre>

<h4>Result</h4>

<pre>void encode();
</pre>

<p>After the decode call the numnber of vertices and faces might be different: degenerate triangles are removed and duplicated points
in point clouds are also removed</p>

<pre>uint32_t nvert = encoder.nvert;
uint32_t nface = encoder.nface;
</pre>

<p>The <em>.crt</em> bytes are stored in the <em>stream</em> member</p>

<pre>size_t count = encoder.stream.size();
size_t written = fwrite ( encoder.stream.data(), 1, count, file);
</pre>

<p>For details on compression bitrates see <em>main.cpp</em>.</p>





<h3><a name="decoder"></a>Decoder</h3>

<pre>Decoder(int len, const uchar *input);
</pre>

<p>Upon initializatiom, the decoder class will provide info about what is presente in the <em>.crt</em>, default attributes
are <em>position, normal, color, uv</em>.</p>

<pre>uint32_t nvert = encoder.nvert;
uint32_t nface = encoder.nface;

bool hasAttr(const char *name);
</pre>

<p>You are in charge to pass the decoder an allocated memory buffer where to decode attributes and index</p>

<pre>	bool setPositions(float *buffer);
	bool setNormals(float *buffer);
	bool setNormals(int16_t *buffer);
	bool setColors(uchar *buffer);
	bool setUvs(float *buffer);

	void setIndex(uint32_t *buffer);
	void setIndex(uint16_t *buffer);
</pre>

<p>Custom attributes can be requested, either using the default attribute type or a custom class.</p>

<pre>	bool setAttribute(const char *name, char *buffer, ‚Ä¶</pre></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://vcg.isti.cnr.it/corto">http://vcg.isti.cnr.it/corto</a></em></p>]]>
            </description>
            <link>http://vcg.isti.cnr.it/corto</link>
            <guid isPermaLink="false">hacker-news-small-sites-24491260</guid>
            <pubDate>Wed, 16 Sep 2020 10:24:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Signal.NotifyContext: context cancelation with Unix signals coming to Go 1.16]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24491205">thread link</a>) | @henvic
<br/>
September 16, 2020 | https://henvic.dev/posts/signal-notify-context/ | <a href="https://web.archive.org/web/*/https://henvic.dev/posts/signal-notify-context/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
        
        
        
        <p>Posted in <time datetime="2020-09-16 00:00:00 +0000 UTC"></time>Wednesday, 16 September 2020.</p>
        
        <p>From Go 1.16 onwards, you‚Äôll be able to use</p>
<div><div>
<table><tbody><tr><td>
<pre><code><span>1
</span><span>2
</span></code></pre></td>
<td>
<pre><code data-lang="go"><span>ctx</span>, <span>stop</span> <span>:=</span> <span>signal</span>.<span>NotifyContext</span>(<span>context</span>.<span>Background</span>(), <span>os</span>.<span>Interrupt</span>)
<span>defer</span> <span>stop</span>()
</code></pre></td></tr></tbody></table>
</div>
</div><p>to control context cancelation using Unix signals, simplifying handling operating system signals in Go for certain common cases. This is my first contribution to the Go standard library, and I am very excited!</p>
<h2 id="why">Why</h2>
<p>When writing <abbr title="command-line interface">CLI</abbr> code, I often needed to handle cancellation ‚Äì for instance, when a user presses CTRL+C producing an interrupt signal. Another possible use case is to handle graceful termination of HTTP servers using <code>http.*Server.Shutdown(ctx)</code>.</p>
<p>I had to write code using the signal package often and in multiple places. I didn‚Äôt want that, so I wrote the <a href="https://github.com/henvic/ctxsignal">ctxsignal</a> package to solve this common problem two years ago.</p>
<p>However, I kept finding it in other places and noticing people would often not handle proper termination correctly or at all, so I got motivated to submit a proposal and try to improve this situation.</p>
<h2 id="how-to-use">How to use</h2>
<div><div>
<table><tbody><tr><td>
<pre><code><span> 1
</span><span> 2
</span><span> 3
</span><span> 4
</span><span> 5
</span><span> 6
</span><span> 7
</span><span> 8
</span><span> 9
</span><span>10
</span><span>11
</span><span>12
</span><span>13
</span><span>14
</span><span>15
</span><span>16
</span></code></pre></td>
<td>
<pre><code data-lang="go"><span>// This example passes a context with a signal to tell a blocking function that
</span><span>// it should abandon its work after an operating system signal is notified.
</span><span></span><span>func</span> <span>main</span>() {
	<span>// Pass a context with a timeout to tell a blocking function that it
</span><span></span>	<span>// should abandon its work after the timeout elapses.
</span><span></span>	<span>ctx</span>, <span>stop</span> <span>:=</span> <span>signal</span>.<span>NotifyContext</span>(<span>context</span>.<span>Background</span>(), <span>os</span>.<span>Interrupt</span>)
	<span>defer</span> <span>stop</span>()

	<span>select</span> {
	<span>case</span> <span>&lt;-</span><span>time</span>.<span>After</span>(<span>10</span> <span>*</span> <span>time</span>.<span>Second</span>):
		<span>fmt</span>.<span>Println</span>(<span>"missed signal"</span>)
	<span>case</span> <span>&lt;-</span><span>ctx</span>.<span>Done</span>():
		<span>stop</span>()
		<span>fmt</span>.<span>Println</span>(<span>"signal received"</span>)
	}
}
</code></pre></td></tr></tbody></table>
</div>
</div><p>This program will print <code>"missed signal"</code> after 10 seconds or will print <code>"signal received"</code> when the user sends an interruption signal, such as by pressing CTRL+C on a keyboard.</p>
<p>Please note that the second returned value of the <code>signal.NotifyContext</code> function is a function called <code>stop</code> instead of <code>cancel</code>. Once you‚Äôre done handling a system signal, you should call <code>stop</code>. We call it <code>stop</code> instead of <code>cancel</code> because you need to call it to stop capturing any further system signal you registered with <code>NotifyContext</code>.</p>
<blockquote>
<p>The stop function unregisters the signal behavior, which, like signal.Reset, may restore the default behavior for a given signal.</p>
</blockquote>
<h2 id="timeline">Timeline</h2>
<ul>
<li>I submitted a <a href="https://github.com/golang/go/issues/37255">proposal</a> and <a href="https://golang.org/cl/219640">implementation</a> on 17 February (as WithContext in the signal package)</li>
<li>After some discussions, a somewhat modified proposal was accepted on 1 April as a WithCancelSignal in the context package</li>
<li>It was moved back to the proposal stage on 15 April after some concerns were presented about having it in the context package</li>
<li>After more discussions, it was accepted again on 20 May as NotifyContext in the signal package</li>
<li>A couple of days ago, I restarted working on it.</li>
<li>Today it got merged and is available in the tip</li>
<li><a href="https://tip.golang.org/doc/go1.16">Go 1.16</a> is expected to be released in February</li>
</ul>
<h2 id="other-points">Other points</h2>
<ul>
<li>I delayed working on it and missed the Go 1.15 release due to its <a href="https://github.com/golang/go/wiki/Go-Release-Cycle">code freeze window</a></li>
<li>Go uses <a href="https://www.gerritcodereview.com/">Gerrit</a> to track changes and code reviews.</li>
<li>I found Gerrit‚Äôs patchsets better over GitHub‚Äôs pull-requests to keep track of changes without losing context (pun intended).</li>
</ul>
<p>Thanks a lot to everyone who provided ideas, feedback, or code-reviewed my code. In particular, the Go team for the patience in helping me out.</p>

<p>If you click and buy any of these from Amazon after visiting the links above, I might get a commission from their <a href="https://affiliate-program.amazon.com/">Affiliate program</a>.</p>
<blockquote><p lang="en" dir="ltr">From Go 1.16 onwards, you‚Äôll be able to use context to handle operating system signals in Go for certain common cases. <a href="https://t.co/5H7P7QNWZq">https://t.co/5H7P7QNWZq</a><a href="https://twitter.com/hashtag/golang?src=hash&amp;ref_src=twsrc%5Etfw">#golang</a></p>‚Äî Henrique Vicente (@henriquev) <a href="https://twitter.com/henriquev/status/1306063440948137985?ref_src=twsrc%5Etfw">September 16, 2020</a></blockquote>



                
                        
</article></div>]]>
            </description>
            <link>https://henvic.dev/posts/signal-notify-context/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24491205</guid>
            <pubDate>Wed, 16 Sep 2020 10:09:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Challenging LR Parsing]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24491042">thread link</a>) | @todsacerdoti
<br/>
September 16, 2020 | https://rust-analyzer.github.io//blog/2020/09/16/challeging-LR-parsing.html | <a href="https://web.archive.org/web/*/https://rust-analyzer.github.io//blog/2020/09/16/challeging-LR-parsing.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p>Consider this incomplete snippet of Rust code:</p>
<div>
<div>
<pre><code data-lang="rust"><table><tbody><tr><td><pre>1
2
3
4
5
</pre></td><td><pre><span>fn</span> <span>foo</span><span>(</span>

<span>struct</span> <span>S</span> <span>{</span>
   <span>f</span><span>:</span> <span>u32</span>
<span>}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>I want to see an LR parser which produces the following syntax tree
(from <a href="https://rust-analyzer.github.io/manual.html#show-syntax-tree"><strong>Show Syntax Tree</strong></a> rust-analyzer command, with whitespace nodes elided for clarity):</p>
<div>
<div>
<pre><code><table><tbody><tr><td><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td><pre>SOURCE_FILE@0..32
  FN@0..7
    FN_KW@0..2 "fn"
    NAME@3..6
      IDENT@3..6 "foo"
    PARAM_LIST@6..7
      L_PAREN@6..7 "("
  STRUCT@9..31
    STRUCT_KW@9..15 "struct"
    NAME@16..17
      IDENT@16..17 "S"
    RECORD_FIELD_LIST@18..31
      L_CURLY@18..19 "{"
      RECORD_FIELD@23..29
        NAME@23..24
          IDENT@23..24 "f"
        COLON@24..25 ":"
        PATH_TYPE@26..29
          PATH@26..29
            PATH_SEGMENT@26..29
              NAME_REF@26..29
                IDENT@26..29 "u32"
      R_CURLY@30..31 "}"
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>The most error-resilient LR-style parser I know, <a href="https://github.com/tree-sitter/tree-sitter">tree sitter</a>, produces this instead (tree sitter is GLR, this is <strong>not</strong> the style of parsing advocated by the article):</p>
<div>
<div>
<pre><code><table><tbody><tr><td><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td><pre>source_file [0, 0] - [5, 0])
  ERROR [0, 0] - [4, 1])
    identifier [0, 3] - [0, 6])
    struct_pattern [2, 0] - [4, 1])
      type: type_identifier [2, 0] - [2, 6])
      ERROR [2, 7] - [2, 8])
        identifier [2, 7] - [2, 8])
      field_pattern [3, 3] - [3, 9])
        name: field_identifier [3, 3] - [3, 4])
        pattern: identifier [3, 6] - [3, 9])
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>Note two things about the rust-analyzer‚Äôs tree:</p>
<div>
<ul>
<li>
<p>There‚Äôs an (incomplete) ‚Äúfunction‚Äù node for <code>fn foo(</code>.
Unclosed parenthesis doesn‚Äôt preclude the parser from recognizing parameter list.</p>
</li>
<li>
<p>Incomplete function does not prevent struct definition from being recognized.</p>
</li>
</ul>
</div>
<p>These are important for IDE support.</p>
<p>For example, suppose that the cursor is just after <code>(</code>.
If we have rust-analyzer‚Äôs syntax tree, than we can figure out that we are completing a function parameter.
If we are to get fancy we might find the calls to the (not yet fully written) <code>foo</code>, run type inference to figure out the type of the first argument, and than suggest parameter name &amp; type based on that (not currently implemented‚Äâ‚Äî‚Äâthere‚Äôs soooooo much yet to be done in rust-analyzer).
And correctly recognizing <code>struct S</code> is important to not break type-inference in the code which uses <code>S</code>.</p>
<p>There‚Äôs a lot of literature about error recovery for LR parsers, how come academics haven‚Äôt figured this out already?
I have a bold claim to make: error-recovery research in academia is focusing on a problem irrelevant for IDEs.
Specifically, the research is focused on finding ‚Äúminimal cost repair sequence‚Äù:</p>
<div>
<ul>
<li>
<p>a set of edit operations is defined (skip, change or insert token),</p>
</li>
<li>
<p>a ‚Äúcost‚Äù metric is defined to distinguish big and small edits,</p>
</li>
<li>
<p>an algorithm is devised to find the smallest edit which makes the current text parse.</p>
</li>
</ul>
</div>
<p>This is a very academia-friendly problem‚Äâ‚Äî‚Äâthere‚Äôs a precise mathematical formulation, there‚Äôs an obvious brute force solution (try all edits), and there‚Äôs ample space for finding polynomial algorithm.</p>
<p>But IDEs don‚Äôt care about actually guessing &amp; repairing the text!
They just need to see as much of (possibly incomplete) syntax nodes in the existing text as possible.
When rust-analyzer‚Äôs parser produces</p>
<div>
<div>
<pre><code><table><tbody><tr><td><pre>1
2
3
</pre></td><td><pre>  PARAM_LIST@6..7
    L_PAREN@6..7 "("
STRUCT@9..31
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>it doesn‚Äôt think ‚ÄúOh, I need to insert <code>)</code> here to complete the list of parameters‚Äù.
Rather, it sees <code>struct</code> and thinks ‚ÄúOh wow, didn‚Äôt expect that! I guess I‚Äôll just stop parsing parameter list right here‚Äù.</p>
<p>So, here‚Äôs</p>
<div>
<table>
<tbody><tr>
<td>
<i title="Important"></i>
</td>
<td>
<p>First Challenge</p>
Design error <em>resilient</em> (and not just error <em>recovering</em>) LR parsing algorithm.
</td>
</tr>
</tbody></table>
</div>
<p>Note that error resilience is a topic orthogonal to error reporting.
I haven‚Äôt payed much attention to error reporting (in my experience, synchronous reporting of syntax errors in the editor compensates for bad syntax error messages), but it might be the case that MCRS are a good approach to there.</p>
</div></div>]]>
            </description>
            <link>https://rust-analyzer.github.io//blog/2020/09/16/challeging-LR-parsing.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24491042</guid>
            <pubDate>Wed, 16 Sep 2020 09:38:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Form Design]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24490883">thread link</a>) | @mozillas
<br/>
September 16, 2020 | https://gerireid.com/forms.html | <a href="https://web.archive.org/web/*/https://gerireid.com/forms.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        <div>



                <div>

                <div>
                    <h3>Here's my best practice guidelines for form design. </h3>
                    <p>Working on a design system for a bank has taught me a lot about forms. I've watched testing in our labs. I've worked alongside experts from specialist accessibility organisations. I've seen forms tested by disabled people and users of assistive technology. I've also read a lot of research.</p> 
                    <p>From all this learning I've formed my own forms best-practice guidelines. I thought it would be useful start recording it. Here's my work in progress. I do UI/UX so I'm coming at this from a designer's perspective.               
              
    </p><h2 id="principles"> First, some principles</h2>
                    
                    <hr>
					<p>It's important to start with with a set of principles. It's easy to become swayed by design trends and I have to bring myself back to the user.</p><p>I aspire to the <a href="https://inclusivedesignprinciples.org/">Inclusive Design Principles</a>. Designing forms for people experiencing permanent, temporary or situational disabilities improves the experience for everyone. I also look to the <a href="https://www.w3.org/WAI/WCAG21/Understanding/intro#understanding-the-four-principles-of-accessibility">WCAG</a> principles. Your website or app must be: </p>
	<ul>
	<li>perceivable</li>
	<li>operable</li>
	<li>understandable</li>
	<li>robust and compatible</li>

	</ul>
	<p>In summary, think of your user and keep things as simple and as functional as possible. But don't overvalue simplicity and style at the <a href="https://uxmyths.com/post/115783813605/myth-34-simple-minimal">cost of clarity</a>. In the words of Luke Wroblewski "<a href="https://aneventapart.com/news/post/obvious-always-wins-by-luke-wroblewski-aea-video">obvious always wins</a>".</p>

	
	
	<p><a href="#top">Back to top  ‚Üë</a></p><h2 id="text-input"> Text input</h2>

        <hr>
        <p>Simple input for a form. Easy to overcomplicate.</p>
		<div>        
        <h3>My guidelines</h3>  
        
        <ul>
        <li>Text input fields must have a visible label above the input box.</li>
        <li>Don't rely on placeholder text. It is not a substitute for a label.</li>
        <li>Place hint text under the form label.</li>
        <li>The size of the input box should reflect the intended input.</li>
        <li>Unless labelled otherwise, all fields in a form are required. Mark optional fields as 'optional'.</li>
        </ul>
         </div>  

 		<p><img src="https://gerireid.com/img/form-fields/text-input.png" alt="Graphic of a form input box"></p><h3>Research insights and sensible thinking</h3>
     
     	<h4>‚òû Placeholders</h4>
      	<ul>
      	<li><a href="https://www.w3.org/WAI/GL/low-vision-a11y-tf/wiki/Placeholder_Research">W3C Placeholder Research</a></li>
		<li><a href="https://www.uxmatters.com/mt/archives/2010/03/dont-put-hints-inside-text-boxes-in-web-forms.php">Don't Put Hints Inside Text Boxes in Web Forms</a> by Caroline Jarrett, UXmatters</li>
		<li><a href="https://www.nngroup.com/articles/form-design-placeholders/">Placeholders in Form Fields Are Harmful</a> by By Katie Sherwin, Nielsen Norman Group.</li>
				<li><a href="https://adamsilver.io/articles/placeholders-are-problematic/">Placeholders are problematic</a> by Adam Silver.</li>
		</ul>
		
		<h4>‚òû Labels</h4>
      	<ul>
      	<li><a href="https://www.uxmatters.com/mt/archives/2006/07/label-placement-in-forms.php">Label Placement in Forms</a> by Matteo Penzo, UXmatters.</li>
      	<li><a href="https://adamsilver.io/articles/always-use-a-label/">Always use a label</a> by Adam Silver.</li>
      	<li><a href="http://baymard.com/blog/mobile-forms-avoid-inline-labels">Mobile Form Usability: Never Use Inline Labels</a> by Baymard Institute.</li>
		<li><a href="https://bradfrost.com/blog/post/float-label-pattern/">Float label pattern</a> by Brad Frost.</li>
		<li><a href="https://webaim.org/techniques/forms/advanced#placeholder">Advanced Form Labelling</a> by WebAIM.</li>
		<li><a href="https://www.matsuko.ca/blog/stop-using-material-design-text-fields/?ref=uxlift.org">Stop using Material Design text fields!</a> by Matsuko Friedland.</li>
		<li><a href="http://preibusch.de/publications/Preibusch-Krol-Beresford__voluntary_over-disclosure.pdf"> The privacy economics of voluntary
over-disclosure in Web forms</a> by S√∂ren Preibusch, Kat Krol and Alastair R. Beresford, University of Cambridge Computer Laboratory. [See findings on options fields]</li>
		<li><a href="https://highlights.sawyerh.com/highlights/szZ8gGvk6MhIZNKSDpn2">Web Form Design</a> by Luke Wroblewski [Left-Aligned Labels snippet]</li>

		</ul>
 
      	<h4>‚òû Layout</h4>
      	<ul>
      	<li><a href="https://baymard.com/blog/avoid-multi-column-forms">Avoid Multi-Column Layouts</a> by Baymard Institute</li>
		</ul>    
     					
	<h3>Accessibility considerations for text input</h3>
		<ul>
		<li>Text needs a 4.5:1 contrast ratio against the background. <a href="https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html">WCAG 1.4.3</a></li>
		<li>Input box outline needs a 3:1 contrast ratio against the background. <a href="https://www.w3.org/WAI/WCAG21/Understanding/non-text-contrast.html">WCAG 1.4.11</a></li>
		<li>Not all <a href="http://output.jsbin.com/vonesu/10/">screenreaders</a> read out placeholder text. See also <a href="https://www.w3.org/WAI/GL/low-vision-a11y-tf/wiki/Placeholder_Research">W3C placeholder research</a>.</li>
		<li>Not all <a href="https://caniuse.com/#feat=input-placeholder">browsers</a> support placeholder text.</li></ul>


	<h3>Text fields in the wild</h3>
        <ul>
		<li><a href="https://coop-design-system.herokuapp.com/pattern-library/foundations/input.html">Co-op Design Manual</a></li>
		<li><a href="https://design-system.barnardos.org.uk/components/forms/#text-input">Barnardos Design System</a></li>
		<li><a href="https://design-system.service.gov.uk/components/text-input/">Gov.uk Design System</a></li>
		<li><a href="https://service-manual.nhs.uk/design-system/components/text-input">NHS.UK Service Manual</a></li>
		</ul>

<p><a href="#top">Back to top  ‚Üë</a></p><h2 id="buttons"> Buttons</h2>

        <hr>
        <p>Buttons trigger an action or event such as continuing to the next stage or submitting a form. Use them purposely.</p>        
        
		<div>        
        	<h3>My guidelines</h3>  
        
       		 <ul>
        	<li>Button text should describe the action the button performs and be consistent through the journey.</li>
        	<li>Don't overload the user with choices. Use only one primary button on each page for the main action.</li>
        	<li>Place the submit button where users look for it. In a standard form journey this is usually to the left edge of the form, directly below the final field.</li>
        	<li>Make destructive buttons like cancel or previous harder for the user to find. A back button or link often works well above the form.</li>
        	<li>Avoid disabled buttons. They have poor contrast and can cause confusion.</li>
        	</ul>  

       		</div>


        <p><img src="https://gerireid.com/img/form-fields/button.png" alt="Graphic of a form field with a left aligned continue button"></p><h3>Research insights and sensible thinking</h3>
       <ul>
		<li><a href="https://medium.com/eightshapes-llc/buttons-in-design-systems-eac3acf7e23">Buttons in Design Systems</a> by Nathan Curtis.</li>
		<li><a href="https://www.lukew.com/ff/entry.asp?571">Primary &amp; Secondary Actions in Web Forms</a> by Luke Wroblewski.</li>
		<li><a href="http://www.effortmark.co.uk/seven-basic-best-practices-buttons/">Basic Best Practices for Buttons</a> by Caroline Jarrett.</li>
		<li><a href="https://adamsilver.io/articles/where-to-put-buttons-on-forms/">Where to put buttons on forms</a> by Adam Silver.</li>
		<li><a href="https://axesslab.com/disabled-buttons-suck/">Disabled buttons suck</a> by Hampus Sethfors, Axess Lab.</li>
		<li><a href="https://www.lukew.com/ff/entry.asp?740">Articles About Buttons</a> by Luke Wroblewski.</li>
		</ul>
					
	<h3>Accessibility considerations for buttons</h3>
        <ul>
		<li>Button text needs a 4.5:1 contrast ratio against the button container colour. <a href="https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html">WCAG 1.4.3</a></li>
		<li>Button container needs a 3:1 contrast ratio against the background. <a href="https://www.w3.org/WAI/WCAG21/Understanding/non-text-contrast.html">WCAG 1.4.11</a></li>
		<li>When speccing out a button, remember to include a design for all the states; default, focus, hover, active. All states need sufficient colour contrast.</li>
		</ul>

	<h3>Buttons in the wild</h3>
        <ul>
        <li><a href="https://luna.sainsburys.co.uk/components/button">Sainsbury Luna Design System</a></li>
		<li><a href="https://design.bulb.co.uk/components/buttons">Bulb Solar Design System</a></li>	
		<li><a href="https://designsystem.gov.au/components/buttons/">Australian Government Design System</a></li>
		
		</ul>

<p><a href="#top">Back to top  ‚Üë</a></p><h2 id="radio-buttons"> Radio buttons</h2>

        <hr>
       <p>I like big radio buttons (and I cannot lie). They show all available choices upfront. Use a radio group when the user can only select one option from a list.  </p>
             
		<div>        
        	<h3>My guidelines</h3>  
        

       		 <ul>
		   	<li>Position radio buttons to the left of the label and stack options vertically.</li>
        	<li>Users can only select one option but don't assume that they will know this. </li>
        	<li>Once an option has been selected the user can't unselect it without refreshing their browser. Consider adding a 'none' option.</li>
        	<li>Order radios from most to least common options. If this will cause an unwanted bias, order options alphabetically.</li>
			<li>Place hint text under the form label.</li>  
			<li>Make radio buttons easy to tap, with a target height of at least 44 pixels.</li>
        	<li>Radio buttons must ALWAYS be round.</li>

        	</ul>  
       		
       		</div>
 
        <p><img src="https://gerireid.com/img/form-fields/radio-buttons.png" alt="Graphic of a form radio button group"></p><h3>Research insights and sensible thinking</h3>
        <ul>
       	<li>Max number of radio buttons? See <a href="https://lawsofux.com/millers-law">Millers Law</a>: The average person can only keep 7 items in their working memory.</li>
		<li><em>Contradicted by:</em> <a href="https://uxmyths.com/post/931925744/myth-23-choices-should-always-be-limited-to-seven">UX Myth #23:</a> Choices should always be limited to 7 :)</li>
		<li><a href="https://designnotes.blog.gov.uk/2016/11/30/weve-updated-the-radios-and-checkboxes-on-gov-uk/">We've updated the radios and checkboxes on GOV.UK</a> Government Digital Service.</li>		<li><a href="https://www.nngroup.com/articles/radio-buttons-default-selection/">Radio buttons: Select one by default or leave all unselected?</a> by Kara Pernice, Nielsen Norman Group.</li>
				<li><a href="https://technology.blog.gov.uk/2015/08/27/making-radio-buttons-and-checkboxes-easier-to-use/">Making radio buttons and checkboxes easier to use</a> by Robin Whittleton, GDS blog.</li>
<li><a href="https://design-system.service.gov.uk/get-started/labels-legends-headings/">Making labels and legends headings</a> Government Digital Service.</li>
				<li><a href="https://technology.blog.gov.uk/2015/08/27/making-radio-buttons-and-checkboxes-easier-to-use/">Making radio buttons and checkboxes easier to use</a> by Robin Whittleton, GDS blog.</li>
<li><a href="https://www.creativejuiz.fr/blog/en/tutorials/customize-checkbox-and-radio-button-with-css">Customize checkbox and radio button with CSS</a> by Geoffrey Crofte.</li>

		</ul>
					
	<h3>Accessibility considerations for radio buttons</h3>
        <ul>
		<li>Text needs a 4.5:1 contrast ratio against the background. <a href="https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html">WCAG 1.4.3</a></li>
		<li>Radio button outline and fill needs a 3:1 contrast ratio against the background. <a href="https://www.w3.org/WAI/WCAG21/Understanding/non-text-contrast.html">WCAG 1.4.11</a></li>
		<li>For an accessible label, group radio buttons together in a <a href="https://www.w3.org/WAI/tutorials/forms/grouping/">field set</a> and legend that describes them.</li>
		<li>Selecting a radio button must not cause anything surprising to happen like submitting a form, significantly changing the content on the page, or moving the keyboard focus. <a href="https://www.w3.org/TR/UNDERSTANDING-WCAG20/consistent-behavior-unpredictable-change.html">WCAG 3.2.2</a></li>

		</ul>

	<h3>Radio buttons in the wild</h3>
        <ul>
		<li><a href="https://design-system.service.gov.uk/components/radios/">Government Digital Service</a></li>
		<li><a href="https://service-manual.nhs.uk/design-system/components/radios">NHS Digital Service Manual</a></li>
		<li><a href="https://coop-design-system.herokuapp.com/pattern-library/foundations/checkboxes-and-radio-buttons.html">Co-op Design System</a>
		</li><li><a href="https://www.giffgaff.design/components/radio/">GiffGaff Design System</a></li>
		<li><a href="https://design-system.barnardos.org.uk/components/forms/#radio-buttons">Barnardos Design System</a></li>
		</ul>

<p><a href="#top">Back to top  ‚Üë</a></p><h2 id="checkboxes"> Checkboxes</h2>

        <hr>
        <p>Use a checkbox to select multiple items, they show all choices upfront. Users are generally familiar with the affordance of checking a box.  </p>

		<div>        
        	<h3>My guidelines</h3>  
        
       		 <ul>
		   	<li>Position checkboxes to the left of the label and stack options vertically.</li>
        	<li>Make it clear that the user can select multiple options.</li>
			<li>Place hint text under the form label.</li> 
			<li>Use a single checkbox where a user needs to indicate agreement (for example to terms and conditions).</li>
			<li>Make checkboxes easy to tap, with a target height of at least 44 pixels.</li>
			<li>Checkboxes must ALWAYS be square.</li>


        	</ul>  
       		
       		</div>
  
  <p><img src="https://gerireid.com/img/form-fields/check-boxes.png" alt="Graphic of a checkbox box"></p><h3>Research insights and sensible thinking</h3>
        <ul>
       	<li>Max number of radio buttons? See <a href="https://lawsofux.com/millers-law">Millers Law</a>: The average person can only keep 7 items in their working memory.</li>
		<li><em>Contradicted by:</em> <a href="https://uxmyths.com/post/931925744/myth-23-choices-should-always-be-limited-to-seven">UX Myth #23:</a> Choices should always be limited to 7 :)</li>
		<li><a href="https://designnotes.blog.gov.uk/2016/11/30/weve-updated-the-radios-and-checkboxes-on-gov-uk/">We've updated the radios and checkboxes on GOV.UK</a> Government Digital Service.</li>
		<li><a href="https://technology.blog.gov.uk/2015/08/27/making-radio-buttons-and-checkboxes-easier-to-use/">Making radio buttons and checkboxes easier to use</a> by Robin Whittleton, GDS blog.</li>
<li><a href="https://design-system.service.gov.uk/get-started/labels-legends-headings/">Making labels and legends headings</a> Government Digital Service.</li>
		</ul>
					
	<h3>Accessibility considerations for checkboxes</h3>
        <ul>
		<li>Text needs a 4.5:1 contrast ratio against the background. <a href="https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html">WCAG 1.4.3</a></li>
		<li>Checkbox outline and checkmark needs a 3:1 contrast ratio against the background. <a href="https://www.w3.org/WAI/WCAG21/Understanding/non-text-contrast.html">WCAG 1.4.11</a></li>
        <li>For an accessible label, group checkboxes together in a <a href="https://www.w3.org/WAI/tutorials/forms/grouping/">field set</a> and legend that describes them.</li>
        <li>Checking a box must not cause anything surprising to happen like submitting a form, significantly changing the content on the page, or moving the keyboard focus. <a href="https://www.w3.org/TR/UNDERSTANDING-WCAG20/consistent-behavior-unpredictable-change.html">WCAG 3.2.2</a></li>
		</ul>

	<h3>Checkboxes in the wild</h3>
        <ul>
		<li><a href="https://coop-design-system.herokuapp.com/pattern-library/foundations/checkboxes-and-radio-buttons.html">Co-op Design System</a>
		</li><li><a href="https://www.giffgaff.design/components/checkbox/">GiffGaff Design System</a></li>
		<li><a href="https://service-manual.nhs.uk/design-system/components/checkboxes">NHS Digital Service Manual</a></li>
		</ul>

<p><a href="#top">Back to top</a></p><h2 id="notifications"> Notifications</h2>

        <hr>
        <p>Notifications alert users to important information or changes on a page. Helpful ones attracts the user's attention without interrupting the flow of the task. They often appear at the top of a page following a submit action.</p>

		<div>        
        	<h3>My guidelines</h3>  
        
       		 <ul>
			<li>Notifications typically come in 4 flavours; Information, Warning, Success or Error.</li>
			<li>Users have a mental model for alert colours. Stick with Information=Blue, Warning=Orange, Positive=Green and Error=Red.</li>
			<li>Provide an additional indicator to colour, like an icon.</li>
			<li>Use notifications purposefully, keep text short and simple.</li>

        	</ul>  
       		
       		</div>
       		
       <p><img src="https://gerireid.com/img/form-fields/notifications.png" alt="Graphic of 4 notitications - warning, success, info and error"></p><h3>Research insights and sensible thinking</h3>
        <ul>
       	<li><a href="https://inclusive-components.design/notifications/">Inclusive Components: Notifications</a> by Heydon Pickering.</li>

		</ul>
					
	<h3>Accessibility considerations for notifications</h3>
        <ul>
		<li>Text needs a 4.5:1 contrast ratio against the background. Check coloured text on a tinted background. <a href="https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html">WCAG 1.4.3</a></li>
		<li>Icon needs a 3:1 contrast ratio against the background. <a href="https://www.w3.org/WAI/WCAG21/Understanding/non-text-contrast.html">WCAG 1.4.11</a></li>
        	<li>Consider users with colour vision deficiency. Test your alerts on a colour blind person, or use a free colour blind ‚Ä¶</li></ul></div></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://gerireid.com/forms.html">https://gerireid.com/forms.html</a></em></p>]]>
            </description>
            <link>https://gerireid.com/forms.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24490883</guid>
            <pubDate>Wed, 16 Sep 2020 09:09:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Thing about Age]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24490803">thread link</a>) | @pranaygp
<br/>
September 16, 2020 | https://pranay.gp/the-thing-about-age | <a href="https://web.archive.org/web/*/https://pranay.gp/the-thing-about-age">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="8thaz7jLrmqDqCxZnm3JAC">
	<time datetime="2020-09-16">September 16, 2020</time>
  
	<p>These are my thoughts on ageism - discriminating people, and more importantly, ideas, just because of someone‚Äôs age.</p>

<p>I‚Äôm 22 years old. If you‚Äôre older than me, don‚Äôt hang up. Give me a chance. Sure, I may not have as much experience as you, and a lot of what I say may be wrong and uninformed, but that‚Äôs fine. Mistakes are good because that means decisions are being made - and I can fix those mistakes, but I have to start somewhere - and that‚Äôs where this post comes in.</p>

<p>I‚Äôm going to pitch this idea in two ways. First, to someone younger than me, and then, to someone older. You‚Äôll want to read them both to fully understand my view</p>

<p>‚Äì</p>

<p>To someone younger,<br>
When I disregard an idea you have - it might be because it‚Äôs a terrible idea - but more often than not, it‚Äôs because I‚Äôm jealous. I see a better version of myself when I look at you. You bring with you so much enthusiasm and potential, that I often wonder ‚ÄúWhat the f*** am I doing with my life?‚Äù. My feedback doesn‚Äôt come from a good place, and I certainly don‚Äôt have your best interests at heart. I feel like you might out-achieve me, and that‚Äôs terrifying. I too had big dreams 10 years ago that I haven‚Äôt achieved - so why should you? </p>

<p>I‚Äôm shutting you down because it makes me feel better. If anyone can understand that - it‚Äôs got to be you. Why? Well, you‚Äôre really ambitious, and you‚Äôll do anything to leave your mark on this world, including preventing others from stealing your limelight. You came to me because you saw someone you respected and could look up to - and because I‚Äôm similar to you. If I am indeed similar to you, then I‚Äôm doing exactly what you would do too.</p>

<p>I hope you‚Äôll walk away from a conversation with me the same way I did with my elders - with disdain, and a burning passion to prove them wrong. </p>

<p>More importantly, if I tell you that you‚Äôre doing a good job - be terrified. Approval from someone you respect is a dangerous drug. Your goal isn‚Äôt to get my approval - it‚Äôs to get me to be terrified of you and for me to do anything I can to shut you down. It‚Äôs so easy to get trapped relying on the approval of an elder.</p>

<p>Honestly, at the end of the day, I blame you. You look up to us, as elders, to be your mentors and you expect us to be mature and have your best interests at heart. Why is that? Because we‚Äôre older? That‚Äôs aegist.</p>

<p>‚Äì</p>

<p>To my elders,<br>
I do look up to you. Not because you‚Äôre older than me, or have more experience. No. I look to you as a worthy opponent - someone I can still beat. I‚Äôve already failed my younger self by not hitting the goals I had, but when I see you - I‚Äôm not there yet, and that means I can still do better. </p>

<p>At first, I try to figure out what you were like at my age. Sure, I‚Äôm interested in your life, but more importantly, I‚Äôm pacing myself. I try to figure out what metrics I‚Äôm doing better than you on, and on what metrics I‚Äôm doing worse. If you‚Äôre within a reasonable band, then I‚Äôll treat you as an equal. If you were significantly ahead when you were my age, then I‚Äôll try my best to catch up. You can‚Äôt change your past, but I can change my future, and that means I have potential. I will still see you as an equal though - because anything more, and I‚Äôm bound to your approval. If I‚Äôm bound to your approval, then I can never beat you. I can only ever be good enough.</p>

<p>I‚Äôd love to hear your advice, and yes, even your stories and experiences. Learning what you did right and wrong is really valuable. After all, passing knowledge between generations is what brought humanity this far. While spewing words of wisdom is great for your self esteem - don‚Äôt ever forget the golden rule. You‚Äôre giving me advice, not orders. Don‚Äôt be disappointed when I don‚Äôt do what you say. I value your opinions, the same way I value the opinions of a peer or someone younger than me. Would you like me to weigh your words more highly? Why? Because you‚Äôre older than them? That‚Äôs aegist.</p>

<p>‚Äì</p>

<p>Ageism is an unfortunate fact of life in our society. We all experience it, but we also all contribute to it. Instead of trying to fix society, it‚Äôs far easier to adjust your own worldview so you‚Äôre less affected by it. I hope this essay helps you do just that</p>

  <figure id="kudo_8thaz7jLrmqDqCxZnm3JAC">
    <a href="#kudo">
      
    </a>
    <p>14</p>
    <p>Kudos</p>
  </figure>
  <figure id="kudo_side_8thaz7jLrmqDqCxZnm3JAC">
    <a href="#kudo">
      
    </a>
    <p>14</p>
    <p>Kudos</p>
  </figure>
</article></div>]]>
            </description>
            <link>https://pranay.gp/the-thing-about-age</link>
            <guid isPermaLink="false">hacker-news-small-sites-24490803</guid>
            <pubDate>Wed, 16 Sep 2020 08:52:37 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Practices for Building ‚Äì how Linear.app builds its software]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24490652">thread link</a>) | @exhaze
<br/>
September 16, 2020 | https://linear.app/linear-method | <a href="https://web.archive.org/web/*/https://linear.app/linear-method">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><header><svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4.32483" y="17.3183" width="44.439" height="44.439" rx="5.75" transform="rotate(-17 4.32483 17.3183)" stroke-width="0.5"></rect><rect x="0.353553" y="32" width="44.7548" height="44.7548" rx="5.75" transform="rotate(-45 0.353553 32)" stroke-width="0.5"></rect><rect x="0.353553" y="32" width="44.7548" height="44.7548" rx="5.75" transform="rotate(-45 0.353553 32)" stroke-width="0.5"></rect><rect x="4.59371" y="47.8232" width="44.7548" height="44.7548" rx="5.75" transform="rotate(-75 4.59371 47.8232)" stroke-width="0.5"></rect></svg><p>Practices for Building</p><p>At Linear we believe software can feel magical. Quality of software is driven by both the talent of its creators and how they feel while they√¢‚Ç¨‚Ñ¢re crafting it. Teams that have the time and energy to be focused on the work itself can build magical, high quality software. Our tools and practices need to do their best to nurture this, not take it away.</p><p>To bring back the right focus, these are the foundational ideas Linear is built on.</p></header><section><h2>Principles</h2><h3>Build for the creators</h3><p>Software project management tools should build with the end users √¢‚Ç¨‚Äú the creators √¢‚Ç¨‚Äú in mind. Keeping individuals productive is more important than generating perfect reports.</p><h3>Opinionated software</h3><p>Productivity software should be opinionated. It's the only way the product can truly do the heavy lifting for you. Flexible software lets everyone invent their own workflows, which eventually creates chaos as teams scale.</p><h3>Create momentum √¢‚Ç¨‚Äú don't sprint</h3><p>We should find a cadence and routine of working. In cycles, we decide priorities and assign responsibilities. Our goal is to maintain a healthy momentum with our teams, not rush towards the end.</p><h3>Meaningful direction</h3><p>Our daily work might be filled with tasks but we should understand and remind our teams of the purpose and long term goals of our work. Roadmaps, projects and milestones are all important to keep in mind as we plan our weekly schedules.</p><h3>Aim for clarity</h3><p>Don√¢‚Ç¨‚Ñ¢t invent terms if possible, as these can confuse and have different meanings in different teams. Projects should be called projects.</p><h3>Say no to busy work</h3><p>Our tools should not make us the designers and maintainers of them. We should throw away or automate the busy work so you can focus on the more important work.</p><h3>Simple first, then powerful</h3><p>Teams at different sizes have different needs. Tools should be simple to get started with and grow more powerful over time.</p><h3>Decide and move on</h3><p>There isn't always a best answer. The important thing is to make a decision, and move on.</p></section><section><h2>Practices</h2><h3>Set monthly, quarterly or/and annual roadmaps</h3><p>Ambitious goals are the only way to make a significant impact. Companies should focus on them when they define their high level direction. Reserve some space on your roadmaps for unexpected and reactive work that always comes up and allow your roadmap to change if needed.</p><h3>Connect daily work to larger goals with projects</h3><p>All projects and work should directly correlate to these goals. Review projects and their target dates during roadmap meetings and pull from projects as you plan cycles.</p><h3>Work in <i>n-week</i> cycles</h3><p>Cycles create healthy routine and focus teams on what needs to happen next. 2-week cycles are the most common in software building. They're short enough to not lose sight of other priorities but long enough to build significant features. Cycles should feel reasonable. Don't overload cycles with tasks and let unfinished items move to the next cycle automatically.</p><h3>Keep a manageable backlog</h3><p>You don't need to save every feature request or piece of feedback. Important ones will resurface and low priority ones will never get fixed. A more focused backlog makes it easier and faster to plan cycles, and ensures the work will actually get done.</p><h3>Mix feature and quality work</h3><p>All software has bugs, more than we can ever fix. Include bugs and other fixes as part of your cycles. Invest in tooling as it is a force multiplier if done right.</p><h3>Specify project and issue owners</h3><p>Each project should have a named owner responsible to own delivery and write the project brief. The same goes for issues. Others should collaborate but responsibility should lie with a single person.</p><h3>Write project specs</h3><p>Aim for brevity. Short specs are more likely to be read. The purpose of a spec is to briefly communicate the "why", "what" and "how" of the project to the rest of the team. Ideally these short documents force teams to scope out work so priorities are clear and teams avoid building the wrong thing.</p><h3>Understand your users</h3><p>The more popular your product, the more feedback you'll get. Overflowing inboxes are a good sign unless they're bug reports. Don√¢‚Ç¨‚Ñ¢t worry too much about organizing all the feedback. Collect it and use it as a research library when developing new features. Try to spot trends. Use feedback, even complaints, as an opportunity to get to know your users and ask them to explain why they want a specific feature so you find out their needs. Solve the problem √¢‚Ç¨‚Äú don√¢‚Ç¨‚Ñ¢t just build the feature.</p><h3>Scope issues to be as small as possible</h3><p>It's hard to see visible progress when working on large tasks, which can be demotivating. Break down work into smaller parts and create an issue for each one when possible. Ideally you can complete several concrete tasks each week. It feels great to mark issues as done.</p><h3>Measure progress with actual work</h3><p>The clearest way to see whether something is complete or not is to show the diff in the code or design file. When the tasks are scoped small, your changes will be small and easier to review, too. Avoid massive pull requests or large design changes.</p><h3>Run cross-functional teams</h3><p>Designers and engineers should work together on projects, creating a natural push and pull. Designers bring their skills to explore ideas and push your team's thinking. Engineers can challenge thinking around implementation and will bring the winning ideas to reality. The best creators often have talent for both. Directly loop in other teams when building features they'll use or ask customers they interact with to use.</p><h3>Write a changelog</h3><p>It√¢‚Ç¨‚Ñ¢s important to look back and celebrate what you achieved as a team. Consistent changelogs also communicate to the user new features, the value they get from your product, and your commitment to improving it. It's also an easy way to connect your team's individual work to the collective value they create.<!-- --> <a href="https://medium.com/linear-app/startups-write-changelogs-c6a1d2ff4820">Read more</a> on how we write ours.</p></section></div></div>]]>
            </description>
            <link>https://linear.app/linear-method</link>
            <guid isPermaLink="false">hacker-news-small-sites-24490652</guid>
            <pubDate>Wed, 16 Sep 2020 08:24:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Reveal 1.0: Read Eval Visualize Loop for Clojure]]>
            </title>
            <description>
<![CDATA[
Score 25 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24490363">thread link</a>) | @vlaaad
<br/>
September 16, 2020 | https://vlaaad.github.io/reveal/ | <a href="https://web.archive.org/web/*/https://vlaaad.github.io/reveal/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div>
      
      
      <p><img src="https://vlaaad.github.io/assets/reveal/demo.gif" alt="Demo"></p>



<ul id="markdown-toc">
  <li><a href="#rationale" id="markdown-toc-rationale">Rationale</a></li>
  <li><a href="#give-it-a-try" id="markdown-toc-give-it-a-try">Give it a try</a></li>
  <li><a href="#features" id="markdown-toc-features">Features</a>    <ul>
      <li><a href="#tap-support" id="markdown-toc-tap-support"><code>tap&gt;</code> support</a></li>
      <li><a href="#eval-on-selection" id="markdown-toc-eval-on-selection">Eval on selection</a></li>
      <li><a href="#inspect-object-fields-and-properties" id="markdown-toc-inspect-object-fields-and-properties">Inspect object fields and properties</a></li>
      <li><a href="#look-and-feel-customization" id="markdown-toc-look-and-feel-customization">Look and feel customization</a></li>
      <li><a href="#url-and-file-browser" id="markdown-toc-url-and-file-browser">URL and file browser</a></li>
      <li><a href="#doc-and-source" id="markdown-toc-doc-and-source">Doc and source</a></li>
      <li><a href="#ref-watchers" id="markdown-toc-ref-watchers">Ref watchers</a></li>
      <li><a href="#charts" id="markdown-toc-charts">Charts</a></li>
      <li><a href="#table-view" id="markdown-toc-table-view">Table view</a></li>
      <li><a href="#and-more" id="markdown-toc-and-more">‚Ä¶and more</a></li>
    </ul>
  </li>
  <li><a href="#using-reveal" id="markdown-toc-using-reveal">Using Reveal</a>    <ul>
      <li><a href="#ui-concepts-and-navigation" id="markdown-toc-ui-concepts-and-navigation">UI concepts and navigation</a></li>
      <li><a href="#customization" id="markdown-toc-customization">Customization</a></li>
      <li><a href="#user-api" id="markdown-toc-user-api">User API</a>        <ul>
          <li><a href="#repl" id="markdown-toc-repl"><code>repl</code></a></li>
          <li><a href="#io-prepl" id="markdown-toc-io-prepl"><code>io-prepl</code></a></li>
          <li><a href="#remote-prepl" id="markdown-toc-remote-prepl"><code>remote-prepl</code></a></li>
          <li><a href="#ui" id="markdown-toc-ui"><code>ui</code></a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#editor-integration" id="markdown-toc-editor-integration">Editor integration</a>    <ul>
      <li><a href="#cursive" id="markdown-toc-cursive">Cursive</a></li>
      <li><a href="#nrepl-based-editors" id="markdown-toc-nrepl-based-editors">Nrepl-based editors</a></li>
      <li><a href="#windows" id="markdown-toc-windows">Windows</a></li>
    </ul>
  </li>
  <li><a href="#extending-reveal" id="markdown-toc-extending-reveal">Extending reveal</a>    <ul>
      <li><a href="#formatters" id="markdown-toc-formatters">Formatters</a>        <ul>
          <li><a href="#low-level-text-emitting-sfs" id="markdown-toc-low-level-text-emitting-sfs">Low-level text emitting sfs</a></li>
          <li><a href="#delegating-sfs" id="markdown-toc-delegating-sfs">Delegating sfs</a></li>
          <li><a href="#overriding-sfs" id="markdown-toc-overriding-sfs">Overriding sfs</a></li>
        </ul>
      </li>
      <li><a href="#actions" id="markdown-toc-actions">Actions</a></li>
      <li><a href="#views" id="markdown-toc-views">Views</a>        <ul>
          <li><a href="#short-cljfx-intro" id="markdown-toc-short-cljfx-intro">Short cljfx intro</a></li>
          <li><a href="#built-in-components" id="markdown-toc-built-in-components">Built-in components</a></li>
          <li><a href="#pluggable-context-menu" id="markdown-toc-pluggable-context-menu">Pluggable context menu</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#closing-thoughts" id="markdown-toc-closing-thoughts">Closing thoughts</a></li>
</ul>



<p>Repl is a great window into a running program, but the textual nature of its output limits developer‚Äôs ability to inspect the program: a text is not an object, and we are dealing with objects in the VM.</p>

<p>Reveal aims to solve this problem by creating an in-process repl output pane that makes inspecting values as easy as selecting an interesting datum. It recognizes the value of text as a universal interface, that‚Äôs why its output looks like a text: you can select it, copy it, save it into a file. Unlike text, reveal output holds references to printed values, making inspecting selected value a matter of opening a context menu.</p>

<p>Unlike datafy/nav based tools, Reveal does not enforce a particular data representation for any given object, making it an open set ‚Äî that includes datafy/nav as one of the available options. It does not use datafy/nav by default because in the absence of inter-process communication to datafy is to lose.</p>

<p>Not being limited to text, Reveal uses judicious syntax highlighting to aid in differentiating various objects: text <code>java.lang.Integer</code> looks differently depending on whether it was produced from a symbol or a class.</p>



<p>The easiest way to try it is to run a Reveal repl:</p>
<div><div><pre><code>clj <span>\</span>
<span>-Sdeps</span> <span>'{:deps {vlaaad/reveal {:mvn/version "1.0.130"}}}'</span> <span>\</span>
<span>-m</span> vlaaad.reveal repl
</code></pre></div></div>
<p>Executing this command will start a repl and open Reveal output window that will mirror the evaluations in the shell.</p>



<h2 id="tap-support"><code>tap&gt;</code> support</h2>

<p>Clojure 1.10 added <code>tap&gt;</code> function with the purpose similar to printing the value for debugging, but instead of characters you get the object. Reveal repls show tapped values in their output windows ‚Äî you won‚Äôt need <code>println</code> anymore!</p>

<p><img src="https://vlaaad.github.io/assets/reveal/tap.gif" alt="Tap demo"></p>

<h2 id="eval-on-selection">Eval on selection</h2>

<p>You can evaluate code on any selected value by using text input in the context menu. You can write either a single symbol of a function to call or a form where <code>*v</code> will be replaced with selected value.</p>

<p><img src="https://vlaaad.github.io/assets/reveal/eval-on-selection.gif" alt="Eval on selection demo"></p>

<h2 id="inspect-object-fields-and-properties">Inspect object fields and properties</h2>

<p>Any object in the JVM has class and fields, making them easily accessible for inspection is extremely important. With <code>java-bean</code> contextual action you get a debugger-like view of objects in the VM. Access to this information greatly improves the visibility of the VM and allows to explore it. For example, for any class you have on the classpath you can get the place where it‚Äôs coming from:</p>

<p><img src="https://vlaaad.github.io/assets/reveal/java-bean.gif" alt="Java bean demo">
I learned about it after implementing this feature :)</p>

<h2 id="look-and-feel-customization">Look and feel customization</h2>

<p>Reveal can be configured with <code>vlaaad.reveal.prefs</code> java property to use different font or theme:</p>

<p><img src="https://vlaaad.github.io/assets/reveal/light-theme.png" alt="Light theme"></p>

<h2 id="url-and-file-browser">URL and file browser</h2>

<p>You can open URL-like things and files: both internally in Reveal and externally using other applications in your OS e.g. file explorer, browser or text editor.</p>

<p><img src="https://vlaaad.github.io/assets/reveal/browse.gif" alt="Browse demo"></p>

<h2 id="doc-and-source">Doc and source</h2>

<p>Reveal can show you documentation and sources for various runtime values ‚Äî namespaces, vars, symbols, functions, keywords (if they define a spec). Like <a href="https://cljdoc.org/">cljdoc</a>, it supports <code>[[wikilink]]</code> syntax in docstrings to refer to other vars, making them accessible for further exploration.</p>

<p><img src="https://vlaaad.github.io/assets/reveal/doc-and-source.gif" alt="Doc and source demo"></p>

<h2 id="ref-watchers">Ref watchers</h2>
<p>Reveal can watch any object implementing <code>clojure.lang.IRef</code> (things like atoms, agents, vars, refs) and display it either automatically updated or as a log of successors.</p>

<p><img src="https://vlaaad.github.io/assets/reveal/watchers.gif" alt="Ref watchers demo"></p>

<h2 id="charts">Charts</h2>

<p>Reveal can show data of particular shapes as charts that are usually explorable: when you find an interesting data point on the chart, you can then further inspect the data in that data point.</p>

<p>The simplest shape is labeled numbers. Labeled means that those numbers exist in some collection that has a unique label for every number. For maps, keys are labels, for sequential collections, indices are labels and for sets, numbers themselves are labels.</p>

<p>A pie chart shows labeled numbers:</p>

<p><img src="https://vlaaad.github.io/assets/reveal/pie-chart.gif" alt="Pie chart demo"></p>

<p>Other charts support more flexible data shapes ‚Äî both because they can show more than one data series, and because they can be explored, where it might be useful to attach some metadata with the number. Since JVM numbers don‚Äôt allow metadata, you can instead use tuples where the first item is a number and second is the metadata. Bar charts can display labeled numbers (single data series) or labeled numbers that are themselves labeled (multiple data series):</p>

<p><img src="https://vlaaad.github.io/assets/reveal/bar-chart.gif" alt="Bar chart demo"></p>

<p>Line charts are useful to display progressions, so Reveal suggests them to display sequential numbers (and labeled sequential numbers):</p>

<p><img src="https://vlaaad.github.io/assets/reveal/line-chart.gif" alt="Line chart demo"></p>

<p>Finally, Reveal has scatter charts to display coordinates on a 2D plane. A coordinate is represented as a tuple of 2 numbers and as with numbers, you can use a tuple of coordinate and arbitrary value in the place of coordinate. Reveal will suggest scatter charts for collections of coordinates and labeled collections of coordinates.</p>

<p><img src="https://vlaaad.github.io/assets/reveal/scatter-chart.gif" alt="Scatter chart demo"></p>

<h2 id="table-view">Table view</h2>

<p>There are cases where it is better to make sense of the value when it is represented by a table: collections of homogeneous items where columns make it easier to compare corresponding parts of those items, and big deeply nested data structures where it‚Äôs easier to look at them layer by layer.</p>

<p><img src="https://vlaaad.github.io/assets/reveal/table.gif" alt="Table view demo"></p>

<h2 id="and-more">‚Ä¶and more</h2>

<p>Reveal was designed to be performant: it can stream syntax-highlighted output very fast. In addition to that, there are various helpers for data inspection:</p>
<ul>
  <li>text search that is triggered by <kbd>/</kbd> or <kbd>Ctrl F</kbd>;</li>
  <li>out of the box <a href="https://github.com/lambdaisland/deep-diff2">lambdaisland‚Äôs deep-diff</a> output highlighting: all you need to do is have it on the classpath;</li>
  <li>various contextual actions:
    <ul>
      <li>deref derefable things;</li>
      <li>get meta if a selected value has some meta;</li>
      <li>convert java array to vector;</li>
      <li>view the color of a thing that describes a color (like <code>"#fff"</code> or <code>:red</code>);</li>
    </ul>
  </li>
</ul>



<h2 id="ui-concepts-and-navigation">UI concepts and navigation</h2>

<p><img src="https://vlaaad.github.io/assets/reveal/concepts.png" alt="Concepts"></p>

<p>Reveal UI is made of 3 components:</p>
<ul>
  <li>output panel that contains data submitted to reveal window (e.g. repl output);</li>
  <li>a context menu that can invoke actions on selected values;</li>
  <li>results panel that has 1 or more tabs with action results produced from the context menu.</li>
</ul>

<p>Navigation:</p>
<ul>
  <li>Use <kbd>Space</kbd>, <kbd>Enter</kbd> or right mouse button to open a context menu on selection;</li>
  <li>Use <kbd>Tab</kbd> to switch focus between output and results panel;</li>
  <li>In results panel:
    <ul>
      <li>Use <kbd>Ctrl ‚Üê</kbd> and <kbd>Ctrl ‚Üí</kbd> to switch tabs in results panel;</li>
      <li>Use <kbd>Esc</kbd> to close the tab</li>
    </ul>
  </li>
  <li>In a context menu:
    <ul>
      <li>Use <kbd>‚Üë</kbd> and <kbd>‚Üì</kbd> to move focus between available actions and input text field;</li>
      <li>Use <kbd>Enter</kbd> to execute selected action or form written in the text field;</li>
      <li>Use <kbd>Esc</kbd> to close the context menu.</li>
    </ul>
  </li>
</ul>

<h2 id="customization">Customization</h2>

<p>Reveal can be customized using <code>vlaaad.reveal.prefs</code> java property that contains an edn map of UI preferences. Supported keys (all optional):</p>
<ul>
  <li><code>:theme</code> ‚Äî color theme, <code>:light</code> or <code>:dark</code>;</li>
  <li><code>:font-family</code> ‚Äî system font name (like <code>"Consolas"</code>) or URL (like <code>"file:/path/to/font.ttf"</code> or <code>"https://ff.static.1001fonts.net/u/b/ubuntu.mono.ttf"</code>) ‚Äî reveal only supports monospaced fonts;</li>
  <li><code>:font-size</code> ‚Äî font size, number.</li>
</ul>

<p>Example:</p>
<div><div><pre><code><span>$ </span>clj <span>-A</span>:reveal <span>\</span>
<span>-J-Dvlaaad</span>.reveal.prefs<span>=</span><span>'{:font-family "Consolas" :font-size 15}'</span> <span>\</span>
<span>-m</span> vlaaad.reveal repl
</code></pre></div></div>

<h2 id="user-api">User API</h2>

<p>The main entry point to Reveal is <code>vlaaad.reveal</code> ns that has various repls and lower-level functionality for data inspection.</p>

<h3 id="repl"><code>repl</code></h3>

<p>It is a repl wraps <code>clojure.main/repl</code> with additional support for <code>:repl/quit</code> and <code>tap&gt;</code>. It is as simple as it gets. I use it all the time. Example:</p>

<div><div><pre><code><span>$ </span>clj <span>-A</span>:reveal <span>-m</span> vlaaad.reveal repl
<span># Reveal window appears</span>
Clojure 1.10.1
<span>user</span><span>=&gt;</span>
</code></pre></div></div>

<h3 id="io-prepl"><code>io-prepl</code></h3>

<p>This prepl works like <code>clojure.core.server/io-prepl</code>. Its purpose is to be run in a process on your machine that you want to connect to using another prepl-aware tool. Example:</p>

<div><div><pre><code><span>$ </span>clj <span>-A</span>:reveal <span>\</span>
<span>-J-Dclojure</span>.server.reveal<span>=</span><span>'{:port 5555 :accept vlaaad.reveal/io-prepl}'</span>
</code></pre></div></div>
<p>Now you can connect to this process using any socket repl and it will show a Reveal window for every connection:</p>
<div><div><pre><code><span>$ </span>nc localhost 5555
<span># reveal window appears</span>
<span>(</span>+ 1 2 3<span>)</span> <span># input</span>
<span>{</span>:tag :ret, :val <span>"6"</span>, :ns <span>"user"</span>, :ms 1, :form <span>"(+ 1 2 3)"</span><span>}</span> <span># output</span>
</code></pre></div></div>

<h3 id="remote-prepl"><code>remote-prepl</code></h3>

<p>Reveal is the most useful when it runs in the process where the development happens. This prepl, unlike the previous two, is not like that: it connects to a remote process and shows a window for values that arrived from the network. It can‚Äôt benefit from easy access to printed references because these references are pointing to values deserialized from bytes, not values in the target VM. It‚Äôs still nice and performant repl, and it‚Äôs useful when you want to use Reveal to talk to another process that does not have Reveal on the classpath (e.g. production or ClojureScript prepl).</p>

<p>Example:</p>
<ol>
  <li>Start a prepl without Reveal on the classpath:
    <div><div><pre><code><span>$ </span> clj <span>\</span>
<span>-Sdeps</span> <span>'{:deps {org.clojure/clojurescript {:mvn/version "1.10.764"}}}'</span> <span>\</span>
<span>-J-Dclojure</span>.server.cljs-prepl<span>=</span><span>'{:port 50505 :accept cljs.server.browser/prepl}'</span>
</code></pre></div>    </div>
  </li>
  <li>Connect to that prepl using Reveal:
    <div><div><pre><code>$ clj -A:reveal -m vlaaad.reveal remote-prepl :port 50505
# at this point, 2 things happen:
# 1. Browser window with cljs prepl appears
# 2. Reveal window opens

# input
js/window

# output
{:tag :ret, 
 :val #object [Window [object Window]], 
 :ns "cljs.user", 
 :ms 25, 
 :form "js/window"}
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="ui"><code>ui</code></h3>

<p>Calling this function will create and show a Reveal window. It returns a function that you can submit values to ‚Äî they will appear in the output panel. All built-in visual repls are thin wrappers of other repls that submit values to a window created by this generic function. You can use it to create custom Reveal-flavored repls, or, instead of using it as a repl, you can configure Reveal to only show tapped values.</p>

<p>Example:</p>
<div><div><pre><code><span>(</span><span>require</span><span> </span><span>'</span><span>[</span><span>vlaaad.reveal</span><span> </span><span>:as</span><span> </span><span>reveal</span><span>])</span><span>

</span><span>;; open a window that will show tapped values:</span><span>
</span><span>(</span><span>add-tap</span><span> </span><span>(</span><span>reveal/ui</span><span>))</span><span>

 </span><span>;; submit value to the window:</span><span>
</span>‚Ä¶</code></pre></div></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://vlaaad.github.io/reveal/">https://vlaaad.github.io/reveal/</a></em></p>]]>
            </description>
            <link>https://vlaaad.github.io/reveal/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24490363</guid>
            <pubDate>Wed, 16 Sep 2020 07:33:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why is Apple acting like an asshole?]]>
            </title>
            <description>
<![CDATA[
Score 560 | Comments 479 (<a href="https://news.ycombinator.com/item?id=24490326">thread link</a>) | @ig0r0
<br/>
September 16, 2020 | https://www.jessesquires.com/blog/2020/09/15/why-is-apple-acting-like-an-asshole/ | <a href="https://web.archive.org/web/*/https://www.jessesquires.com/blog/2020/09/15/why-is-apple-acting-like-an-asshole/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        <p>Today Apple announced <a href="https://www.apple.com/apple-events/september-2020/">at their media event</a> that the final public release of iOS 14 ships tomorrow, which came as quite a shock to all third-party developers.</p>

<!--excerpt-->

<p>This unwelcome surprise comes against the backdrop of dozens of controversies around the App Store ‚Äî most recently <a href="https://www.theverge.com/2020/6/16/21293419/hey-apple-rejection-ios-app-store-dhh-gangsters-antitrust">Hey.com</a> and <a href="https://daringfireball.net/linked/2020/08/28/apple-terminates-epic-games-account">Epic</a>, but more generally its <a href="https://marco.org/2020/09/11/app-review-changes">painfully confusing</a> and <a href="https://inessential.com/2020/05/10/heads_up_to_rss_reader_authors">arbitrarily applied</a> rules, its incomprehensible <a href="https://mjtsai.com/blog/tag/rejection/">app rejections</a> and their often sudden retractions, app <a href="https://www.macrumors.com/2016/03/07/flexbright-adjust-display-temperature/">approvals followed by sudden removals</a> without explanation, and the general unequal treatment of developers where <a href="https://gizmodo.com/researchers-uber-s-ios-app-had-secret-permissions-that-1819177235">big companies</a> or favorites <a href="https://mjtsai.com/blog/2019/02/27/bbedit-12-6-to-return-to-the-mac-app-store/">get special treatment</a>. It leaves me wondering, what the hell is Apple‚Äôs strategy here? This is not a flurry of bad PR for the sake of it. There are serious problems here that need to be addressed ‚Äî in particular, Developer Relations.</p>

<div>
    
    <div>
        <figure>
            <img src="https://www.jessesquires.com/img/appholes.jpg" title="Appholes" alt="Appholes">
            <div>
                
            </div>
        </figure>
    </div>
    
</div>

<h4>* * *</h4>

<p>Historically, these events announce new hardware and the upcoming release of the next major version of iOS, which is typically made public a few days later or the following week. For as long as I can remember it goes something like this:</p>

<ul>
  <li>Apple hosts a media event on a Tuesday in September.</li>
  <li>Announcements include new iPhones, iPads, and Watches. Or, at least some combination of those. Maybe something about Apple TV.</li>
  <li>All of the new hardware will run the latest version of iOS (or watchOS, or tvOS).</li>
  <li>The next major release of iOS is announced to be shipping on Friday (in a few days) or sometime the following week, like the next Tuesday.</li>
</ul>

<p>But today, Apple announced that iOS 14 is shipping <strong>tomorrow</strong>. This was near the end of the event ‚Äî at roughly 11:00 AM Pacific time. This means West Coast developers have half a day to put the final touches on their app updates for iOS 14 <strong>AND</strong> get their apps submitted with the just-released Xcode 12 GM <strong>AND</strong> get through App Store review. None of those tasks are trivial, and no one familiar with them would agree that this is a sufficient amount of time to complete them. If you happen to be working on the East Coast, this means you were given just a few hours before the working day was over to get your app ready and submitted. And if you live in Europe or anywhere else in the world, well, go fuck yourself and good luck tomorrow!</p>

<p>On top of this, critical bugs still exist in the latest releases of the SDKs, Xcode 12, and iOS 14. It seems they will not be addressed.</p>

<h4>* * *</h4>

<p>Given the increasingly tenuous relationship that Apple has with developers, I do not understand how it could be in their interest to act like such an asshole right now. Not to mention, it is unlikely that they will even be able to review all of these app submissions in time. We already do not feel valued due to the aforementioned issues, and this is an outright negligent response to developer relationships the company has damaged over the past few years. Announcing that iOS 14 ships tomorrow with virtually no notice to developers is yet another breach of trust, another disappointment, and quite frankly feels like a big ‚Äòfuck you‚Äô to developers. What purpose does it serve to place this last-minute, unnecessary stress on third-party developers?</p>

<p>Who is in charge of iOS releases at Apple that thought this was a good idea? Who is the head of Developer Relations that thought this was a good idea?</p>

<p>To whomever made these decisions: <strong>y‚Äôall fucked up. Again.</strong></p>

    </div></div>]]>
            </description>
            <link>https://www.jessesquires.com/blog/2020/09/15/why-is-apple-acting-like-an-asshole/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24490326</guid>
            <pubDate>Wed, 16 Sep 2020 07:26:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Audio from Scratch with Go: Fr√®re Jacques]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24490167">thread link</a>) | @Insanity
<br/>
September 15, 2020 | https://dylanmeeus.github.io/posts/audio-from-scratch-pt12/ | <a href="https://web.archive.org/web/*/https://dylanmeeus.github.io/posts/audio-from-scratch-pt12/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>In the <a href="https://dylanmeeus.github.io/posts/audio-from-scratch-pt11">last post</a> I ended by saying we
would be able to use <a href="https://github.com/DylanMeeus/GoAudio">GoAudio</a> to generate some simple tunes.
In this post we will actually put that to the test. Click the video to hear the end result :)</p><p>Brother John / Fr√®re Jacques is a popular nursing rhyme, and also one of the few things I was taught
to play on the piano as a kid. As such, I thought it‚Äôd be fitting to try to code this song this time.
The notes for playing this are taken from <a href="https://www.true-piano-lessons.com/frere-jacques.html">true-piano-lessons.com</a>.
The code takes the notes starting in the key of C. (Maybe since it‚Äôs in Go, I should have started in G. Feel free to change it).</p><p>In the previous posts, we actually ignored the problem of turning notes into frequencies.
<a href="https://github.com/DylanMeeus/GoAudio">GoAudio</a> works with given frequencies. So we‚Äôll need to
first implement a way to turn the notes into frequencies. For this, I came up with a somewhat
hackish solution but I didn‚Äôt know a better way other than hardcoding it.</p><p>As we‚Äôre making the music using the equal-tempered scale we can calculate the frequencies for each
note given a reference frequency. I‚Äôm using <code>middle C</code> as the reference frequency, which can be
derived from <code>concert A (A440</code>) in this way: <code>middleC = (concertA * math.Pow(2, 3/12)) / 2</code>.</p><p>To follow along with how we derive the frequencies for each note, I suggest taking a look at
<a href="https://en.wikipedia.org/wiki/Equal_temperament">wikipedia</a>. The basic idea however is that we have
12 semitones in an octave, so for each octave we have to generate the 12 semitones based off a
reference frequency. Confusingly however, an octave starts at <code>C</code> and not at <code>A</code>. (it does loop
around) so we get: <code>C D E F G A B</code>. Each time we loop around and get back to C, we move up one
octave (meaning higher frequency, thus higher pitch).</p><p>You can view a table of all frequencies from C0 (C at octave 0) up to B8 (B at octave 8)
<a href="https://pages.mtu.edu/~suits/notefreqs.html">here</a>.</p><p>The code for this is a bit hacky, so if you have a better way please let me know! :-)</p><p>Here I am generating in both the fourth and fifth octave, from C4 -&gt; B5. If we print the map
generated by this code we get (abbreviated)</p><p>Also note that I have added <code>WAIT</code> with frequency 0 in there. This is a bit hacky (and unnecessary
in Go). I‚Äôve added this so we can have some more wait time between playing different sections of the song.
As the default-zero value of a float is zero, and because you can access a map safely even when a
key is missing, this was not necessary. We could just call the map with the <code>WAIT</code> key even if it
wasn‚Äôt inserted and our result would still be correct.</p><p>If you‚Äôre reading this, there‚Äôs a pretty good chance you know this. But I wanted to highlight it, as
I think this is a pretty cool feature of Go! Yet, in this case, I chose to be explicit about the
intend of the <code>WAIT</code> note.</p><p>Alright, so we have our notes and our frequencies associated with them. We still need to actually
generate a wave. For this I‚Äôve introduced the convenience function ‚Äúplay‚Äù which takes a few
parameters and returns a frame:</p><p>This is quite similar to the past about
<a href="https://dylanmeeus.github.io.posts/audio-from-scratch-pt10.md">ADSR</a>, and just as in that post we
will apply the ADSR envelope to the signal here as well. Notice that ‚Äòplay‚Äô takes a <code>LookupOscillator</code>.
In the previous post we‚Äôve build a few of these for generating sine waves, triangle, square, etc.</p><p>This function tells us, play a note for a certain duration (in seconds) with a given oscillator, and
return a slice of frames. This function allowed me to quickly change the type of wave, and play
around with the result of playing different notes for different timespans.</p><p>Getting the ADSR envelope to sound like I wanted to was honestly the goold old way of trial and error. üòÖ.</p><p>Finally we have everything ready to compose the song. The below code is definitely not pretty, but it gets the job done!
First we generate the notes, then we create a wave table of a shape that we‚Äôd like. We
plug this into an Oscillator, and then we start calling the <code>Play</code> function with the notes that we
need.</p><p>For convenience I‚Äôve added some variables to easily adapt the duration of sections of the song.
Variables, yeah!</p><div><div>
<table><tbody><tr><td>
<pre><code><span> 1
</span><span> 2
</span><span> 3
</span><span> 4
</span><span> 5
</span><span> 6
</span><span> 7
</span><span> 8
</span><span> 9
</span><span>10
</span><span>11
</span><span>12
</span><span>13
</span><span>14
</span><span>15
</span><span>16
</span><span>17
</span><span>18
</span><span>19
</span><span>20
</span><span>21
</span><span>22
</span><span>23
</span><span>24
</span><span>25
</span><span>26
</span><span>27
</span><span>28
</span><span>29
</span><span>30
</span><span>31
</span><span>32
</span><span>33
</span><span>34
</span><span>35
</span><span>36
</span><span>37
</span><span>38
</span><span>39
</span><span>40
</span><span>41
</span><span>42
</span><span>43
</span><span>44
</span><span>45
</span><span>46
</span><span>47
</span><span>48
</span><span>49
</span><span>50
</span><span>51
</span><span>52
</span><span>53
</span><span>54
</span><span>55
</span><span>56
</span><span>57
</span><span>58
</span><span>59
</span><span>60
</span><span>61
</span><span>62
</span><span>63
</span><span>64
</span></code></pre></td>
<td>
<pre><code data-lang="go"><span>func</span> <span>main</span>() {
	<span>nm</span> <span>:=</span> <span>generateNotes</span>()
	<span>st</span>, <span>err</span> <span>:=</span> <span>synth</span>.<span>NewTriangleTable</span>(<span>8</span><span>*</span><span>1024</span>, <span>11</span>)
	<span>if</span> <span>err</span> <span>!=</span> <span>nil</span> {
		panic(<span>err</span>)
	}
	<span>osc</span>, <span>err</span> <span>:=</span> <span>synth</span>.<span>NewLookupOscillator</span>(<span>sr</span>, <span>st</span>, <span>0</span>)
	<span>if</span> <span>err</span> <span>!=</span> <span>nil</span> {
		panic(<span>err</span>)
	}

	<span>waitdur</span> <span>:=</span> <span>.1</span>
	<span>cdecdur</span> <span>:=</span> <span>0.6</span>
	<span>efgdur</span> <span>:=</span> <span>0.6</span>
	<span>gagfecdur</span> <span>:=</span> <span>0.5</span>
	<span>cgcdur</span> <span>:=</span> <span>0.5</span>

	<span>// notes: https://www.true-piano-lessons.com/frere-jacques.html
</span><span></span>	<span>output</span> <span>:=</span> []<span>wave</span>.<span>Frame</span>{}
	<span>// frere jacues
</span><span></span>	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"C5"</span>, <span>cdecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"D5"</span>, <span>cdecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"E5"</span>, <span>cdecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"C5"</span>, <span>cdecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"C5"</span>, <span>cdecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"D5"</span>, <span>cdecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"E5"</span>, <span>cdecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"C5"</span>, <span>cdecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"WAIT"</span>, <span>waitdur</span>, <span>nm</span>)<span>...</span>)
	<span>// dormez-vous
</span><span></span>	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"E5"</span>, <span>efgdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"F5"</span>, <span>efgdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"G5"</span>, <span>efgdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"WAIT"</span>, <span>0.2</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"E5"</span>, <span>efgdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"F5"</span>, <span>efgdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"G5"</span>, <span>efgdur</span>, <span>nm</span>)<span>...</span>)
	<span>// sonnez les matines
</span><span></span>	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"G5"</span>, <span>gagfecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"A5"</span>, <span>gagfecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"G5"</span>, <span>gagfecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"F5"</span>, <span>gagfecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"E5"</span>, <span>gagfecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"C5"</span>, <span>gagfecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"WAIT"</span>, <span>0.2</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"G5"</span>, <span>gagfecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"A5"</span>, <span>gagfecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"G5"</span>, <span>gagfecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"F5"</span>, <span>gagfecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"E5"</span>, <span>gagfecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"C5"</span>, <span>gagfecdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"WAIT"</span>, <span>gagfecdur</span>, <span>nm</span>)<span>...</span>)
	<span>// dindindon
</span><span></span>	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"C5"</span>, <span>cgcdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"G5"</span>, <span>cgcdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"C5"</span>, <span>cgcdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"WAIT"</span>, <span>0.1</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"C5"</span>, <span>cgcdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"G5"</span>, <span>cgcdur</span>, <span>nm</span>)<span>...</span>)
	<span>output</span> = append(<span>output</span>, <span>play</span>(<span>osc</span>, <span>"C5"</span>, <span>cgcdur</span>, <span>nm</span>)<span>...</span>)

	<span>wfmt</span> <span>:=</span> <span>wave</span>.<span>NewWaveFmt</span>(<span>1</span>, <span>1</span>, <span>sr</span>, <span>16</span>, <span>nil</span>)
	<span>wave</span>.<span>WriteFrames</span>(<span>output</span>, <span>wfmt</span>, <span>"frerejacques.wav"</span>)
}
</code></pre></td></tr></tbody></table>
</div>
</div><p>If you liked this and want to know when I write new posts, the best way to keep up to date is by <a href="https://twitter.com/DylanMeeus">following me on
twitter</a>.</p></div>]]>
            </description>
            <link>https://dylanmeeus.github.io/posts/audio-from-scratch-pt12/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24490167</guid>
            <pubDate>Wed, 16 Sep 2020 06:47:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Reusability Fallacy]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24490138">thread link</a>) | @krallistic
<br/>
September 15, 2020 | https://www.ufried.com/blog/reusability_fallacy_1/ | <a href="https://web.archive.org/web/*/https://www.ufried.com/blog/reusability_fallacy_1/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">
    
<p>After several posts discussing different aspects of IT as a whole, I would like to start discussing another thread of thinking: software architecture. This is a huge topic and I pondered for quite a while where to start. Finally, I decided to start with debunking the long-lived architectural myth of reusability because this makes it easier to understand some of the ideas that I will discuss in later posts.</p>
<p>Reusability is a recurring topic that I discuss for lots of years meanwhile:</p>
<ul>
<li>One of my first public talks discussed reusability <sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup>.</li>
<li>I wrote an article about reusability for a (German) IT journal at the same time.</li>
<li>Some years later I published a <a href="https://blog.codecentric.de/en/2015/10/the-broken-promise-of-re-use/">post</a> discussing reusability on the blog of <a href="https://www.codecentric.de/">codecentric AG</a>.</li>
<li>I discuss this topic in many of my talks and workshops, especially in the context of service design.</li>
</ul>
<p>Yet, all these places only discuss selected aspects of the reusability fallacy. Here I try to brings those aspects together and discuss reusability in a more comprehensive way ‚Äì probably still missing some relevant facets.</p>
<h2 id="the-fallacy">The fallacy</h2>
<p>Reusability is sort of a holy grail in software architecture and design for many years. The discussion about reusable software modules <sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup> gained momentum in the early 1970s. E.g., the seminal computer science paper <a href="https://ieeexplore.ieee.org/document/5388187">‚ÄúStructured design‚Äù</a> by Stevens, Myers and Constantine from 1974 already discussed reusability as one of the goals of structured design. <sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup></p>
<p>This discussion persists until today. And admittedly, the idea is intriguing: I create a software module once and as there are basically no reproduction costs in software, I can reuse it at no cost in as many places as I want. Invest once, harvest forever. What an efficiency lever! What a cost saver!</p>
<p>Hence, it is not surprising that generations of IT managers demand reusability as essential design goal, and their high priests, the architects in return try hard to deliver reusability. Over time this yearning for reusability has become independent. Nobody asks anymore if reusability makes sense in the given context. Reusability is important. Period!</p>
<p>Eventually, it even turned around: architects discovered that they can use reusability as a powerful sales argument for the introduction of new architectural paradigms. It was not necessary that they proved their claim. Simply arguing with reusability was enough to convince IT managers of the new paradigm. The typical reasoning was (and still is) as follows:</p>
<blockquote>
<p>We definitely need to invest in implementing &lt;shiny new paradigm&gt;. I know this does not create any business value now, but it allows to create <strong>reusable</strong> &lt;building blocks of paradigm&gt;! This way, we will have to pay a lot less for future projects, they will be a lot faster and we will be a lot more flexible. <em>The investment will pay for itself in no time!</em>√¢‚Ç¨ÔøΩ</p>
</blockquote>
<p>From all that I have seen in my IT career, it never worked this way ‚Äì and I am very sure, it also never will work in the future.</p>
<h2 id="a-deeply-industrial-belief">A deeply industrial belief</h2>
<p>The reason why it never works this way, has several facets. First of all, reusability is a deeply industrial belief. In the physical world, reusability is mostly interchangeable with standardization. Standardized parts support building the product at a lower price and can easily be reused in multiple products. On the other hand, any part that is designed with reusability in mind is a candidate for becoming a standardized part.</p>
<p>The key aspect of reusability/standardization in the physical world is that it helps to save costs over time. You need to spend the efforts to design the part only once. The production process needs to be designed and set up only once. The required tooling needs to be created and installed only once. Afterwards you can produce as many copies of the part as you like without having to repeat the design and setup investments.</p>
<p>This way, reusability helps satisfying the key success criterion of <a href="https://ufried.com/blog/markets/#industrial-markets">industrial markets</a>: scale production in a cost-efficient way. A big part of the cost savings comes from the production of the parts, that you can produce lots of them without having to design and set up the production process and tooling over and over again.</p>
<p>If you additionally create the part in a way that it can be (re)used in different contexts, you can produce an even higher quantity which helps spreading the fixed costs for design and setup even further, i.e., the part becomes even cheaper (in terms of costs, not quality).</p>
<p>Thus, consistently aiming for reusability makes a lot of sense in the physical world where you create houses, bridges, furniture, electronic devices, etc. from reusable parts. But transferring this idea of cost savings via reusability to software development is riddled with several caveats.</p>
<h2 id="implementation-is-part-of-design-not-production">Implementation is part of design, not production</h2>
<p>The first persistent misunderstanding is that writing code can be compared to building a house or assembling a car. The idea is that software architecture and design work can be compared to designing a car or house and writing code is executing the plan, i.e., assembling the final product.</p>
<p>Unfortunately, this perception is completely wrong. The final product in software development is the executable program. We usually create it by compiling the source code <sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup>. In other words: IT has the probably most efficient production process imaginable for more than 60 years meanwhile ‚Äì so efficient, that we usually completely forget about it.</p>
<p>Today, this production process typically is a step in a CI/CD pipeline, but it does not change the fact that we build our products in an extremely efficient way without any human intervention.</p>
<p>Writing code on the other hand is completing the design. The product design is only completed after the last line of source code is written. Writing code is like adding the details of a car design, designing the details of the shape, the interior design, the power transmission and so on ‚Äì everything that needs to be done <em>before</em> a car can be produced. Producing the actual product, the executable program from the code is negligible in terms of time, costs and effort.</p>
<blockquote>
<p>Writing code is completing the design.</p>
<p>Building the product from the completed design is just issuing a command (and has nothing to do with writing code).</p>
</blockquote>
<p>Thus, all those metaphors that compare writing code with assembling a car or building a house are wrong.</p>
<p>This also means that the assumption derived from the physical world breaks that we can save lots of money in the production process by using reusable parts. The production process in IT is already unbelievable cheap compared to any physical domain. Additionally, we can produce as many copies of a part at basically zero cost: it is called the copy command.</p>
<p>Accordingly, all considerations that are based on the value of reusability in the physical world do not work in IT as reusability in software development does not help to save money in the production process.</p>
<h2 id="the-inherent-lack-of-standardization-in-it">The inherent lack of standardization in IT</h2>
<p>This still leaves room for efficiency gains through reusability in the design process. To (mis)use the metaphor of automobiles once more: Many car manufacturers use a platform strategy these days, i.e., they reuse a lot of standardized base parts in their car designs. E.g., they do not design the engines or chassis from scratch for every new model they design, but reuse engines or chassis from their platform, complementing them with parts individually designed for the specific model.</p>
<p>While this platform approach of reusing parts again primarily targets cost savings on the production side (which is not relevant in IT, as we have seen in the last section), it probably also helps to reduce time, costs and effort in the design process.</p>
<p>We can apply this idea to software development: The more reusable parts we can use in our design, i.e., software development process, the more time, costs and effort we can probably save.</p>
<p>This is where another peculiarity of IT strikes.</p>
<p>In his famous essay <a href="https://www.researchgate.net/publication/220477127_No_Silver_Bullet_Essence_and_Accidents_of_Software_Engineering">‚ÄúNo silver bullet‚Äù</a> <sup id="fnref:5"><a href="#fn:5" role="doc-noteref">5</a></sup>, Fred Brooks reasons about essential and accidental complexity in software development. One of the drivers of essential complexity he lists is ‚Äúcomplexity‚Äù:</p>
<blockquote>
<p>Complexity. Software entities are more complex for their size than perhaps any other human construct, because no two parts are alike (at least above the statement level). If they are, we make the two similar parts into one, a subroutine, open or closed. In this respect software systems differ profoundly from computers, buildings, or automobiles, where repeated elements abound. [‚Ä¶] Likewise, a scaling-up of a software entity is not merely a repetition of the same elements in larger size; it is necessarily an increase in the number of different elements.</p>
</blockquote>
<p>First of all, Brooks clearly rejects the idea that we can design a software solution from a set of higher-level standardized building blocks in the same way as we can design a wall by arranging the same type of brick multiple times. Each part we use will be different from all other parts.</p>
<p>Yet, while making the case against standardized building blocks, Brooks still leaves room for reuse: he states each part in our solution will be different, but we may use a part several times from higher-level contexts. Following this idea, we reuse lower-level functionalities to support higher-level functionalities.</p>
<h2 id="what-is-left-for-reusability">What is left for reusability</h2>
<p>In this post, I tried to deconstruct a part of the reusability fallacy: the fallacy that we can save lots of money from a more efficient production process by using standardized, reusable parts. Software development is all about design. The design is only completed after the last line of code is written.</p>
<p>The actual production process, i.e., creating the executable program, is so efficient and cheap that there is nothing left to save. Thus, all the reusability approaches that take concepts from the physical world and try to apply them to software development do not work.</p>
<p>We are left with efficiency gains in the design process itself due to the use of reusable parts. In the <a href="https://ufried.com/blog/reusability_fallacy_2/">next part of this little series</a> ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.ufried.com/blog/reusability_fallacy_1/">https://www.ufried.com/blog/reusability_fallacy_1/</a></em></p>]]>
            </description>
            <link>https://www.ufried.com/blog/reusability_fallacy_1/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24490138</guid>
            <pubDate>Wed, 16 Sep 2020 06:41:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Kontrast Is a Contrast Checker]]>
            </title>
            <description>
<![CDATA[
Score 11 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24490131">thread link</a>) | @_ZeD_
<br/>
September 15, 2020 | https://carlschwan.eu/2020/09/15/kontrast-1.0.html | <a href="https://web.archive.org/web/*/https://carlschwan.eu/2020/09/15/kontrast-1.0.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <article>
  <header>
    
    
    <p>
      September 15, 2020
      
    </p>
    
  </header>
  <section><p>Kontrast is a contrast checker available for desktop and mobile devices. You can
use Kontrast to choose background and text color combinations for your website or
app that your users will find easy to read. Kontrast can help you improve the
accessibility for your site or app for people with vision problems.</p>

<p>Kontrast won‚Äôt catch all the problems, but it should still be very helpful to catch
many issues early on, when designing your interface.</p>

<p>I released the first version of Kontrast earlier this month.</p>

<p><img src="https://cdn.kde.org/screenshots/kontrast/kontrast.png" alt="Kontrast main page"></p>

<p>Another big feature of Kontrast is the possibility to generate random color
combinations with good contrast. These colors can be saved in the application itself,
so that you can keep a particularly good color combination for later use.</p>

<p>Kontrast is available for the Linux desktop, <a href="https://plasma-mobile.org/">Plasma Mobile</a> and
there is also a Beta version for Android.</p>

<p>This application is built using the excellent <a href="https://develop.kde.org/frameworks/kirigami">Kirigami</a>
framework.</p>

<p><img src="https://cdn.kde.org/screenshots/kontrast/kontrat_mobile.png" alt="Kontrast mobile view"></p>

<p>You can download and install Kontrast from <a href="https://flathub.org/apps/details/org.kde.kontrast">Flathub</a> and
a nightly build is also available <a href="https://binary-factory.kde.org/job/Kontrast_android/">in binary factory</a>.</p>

<p>The tarball is available <a href="https://download.kde.org/stable/kontrast/kontrast-1.0.2.tar.xz">here</a>
and is signed with my gpg key <a href="https://carlschwan.eu/gpg.html">14B0ED91B5783415D0AA1E0A06B35D38387B67BE</a>.</p>

<h2 id="future-improvements">Future Improvements</h2>

<p>Future plans include improving the Android build, possibly release a stable
build of the Android version and also create a QtQuick-based color picker
that is better integrated with the application.</p>
</section>
  

</article>

<!-- Post navigation -->


    </div></div>]]>
            </description>
            <link>https://carlschwan.eu/2020/09/15/kontrast-1.0.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24490131</guid>
            <pubDate>Wed, 16 Sep 2020 06:40:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Compiling a Lisp to x86-64: Primitive binary functions]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24490108">thread link</a>) | @tekknolagi
<br/>
September 15, 2020 | https://bernsteinbear.com/blog/compiling-a-lisp-5/ | <a href="https://web.archive.org/web/*/https://bernsteinbear.com/blog/compiling-a-lisp-5/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <p><em><a href="https://bernsteinbear.com/blog/compiling-a-lisp-0/">first</a></em> ‚Äì <em><a href="https://bernsteinbear.com/blog/compiling-a-lisp-4/">previous</a></em></p>

<p>Welcome back to the ‚ÄúCompiling a Lisp‚Äù series. Last time, we added some
primitive unary instructions like <code>add1</code> and <code>integer-&gt;char</code>. This time, we‚Äôre
going to add some primitive <em>binary</em> functions like <code>+</code> and <code>&lt;</code>. After this
post, we‚Äôll be able to compile programs like:</p>



<p>Note that these expressions may look like function calls but, like last
chapter, they are not opening new stack frames (which I‚Äôll explain more about
later). Instead, the compiler will recognize that the programmer is directly
applying the symbol <code>+</code> and generate special code. You can think about this
kind of like an inlined function call.</p>

<p>It‚Äôs important to remember that the compiler has a certain internal contract:
the result of any given compiled expression is stored in <code>rax</code>. This isn‚Äôt some
intrinsic property of all compilers, but it‚Äôs one we‚Äôve kept so far in this
series.</p>

<blockquote>
  <p>This is similar to but not the same as the calling convention that I
mentioned earlier, where function results are stored in <code>rax</code>. That calling
convention is for interacting with other people‚Äôs code. Within your own
generated code, there are no rules. So we could pick any other register,
really, for storing intermediate results.</p>
</blockquote>

<p>Now that we‚Äôre building primitive functions that can take two arguments, you
might notice a problem: our strategy of storing the result in <code>rax</code> won‚Äôt work
on its own. If we were to na√Øvely write something like the following to
implement <code>+</code>, then <code>rax</code> would get overwritten in the code generated by
compiling <code>operand1(args)</code>:</p>

<div><div><pre><code><span>int</span> <span>Compile_call</span><span>(</span><span>Buffer</span> <span>*</span><span>buf</span><span>,</span> <span>ASTNode</span> <span>*</span><span>callable</span><span>,</span> <span>ASTNode</span> <span>*</span><span>args</span><span>)</span> <span>{</span>
  <span>if</span> <span>(</span><span>AST_is_symbol</span><span>(</span><span>callable</span><span>))</span> <span>{</span>
    <span>// ...</span>
    <span>if</span> <span>(</span><span>AST_symbol_matches</span><span>(</span><span>callable</span><span>,</span> <span>"+"</span><span>))</span> <span>{</span>
      <span>_</span><span>(</span><span>Compile_expr</span><span>(</span><span>buf</span><span>,</span> <span>operand2</span><span>(</span><span>args</span><span>)));</span>
      <span>// The result of this is stored in rax ^</span>
      <span>_</span><span>(</span><span>Compile_expr</span><span>(</span><span>buf</span><span>,</span> <span>operand1</span><span>(</span><span>args</span><span>)));</span>
      <span>// Oops, we just overwrote rax ^</span>
      <span>Emit_add_something</span><span>(</span><span>buf</span><span>,</span> <span>/*dst=*/</span><span>kRax</span><span>));</span>
      <span>return</span> <span>0</span><span>;</span>
    <span>}</span>
    <span>// ...</span>
  <span>}</span>
  <span>// ...</span>
<span>}</span>
</code></pre></div></div>

<p>We could try and work around this by adding some kind of register allocation
algorithm and take advantage of <code>rcx</code>, <code>rdx</code>, etc. Or, simpler, we could decide
to allocate all intermediate values on the stack and move on with our lives. I
prefer the latter. It‚Äôs simpler.</p>

<h3 id="stack-background-info">Stack background info</h3>

<p>Since we can‚Äôt yet save our compiled programs to disk, there‚Äôs some amount of
setup that has to happen before they‚Äôre run. Right now, the C programs I‚Äôm
providing along with this series compile to binaries that just run the test
suites for the compiler. They don‚Äôt actually run full programs. For this
reason, there are already some call frames on the stack by the time our
generated code is run.</p>

<p>Let‚Äôs take a look at the stack at the moment we enter a compiled Lisp program:</p>

<div><div><pre><code>|                  | High addresses
+------------------+
|  main            |
+------------------+ |
|  ~ some data ~   | |
|  ~ some data ~   | |
+------------------+ |
|  compile_test    | |
+------------------+ |
|  ~ some data ~   | |
|  ~ some data ~   | v
+------------------+
|  Testing_exe...  | rsp (stack pointer)
+------------------+
|                  | &lt;-- Our frame!
|                  | Low addresses
</code></pre></div></div>

<p>In this diagram, we have the C program‚Äôs <code>main</code> function, which has its own
local variables and so on. Then the <code>main</code> function calls the <code>compile_test</code>
unit suite. This in turn calls this <code>Testing_execute_expr</code> function
(abbreviated in the diagram), which is responsible for calling into our
generated code. Every call stores the return address (some place to find the
next instruction to execute) on the stack and adjusts <code>rsp</code> down.</p>

<blockquote>
  <p>Refresher: the call stack grows <em>down</em>. Why? Check out this <a href="https://stackoverflow.com/a/54391533/569183">StackOverflow
answer</a> that quotes an architect
on the Intel 4004 and 8080 architectures. It‚Äôs stayed the same ever since.</p>
</blockquote>

<p>In this diagram, we have <code>rsp</code> pointing at a return address somewhere inside
the function <code>Testing_execute_expr</code>, since that‚Äôs what called our Lisp
entrypoint. We have some data ‚Äúabove‚Äù (higher addresses) <code>rsp</code> that we‚Äôre not
allowed to poke at, and we have this empty space ‚Äúbelow‚Äù (lower addresses)
<code>rsp</code> that is in our current <em>stack frame</em>. I say ‚Äúempty‚Äù because we haven‚Äôt
yet stored anything there, not because it‚Äôs necessarily zero-ed out.  I don‚Äôt
think there are any guarantees about the values in this stack frame.</p>

<p>We can use our stack frame to write and read values for our current Lisp
program. With every recursive subexpression, we can allocate a little more
stack space to keep track of the values. When I say ‚Äúallocate‚Äù, I mean
‚Äúsubtract from the stack pointer‚Äù, because the stack is already a contiguous
space in memory allocated for us. For example, here is how we can write to the
stack:</p>



<p>This puts the integer <code>4</code> at displacement <code>-8</code> from <code>rsp</code>. On the stack diagram
above, it would be at the slot labeled ‚ÄúOur frame‚Äù. It‚Äôs also possible to read
with a positive or zero displacement, but those point to previous stack frames
and the return address, respectively. So let‚Äôs avoid manipulating those.</p>

<blockquote>
  <p>Note that I used a multiple of 8. Not every store has to be a to an address
that is a multiple of 8, but it is natural and I think also <em>faster</em> to store
8-byte-sized things at aligned addresses.</p>
</blockquote>

<p>Let‚Äôs walk through a real example to get more hands-on experience with this
stack storage idea. We‚Äôll use the program <code>(+ 1 2)</code>. The compiled version of
that program should:</p>

<ul>
  <li>Move <code>compile(2)</code> to <code>rax</code></li>
  <li>Move <code>rax</code> into <code>[rsp-8]</code></li>
  <li>Move <code>compile(1)</code> to <code>rax</code></li>
  <li>Add <code>[rsp-8]</code> to <code>rax</code></li>
</ul>

<p>So after compiling that, the stack will look like this:</p>

<div><div><pre><code>|                  | High addresses
+------------------+
|  Testing_exe...  | RSP
+------------------+
|  0x8             | RSP-8 (result of compile(2))
|                  | Low addresses
</code></pre></div></div>

<p>And the result will be in <code>rax</code>, per our internal compiler contract.</p>

<p>This is all well and good, but at some point we‚Äôll need our compiled programs
to emit the <code>push</code> instruction or make function calls of their own. Both of
these modify the stack pointer. <code>push</code> writes to the stack and decrements
<code>rsp</code>. <code>call</code> is roughly equivalent to <code>push</code> followed by <code>jmp</code>.</p>

<p>For that reason, x86-64 comes with another register called <code>rbp</code> and it‚Äôs
designed to hold the Base Pointer. While the stack pointer is supposed to track
the ‚Äútop‚Äù (low address) of the stack, the base pointer is meant to keep a
pointer around to the ‚Äúbottom‚Äù (high address) of our current stack frame.</p>

<p>This is why in a lot of compiled code you see the following instructions
repeated<sup id="fnref:1" role="doc-noteref"><a href="#fn:1">1</a></sup>:</p>

<div><div><pre><code><span>myfunction:</span>
<span>push</span> <span>rbp</span>
<span>mov</span> <span>rbp</span><span>,</span> <span>rsp</span>
<span>sub</span> <span>rsp</span><span>,</span> <span>N</span>  <span>; optional; allocate stack space for locals</span>
<span>; ... function body ...</span>
<span>mov</span> <span>rsp</span><span>,</span> <span>rbp</span>  <span>; required if you subtracted from rsp above</span>
<span>pop</span> <span>rbp</span>
<span>ret</span>
</code></pre></div></div>

<p>The first three instructions, called the <em>prologue</em>, save <code>rbp</code> to the stack,
and then set <code>rbp</code> to the current stack pointer. Then it‚Äôs possible to maintain
steady references to variable locations on the stack even as <code>rsp</code> changes.
Yes, the compiler could adjust its internal table of references every time the
compiler emits code that modifies <code>rsp</code>, but that sounds much harder.</p>

<p>The last three instructions, called the <em>epilogue</em>, fetch the old <code>rbp</code> that we
saved to the stack, write it back into <code>rbp</code>, then exit the call.</p>

<p>To confirm this for yourself, check out this <a href="https://godbolt.org/z/qPM8Mh">sample compiled C
code</a>. Look at the disassembly following the
label <code>square</code>. Prologue, code, epilogue.</p>

<h3 id="stack-allocation-infrastructure">Stack allocation infrastructure</h3>

<p>Until now, we haven‚Äôt needed to keep track of much as we recursively traverse
expression trees. Now, in order to keep track of how much space on the stack
any given compiled code will need, we have to add more state to our compiler.
We‚Äôll call this state the <code>stack_index</code> ‚Äî Ghuloum calls it <code>si</code> ‚Äî and we‚Äôll
pass it around as a parameter. Whatever it‚Äôs called, it points to the first
writable (unused) index in the stack at any given point.</p>

<p>In compiled functions, the first writable index is <code>-kWordSize</code> (<code>-8</code>), since
the base pointers is already at <code>0</code>.</p>

<div><div><pre><code><span>int</span> <span>Compile_function</span><span>(</span><span>Buffer</span> <span>*</span><span>buf</span><span>,</span> <span>ASTNode</span> <span>*</span><span>node</span><span>)</span> <span>{</span>
  <span>Buffer_write_arr</span><span>(</span><span>buf</span><span>,</span> <span>kFunctionPrologue</span><span>,</span> <span>sizeof</span> <span>kFunctionPrologue</span><span>);</span>
  <span>_</span><span>(</span><span>Compile_expr</span><span>(</span><span>buf</span><span>,</span> <span>node</span><span>,</span> <span>-</span><span>kWordSize</span><span>));</span>
  <span>Buffer_write_arr</span><span>(</span><span>buf</span><span>,</span> <span>kFunctionEpilogue</span><span>,</span> <span>sizeof</span> <span>kFunctionEpilogue</span><span>);</span>
  <span>return</span> <span>0</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>I‚Äôve also gone ahead and added the prologue and epilogue. They‚Äôre stored in
static arrays. This makes them easier to modify, and also makes them accessible
to testing helpers. The testing helpers can use these arrays to make testing
easier for us ‚Äî we can check if our expected code is book-ended by this code.</p>

<div><div><pre><code><span>static</span> <span>const</span> <span>byte</span> <span>kFunctionPrologue</span><span>[]</span> <span>=</span> <span>{</span>
    <span>// push rbp</span>
    <span>0x55</span><span>,</span>
    <span>// mov rbp, rsp</span>
    <span>kRexPrefix</span><span>,</span> <span>0x89</span><span>,</span> <span>0xe5</span><span>,</span>
<span>};</span>

<span>static</span> <span>const</span> <span>byte</span> <span>kFunctionEpilogue</span><span>[]</span> <span>=</span> <span>{</span>
    <span>// pop rbp</span>
    <span>0x5d</span><span>,</span>
    <span>// ret</span>
    <span>0xc3</span><span>,</span>
<span>};</span>
</code></pre></div></div>

<p>For <code>Compile_expr</code>, we just pass this new stack index through.</p>

<div><div><pre><code><span>int</span> <span>Compile_expr</span><span>(</span><span>Buffer</span> <span>*</span><span>buf</span><span>,</span> <span>ASTNode</span> <span>*</span><span>node</span><span>,</span> <span>word</span> <span>stack_index</span><span>)</span> <span>{</span>
  <span>// ...</span>
  <span>if</span> <span>(</span><span>AST_is_pair</span><span>(</span><span>node</span><span>))</span> <span>{</span>
    <span>return</span> <span>Compile_call</span><span>(</span><span>buf</span><span>,</span> <span>AST_pair_car</span><span>(</span><span>node</span><span>),</span> <span>AST_pair_cdr</span><span>(</span><span>node</span><span>),</span>
                        <span>stack_index</span><span>);</span>
  <span>}</span>
  <span>// ...</span>
<span>}</span>
</code></pre></div></div>

<p>And for <code>Compile_call</code>, we actually get to use it. Let‚Äôs look back at our stack
storage strategy for compiling <code>(+ 1 2)</code> (now replacing <code>rsp</code> with <code>rbp</code>):</p>

<ul>
  <li>Move <code>compile(2)</code> to <code>rax</code></li>
  <li>Move <code>rax</code> into <code>[rbp-8]</code></li>
  <li>Move <code>compile(1)</code> to <code>rax</code></li>
  <li>Add <code>[rbp-8]</code> to <code>rax</code></li>
</ul>

<p>For binary functions, this can be generalized to:</p>

<ul>
  <li>Compile <code>arg2</code> (stored in <code>rax</code>)</li>
  <li>Move <code>rax</code> to <code>stack_index</code></li>
  <li>Compile <code>arg1</code> (stored in <code>rax</code>)</li>
  <li>Do something with the results (in <code>[rbp-stack_index]</code> and <code>rax</code>)</li>
</ul>

<p>The key is this: for the first recursive call to <code>Compile_expr</code>, the compiler
is allowed to emit code that can use the current <code>stack_index</code> and anything
below that on the stack. For the <em>second</em> recursive call to <code>Compile_expr</code>, the
compiler has to bump <code>stack_index</code>, since we‚Äôve stored the result of the first
compiled call at <code>stack_index</code>.</p>

<p>Take a look at our implementation of binary add:</p>

<div><div><pre><code><span>int</span> <span>Compile_call</span><span>(</span><span>Buffer</span> <span>*</span><span>buf</span><span>,</span> <span>ASTNode</span> <span>*</span><span>callable</span><span>,</span> <span>ASTNode</span> <span>*</span><span>args</span><span>,</span>
                 <span>word</span> <span>stack_index</span><span>)</span> <span>{</span>
  <span>if</span> <span>(</span><span>AST_is_symbol</span><span>(</span><span>callable</span><span>))</span> <span>{</span>
    <span>// ...</span>
    <span>if</span> <span>(</span><span>AST_symbol_matches</span><span>(</span><span>callable</span><span>,</span> <span>"+"</span><span>))</span> <span>{</span>
      <span>_</span><span>(</span><span>Compile_expr</span><span>(</span><span>buf</span><span>,</span> <span>operand2</span><span>(</span><span>args</span><span>),</span> <span>stack_index</span><span>));</span>
      <span>Emit_store_reg_indirect</span><span>(</span><span>buf</span><span>,</span> <span>/*dst=*/</span><span>Ind</span><span>(</span>‚Ä¶</code></pre></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://bernsteinbear.com/blog/compiling-a-lisp-5/">https://bernsteinbear.com/blog/compiling-a-lisp-5/</a></em></p>]]>
            </description>
            <link>https://bernsteinbear.com/blog/compiling-a-lisp-5/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24490108</guid>
            <pubDate>Wed, 16 Sep 2020 06:34:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Bazel For Open-Source C/C++ Libraries Distribution]]>
            </title>
            <description>
<![CDATA[
Score 64 | Comments 68 (<a href="https://news.ycombinator.com/item?id=24490089">thread link</a>) | @todsacerdoti
<br/>
September 15, 2020 | https://liuliu.me/eyes/bazel-for-libraries-distribution-an-open-source-library-author-perspective/ | <a href="https://web.archive.org/web/*/https://liuliu.me/eyes/bazel-for-libraries-distribution-an-open-source-library-author-perspective/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>In the past a few days, I‚Äôve been experimenting with Bazel as a library distribution mechanism for <a href="https://github.com/liuliu/ccv">ccv</a>.</p>

<p>I am pretty familiar with hermetic build systems at this point. My main knowledge comes from Buck dating 8 years back. At that time, it never occurred to me such a build system could eventually be a library distribution mechanism. During the same 8 years, NPM has taken over the world. New language-dependent package managers such as Go module, Cargo and Swift Package Manager popularized the concept of using the public repositories (GitHub) as the dependency references. Languages prior to this period, mainly C / C++ are moving to this direction, slowly.</p>

<p><a href="https://github.com/liuliu/ccv">ccv</a> has a simple autoconf based feature detection / configuration system. You would expect the package to work when <code>./configure &amp;&amp; make</code>. However, it never made any serious attempt to be too smart. My initial experience with monorepos at companies strongly influenced the decision to have a simple build system. I fully expect that serious consumers will vendor the library into their monorepo using their own build systems.</p>

<p>This has been true for the past a few years. But as I am finishing up <a href="https://libnnc.org/">nnc</a> and increasingly using that for other closed-source personal projects, maintaining a closed-source <em>monorepo</em> setup for my personal projects while upstreaming fixes is quite an unpleasant experience. On the other hand, <a href="https://libnnc.org/">nnc</a> from the beginning meant to be a low-level implementation. I am expected to have high-level language bindings at some point. Given that I am doing more application-related development with <a href="https://libnnc.org/">nnc</a> in closed-source format now, it feels like the right time.</p>

<p>Although there is no one-true library distribution mechanism for C / C++, there are contenders. From the good-old apt / rpm, to Conan, which has gained some mind-share in the open-source world in recent years.</p>

<p>The choice of Bazel is not accidental. I‚Äôve been doing <a href="https://liuliu.me/eyes/migrating-ios-project-to-bazel-a-real-world-experience/">some Swift development with Bazel</a> and the experience has been positive. Moreover, the choice of high-level binding language for <a href="https://libnnc.org/">nnc</a>, I figured, would be Swift.</p>

<h2 id="configure">Configure</h2>

<p><a href="https://github.com/liuliu/ccv">ccv</a>‚Äôs build process, as much as I would rather not, is host-dependent. I use autoconf to detect system-wide libraries such as libjpeg and libpng, to configure proper compiler options. Although <a href="https://github.com/liuliu/ccv">ccv</a> can be used with zero dependency, in that configuration, it can sometimes be slow.</p>

<p>Coming from the monorepo background, Bazel doesn‚Äôt have many utilities that are as readily available as in autoconf. You can write automatic configurations in Starlark as <a href="https://docs.bazel.build/versions/master/skylark/repository_rules.html">repository rules</a>, but there is no good documentation on how to write robust ones.</p>

<p>I ended up <a href="https://github.com/liuliu/ccv/blob/unstable/WORKSPACE#L25">letting whoever use ccv to decide how they are going to enable certain features</a>. For things like CUDA, such configuration is not tenable. I ended up copying over <a href="https://github.com/liuliu/rules_cuda">TensorFlow‚Äôs CUDA rules</a>.</p>

<h2 id="dependencies">Dependencies</h2>

<p>Good old C / C++ libraries are notoriously indifferent to libraries dependencies v.s. toolchains. Autoconf detects both toolchain configurations as well as available libraries. These types of host dependencies make cross-compilation a skill in itself.</p>

<p>Bazel is excellent for in-tree dependencies. For out-tree dependencies however, there is no established mechanism. The popular way is to write a <a href="https://github.com/protocolbuffers/protobuf/blob/master/protobuf_deps.bzl#L5">repository rules to load relevant dependencies</a>.</p>

<p>This actually works well for me. It is versatile enough to handle cases that <a href="https://github.com/liuliu/ccv/blob/unstable/config/ccv.bzl#L103">have Bazel integrations</a> and <a href="https://github.com/liuliu/dflat/blob/unstable/deps.bzl#L17">have no Bazel integrations</a>.</p>

<h2 id="consume-bazel-dependencies">Consume Bazel Dependencies</h2>

<p>Consumption of the packaged Bazel dependencies then becomes as simple as adding <code>git_repository</code> to the <code>WORKSPACE</code> and call proper <code>&lt;your_library_name&gt;_deps()</code> repository rule.</p>

<p>After packaging <a href="https://libccv.org/">ccv</a> with Bazel, now <a href="https://github.com/liuliu/s4nnc/blob/main/WORKSPACE#L3">Swift for nnc can consume the packaged dependency</a>.</p>

<h2 id="semantic-versioning-challenges">Semantic Versioning Challenges</h2>

<p>While the Bazel-provided library distribution mechanism works well for my case, it is simplistic. For one, there is really no good way to do <a href="https://semver.org/">semantic versioning</a>. It is understandable. Coming from a monorepo culture, it is challenging for anyone to dive into dependency hells of library versioning. A <a href="https://donatstudios.com/Go-v2-Modules">slightly different story happened to Go</a> a while back as well.</p>

<p>It is messy if you want to pin a specific version of the library while your dependencies are not agreeing with you. This is going to be messy regardless in C / C++ world, unless you prelink these extremely carefully. Bazel‚Äôs philosophy from what I can see, seems largely on <em>keeping the trunk working</em> side. It is working so far, but one has to wonder whether this can scale if more libraries adopted Bazel as the distribution mechanism.</p>

<h2 id="closing-words">Closing Words</h2>

<p>The past a few months experience with Bazel has been delightful. While I would continue to use language specific tools (pip, Go modules, Cargo, NPM) when doing development in that particular language, Bazel is a capable choice for me when doing cross-language development. Concepts such as <code>workspace</code>, <code>git_repository</code>, <code>http_archive</code> fit well within the larger open-source ecosystem. And most surprisingly, it works for many-repo setup if you ever need to.</p>
</div></div>]]>
            </description>
            <link>https://liuliu.me/eyes/bazel-for-libraries-distribution-an-open-source-library-author-perspective/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24490089</guid>
            <pubDate>Wed, 16 Sep 2020 06:28:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Concurrency Cost Hierarchy]]>
            </title>
            <description>
<![CDATA[
Score 144 | Comments 25 (<a href="https://news.ycombinator.com/item?id=24489829">thread link</a>) | @signa11
<br/>
September 15, 2020 | https://travisdowns.github.io/blog/2020/07/06/concurrency-costs.html | <a href="https://web.archive.org/web/*/https://travisdowns.github.io/blog/2020/07/06/concurrency-costs.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    
<!-- boilerplate 
page.assets: /assets/concurrency-costs
assetpath: /assets/concurrency-costs
tablepath: /misc/tables/concurrency-costs
-->

<h2 id="introduction">Introduction</h2>

<p>Concurrency is hard to get <em>correct</em>, at least for those of us unlucky enough to be writing in languages which expose directly the guts of concurrent hardware: threads and shared memory. Getting concurrency correct <em>and</em> fast is hard, too. Your knowledge about single-threaded optimization often won‚Äôt help you: at a micro (instruction) level we can‚Äôt simply apply the usual rules of Œºops, dependency chains, throughput limits, and so on. The rules are different.</p>

<p>If that first paragraph got your hopes up, this second one is here to dash them: I‚Äôm not actually going to do a deep dive into the very low level aspects of concurrent performance. There are a lot of things we just don‚Äôt know about how atomic instructions and fences execute, and we‚Äôll save that for another day.</p>

<p>Instead, I‚Äôm going to describe a higher level taxonomy that I use to think about concurrent performance. We‚Äôll group the performance of concurrent operations into six broad <em>levels</em> running from fast to slow, with each level differing from its neighbors by roughly an order of magnitude in performance.</p>

<p>I often find myself thinking in terms of these categories when I need high performance concurrency: what is the best level I can practically achieve for the given problem? Keeping the levels in mind is useful both during initial design (sometimes a small change in requirements or high level design can allow you to achieve a better level), and also while evaluating existing systems (to better understand existing performance and evaluate the path of least resistance to improvements).</p>

<h3 id="a-real-world-example">A ‚ÄúReal World‚Äù Example</h3>

<p>I don‚Äôt want this to be totally abstract, so we will use a real-world-if-you-squint<sup id="fnref:realworld" role="doc-noteref"><a href="#fn:realworld">1</a></sup> running example throughout: safely incrementing an integer counter across threads. By <em>safely</em> I mean without losing increments, producing out-of-thin air values, frying your RAM or making more than a minor rip in space-time.</p>

<h3 id="source-and-results">Source and Results</h3>

<p>The source for every benchmark here is <a href="https://github.com/travisdowns/concurrency-hierarchy-bench">available</a>, so you can follow along and even reproduce the results or run the benchmarks on your own hardware. All of the results discussed here (and more) are available in the same repository, and each plot includes a <code>[data table]</code> link to the specific subset used to generate the plot.</p>

<h3 id="hardware">Hardware</h3>

<p>All of the performance results are provided for several different hardware platforms: Intel Skylake, Ice Lake, Amazon Graviton and Graviton 2. However except when I explicitly mention other hardware, the prose refers to the results on Skylake. Although the specific numbers vary, most of the qualitative relationships hold for the hardware too, but <em>not always</em>. Not only does the hardware vary, but the OS and library implementations will vary as well.</p>

<p>It‚Äôs almost inevitable that this will be used to compare across hardware (‚Äúwow, Graviton 2 sure kicks Graviton 1‚Äôs ass‚Äù), but that‚Äôs not my goal here. The benchmarks are written primarily to tease apart the characteristics of the different levels, and <em>not</em> as a hardware shootout.</p>

<p>Find below the details of the hardware used:</p>

<table>
  <thead>
    <tr>
      <th>Micro-architecture</th>
      <th>ISA</th>
      <th>Model</th>
      <th>Tested Frequency</th>
      <th>Cores</th>
      <th>OS</th>
      <th>Instance Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Skylake</td>
      <td>x86</td>
      <td>i7-6700HQ</td>
      <td>2.6 GHz</td>
      <td>4</td>
      <td>Ubuntu 20.04</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Ice Lake</td>
      <td>x86</td>
      <td>i5-1035G4</td>
      <td>3.3 GHz</td>
      <td>4</td>
      <td>Ubuntu 19.10</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Graviton</td>
      <td>AArch64</td>
      <td>Cortex-A72</td>
      <td>2.3 GHz</td>
      <td>16</td>
      <td>Ubuntu 20.04</td>
      <td>a1.4xlarge</td>
    </tr>
    <tr>
      <td>Graviton 2</td>
      <td>AArch64</td>
      <td>Neoverse N1</td>
      <td>2.5 GHz</td>
      <td>16<sup id="fnref:g2cores" role="doc-noteref"><a href="#fn:g2cores">2</a></sup></td>
      <td>Ubuntu 20.04</td>
      <td>c6g.4xlarge</td>
    </tr>
  </tbody>
</table>

<h2 id="level-2-contended-atomics">Level 2: Contended Atomics</h2>

<p>You‚Äôd probably expect this hierarchy to be introduced from fast to slow, or vice-versa, but we‚Äôre all about defying expectations here and we are going to start in the <em>middle</em> and work our way outwards. The middle (rounding down) turns out to be <em>level 2</em> and that‚Äôs where we will jump in.</p>

<p>The most elementary way to safely modify any shared object is to use a lock. It mostly <em>just works</em> for any type of object, no matter its structure or the nature of the modifications. Almost any mainstream CPU from the last thirty years has some type of locking<sup id="fnref:parisc" role="doc-noteref"><a href="#fn:parisc">3</a></sup> instruction accessible to userspace.</p>

<p>So our baseline increment implementation will use a simple mutex of type <code>T</code> to protect a plain integer variable:</p>

<div><div><pre><code><span>T</span> <span>lock</span><span>;</span>
<span>uint64_t</span> <span>counter</span><span>;</span>

<span>void</span> <span>bench</span><span>(</span><span>size_t</span> <span>iters</span><span>)</span> <span>{</span>
    <span>while</span> <span>(</span><span>iters</span><span>--</span><span>)</span> <span>{</span>
        <span>std</span><span>::</span><span>lock_guard</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>holder</span><span>(</span><span>lock</span><span>);</span>
        <span>counter</span><span>++</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>We‚Äôll call this implementation <em><abbr title="Uses a std::mutex and std::lock_guard to protect a plain integer counter.">mutex add</abbr></em>, and on my 4 CPU Skylake-S i7-6700HQ machine, when I use the vanilla <code>std::mutex</code> I get the following results for 2 to 4 threads:</p>



<p>The reported value is the median of all trials, and the vertical black error lines at the top of each bar indicate the <em>interdecile range</em>, i.e., the values at the 10th and 90th percentile. Where the error bars don‚Äôt show up, it means there is no difference between the p10 and p90 values at all, at least within the limits of the reporting resolution (100 picoseconds).</p>

<p>This shows that the baseline contended cost to modify an integer protected by a lock starts at about 125 nanoseconds for two threads, and grows somewhat with increasing thread count.</p>

<p>I can already hear someone saying: <em>If you are just modifying a single 64-bit integer, skip the lock and just directly use the atomic operations that most ISAs support!</em></p>

<p>Sure, let‚Äôs add a couple of variants that do that. The <code>std::atomic&lt;T&gt;</code> template makes this easy: we can wrap any type meeting some basic requirements and then manipulate it atomically. The easiest of all is to use <code>std::atomic&lt;uint64&gt;::operator++()</code><sup id="fnref:post" role="doc-noteref"><a href="#fn:post">4</a></sup> and this gives us <em><abbr title="Uses an atomic increment on a single shared counter.">atomic add</abbr></em>:</p>

<div><div><pre><code><span>std</span><span>::</span><span>atomic</span><span>&lt;</span><span>uint64_t</span><span>&gt;</span> <span>atomic_counter</span><span>{};</span>

<span>void</span> <span>atomic_add</span><span>(</span><span>size_t</span> <span>iters</span><span>)</span> <span>{</span>
    <span>while</span> <span>(</span><span>iters</span><span>--</span><span>)</span> <span>{</span>
        <span>atomic_counter</span><span>++</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>The other common approach would be to use <a href="https://en.wikipedia.org/wiki/Compare-and-swap">compare and swap (<abbr title="Compare-and-swap: an atomic operation implemented on x86 and other CPUs.">CAS</abbr>)</a> to load the existing value, add one and then <abbr title="Compare-and-swap: an atomic operation implemented on x86 and other CPUs.">CAS</abbr> it back if it hasn‚Äôt changed. If it <em>has</em> changed, the increment raced with another thread and we try again.</p>

<p>Note that even if you use increment at the source level, the assembly might actually end up using <abbr title="Compare-and-swap: an atomic operation implemented on x86 and other CPUs.">CAS</abbr> if your hardware doesn‚Äôt support atomic increment<sup id="fnref:atomicsup" role="doc-noteref"><a href="#fn:atomicsup">5</a></sup>, or if your compiler or runtime just don‚Äôt take advantage of atomic operations even though they are available (e.g., see what even the newest version of <a href="https://godbolt.org/z/5h4K7y">icc does</a> for atomic increment, and what Java did for years<sup id="fnref:java" role="doc-noteref"><a href="#fn:java">6</a></sup>). This caveat doesn‚Äôt apply to any of our tested platforms, however.</p>

<p>Let‚Äôs add a counter implementation that uses <abbr title="Compare-and-swap: an atomic operation implemented on x86 and other CPUs.">CAS</abbr> as described above, and we‚Äôll call it <em><abbr title="Uses a CAS loop to increment a single shared counter.">cas add</abbr></em>:</p>

<div><div><pre><code><span>std</span><span>::</span><span>atomic</span><span>&lt;</span><span>uint64_t</span><span>&gt;</span> <span>cas_counter</span><span>;</span>

<span>void</span> <span>cas_add</span><span>(</span><span>size_t</span> <span>iters</span><span>)</span> <span>{</span>
    <span>while</span> <span>(</span><span>iters</span><span>--</span><span>)</span> <span>{</span>
        <span>uint64_t</span> <span>v</span> <span>=</span> <span>cas_counter</span><span>.</span><span>load</span><span>();</span>
        <span>while</span> <span>(</span><span>!</span><span>cas_counter</span><span>.</span><span>compare_exchange_weak</span><span>(</span><span>v</span><span>,</span> <span>v</span> <span>+</span> <span>1</span><span>))</span>
            <span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>Here‚Äôs what these look like alongside our existing <code>std::mutex</code> benchmark:</p>



<p>The first takeaway is that, at least in this <em>unrealistic maximum contention</em> benchmark, using <abbr title="Uses an atomic increment on a single shared counter.">atomic add</abbr> (<a href="https://www.felixcloutier.com/x86/xadd"><code>lock xadd</code></a> at the hardware level) is significantly better than <abbr title="Compare-and-swap: an atomic operation implemented on x86 and other CPUs.">CAS</abbr>. The second would be that <code>std::mutex</code> doesn‚Äôt come out looking all that bad on Skylake. It is only slightly worse than the <abbr title="Compare-and-swap: an atomic operation implemented on x86 and other CPUs.">CAS</abbr> approach at 2 cores and beats it at 3 and 4 cores. It is slower than the atomic increment approach, but less than three times as slow and seems to be scaling in a reasonable way.</p>

<p>All of these operations are belong to <em>level 2</em> in the hierarchy. The primary characteristic of level 2 is that they make a <em>contended access</em> to a shared variable. This means that at a minimum, the line containing the data needs to move out to the caching agent that manages coherency<sup id="fnref:l3" role="doc-noteref"><a href="#fn:l3">7</a></sup>, and then back up to the core that will receive ownership next. That‚Äôs about 70 cycles minimum just for that operation<sup id="fnref:inter" role="doc-noteref"><a href="#fn:inter">8</a></sup>.</p>

<p>Can it get slower? You bet it can. <em>Way</em> slower.</p>

<h3 id="level-3-system-calls">Level 3: System Calls</h3>

<p>The next level up (‚Äúup‚Äù is not good here‚Ä¶) is level 3. The key characteristic of implementations at this level is that they make a <em>system call on almost every operation</em>.</p>

<p>It is easy to write concurrency primitives that make a system call <em>unconditionally</em> (e.g., a lock which always tries to wake waiters via a <code>futex(2)</code> call, even if there aren‚Äôt any), but we won‚Äôt look at those here. Rather we‚Äôll take a look at a case where the fast path is written to avoid a system call, but the design or way it is used implies that such a call usually happens anyway.</p>

<p>Specifically, we are going to look at some <em>fair locks</em>. Fair locks allow threads into the critical section in the same order they began waiting. That is, when the critical section becomes available, the thread that has been waiting the longest is given the chance to take it.</p>

<p>Sounds like a good idea, right? Sometimes yes, but as we will see it can have significant performance implications.</p>

<p>On the menu are three different fair locks.</p>

<p>The first is a <a href="https://en.wikipedia.org/wiki/Ticket_lock">ticket lock</a> with a <code>sched_yield</code> in the spin loop. The idea of the yield is to give other threads which may hold the lock time to run. This <code>yield()</code> approach is publicly frowned upon by concurrency experts<sup id="fnref:notwhat" role="doc-noteref"><a href="#fn:notwhat">9</a></sup>, who then sometimes go right ahead and use it anyway.</p>

<p>We will call it <abbr title="A ticket lock that calls sched_yield in a spin loop while waiting for its turn.">ticket yield</abbr> and it looks like this:</p>



<div><div><pre><code><span>/**
 * A ticket lock which uses sched_yield() while waiting
 * for the ticket to be served.
 */</span>
<span>class</span> <span>ticket_yield</span> <span>{</span>
    <span>std</span><span>::</span><span>atomic</span><span>&lt;</span><span>size_t</span><span>&gt;</span> <span>dispenser</span><span>{},</span> <span>serving</span><span>{};</span>

<span>public:</span>
    <span>void</span> <span>lock</span><span>()</span> <span>{</span>
        <span>auto</span> <span>ticket</span> <span>=</span> <span>dispenser</span><span>.</span><span>fetch_add</span><span>(</span><span>1</span><span>,</span> <span>std</span><span>::</span><span>memory_order_relaxed</span><span>);</span>

        <span>while</span> <span>(</span><span>ticket</span> <span>!=</span> <span>serving</span><span>.</span><span>load</span><span>(</span><span>std</span><span>::</span><span>memory_order_acquire</span><span>))</span>
            <span>sched_yield</span><span>();</span>
    <span>}</span>

    <span>void</span> <span>unlock</span><span>()</span> <span>{</span>
        <span>serving</span><span>.</span><span>store</span><span>(</span><span>serving</span><span>.</span><span>load</span><span>()</span> <span>+</span> <span>1</span><span>,</span> <span>std</span><span>::</span><span>memory_order_release</span><span>);</span>
    <span>}</span>
<span>};</span>
</code></pre></div></div>

<p>Let‚Äôs plot the performance results for this lock alongside the existing approaches:</p>



<p>This is level 3 visualized: it is an order of magnitude slower than the level 2 approaches. The slowdown comes from the <code>sched_yield</code> call: this is a system call and these are generally on the order of 100s of nanoseconds<sup id="fnref:spectre" role="doc-noteref"><a href="#fn:spectre">10</a></sup>, and it shows in the results.</p>

<p>This lock <em>does</em> have a fast path where <code>sched_yield</code> isn‚Äôt called: if the lock is available, no spinning occurs and <code>sched_yield</code> is never called. However, the combination of being a <em>fair</em> lock and the high contention in this test means that a lock convoy quickly forms (we‚Äôll describe this in more detail later) and so the spin loop is entered basically ‚Ä¶</p></div></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://travisdowns.github.io/blog/2020/07/06/concurrency-costs.html">https://travisdowns.github.io/blog/2020/07/06/concurrency-costs.html</a></em></p>]]>
            </description>
            <link>https://travisdowns.github.io/blog/2020/07/06/concurrency-costs.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24489829</guid>
            <pubDate>Wed, 16 Sep 2020 05:30:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Python's Innards: Introduction (2010)]]>
            </title>
            <description>
<![CDATA[
Score 164 | Comments 11 (<a href="https://news.ycombinator.com/item?id=24489604">thread link</a>) | @johnsonjo
<br/>
September 15, 2020 | https://tech.blog.aknin.name/2010/04/02/pythons-innards-introduction/ | <a href="https://web.archive.org/web/*/https://tech.blog.aknin.name/2010/04/02/pythons-innards-introduction/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
					<p>A friend once said to me: <q>You know, to some people, C is just a bunch of macros that expand to assembly</q>. It‚Äôs been years ago (smartasses: it was also before <tt>llvm</tt>, ok?), but the sentence stuck with me. Do <em>Kernighan and Ritchie</em> really look at a C program and see assembly code? Does <em>Tim Berners-Lee</em> surf the Web any differently than you and me? And what on earth <em>did</em> <em>Keanu Reeves</em> see when he looked at all of that funky green gibberish soup, anyway? No, seriously, what the heck <em>did</em> he see there?! Uhm, back to the program. Anyway, what does Python look like in <em>Guido van Rossum</em>‚Äòs<sup>1</sup> eyes?</p>
<p>This post marks the beginning of what should develop to a <a href="https://tech.blog.aknin.name/tag/pythons-innards/">series</a> on Python‚Äôs internals, I‚Äôm writing it since I believe that explaining something is the best way to grok it, and I‚Äôd very much like to be able to visualize more of Python‚Äôs ‚Äòfunky green gibberish soup‚Äô as I read Python code. On the curriculum is mainly <em>CPython</em>, mainly <em>py3k</em>, mainly <em>bytecode evaluation</em> (I‚Äôm not a big compilation fan) ‚Äì but practically everything around executing Python and Python-like code (<em>Unladen Swallow</em>, <em>Jython</em>, <em>Cython</em>, etc) might turn out to be fair game in this series. For the sake of brevity and my sanity, when I say <em>Python</em>, I mean <em>CPython</em> unless noted otherwise. I also assume a POSIX-like OS or (if and where it matters) Linux, unless otherwise noted. You should read this if you want to know how Python works. You should read this if you want to contribute to CPython. You should read this to find all the mistakes I‚Äôll make and snicker at me behind me back or write snide comments. I realize it‚Äôs just <em>your</em> particular way to show affection.</p>
<p>I gather I‚Äôll glean pretty much everything I write about from Python‚Äôs source or, occasionally, other fine materials (documentation, especially <a href="http://docs.python.org/py3k/c-api/index.html">this</a> and <a href="http://docs.python.org/py3k/extending/index.html">that</a>, certain PyCon lectures, <a href="https://tech.blog.aknin.name/2010/05/07/searching-mailing-list-archives-offline/">searching</a> <a href="http://mail.python.org/mailman/listinfo/python-dev">python-dev</a>, etc). Everything is out there, but I do hope my efforts at putting it all in one place to which you can RSS-subscribe will make your journey easier. I assume the reader knows some C, some OS theory, a bit less than some assembly (any architecture), a bit more than some Python and has reasonable UNIX fitness (i.e., feels comfortable installing something from source). Don‚Äôt be afraid if you‚Äôre not reasonably conversant in one (or more) of these, but I can‚Äôt promise smooth sailing, either. Also, if you don‚Äôt have a working toolchain to do Python development, maybe you‚Äôd like to head over <a href="https://tech.blog.aknin.name/2010/04/08/contributing-to-python/">here</a> and do as it says on the second paragraph (and onwards, as relevant).</p>
<p>Let‚Äôs start with something which I assume you already know, but I think is important, at least to the main way I understand‚Ä¶ well, everything that I do understand. I look at it as if I‚Äôm looking at a machine. It‚Äôs easy in Python‚Äôs case, since Python relies on a Virtual Machine to do what it does (like many other interpreted languages). Be certain you understand ‚Äú<a href="http://en.wikipedia.org/wiki/Virtual_machine#Process_virtual_machines">Virtual Machine</a>‚Äù correctly in this context: think more like JVM and less like VirtualBox (very technically, they‚Äôre the same, but in the real world we usually differentiate these two kinds of VMs). I find it easiest to understand ‚ÄúVirtual Machine‚Äù literally ‚Äì it‚Äôs a machine built from software. Your CPU is just a complex electronic machine which receives all input (machine code, data), it has a state (registers), and based on the input and its state it will output stuff (to RAM or a Bus), right? Well, CPython is a machine built from software components that has a state and processes instructions (different implementations may use rather different instructions). This software machine operates in the process hosting the Python interpreter. Keep this in mind; I like the <a href="http://en.wikipedia.org/wiki/Turing_machine">machine</a> metaphor (as I explain in minute details <a href="https://tech.blog.aknin.name/2010/07/04/pythons-innards-for-my-wife/">here</a>).</p>
<p>That said, let‚Äôs start with a bird‚Äôs eye overview of what happens when you do this: <kbd>$ python -c 'print("Hello, world!")'</kbd>. Python‚Äôs binary is executed, the standard C library initialization which pretty much any process does happens and then the main function starts executing (see its source, <kbd>./Modules/python.c: main</kbd>, which soon calls <kbd>./Modules/main.c: Py_Main</kbd>). After some mundane initialization stuff (parse arguments, see if environment variables should affect behaviour, assess the situation of the standard streams and act accordingly, etc), <a href="http://docs.python.org/c-api/init.html#Py_Initialize">./Python/pythonrun.c: Py_Initialize</a> is called. In many ways, this function is what ‚Äòbuilds‚Äô and assembles together the pieces needed to run the CPython machine and makes ‚Äòa process‚Äô into ‚Äòa process with a Python interpreter in it‚Äô. Among other things, it creates two very important Python data-structures: the <strong>interpreter state</strong> and <strong>thread state</strong>. It also creates the built-in <strong>module</strong> <a href="http://docs.python.org/library/sys.html">sys</a> and the module which hosts all <a href="http://docs.python.org/library/functions.html#built-in-functions">builtins</a>. At a later post(s) we will cover all these in depth.</p>
<p>With these in place, Python will do one of several things based on how it was executed. Roughly, it will either execute a string (the <kbd>-c</kbd> option), execute a module as an executable (the <kbd>-m</kbd> option), or execute a file (passed explicitly on the commandline or passed by the kernel when used as an interpreter for a script) or run its <a href="http://en.wikipedia.org/wiki/Read-eval-print_loop">REPL</a> loop (this is more a special case of the file to execute being an interactive device). In the case we‚Äôre currently following, it will execute a single string, since we invoked it with <kbd>-c</kbd>. To execute this single string, <kbd>./Python/pythonrun.c: PyRun_SimpleStringFlags</kbd> is called. This function creates the <kbd>__main__</kbd> <strong>namespace</strong>, which is ‚Äòwhere‚Äô our string will be executed (if you run <kbd>$ python -c 'a=1; print(a)'</kbd>, where is <kbd>a</kbd> stored? in this namespace). After the namespace is created, the string is executed in it (or rather, interpreted or <em>evaluated</em> in it). To do that, you must first transform the string into something that machine can work on.</p>
<p>As I said, I‚Äôd rather not focus on the innards of Python‚Äôs parser/compiler at this time. I‚Äôm not a compilation expert, I‚Äôm not entirely interested in it, and as far as I know, Python doesn‚Äôt have significant Compiler-Fu beyond the basic CS compilation course. We‚Äôll do a (very) fast overview of what goes on here, and may return to it later only to inspect visible CPython behaviour (see the <a href="http://docs.python.org/reference/simple_stmts.html#the-global-statement">global</a> statement, which is said to affect parsing, for instance). So, the parser/compiler stage of <kbd>PyRun_SimpleStringFlags</kbd> goes largely like this: tokenize and create a <a href="http://en.wikipedia.org/wiki/Concrete_syntax_tree">Concrete Syntax Tree</a> (CST) from the code, transorm the CST into an <a href="http://en.wikipedia.org/wiki/Abstract_syntax_tree">Abstract Syntax Tree</a> (AST) and finally compile the AST into a <strong>code object</strong> using <kbd>./Python/ast.c: PyAST_FromNode</kbd>. For now, think of the code object as a binary string of machine code that Python VM‚Äôs ‚Äòmachinary‚Äô can operate on ‚Äì so now we‚Äôre ready to do interpretation (again, <em>evaluation</em> in Python‚Äôs parlance).</p>
<p>We have an (almost) empty <kbd>__main__</kbd>, we have a code object, we want to evaluate it. Now what? Now this line: <kbd>Python/pythonrun.c: run_mod, v = PyEval_EvalCode(co, globals, locals);</kbd> does the trick. It receives a code object and a namespace for <strong>globals</strong> and for <strong>locals</strong> (in this case, both of them will be the newly created <kbd>__main__</kbd> namespace), creates a <strong>frame object</strong> from these and executes it. You remember previously that I mentioned that <kbd>Py_Initialize</kbd> creates a thread state, and that we‚Äôll talk about it later? Well, back to that for a bit: each Python thread is represented by its own thread state, which (among other things) points to the stack of currently executing frames. After the frame object is created and placed at the top of the thread state stack, it (or rather, the byte code pointed by it) is evaluated, opcode by opcode, by means of the (rather lengthy) <kbd>./Python/ceval.c: PyEval_EvalFrameEx</kbd>.</p>
<p><kbd>PyEval_EvalFrameEx</kbd> takes the frame, extracts opcode (and operands, if any, we‚Äôll get to that) after opcode, and executes a short piece of C code matching the opcode. Let‚Äôs take a closer look at what these ‚Äúopcodes‚Äù look like by disassembling a bit of compiled Python code:</p>
<pre title="">&gt;&gt;&gt; from dis import dis # ooh! a handy disassembly function!
&gt;&gt;&gt; co = compile("spam = eggs - 1", "&lt;string&gt;", "exec")
&gt;&gt;&gt; dis(co)
  1           0 LOAD_NAME                0 (eggs)
              3 LOAD_CONST               0 (1)
              6 BINARY_SUBTRACT     
              7 STORE_NAME               1 (spam)
             10 LOAD_CONST               1 (None)
             13 RETURN_VALUE        
&gt;&gt;&gt; 
</pre>
<p>‚Ä¶even without knowing much about Python‚Äôs bytecode, this is reasonably readable. You ‚Äúload‚Äù the name <kbd>eggs</kbd> (where do you load it from? where do you load it to? soon), and also load a constant value (<kbd>1</kbd>), then you do a ‚Äúbinary subtract‚Äù (what do you mean ‚Äòbinary‚Äô in this context? between which operands?), and so on and so forth. As you might have guessed, the names are ‚Äúloaded‚Äù from the <kbd>globals</kbd> and <kbd>locals</kbd> namespaces we‚Äôve seen earlier, and they‚Äôre loaded onto an operand stack (not to be confused with the stack of running frames), which is exactly where the binary subtract will pop them from, subtract one from the other, and put the result back on that stack. ‚ÄúBinary subtract‚Äù just means this is a subtraction opcode that has two operands (hence it is ‚Äúbinary‚Äù, this is not to say the operands are binary numbers made of ‚Äò0‚Äôs and ‚Äò1‚Äôs).</p>
<p>You can go look at <kbd>PyEval_EvalFrameEx</kbd> at <kbd>./Python/ceval.c</kbd> yourself, it‚Äôs not a small function by any means. For practical reasons I can‚Äôt paste too much code from there in here, but I will just paste the code that runs when a <kbd>BINARY_SUBTRACT</kbd> opcode is found, I think it really illustrates things:</p>
<pre title="">        TARGET(BINARY_SUBTRACT)
            w = POP();
            v = TOP();
            x = PyNumber_Subtract(v, w);
            Py_DECREF(v);
            Py_DECREF(w);
            SET_TOP(x);
            if (x != NULL) DISPATCH();
            break;
</pre>
<p>‚Ä¶pop something, take the top (of the operand stack), call a C function called PyNumber_Subtract() on these things, do something we still don‚Äôt understand (but will in due time) called ‚ÄúPy_DECREF‚Äù on both, set the top of the stack to the result of the subtraction (overwriting the previous top) and then do something else we don‚Äôt understand if x is not null, which is to do a ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://tech.blog.aknin.name/2010/04/02/pythons-innards-introduction/">https://tech.blog.aknin.name/2010/04/02/pythons-innards-introduction/</a></em></p>]]>
            </description>
            <link>https://tech.blog.aknin.name/2010/04/02/pythons-innards-introduction/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24489604</guid>
            <pubDate>Wed, 16 Sep 2020 04:43:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Short History of LED Lighting]]>
            </title>
            <description>
<![CDATA[
Score 47 | Comments 20 (<a href="https://news.ycombinator.com/item?id=24489268">thread link</a>) | @blast
<br/>
September 15, 2020 | https://www.stet.build/ia/031 | <a href="https://web.archive.org/web/*/https://www.stet.build/ia/031">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      
  <p><img src="https://blotcdn.com/blog_78585a67eddd4bfcb7936222fddae5c7/_image_cache/e294bb61-15a2-42d5-999c-b1d5c20f0429.svg" alt="In Abeyance Logo" width="900" height="150"></p>
<p><img src="https://blot.im/cdn/blog_78585a67eddd4bfcb7936222fddae5c7/_image_cache/8006e258-67aa-456f-be91-f47df313bcc6.png" alt="Issue 031" width="2048" height="2048"></p>

<h4>
By Khaled Abou Alfa ‚Ä¢ Published 29th of July, <span>2020
</span></h4>
<p>
In 1927, Oleg Losev, a Russian inventor and scientist would introduce the world to the light-emitting diode. This technology would remain dormant for decades. Progress was made in 1962 with the introduction of the first red <span>LED</span>. For the next 30 years, an industry would hunt for the elusive colour blue. Over time the risk of pouring resource and treasure into this pursuit increased - you were chasing the pot of gold at the end of a blue coloured rainbow.
</p>
<p>
These pursuits would continue with little success until the early 90s. Then the work of Shuji Nakamura, Isamu Akosaki and Hiroshi Amano unlocked the secrets of the blue <span>LED</span>. So significant was this discovery that in 2004, the trio would receive the Nobel price in Physics.
</p>
<p>
This work would be employed in diverse contexts, from the multitude of screens we depend upon to data communications. For the built environment, this discovery would transform artificial lighting across the world. The incandescent (and to a lesser extent the fluorescent) lamp illuminated the 20th century. Light for the 21st century would be ushered in by the <span>LED</span> lamp.
</p>
<h2 id="obsolete-lighting-law">Obsolete Lighting Law</h2>
<p>In 1999, <a href="http://www.haitzs-law.com/uploads/7/6/3/6/76362633/1999-_national_research_report__same_as_2000_sarndia_nrp_.pdf">Roland Haitz co-authored</a> a research report, on the future of <span>LED</span> lighting (which was renamed as solid state lighting). The paper included data collected over decades that plotted both the cost of lumens and the red light output per <span>LED</span> package since the 1970s. 20 years ago Haitz empirically predicted the world we are living in today and captured in a<span></span> <span>‚Äò</span>law‚Äô which states:</p>
<blockquote>
<p>Every decade, for a given wavelength of light, the cost per lumen falls by a factor of 10 and the amount of light generated per <span>LED</span> package increases by a factor of 20.<br>
‚Äî Haitz‚Äôs Law</p>
</blockquote>
<p>
A new report, which addressed the shortcomings and reviewed the impact of the earlier report, was published <a href="http://www.haitzs-law.com/uploads/7/6/3/6/76362633/2011-physica_-_haitz_r_2011_pssa.pdf">a decade later in 2010</a>. This paper predicted that within the decade (by 2020), we would have reached a point of diminishing returns. It acknowledged that Solid State Lighting (<span>SSL</span>) is limited in two areas. The conversion efficacy - converting electrical energy to luminous flux cannot exceed 100%. The actual need for increased flux range - just because you can produce it, doesn‚Äôt mean the market needs it. The paper provided indications of where the future after 2020 is likely to evolve:
</p>
<p><em><span>‚Äò</span>These include digital tuning of both the chromaticity and the temporal/spatial placement of light within the environment that is being lit.‚Äô</em></p>
<p><span>
27</span> years after the initial spark of the blue <span>LED</span> revolution, we are now entering a period of equilibrium of both the efficacy and flux of solid state lighting. The advances in lighting have now begun to shift into new territory, one of circadian rhythms, diurnal patterns and refined controllability.
</p>
<h2 id="controllability">Controllability</h2>
<p>Inline with the predictions from 10 years ago, the lighting industry has begun to focus its attention on how <span>SSL</span> can be controlled and manipulated. The technology available today would be considered both technically impossible and prohibitively expensive, compared with technology from only 15 years ago.</p>
<p>
The terms<span></span> <span>‚Äò</span>circadian lighting‚Äô or<span></span> <span>‚Äò</span>human centric lighting‚Äô have begun entering the lexicon as a means to enhance the wellbeing of everyone interacting with the built world. With the advent of <span>SSL</span> technology we are now able to control parameters such as colour spectrum, intensity and directionality. These systems offer control based on the exact location, the relationship to the outside world and what is happening outside in real time.
</p>
<p>
The main debate for the use of this type of lighting control is whether it actually works. Does it suppress the levels of Melatonin in the body? Does it make people more alert and therefore more responsive throughout the day? These are some of the questions that the industry will need to address for the technology to become more widespread.
</p>
<p>
<strong>In the last two decades, the lighting industry has experienced a revolution. This has led to an expanded scope of what is achievable with light in a manner unimaginable back in 1927. Incredibly these benefits have come at a greatly reduced level of energy consumption (typically 1/5th of previous technologies). The work is far from done, as incandecent lamp sources (amongst others) remain in wide use throughout the world (<a href="https://www.statista.com/statistics/246030/estimated-led-penetration-of-the-global-lighting-market/">global penetration of LEDs hovers around 61%</a>). We must wean ourselves both for our own wellbeing and that of the planet.</strong>
</p>

<h2 id="dysons-car">Dyson‚Äôs Car</h2>
<p><img src="https://blot.im/cdn/blog_78585a67eddd4bfcb7936222fddae5c7/_image_cache/da258a83-f760-46bc-8d61-23c8faa2a5e8.png" alt="Timber" width="900" height="596"></p>
<p>We now know what form factor Dyson had chosen for their <a href="https://www.autocar.co.uk/car-news/features/exclusive-inside-story-dyson-ev">now shelved electric vehicle</a>. Micromobility this is <em>not</em>.</p>
<p>
The Dyson‚Äôs interview demonstrates the tone deaf nature associated with cars. You may need a car for some activities, but for most of your mobility needs, you likely can get away with other methods. How different our cities would be if we could understand and embrace that reality together.
</p>
<p>
In adjacent news the guys over at Micromobility.io have been documenting our transition for a while. Just released is <a href="https://micromobility.io/landscape">version 2.0 of their Landscape document</a>. The document demonstrates the breadth that is on offer in this field.
</p>
<h2 id="wide-timber">Wide Timber</h2>
<p><img src="https://blot.im/cdn/blog_78585a67eddd4bfcb7936222fddae5c7/_image_cache/771a70fd-390a-4021-a8ee-e108b34d748e.jpg" alt="Timber" width="1800" height="650"></p>
<p>The 2020 Tokyo Olympics may have been postponed but that doesn‚Äôt mean we don‚Äôt get to marvel at some stunning timber architecture. As covered in <a href="https://www.stet.build/ia/007">issue 007</a>, the Japanese know a thing or two about building in timber. The completion of the <a href="https://www.designboom.com/architecture/nikken-sekkei-timber-gymnastics-center-tokyo-olympic-games-07-23-2020/">Ariake gymnastics center</a> is a wonderful extension of that history.</p>
<p><img src="https://blot.im/cdn/blog_78585a67eddd4bfcb7936222fddae5c7/_image_cache/a5fb78b8-d41f-4f9e-9bbe-ca1a8b265307.jpeg" alt="Timber" width="818" height="545"></p>

<h2 id="spoke-pens">Spoke Pens</h2>
<p><img src="https://blot.im/cdn/blog_78585a67eddd4bfcb7936222fddae5c7/_image_cache/59e3faa3-40df-46fe-98d7-bbf3cdd7d852.jpg" alt="Spoke Pens" width="680" height="680"></p>
<p>Over the past 5‚Äì10 years there has been an incredible industry of machined pens produced and sold on Kickstarter. I have found that the ergonomic design and available refill options to be under-represented. Rather than focusing on the utility of the pen itself, many focus on both the materials and aesthetic design instead.</p>
<blockquote>
<p>Most people make the mistake of thinking design is what it looks like. People think it‚Äôs this veneer‚Äâ‚Äî‚Äâthat the designers are handed this box and told,<span></span> <span>‚Äú</span>Make it look good!‚Äù That‚Äôs not what we think design is. It‚Äôs not just what it looks like and feels like. Design is how it works.<br>
‚Äî Steve Jobs</p>
</blockquote>
<p>
In this regard, the <a href="https://spokedesign.com/">Spoke pens and pencils</a> are different. The inside was considered first - even though the outside has a strong design language. The pen is primarily a wrap around the pen refill or pencil mechanism. The pens accept the standard Muji Gel ink refills or the Uni Signo <span>DX</span> refills (both come in a range of colours and go down to the 0.38mm range). While the pencil is based on the Pentel <span>P20</span># mechanical pencil mechanism. Both are highly recommended.
</p>
  <br>
      </div></div>]]>
            </description>
            <link>https://www.stet.build/ia/031</link>
            <guid isPermaLink="false">hacker-news-small-sites-24489268</guid>
            <pubDate>Wed, 16 Sep 2020 03:25:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[North Pacific Logbook]]>
            </title>
            <description>
<![CDATA[
Score 90 | Comments 7 (<a href="https://news.ycombinator.com/item?id=24489257">thread link</a>) | @blast
<br/>
September 15, 2020 | https://100r.co/site/north_pacific_logbook.html | <a href="https://web.archive.org/web/*/https://100r.co/site/north_pacific_logbook.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>The passage from <b>Japan</b> (Shimoda) to <b>Canada</b> (Victoria) took <b>51 days</b>, and it was the hardest thing we've ever done. We decided to keep a logbook, to better remember it and so it can help others who wish to make this trip.</p><div>
	<!--  -->
	<tbody><tr><th colspan="3" id="week1">Week 1</th></tr>
	<tr>
		<td rowspan="6">June 9th</td>
		<td>0600</td>
		<td>We woke up early today, as we had little time to prepare before leaving Japan. Why so last minute? Because we only decided to leave yesterday morning. The reason we decided so late, was because we were waiting for a SIM card for our Iridium GO satellite phone, and we received it yesterday morning. As soon as we got it, we grabbed our passports and boat papers and hurried to the Immigration Office in Shizuoka to check out (a 4-5 hour train ride away). We were eager to leave on the 9th, as there was a good weather window, with moderate winds coming from a favourable direction. Because we weren't planning to leave until late yesterday morning, there were many tasks we had no yet done, or had not had time to do.<p>We're usually more organized than this, with only a few menial tasks to do, but not this time. Last minute departures is not our style, but we also wanted to take this window. We had to find a post box to send the pocket wifi we rented and to fill our water tanks ‚Äî this may not seem like much, but it was, as it piled up on top of other things we'd forgotten, like finding and installing the pot holders to the stovetop, installing the jack lines, taking out the tethers, putting key items back in the ditch bag plus a number of other last minute things that had escaped us at the time.</p></td>
	</tr>
	<!--  -->
	<tr>
		<td>0700</td>
		<td>We meet Shuhei, Thomas and Anja on the sailing vessel Robusta for coffee, turning down a cup as coffee, as it never sits right on the first day at sea. We use this opportunity to chat, meanwhile butterflies gather in my gut. I am nervous. I always am before a big trip and this time is no different, although this is our biggest passage yet, and will also likely be the most challenging. My gut has every right to twist itself into knots. We ask Shuhei to drop off our pocket wifi in a post box, he agrees ¬≠‚Äî ah, what a kind person. He came by this with his truck to help Robusta with some last minute tasks, like getting produce, gas etc. We had done most of that ahead of time.</td>
	</tr>
	<!--  -->
	<tr>
		<td>0800</td>
		<td>We push off our spot and head over to the Shimoda Boat Services pontoon to fill our water tanks. We tied up to it and began to ferry bins back and forth to empty them in our tank. We filled as many recipients as we could carry, as we don't know how long the trip will take. Once the tanks and jerry cans were full, we left the pontoon and headed outside of the breakwater. The Shimoda coastguard ship was lifting anchor at the time, it went past us, disappearing quickly as it was going much faster. Outside of the breakwater, we saw the lighthouse on our starboard side, the one we had difficulty rounding when we arrived here a week and a half ago due to 30-knot winds off our bow. Today, the seas were tame and the skies clear and blue. <p>We saw the Kurofune, a replica of Commodore Perry's black ship, taking tourists about the harbor. It was the first time we'd seen it on the water, as there weren't many tourists before due to concerns with the coronavirus. Now that the state of emergency's been lifted, people started traveling more around the country.</p></td>
	</tr>
	<!--  -->
	<tr>
		<td>1200</td>
		<td>The current is pushing us along, fast. We passed Oshima island at a ridiculous speed of 9.5 knots! The kuroshio, or <i>black current</i>, is very strong in this area, and even stronger between the islands as the water is forced through a narrow opening. We had no problem with ships, even with many heading to Tokyo. Our speed made it easy to work our way out of the main shipping channel. We are flying! Pino is happy to be moving again, and as are we.</td>
	</tr>
	<!--  -->
	<tr>
		<td>1430</td>
		<td>We saw porpoises in the water! It's been too long! They came for a bow-riding session. We missed them. Winds are coming out of the SW, at a good speed of 12-15 knots. We're going at 8 knots. For lunch, we had inari pouches, a meal we'd purchased at MaxValue the night before. It's nice not having to cook on the first day. Neither of us are sea sick, but going below is still difficult and can easily trigger it. We stay outside instead, enjoying the good wind, weather and sun. <p>Devine is reading "The mushrooom at the end of the world", while I steer us east. We tried calling Robusta on the VHF, but got no answer, either they're too far or their radio isn't on.</p></td>
	</tr>
	<!--  -->
	<tr>
		<td>1700</td>
		<td>Wind rises to 20 knots, we put on our foul weather gear as we don't want to wet our clothes. We won't be doing laundry in this trip, so keeping clothes dry is crucial.</td>
	</tr>
	<!--  -->
	<tr>
		<td rowspan="4">June 10th</td>
		<td>0800</td>
		<td>We download the weather, it is the same as yesterday, but it looks like the wind will increase this evening. Both of us are feeling sick and grumpy. We're experiencing the early symptoms of sea sickness, which usually means a headache, reduced appetite, morose view on things etc. This happens on every trip. Neither of us have ever vomited, thankfully.<p>Yesterday we sent Robusta an email and got a reply, they are ok and are southwest of us.</p></td>
	</tr>
	<!--  -->
	<tr>
		<td>1200</td>
		<td>We napped hard, then awoke and decided that we should try and cook something. Neither of us feel like eating rice balls, we regret getting so many as we aren't sure we can eat them. We have no appetite, but try to eat anyway.<p>We ate raw snap peas as a snack, the texture was weird in our mouths. Devine made spicy ramen, which were very, very spicy. I couldn't finish my bowl. We had a grapefruit for desert, and made a mess on deck trying to pry it apart. The deck had red on it for a while afterwards.</p></td>
	</tr>
	<!--  -->
	<tr>
		<td>1700</td>
		<td>We check the weather again. We don't normally check it twice a day as it eats up data, but the weather was changing so fast...! We wanted to know what was going on. We're glad we looked, as the wind was set to increase by a lot. If we hadn't checked, we might not have set the second reef point in our main. The last thing we want in this ocean is to have too much canvas up.</td>
	</tr>
	<!--  -->
	<tr>
		<td>1800</td>
		<td> We eat chips as a snack, as we are not hungry for a full dinner. Everything tastes weird? It's like our taste buds are going crazy. The only thing that goes down easy is salty foods.</td>
	</tr>
	<!--  -->
	<tr>
		<td rowspan="6">June 11th</td>
		<td>0200</td>
		<td>Saw a tanker ahead, but it wasn't moving? We passed its stern, wondering why it was idling out here.</td>
	</tr>
	<!--  -->
	<tr>
		<td>0900</td>
		<td>We've reduced the jib, as the wind is a strong and steady 27 knots. We are sailing east, although the current has pushed us higher than we wanted. We are at 36 degrees, and it is worrisome as we knew it was safer to stay under 35. The wind above that line tends to be stronger. Robusta was at 33 degrees, upon exiting Shimoda they took a more southerly route, I wish we'd done the same. We underestimated the strength of this current. We have peanut butter toast with slices of banana on top for breakfast.<p>Devine sent a happy birthday message to his sister.</p></td>
	</tr>
	<!--  -->
	<tr>
		<td>1100</td>
		<td>The waves are getting bigger. We are worried about our fresh produce as we can't eat any of it. This has never happened to us before. The sun is warm and is hastening the rotting of some of the more sensitive vegetables, like broccoli. We had to throw away half a head overboard today. I hope we'll find our appetites again, I'd rather the food end up in our stomachs than in the ocean.</td>
	</tr>
	<!--  -->
	<tr>
		<td>1200</td>
		<td>Devine made a salad for lunch to try and use up some of our uglier produce. The wind is blowing food off of my fork as I eat, maybe not the best meal to have on a windy day. The wind is blowing 25-30 knots, generating big waves, but at least it is sunny.</td>
	</tr>
	<!--  -->
	<tr>
		<td>1300</td>
		<td>We watched seabirds pirouetting in the distance, they've no problem in this wind. Their movements are sharp and fast. We don't know what kind of bird they are, they're brown with a white stomach.<p>We've noticed the automatic bilge pump keeps going off, we think there's a leak below the waterline, if so, that is worrisome. We tried to find where it was, but found nothing. None of the thru-hulls are leaking. I also checked the hose connections, nada! I suspect it may be the rudder post that is leaking, but for now it is impossible to look as I'd have to get into the cockpit locker, which is full of water bins and other heavy gear. For now, we try and check the bilge often, pumping the water out by hand every 2h or so. We have two manual bilge pumps, one in the cockpit and another in the cabin under the sink. The automatic bilge pump doesn't empty the bilge entirely, as it sits on a little stand above the lowest point, but the manual pump tube touches the bottom and does a better job of sucking up the majority of the water. If anything, the automatic pump serves as an alarm.</p></td>
	</tr>
	<!--  -->
	<tr>
		<td>1700</td>
		<td>Made spaghetti with eggplant and green peppers for dinner. It is still hard to finish food, so we started making smaller portions as to avoid waste. Both of us are still plagued with weird tastebuds. Sweet is too sweet, veggies are bland...</td>
	</tr>
	<!--  -->
	<tr>
		<td rowspan="2">June 12th</td>
		<td>0800</td>
		<td>Rain. All day. It won't stop. We've asked it to, but <i>it won't listen</i>.</td>
	</tr>
	<!--  -->
	<tr>
		<td>1900</td>
		<td>The conditions out here are horrible. We are running with the waves and wind, we wished we'd put in the 3rd reef earlier. It is too late to do it now, as it is dark and stormy. Neither of us eat dinner, we're in sparta mode. </td>
	</tr>
	<!--  -->
	<tr>
		<td rowspan="4">June 13th</td>
		<td>0800</td>
		<td>It is still raining a lot, with winds gusting in the high 30's. This weather is demoralizing, but at least we are making good easting and getting further and further away from Japan. I never thought I'd be happy about getting away from Japan, it's my favorite place in the world...! The ocean around the country is mean, and another entity entirely, lingering here is dangerous. <i>Oh how much I wish the rain would stop</i>, everything would be more pleasant if the rain stopped.</td>
	</tr>
	<!--  -->
	<tr>
		<td>1200</td>
		<td>Devine made pasta with a mustard sauce for lunch, I ate half and left the bowl on the stove. It was delicious but I couldn't finish, I'll keep it as a snack for later. We had our usual ‚Ä¶</td></tr></tbody></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://100r.co/site/north_pacific_logbook.html">https://100r.co/site/north_pacific_logbook.html</a></em></p>]]>
            </description>
            <link>https://100r.co/site/north_pacific_logbook.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24489257</guid>
            <pubDate>Wed, 16 Sep 2020 03:22:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Xfce 4.16pre1 Released]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24488984">thread link</a>) | @bsg75
<br/>
September 15, 2020 | https://andreldm.com/2020/09/12/xfce4.16pre1.html | <a href="https://web.archive.org/web/*/https://andreldm.com/2020/09/12/xfce4.16pre1.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <div>

  

  <article>
    <p>As <a href="https://wiki.xfce.org/releng/4.16/roadmap">scheduled</a> we have just released Xfce 4.16pre1 on August 27th (sorry for the long time to write a post about it) - the first development release leading up to Xfce 4.16. And it comes with a boatload of new features and improvements, so prepare yourselves.</p>

<h3 id="notable-changes">Notable Changes</h3>

<h4 id="general">General</h4>

<ul>
  <li>Dropping lots of code (Gtk2 support), improving maintainability</li>
  <li>
    <p>Adding new icons to all core components to extend Xfce‚Äôs visual identity (also: follow freedesktop.org rDNS icon naming standard)
<img src="https://andreldm.com/assets/img/xfce-4.16pre1/icons.png" alt="New icons"></p>
  </li>
  <li>
    <p>A revamped and improved ‚ÄúAbout Xfce‚Äù dialog that also holds general system details
<img src="https://andreldm.com/assets/img/xfce-4.16pre1/about.png" alt="About dialog"></p>
  </li>
  <li>
    <p>Switch to client-side decorations for settings dialogs
<img src="https://andreldm.com/assets/img/xfce-4.16pre1/csd.png" alt="CSD Settings"></p>
  </li>
  <li>Lots of bugfixes everywhere</li>
</ul>

<h4 id="settings">Settings</h4>

<ul>
  <li>
    <p>New ‚ÄúDefault Applications‚Äù dialog: merge between ‚ÄúMime Settings‚Äù and ‚ÄúPreferred Applications‚Äù
<img src="https://andreldm.com/assets/img/xfce-4.16pre1/mime-editor.png" alt="Mime editor"></p>
  </li>
  <li>
    <p>Display: Support for fractional scaling (with XRandR), better fallback in case of mis-configuration
<img src="https://andreldm.com/assets/img/xfce-4.16pre1/scale.png" alt="Display dialog"></p>
  </li>
  <li>
    <p>Settings Manager: Improved search/filter</p>
  </li>
</ul>

<h4 id="panel">Panel</h4>

<ul>
  <li>
    <p>New Plugin: ‚ÄúStatus Tray‚Äù - a merger between the systray and the statusnotifier plugin, will make life for users much easier and less confusing, now supports the panel‚Äôs global ‚Äúicon size‚Äù setting
<img src="https://andreldm.com/assets/img/xfce-4.16pre1/status-tray.png" alt="Status tray plugin"></p>
  </li>
  <li>
    <p>Autohide animation: Makes ‚Äúautohide‚Äù more easily understandable (in the sense of: where did my panel just go?)
<img src="https://andreldm.com/assets/img/xfce-4.16pre1/autohide.gif" alt="Autohide animation" width="640px"></p>
  </li>
  <li>Launchers now show desktop file actions on right-click (e.g. ‚ÄúOpen a New Private Window‚Äù for Firefox)</li>
  <li>
    <p>The Window list now supports ‚Äúlaunching a new instance‚Äù of an application in the right-click menu
<img src="https://andreldm.com/assets/img/xfce-4.16pre1/launch-new-instance.png" alt="Launch new instance" height="240px"></p>
  </li>
  <li>The Workspace switcher can optionally show numbering for workspaces</li>
  <li>Dark mode for the panel (precondition: your theme has to support dark mode)</li>
</ul>

<h4 id="thunar">Thunar</h4>

<ul>
  <li>
    <p>Copying and moving can be paused
<img src="https://andreldm.com/assets/img/xfce-4.16pre1/thunar-pause.png" alt="Thunar transfer dialog"></p>
  </li>
  <li>Support for queued file transfer (configurable)</li>
  <li>Initial support to remember view settings per directory</li>
  <li>New versioning scheme</li>
</ul>

<h4 id="volman">Volman</h4>
<ul>
  <li>Removed PDA Tab</li>
  <li>New versioning scheme</li>
</ul>

<h4 id="xfwm4">Xfwm4</h4>
<ul>
  <li>Show alt-tab dialog only on the primary monitor (if one is set)</li>
</ul>

<h4 id="power-manager">Power Manager</h4>
<ul>
  <li>Cleaner settings dialog (battery and ‚Äúon power‚Äù settings)</li>
  <li>Optional visual indicator in the panel when ‚ÄúPresentation mode‚Äù is enabled</li>
  <li>Automatically dismiss low-power notifications upon connecting of a charger</li>
</ul>

<h4 id="session">Session</h4>
<ul>
  <li>Improved gpg-agent support</li>
  <li>Smaller visual cleanups</li>
</ul>

<h4 id="appfinder">Appfinder</h4>
<ul>
  <li>Allow sorting apps by frecency (frequency and recency)</li>
</ul>

<h4 id="thumbnailing-service">Thumbnailing Service</h4>
<ul>
  <li>Support for excluding paths (in the tumbler.rc settings file)</li>
</ul>

<h4 id="xfconf-settings-service">Xfconf Settings Service</h4>
<ul>
  <li>Enable gsettings backend by default</li>
  <li>Bash auto-completion for xfconf-query</li>
  <li>Drop Perl bindings</li>
</ul>

<h3 id="where-can-you-get-it">Where can you get it?</h3>

<p>Besides manually compiling <a href="https://archive.xfce.org/xfce/4.16pre1/src/">tarballs</a>, it‚Äôs also possible to use <a href="https://github.com/schuellerf/xfce-test">xfce-test</a> (<code>ubuntu_20.04-xfce-4.16pre1</code> tag) to easily preview Xfce 4.16 without the risk of breaking your system.</p>

<p>Update: Arch Linux users more adventurous than usual can try <code>-devel</code> packages from AUR. Likewise, openSUSE users can install <a href="https://en.opensuse.org/Xfce_repositories">packages</a> built directly from git master. If you‚Äôre afraid to trash your system consider playing with a virtual machine first.</p>

<p>Please go ahead try this release if possible, we would be more happy to hear your impressions as well as get bug reports before the final release.</p>

<h3 id="whats-next">What‚Äôs next?</h3>

<p>We‚Äôre expecting to release Xfce 4.16pre2 at the end of this month and if necessary pre3 will be released in October. If everything goes as planned Xfce 4.16 should be released by November!</p>

  </article>

  
    

    
    
    
  

</div>

    </div></div>]]>
            </description>
            <link>https://andreldm.com/2020/09/12/xfce4.16pre1.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24488984</guid>
            <pubDate>Wed, 16 Sep 2020 02:32:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Go‚Äôs Major Versioning Sucks ‚Äì From a Fanboy]]>
            </title>
            <description>
<![CDATA[
Score 166 | Comments 162 (<a href="https://news.ycombinator.com/item?id=24488745">thread link</a>) | @lanecwagner
<br/>
September 15, 2020 | https://qvault.io/2020/09/15/gos-major-version-handling-sucks-from-a-fanboy/ | <a href="https://web.archive.org/web/*/https://qvault.io/2020/09/15/gos-major-version-handling-sucks-from-a-fanboy/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="text">
			
<p>I‚Äôm normally a fan of the rigidity within the Go toolchain. In fact, we use Go on the <a href="https://app.qvault.io/dashboard/courses">front and backend at Qvault</a>. It‚Äôs wonderful to have standardized formatting, vetting, and testing across the entire language. The first real criticism I‚Äôve had is with the way Go modules handle major versions. It‚Äôs over-the-top opinionated and slows down development in a significant number of scenarios.</p>



<h2>Refresher on ‚ÄúGo Mod‚Äù</h2>



<p>Go modules, and the associated commands <code>go mod</code> and <code>go get</code> can be thought of as Go‚Äôs equivalents to NPM and Yarn. The Go toolchain provides a way to manage dependencies and lock the versions that a collection of code depends on.</p>



<p>One of the most common operations is to update a dependency in an existing module. For example:</p>



<pre><code lang="bash"># update all dependencies
go get -u ./...

# add missing and remove unused dependencies
go mod tidy

# save all dependency code in the project's "vendor" folder
go mod vendor</code></pre>



<h2>Semantic Versioning</h2>



<p>Go modules use git tags and semantic versioning to keep track of the versions of dependencies that are compatible with the module in question. Semantic versioning is a way to format version numbers and it looks like this: <code>v{MAJOR}.{MINOR}.{PATCH}</code>. For example, <code>v1.2.3</code>.</p>



<p>Each number is to be incremented according to the following standards:</p>



<pre><code lang="bash">MAJOR version when you make incompatible API changes,
MINOR version when you add functionality in a backwards compatible manner, and
PATCH version when you make backwards compatible bug fixes.</code></pre>



<h2>Package-Side Problems</h2>



<p>Go has decided that all versions beyond <code>v0</code> and <code>v1</code> are required to use the major version in the module path. There are two ways to accomplish this. </p>



<p><strong>The first and recommended way</strong> is laid out in an example on the <a rel="noreferrer noopener" href="https://blog.golang.org/v2-go-modules#TOC_4." target="_blank">Go Blog</a>:</p>



<blockquote><p>To start development on&nbsp;<code>v2</code>&nbsp;of&nbsp;<code>github.com/googleapis/gax-go</code>, we‚Äôll create a new&nbsp;<code>v2/</code>&nbsp;directory and copy our package into it.</p></blockquote>



<p>In other words, for every major version, we are encouraged to maintain a new copy of the entire codebase. This is also the only way to do it if you want pre-modules users to be able to use your package.</p>



<p><strong>The second way</strong> is to just change the name of your module in <code>go.mod</code>. Fore example, <code>module github.com/lane-c-wagner/go-tinydate</code> would become <code>module github.com/lane-c-wagner/go-tinydate/v2</code>. Besides this not working for older versions of Go, I also find it problematic because it breaks (in my mind) one of the most useful things about module names ‚Äì they reflect the file path.</p>



<h2>Package-Side Solutions</h2>



<p>Allow package maintainers to specify the major version simply by updating git tags, no module name changes required. There is no need for two sources of truth.</p>



<p>We can enforce safe updating by adding warnings or prompts to the <code>go get</code> CLI. We don‚Äôt have to add unnecessary time-consuming policies.</p>



<h2>Client-Side Problems</h2>



<p>When new versions of dependencies are released we have a simple command to get the newest stuff: <code>go get -u</code>. The problem is that this command has no way to automatically update to a new major version. It will only download new minor changes and patches. There isn‚Äôt even a console message to inform you that a new major version exists!</p>



<p>That said, the reason for not auto-updating is clear, and to be fair, well-founded:</p>



<blockquote><p>If an old package and a new package have the same import path, the new package must be backwards compatible with the old package.</p><cite><a href="https://research.swtch.com/vgo-import" rel="noopener">Import compatibility rule</a></cite></blockquote>



<p>In other words, we should only increment major versions when making breaking changes, and if breaking changes are made they can‚Äôt have the same import path. While this makes sense, I think a simple console warning would have been a better solution than forcing a cumbersome updating strategy on the community.</p>



<p><strong>Another problem </strong>on the client-side is that we don‚Äôt only need to update <code>go.mod</code>, but we actually need to <code>grep</code> through our codebase and change each import statement to point to the new major version:</p>



<blockquote><p>Users who wanted to use&nbsp;<code>v2</code>&nbsp;had to change their package imports and module requirements to&nbsp;<code>github.com/googleapis/gax-go/v2</code>.</p></blockquote>



<p>Instead of a few simple CLI commands to get the latest dependencies, we‚Äôre making changes to the code itself.</p>



<h3>A Caveat ‚Äì Diamond Imports</h3>



<p>Using different paths for different major versions makes more sense in situations where we may require two different versions of the same package, you know, <a aria-label="diamond imports (opens in a new tab)" href="https://research.swtch.com/vgo-import#dependency_story" target="_blank" rel="noreferrer noopener nofollow">diamond imports</a> and all that. This is the exception, not the rule, and it seems strange to tap dance around a problem that doesn‚Äôt exist in most codebases.</p>



<h2>Client-Side Solution</h2>



<p><code>go get -u</code> should have an additional command line flag to update major versions, and should default to showing a warning that there is a newer major version you don‚Äôt have yet.</p>



<p><em>Default</em> import paths should not change between major versions. If a module requires various versions, those <em>extra</em> versions could be flagged by having a different path.</p>



<h2>Why This Sucks For Me</h2>



<p>It is often the case that I want to build a package that has domain-specific logic and will only be used only in services at the small company I work for. For example, we have a repo that holds the <code>struct{}</code> definitions for common entities used across our system.</p>



<p>Occasionally we need to make backward-incompatible changes to those struct definitions. If it were an open-source library we wouldn‚Äôt make changes so often, but because it‚Äôs internal and we are aware of all the dependencies, we change the names of exported fields <em>regularly</em>. We aren‚Äôt changing names because we chose bad ones to begin with, we are usually changing names because requirements from the business change rapidly in a startup. </p>



<p>This means major version changes are a fairly regular occurrence. Some say that we should just stay on <code>v0</code>, and that‚Äôs a reasonable solution. The problem is these ARE production packages that are being used by a wide number of services. We WANT to Semver.</p>



<p>Go makes updating major versions so cumbersome that in the majority of cases, we have opted to just increment minor versions when we should increment major versions. We want to follow the proper versioning scheme, we just don‚Äôt want to add the unnecessary steps to our dev process.</p>



<h2>Hey ‚Äì I Get It</h2>



<p>I understand why these decisions were made ‚Äì and I even think in a lot of cases they were great decisions. For any open-source or public facing module this makes great sense. The Go toolchain is enforcing strict rules that encourage good API design.</p>



<p>In their effort to make public APIs great, they made it unnecessarily hard to have good ‚Äúlocal‚Äù package design.</p>



<p>There is an <a href="https://github.com/golang/go/issues/40323" rel="noopener">open issue on Github</a> that would make new major versions more discoverable from the CLI. Take a look at that if you are interested.</p>



<p>Go still has the best toolchain and ecosystem. NPM and PIP can suck it.</p>



<p>If you disagree, @ me on Twitter.</p>







<h2>Related Reading</h2>



<ul><li><a href="https://qvault.io/2020/08/15/optimize-for-simplicity-first/">Optimize for Simplicity First</a></li><li><a href="https://qvault.io/2019/10/21/golang-constant-maps-slices/">Constant Maps and Slices in Go</a></li><li><a href="https://qvault.io/2020/08/07/saving-a-third-of-our-memory-by-re-ordering-go-struct-fields/">Saving Memory by Re-ordering Go Structs</a></li></ul>
		</div></div>]]>
            </description>
            <link>https://qvault.io/2020/09/15/gos-major-version-handling-sucks-from-a-fanboy/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24488745</guid>
            <pubDate>Wed, 16 Sep 2020 01:42:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Optimizing PGX Allocations in Golang with Pprof]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24488684">thread link</a>) | @ldelossa
<br/>
September 15, 2020 | https://www.ldelossa.is/blog/allocation_optimization_in_go | <a href="https://web.archive.org/web/*/https://www.ldelossa.is/blog/allocation_optimization_in_go">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div> <div><article> <p>Performance tuning is one of those programming rituals that gets oddly addicting. Seems like humans have a fundamental impulse to make a graph plot in their desired direction. This can be seen in a wide assortment of fields. Day traders watch metrics focused on their net earnings, nutritionists keep their calorie counts logged, and programmers focusing on performance obsess over memory allocations.</p> <p>After spending sometime obessing myself I found myself making large allocation improvements with some tricks in the popular <a href="https://github.com/jackc/pgx">PGX</a> library.</p> <p>I'd like to shout out <em>Kale Blanekship</em> and <em>Eric Chlebek</em> from the performance channel in #gophers slack. They provided the clues used in this post.</p> <h2>The code</h2> <p>The code that's being profiled is a new distributed lock implementation for <a href="https://github.com/quay/claircore/">ClairCore</a>. Postgres is the only required infrastructure for ClairCore by design. While it's not the best mechanim for a distributed lock, <a href="https://www.postgresql.org/docs/9.1/explicit-locking.html">postgres advisory locks</a> can be utilized to get <em>mostly</em> there.</p> <p>You can view the distlock implementation <a href="https://github.com/ldelossa/distlock">here</a></p> <h2>Reducing channel allocations</h2> <p>Our distlock implementation utilizes the request/response channel-of-channel pattern. A request object with a response channel is pushed onto a request channel. When the receiver gets the request it writes to the response channel, unblocking any client listening.</p> <p>This pattern is useful but will also alloc a lot of channels resulting in bloating the heap.</p> <p>To demonstrate this a benchmark will be taken that profiles lock acquisition and lock return.</p> <pre><code><span>$</span><span> go <span>test</span> -benchtime <span>"1m"</span>  -run xxx -bench . -memprofile memprofile.out -cpuprofile cpuprofile.out</span>
</code></pre> <p>The command above runs a 1 minute benchmark profiling both memory and cpu.</p> <p>Next lets start an interactive pprof session over the memory profile and drill into the function where the channel allocations are occuring.</p> <pre><code><span>$</span><span> go tool pprof distlock.test memprofile.out</span>

(pprof) list \.Lock
Total: 194.36MB
ROUTINE ======================== github.com/ldelossa/distlock.(*Manager).Lock in /home/louis/git/go/distlock/manager.go
      20MB       20MB (flat, cum) 10.29% of Total
         .          .     78:	}
         .          .     79:
         .          .     80:	req := request{
         .          .     81:		t:        Lock,
         .          .     82:		key:      key,
   13.50MB    13.50MB     83:		respChan: make(chan response),
         .          .     84:	}
         .          .     85:
         .          .     86:	// guaranteed to return
         .          .     87:	resp := m.g.request(req)
         .          .     88:
         .          .     89:	if !resp.ok {
         .          .     90:		return resp.ctx, func() {}
         .          .     91:	}
         .          .     92:
         .          .     93:	m.propagateCancel(ctx, resp.ctx, key)
         .          .     94:
    6.50MB     6.50MB     95:	return resp.ctx, func() {
         .          .     96:		m.unlock(key)
         .          .     97:	}
         .          .     98:}
         .          .     99:
         .          .    100:func (m *Manager) propagateCancel(parent context.Context, child context.Context, key string) {
</code></pre> <p>Above illustrates 13.50MB of heap memory is spent on allocating request objects and their response channels.</p> <p>We can introduce an object pool to promote the reuse of these channels.</p> <pre><code><span>type</span> reqPool <span>struct</span> {
	c <span>chan</span> request
}

<span><span>func</span> <span>NewReqPool</span><span>(seed <span>int</span>)</span> *<span>reqPool</span></span> {
	c := <span>make</span>(<span>chan</span> request, seed*<span>2</span>)
	<span>for</span> i := <span>0</span>; i &lt; seed; i++ {
		r := request{respChan: <span>make</span>(<span>chan</span> response)}
		<span>select</span> {
		<span>case</span> c &lt;- r:
		<span>default</span>:

		}
	}
	<span>return</span> &amp;reqPool{c}
}

<span><span>func</span> <span>(p *reqPool)</span> <span>Get</span><span>()</span> <span>request</span></span> {
	<span>select</span> {
	<span>case</span> r := &lt;-p.c:
		<span>return</span> r
	<span>default</span>:
		<span>return</span> request{respChan: <span>make</span>(<span>chan</span> response)}
	}
}

<span><span>func</span> <span>(p *reqPool)</span> <span>Put</span><span>(r request)</span></span> {
	<span>select</span> {
	<span>case</span> &lt;-r.respChan:
	<span>default</span>:
	}
	r.key = <span>""</span>
	r.t = Invalid
	<span>select</span> {
	<span>case</span> p.c &lt;- r:
	}
}
</code></pre> <p>The above illustrates a simple channel implemented pool. The first implementation was a sync.Pool. After further profiling however implementing our own proved to be easier on the heap.</p> <p>After plumbing the requst pool into the rest of the code pprof reports a much nicer result.</p> <pre><code>(pprof) list \.Lock
Total: 80.06MB
ROUTINE ======================== github.com/ldelossa/distlock.(*Manager).Lock in /home/louis/git/go/distlock/manager.go
       1MB        1MB (flat, cum)  1.25% of Total
         .          .     89:		return resp.ctx, func() {}
         .          .     90:	}
         .          .     91:
         .          .     92:	m.propagateCancel(ctx, resp.ctx, key)
         .          .     93:
       1MB        1MB     94:	return resp.ctx, func() {
         .          .     95:		m.unlock(key)
         .          .     96:	}
         .          .     97:}
         .          .     98:
         .          .     99:func (m *Manager) propagateCancel(parent context.Context, child context.Context, key string) {

</code></pre> <h2>A PGX Trick</h2> <p>Removing the cost of the response-request model was a good win but there is still more to tune.</p> <p>Lets generate a graph of our call stack and associated allocations.</p> <pre><code>‚ùØ go tool pprof -svg distlock.test memprofile.out
</code></pre> <p><img alt="photo of high PGX allocations" src="https://www.ldelossa.is/profile001.png"></p> <p>The above diagram is showing a large amount of allocations in PGX's getRows method. Its not rare for methods dealing with serialization to and from the database to allocate heavily. But it would be nice if we could eliminate this.</p> <p>Getting a session pg advisory lock typically looks like this.</p> <pre><code>SELECT pg_try_advisory_lock($1);
SELECT pg_advisory_unlock($1);
</code></pre> <p>Both lock functions return a table expression resulting in a true or a false.</p> <p>An optimization we can make is changing these queries to only return a row if the lock function returns true. Our application logic can then simply check whether any rows are returned and not read the contents.</p> <p>First lets fix our queries.</p> <pre><code>SELECT lock FROM pg_try_advisory_lock($1) lock WHERE lock = true;
SELECT lock FROM pg_advisory_unlock($1) lock WHERE lock = true;
</code></pre> <p>A slight modification allows us to only return rows if the lock function returns true.</p> <p>The next step is to short circuit the PGX library from reading the rows. This took a bit of library spelunking but I eventually discovered this...</p> <pre><code>rr := m.conn.PgConn().ExecParams(ctx,
    trySessionUnlock,
    [][]<span>byte</span>{
        keyify(key),
    },
    <span>nil</span>,
    []<span>int16</span>{<span>1</span>},
    <span>nil</span>)
tag, err := rr.Close()
<span>if</span> err != <span>nil</span> {
    <span>return</span> response{<span>false</span>, <span>nil</span>, err}
}
<span>if</span> tag.RowsAffected() == <span>0</span> {
    <span>return</span> response{<span>false</span>, <span>nil</span>, fmt.Errorf(<span>"unlock of key %s returned false"</span>, key)}
}
</code></pre> <p>By using the lower level PgConn object we can exec our queries, get a response writer, and immediately close it to obtain the command tag. The command tag tells us if any rows were affected by the exec. This effectively tells us whether the lock was obtained or not in a somewhat indirect way.</p> <p>Let's take a new 1 minute memory profile to see how this effects our heap.</p> <p><img alt="photo of high PGX allocations" src="https://www.ldelossa.is/profile002.png"></p> <p>Notice the large improvement achieved.</p> <p>We can also compare the benchmark output.</p> <pre><code>85149            890605 ns/op            1288 B/op         21 allocs/op
</code></pre> <p>Where PGX was reading the rows.</p> <pre><code>58051           1238353 ns/op             517 B/op         11 allocs/op
</code></pre> <p>By eliminating the reading of rows we perform many more cycles and cut our allocation in roughly half.</p> <h2>Disclaimer on optimization</h2> <p>Is it worth to dig this deep into your allocations? Depends. If you know the code you are writing will be in the "hot-path" its empowering to know what your allocation profile looks like. Learning the skills to performance tune is addicting and powerful but writing code that can be read and easily maintained should always be the first goal. That being said I do think every engineer should go down the rabbit hole at least once. Its a lot of fun.</p> </article></div></div></div>]]>
            </description>
            <link>https://www.ldelossa.is/blog/allocation_optimization_in_go</link>
            <guid isPermaLink="false">hacker-news-small-sites-24488684</guid>
            <pubDate>Wed, 16 Sep 2020 01:33:37 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Mata by Saffron launched on Product Hunt today]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24488529">thread link</a>) | @sashaseifollahi
<br/>
September 15, 2020 | https://saffron.vc/producthunt | <a href="https://web.archive.org/web/*/https://saffron.vc/producthunt">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                <div>
<div>
    	<div>
        					<div>
				<div>
							<div data-elementor-type="wp-page" data-elementor-id="11367" data-elementor-settings="[]">
						<div>
							<div>
							<section data-id="1fe78af" data-element_type="section">
						<div>
							<div>
					<div data-id="c5b7f26" data-element_type="column">
			<div>
							<div>
						<div data-id="78e7cb4" data-element_type="widget" data-widget_type="heading.default">
				<p>
			<h2>Launch your ideas <u><i>faster</i></u>. Period.</h2>		</p>
				</div>
				<section data-id="476b41f" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;,&quot;animation&quot;:&quot;pulse&quot;,&quot;animation_delay&quot;:30}">
						<div>
							<div>
					<div data-id="12481c5" data-element_type="column">
			<div>
							<div>
						
				
				<div data-id="4615d39" data-element_type="widget" data-widget_type="html.default">
				<p><a href="https://www.producthunt.com/posts/mata-2?utm_source=badge-featured&amp;utm_medium=badge&amp;utm_souce=badge-mata-2" target="_blank" rel="noopener"><img src="https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=254807&amp;theme=light" alt="mata - A startup suite for emerging entrepreneurs | Product Hunt Embed"></a>		</p>
				</div>
				<div data-id="e1e80eb" data-element_type="widget" data-widget_type="html.default">
				<p><a href="https://www.producthunt.com/posts/mata-2?utm_source=badge-featured&amp;utm_medium=badge&amp;utm_souce=badge-mata-2" target="_blank" rel="noopener"><img src="https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=254807&amp;theme=light" alt="mata - A startup suite for emerging entrepreneurs | Product Hunt Embed"></a>		</p>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<div data-id="77010f3" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p><iframe src="https://www.youtube.com/embed/IUyO3a9Oa8s" width="560" height="315" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
				</div>
				</div>
						</div>
					</div>
		</div>
				<div data-id="74daec2" data-element_type="column">
			<div>
							<div>
						<div data-id="eb787bd" data-element_type="widget" data-settings="{&quot;_animation&quot;:&quot;fadeInRight&quot;,&quot;_animation_delay&quot;:5}" data-widget_type="image.default">
				<div>
					<p><a href="https://www.youtube.com/watch?v=D18aQknb8Pg">
							<img width="764" height="1024" src="https://saffron.b-cdn.net/wp-content/uploads/2020/06/Screenshot-2020-06-25-at-01.27.26-1.png" alt="" loading="lazy" srcset="https://saffron.b-cdn.net/wp-content/uploads/2020/06/Screenshot-2020-06-25-at-01.27.26-1.png 764w, https://saffron.b-cdn.net/wp-content/uploads/2020/06/Screenshot-2020-06-25-at-01.27.26-1-224x300.png 224w, https://saffron.b-cdn.net/wp-content/uploads/2020/06/Screenshot-2020-06-25-at-01.27.26-1-600x804.png 600w" sizes="(max-width: 764px) 100vw, 764px">								</a>
											</p>
				</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section data-id="e3eff9c" data-element_type="section">
						<div>
							<div>
					<div data-id="507c111" data-element_type="column">
			<div>
							<div>
						<div data-id="90d5ea4" data-element_type="widget" data-widget_type="heading.default">
				<p>
			<h2>Launching an app shouldn't be rocket science</h2>		</p>
				</div>
				<div data-id="4ae7e91" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<div><p><span><em>mata by Saffron</em><br></span></p><p>A platform with services to build your company.</p></div>
				</div>
				</div>
				
				<section data-id="6608698" data-element_type="section">
						<div>
							<div>
					<div data-id="87145a1" data-element_type="column" data-settings="{&quot;background_background&quot;:&quot;classic&quot;,&quot;animation&quot;:&quot;fadeInUp&quot;,&quot;animation_delay&quot;:100}">
			<div>
							<div>
						<div data-id="f182e02" data-element_type="widget" data-widget_type="eael-info-box.default">
				<div>
			                    <div>
                    <p><img src="https://saffron.b-cdn.net/wp-content/uploads/2020/02/working-with-team-revisi.png" alt="">
            
            
            
        </p>
            
    </div>		</div>
				</div>
						</div>
					</div>
		</div>
				<div data-id="a9b577b" data-element_type="column" data-settings="{&quot;animation&quot;:&quot;fadeInUp&quot;,&quot;animation_delay&quot;:700}">
			<div>
							<div>
						<div data-id="d8ee2b0" data-element_type="widget" data-widget_type="eael-info-box.default">
				<div>
			                    <div>
                    <p><img src="https://saffron.b-cdn.net/wp-content/uploads/2020/02/business-across-the-world-revisi-2-01-01.jpg" alt="">
            
            
            
        </p>
            <div>
            <h4>App launch services</h4>
                                                                        <p>Get your app built by our mata team and further services to launch your product.<br><span><a href="https://saffron.vc/on-demand-launch-services/">Learn More</a></span></p>
                                                                            </div>
    </div>		</div>
				</div>
						</div>
					</div>
		</div>
				<div data-id="74eb4e0" data-element_type="column" data-settings="{&quot;animation&quot;:&quot;fadeInUp&quot;,&quot;animation_delay&quot;:300}">
			<div>
							<div>
						<div data-id="283ca50" data-element_type="widget" data-widget_type="eael-info-box.default">
				<div>
			                    <div>
                    <p><img src="https://saffron.b-cdn.net/wp-content/uploads/2019/11/llc-revisi-01.png" alt="">
            
            
            
        </p>
            <div>
            <h4>Company formation</h4>
                                                                        <p>Form your business digitally and access benefits and 24/7 VIP concierge services.<br><span><a href="https://saffron.vc/startup-formation/">Learn More</a></span></p>
                                                                            </div>
    </div>		</div>
				</div>
						</div>
					</div>
		</div>
				<div data-id="fbfcb54" data-element_type="column" data-settings="{&quot;animation&quot;:&quot;fadeInUp&quot;,&quot;animation_delay&quot;:500}">
			<div>
							<div>
						<div data-id="4f462f3" data-element_type="widget" data-widget_type="eael-info-box.default">
				<div>
			                    <div>
                    <p><img src="https://saffron.b-cdn.net/wp-content/uploads/2020/07/ccorp.png" alt="An investor advising founders on the best legal entity for startups.">
            
            
            
        </p>
            <div>
            <h4>Legal docs on-demand</h4>
                                                                        <p>Stay legally compliant with your state. Custom legal documents and filing services on-demand.<br><span><a href="https://saffron.vc/on-demand-services-legal-services/">Learn More</a></span></p>
                                                                            </div>
    </div>		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section data-id="221e078" data-element_type="section">
						
		</section>
				<section data-id="99f563f" data-element_type="section" data-settings="{&quot;stretch_section&quot;:&quot;section-stretched&quot;,&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
							<div>
					<div data-id="84ad22f" data-element_type="column">
			<div>
							<div>
						
				<div data-id="7cec208" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>An array of possibility with mata</p>
				</div>
				</div>
				
				<section data-id="ef379fa" data-element_type="section">
						
		</section>
				<section data-id="c5f11de" data-element_type="section">
						
		</section>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section data-id="fa7c010" data-element_type="section" data-settings="{&quot;stretch_section&quot;:&quot;section-stretched&quot;,&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
							<div>
					<div data-id="e438c45" data-element_type="column">
			<div>
							<div>
						<div data-id="f7f2f3d" data-element_type="widget" data-widget_type="image.default">
				<div>
					<p><img width="1024" height="730" src="https://saffron.b-cdn.net/wp-content/uploads/2020/02/working-with-team-revisi-1024x730.png" alt="" loading="lazy" srcset="https://saffron.b-cdn.net/wp-content/uploads/2020/02/working-with-team-revisi-1024x730.png 1024w, https://saffron.b-cdn.net/wp-content/uploads/2020/02/working-with-team-revisi-300x214.png 300w, https://saffron.b-cdn.net/wp-content/uploads/2020/02/working-with-team-revisi-768x548.png 768w, https://saffron.b-cdn.net/wp-content/uploads/2020/02/working-with-team-revisi-600x428.png 600w" sizes="(max-width: 1024px) 100vw, 1024px">											</p>
				</div>
				</div>
						</div>
					</div>
		</div>
				
								</div>
					</div>
		</section>
				<section data-id="c328511" data-element_type="section" data-settings="{&quot;stretch_section&quot;:&quot;section-stretched&quot;,&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
							<div>
					<div data-id="a282fec" data-element_type="column" data-settings="{&quot;animation&quot;:&quot;none&quot;,&quot;animation_delay&quot;:30}">
			<div>
							<div>
						<div data-id="164d96e" data-element_type="widget" data-settings="{&quot;_animation&quot;:&quot;fadeInLeft&quot;}" data-widget_type="heading.default">
				<p>
			<h2>We offer fast, professional and exceptional services</h2>		</p>
				</div>
				
				<div data-id="2f3f5d0" data-element_type="widget" data-settings="{&quot;_animation&quot;:&quot;fadeInUp&quot;,&quot;_animation_delay&quot;:300}" data-widget_type="eael-feature-list.default">
				<div>
					<div>
			<ul id="eael-feature-list-2f3f5d0">
													                <li>
									                    

						



						<div>
							<h3>The mata team</h3>
						<p>Our dedicated and talented mata team ensure to deliver top quality deliverables. By following strict processes we can deliver the same level of attention and quality to all service orders.</p>
						</div>

					</li>
							</ul>
		</div>
				</div>
				</div>
				<div data-id="d7bfba8" data-element_type="widget" data-settings="{&quot;_animation&quot;:&quot;fadeInUp&quot;,&quot;_animation_delay&quot;:100}" data-widget_type="eael-feature-list.default">
				<div>
					<div>
			<ul id="eael-feature-list-d7bfba8">
													                <li>
									                    

						



						<div>
							<h3>Keep your data secure</h3>
						<p>We use mata to run mata, so we protect your data as if it were our own. We work with customers every day to make sure their data security requirements and expectations are met or exceeded.
</p>
						</div>

					</li>
							</ul>
		</div>
				</div>
				</div>
				<div data-id="1a9ea1c" data-element_type="widget" data-settings="{&quot;_animation&quot;:&quot;fadeInUp&quot;,&quot;_animation_delay&quot;:200}" data-widget_type="eael-feature-list.default">
				<div>
					<div>
			<ul id="eael-feature-list-1a9ea1c">
													                <li>
									                    

						



						<div>
							<h3>Non-Disclosure agreements</h3>
						<p>Defend your company‚Äôs confidential information with one-way and two-way NDAs that both parties can execute online.
</p>
						</div>

					</li>
							</ul>
		</div>
				</div>
				</div>
						</div>
					</div>
		</div>
				<div data-id="1e288d9" data-element_type="column" data-settings="{&quot;animation&quot;:&quot;none&quot;,&quot;animation_delay&quot;:30}">
			<div>
							<div>
						<div data-id="1f2e1ed" data-element_type="widget" data-widget_type="image.default">
				<div>
					<p><img width="426" height="854" src="https://saffron.b-cdn.net/wp-content/uploads/2020/07/Group-352.png" alt="" loading="lazy" srcset="https://saffron.b-cdn.net/wp-content/uploads/2020/07/Group-352.png 426w, https://saffron.b-cdn.net/wp-content/uploads/2020/07/Group-352-150x300.png 150w" sizes="(max-width: 426px) 100vw, 426px">											</p>
				</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section data-id="c388763" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
							<div>
					<div data-id="ccf6758" data-element_type="column">
			<div>
							<div>
						<div data-id="874be11" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<div><div><div><div><div><div>
    <div data-enable-loop="yes" data-enable-autoplay="yes" data-slider-speed="5000" data-slider-speed-animation="600" data-enable-navigation="yes" data-enable-pagination="yes">
        <div>
            <div>
        
                <div id="mkdf-testimonials-123">
                                            <p><img width="140" height="140" src="https://saffron.b-cdn.net/wp-content/uploads/2018/10/0-150x150.jpg" alt="" loading="lazy" srcset="https://saffron.b-cdn.net/wp-content/uploads/2018/10/0-150x150.jpg 150w, https://saffron.b-cdn.net/wp-content/uploads/2018/10/0-300x300.jpg 300w, https://saffron.b-cdn.net/wp-content/uploads/2018/10/0-100x100.jpg 100w, https://saffron.b-cdn.net/wp-content/uploads/2018/10/0.jpg 320w" sizes="(max-width: 140px) 100vw, 140px">                        </p>
                                        <div>
                                                                            <p>Finally a way for entrepreneurs to manage their progress and expedite the slow processes.</p>
                                                                            <h6>
                                <span>Eugene Lee </span>
                                                                    <span>Investor</span>
                                                            </h6>
                                            </div>
                </div>

            
                <div id="mkdf-testimonials-122">
                                            <p><img width="140" height="140" src="https://saffron.b-cdn.net/wp-content/uploads/2018/10/Siddharth-Pandiya..-mti-news1-150x150.jpg" alt="" loading="lazy" srcset="https://saffron.b-cdn.net/wp-content/uploads/2018/10/Siddharth-Pandiya..-mti-news1-150x150.jpg 150w, https://saffron.b-cdn.net/wp-content/uploads/2018/10/Siddharth-Pandiya..-mti-news1-300x300.jpg 300w, https://saffron.b-cdn.net/wp-content/uploads/2018/10/Siddharth-Pandiya..-mti-news1-100x100.jpg 100w" sizes="(max-width: 140px) 100vw, 140px">                        </p>
                                        <div>
                                                                            <p>It saved me weeks of time and saved me so much money!</p>
                                                                            <h6>
                                <span>Siddharth Pandiya </span>
                                                                    <span>Entrepreneur</span>
                                                            </h6>
                                            </div>
                </div>

            
                <div id="mkdf-testimonials-114">
                                            <p><img width="140" height="140" src="https://saffron.b-cdn.net/wp-content/uploads/2018/10/XzA2MzY3MDEuanBn-150x150.jpg" alt="" loading="lazy" srcset="https://saffron.b-cdn.net/wp-content/uploads/2018/10/XzA2MzY3MDEuanBn-150x150.jpg 150w, https://saffron.b-cdn.net/wp-content/uploads/2018/10/XzA2MzY3MDEuanBn-300x300.jpg 300w, https://saffron.b-cdn.net/wp-content/uploads/2018/10/XzA2MzY3MDEuanBn-100x100.jpg 100w, https://saffron.b-cdn.net/wp-content/uploads/2018/10/XzA2MzY3MDEuanBn.jpg 512w" sizes="(max-width: 140px) 100vw, 140px">                        </p>
                                        <div>
                                                                            <p>A single platform for planning all components of our company</p>
                                                                            <h6>
                                <span>Roxanne Ohayon</span>
                                                                    <span>Entrepreneur</span>
                                                            </h6>
                                            </div>
                </div>

            
                <div id="mkdf-testimonials-113">
                                            <p><img width="140" height="140" src="https://saffron.b-cdn.net/wp-content/uploads/2018/10/XzAzMTUyNzkuanBn-150x150.jpg" alt="" loading="lazy" srcset="https://saffron.b-cdn.net/wp-content/uploads/2018/10/XzAzMTUyNzkuanBn-150x150.jpg 150w, https://saffron.b-cdn.net/wp-content/uploads/2018/10/XzAzMTUyNzkuanBn-300x300.jpg 300w, https://saffron.b-cdn.net/wp-content/uploads/2018/10/XzAzMTUyNzkuanBn-100x100.jpg 100w, https://saffron.b-cdn.net/wp-content/uploads/2018/10/XzAzMTUyNzkuanBn.jpg 512w" sizes="(max-width: 140px) 100vw, 140px">                        </p>
                                        <div>
                                                                            <p>Exceeds my expectations for completing a business plan and incorporating my business</p>
                                                                            <h6>
                                <span>Craig Smith</span>
                                                                    <span>Entrepreneur</span>
                                                            </h6>
                                            </div>
                </div>

                        </div>
        </div>
        
    </div>
</div></div></div></div></div>
</div>
				</div>
				</div>
				<div data-id="2426a0d" data-element_type="widget" data-widget_type="heading.default">
				<p>
			<h2>Our team will follow your rules and requests
</h2>		</p>
				</div>
				<div data-id="c76eecc" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p><i><span>If we believe the work completed does not meet your needs, we will assign a new person on the task. If we can‚Äôt do it, you have every right to ask for a full on-the-spot refund. 100% money-back guarantee on unsatisfied services. <br></span></i></p>
				</div>
				</div>
				
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section data-id="161d936" data-element_type="section" data-settings="{&quot;stretch_section&quot;:&quot;section-stretched&quot;,&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
							<div>
					<div data-id="541a2e6" data-element_type="column" data-settings="{&quot;animation&quot;:&quot;none&quot;,&quot;animation_delay&quot;:30}">
			<div>
							<div>
						<div data-id="76fa9a6" data-element_type="widget" data-settings="{&quot;_animation&quot;:&quot;fadeIn&quot;,&quot;_animation_delay&quot;:30}" data-widget_type="image.default">
				<div>
					<p><img width="1300" height="1241" src="https://saffron.b-cdn.net/wp-content/uploads/2020/02/guard-01-Security-3-1300x1241.png" alt="" loading="lazy">											</p>
				</div>
				</div>
				
						</div>
					</div>
		</div>
				<div data-id="62c4d7c" data-element_type="column" data-settings="{&quot;animation&quot;:&quot;none&quot;,&quot;animation_delay&quot;:30}">
			<div>
							<div>
						
				
				<div data-id="99015e4" data-element_type="widget" data-settings="{&quot;_animation&quot;:&quot;fadeInUp&quot;,&quot;_animation_delay&quot;:100}" data-widget_type="eael-feature-list.default">
				<div>
					<div>
			<ul id="eael-feature-list-99015e4">
													                <li>
									                    

						



						<div>
							<h3>100% Protected</h3>
						<p>Your business idea is 100% protected by our non-disclosure agreement.</p>
						</div>

					</li>
							</ul>
		</div>
				</div>
				</div>
				<div data-id="0cc4eee" data-element_type="widget" data-settings="{&quot;_animation&quot;:&quot;fadeInUp&quot;,&quot;_animation_delay&quot;:300}" data-widget_type="eael-feature-list.default">
				<div>
					<div>
			<ul id="eael-feature-list-0cc4eee">
													                <li>
									                    

						



						<div>
							<h3>Confidentiality</h3>
						<p>Keeping conversations and files with our customers private is our top priority. We regularly complete an internal auditing process to assure all information is kept private.</p>
						</div>

					</li>
							</ul>
		</div>
				</div>
				</div>
				<div data-id="a4d74c6" data-element_type="widget" data-settings="{&quot;_animation&quot;:&quot;fadeInUp&quot;,&quot;_animation_delay&quot;:200}" data-widget_type="eael-feature-list.default">
				<div>
					<div>
			<ul id="eael-feature-list-a4d74c6">
													                <li>
									                    

						



						<div>
							<h3>Safety</h3>
						<p>Your data &amp; money are safe + secure.
</p>
						</div>

					</li>
							</ul>
		</div>
				</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section data-id="fbd26a0" data-element_type="section" data-settings="{&quot;stretch_section&quot;:&quot;section-stretched&quot;,&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
							<div>
					<div data-id="ed0c310" data-element_type="column">
			<div>
							<div>
						<div data-id="10b6ec0" data-element_type="widget" data-widget_type="image.default">
				<div>
					<p><img width="1024" height="730" src="https://saffron.b-cdn.net/wp-content/uploads/2020/02/working-with-team-revisi-1024x730.png" alt="" loading="lazy" srcset="https://saffron.b-cdn.net/wp-content/uploads/2020/02/working-with-team-revisi-1024x730.png 1024w, https://saffron.b-cdn.net/wp-content/uploads/2020/02/working-with-team-revisi-300x214.png 300w, https://saffron.b-cdn.net/wp-content/uploads/2020/02/working-with-team-revisi-768x548.png 768w, https://saffron.b-cdn.net/wp-content/uploads/2020/02/working-with-team-revisi-600x428.png 600w" sizes="(max-width: 1024px) 100vw, 1024px">											</p>
				</div>
				</div>
						</div>
					</div>
		</div>
				
								</div>
					</div>
		</section>
				<section data-id="b9fbee0" data-element_type="section">
						<div>
							<div>
					<div data-id="d6b499e" data-element_type="column">
			<div>
							<div>
						<div data-id="4944f24" data-element_type="widget" data-widget_type="testimonial.default">
				<div>
					<div>
							<p>"I never would have thought in my life that it is possible to setup and launch a business so easily, and I studied Law. I really owe it to the mata team for my startup's success."</p>
			
						<div>
				<div>
											<p><img width="200" height="200" src="https://saffron.b-cdn.net/wp-content/uploads/2020/06/download.jpg" alt="" loading="lazy" srcset="https://saffron.b-cdn.net/wp-content/uploads/2020/06/download.jpg 200w, https://saffron.b-cdn.net/wp-content/uploads/2020/06/download-150x150.jpg 150w, https://saffron.b-cdn.net/wp-content/uploads/2020/06/download-100x100.jpg 100w" sizes="(max-width: 200px) 100vw, 200px">						</p>
					
										<div>
														<p>George Jacklin</p>
																						<p>Entrepreneur</p>
													</div>
									</div>
			</div>
					</div>
				</div>
				</div>
				<div data-id="0d00197" data-element_type="widget" data-widget_type="html.default">
				<p><a href="https://www.producthunt.com/posts/mata-2?utm_source=badge-featured&amp;utm_medium=badge&amp;utm_souce=badge-mata-2" target="_blank" rel="noopener"><img src="https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=254807&amp;theme=light" alt="mata - A startup suite for emerging entrepreneurs | Product Hunt Embed"></a>		</p>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
						</div>
						</div>
					</div>
							</div>
							</div>
		        	</div>

    </div>

</div> <!-- close div.content_inner -->
	</div></div>]]>
            </description>
            <link>https://saffron.vc/producthunt</link>
            <guid isPermaLink="false">hacker-news-small-sites-24488529</guid>
            <pubDate>Wed, 16 Sep 2020 01:05:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[When you browse Instagram and find Tony Abbott's passport number]]>
            </title>
            <description>
<![CDATA[
Score 2287 | Comments 331 (<a href="https://news.ycombinator.com/item?id=24488224">thread link</a>) | @michael_fine
<br/>
September 15, 2020 | https://mango.pdf.zone/finding-former-australian-prime-minister-tony-abbotts-passport-number-on-instagram | <a href="https://web.archive.org/web/*/https://mango.pdf.zone/finding-former-australian-prime-minister-tony-abbotts-passport-number-on-instagram">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

    

    <div itemprop="articleBody">
        <hr>
        <p><img src="https://mango.pdf.zone/img/sunburnt-country/title.png" alt="title image what's up twitter-large"></p>



<p>So you know when you‚Äôre flopping about at home, minding your own business, drinking from your water bottle in a way that does not possess <em>any</em> intent to subvert the Commonwealth of Australia?</p>

<p>It‚Äôs a feeling I know all too well, and in which I was vigorously partaking when I got this message in ‚Äúthe group chat‚Äù<sup id="fnref:groupchat" role="doc-noteref"><a href="#fn:groupchat">1</a></sup>.</p>

<p><img src="https://mango.pdf.zone/img/sunburnt-country/groupchat.png" alt="Can you hack this man?|medium">
<em>A nice message from my friend, with a photo of a boarding pass üôÇ A good thing about messages from your friends is that they do not have any rippling consequences üôÇüôÇüôÇ</em></p>

<p>The man in question is <a href="https://en.wikipedia.org/wiki/Tony_Abbott">Tony Abbott</a>, one of Australia‚Äôs <em>many</em> former Prime Ministers.</p>

<p><img src="https://mango.pdf.zone/img/sunburnt-country/tony_abbott_wikipedia.png" alt="if u google tony abbott u get this|small">
<em>That‚Äôs him, officer</em></p>

<p>For security reasons, we try to change our Prime Minister every six months, and to never use the same Prime Minister on multiple websites.<sup id="fnref:kevin07" role="doc-noteref"><a href="#fn:kevin07">2</a></sup></p>

<h4 id="the-boarding-pass-photo">The boarding pass photo</h4>
<p>This particular former PM had just posted a picture of his boarding pass on Instagram (Instagram, in case you don‚Äôt know it, is an app you can open up on your phone any time to look at ads).</p>

<p><img src="https://mango.pdf.zone/img/sunburnt-country/instagrampost.PNG" alt="Instagram post showing boarding pass|large">
<em>The since-deleted Instagram post showing the boarding pass and baggage receipt. The caption reads ‚Äúcoming back home from japan üòçüòç  looking forward to seeing everyone! climate change isn‚Äôt real üòå ok byeee‚Äù</em></p>

<h4 id="can-you-hack-this-man">‚ÄúCan you hack this man?‚Äù</h4>
<p>My friend<sup id="fnref:hoggemoade" role="doc-noteref"><a href="#fn:hoggemoade">3</a></sup> (who we will refer to by their group chat name, ùñçùñîùñåùñåùñä ùñíùñîùñÜùñâùñä) is asking<sup id="fnref:onbehalf" role="doc-noteref"><a href="#fn:onbehalf">4</a></sup> whether I can ‚Äúhack this man‚Äù not because I am the kind of person who regularly commits ùíÑùíöùíÉùíÜùíì ùíïùíìùíÜùíÇùíîùíêùíè on a whim, but because we‚Äôd recently been talking about boarding passes.</p>

<p>I‚Äôd said that people post pictures of their boarding passes all the time, not knowing that it can sometimes be used to get their passport number and stuff. They just post it being like ‚Äúomg going on holidayyyy üòçüòçüòç‚Äù, unaware that they‚Äôre posting cringe.</p>

<p><img src="https://mango.pdf.zone/img/sunburnt-country/instagramboardingpasses.png" alt="screenshot of #boardingpass on instagram|medium">
<em>People post their boarding passes all the time, because it‚Äôs not clear that they‚Äôre meant to be secret</em></p>

<p>Meanwhile, some hacker is rubbing their hands together, being all ‚Äúyumyum identity fraud üëÄ‚Äù in their dark web Discord, because this happens a <em>lot</em>.</p>

<p><img src="https://mango.pdf.zone/img/sunburnt-country/boardingpassposts.png" alt="screenshot of #boardingpass on instagram"></p>

<hr>

<p>So there I was, making intense and meaningful eye contact with this chat bubble, asking me if I could ‚Äúhack this man‚Äù.</p>

<h3 id="surely-you-wouldnt">Surely you wouldn‚Äôt</h3>
<p>Of course, my friend wasn‚Äôt <em>actually</em> asking me to hack the former Prime Minister.</p>



<p>However.</p>



<p>You <em>gotta</em>.</p>

<p>I mean‚Ä¶ what are you gonna do, <em>not</em> click it? Are you gonna let a <em>link</em> that‚Äôs like 50% advertising tracking ID tell you what to do? Wouldn‚Äôt you be <em>curious</em>?</p>

<p>The former Prime Minister had just posted his boarding pass. Was that <em>bad</em>? Was someone in danger? I didn‚Äôt know.</p>

<p>What I did know was: the <em>least</em> I could do<sup id="fnref:nocrime" role="doc-noteref"><a href="#fn:nocrime">5</a></sup> for my country would be to have a casual browse üëÄ</p>

<h2 id="investigating-the-boarding-pass-photo">Investigating the boarding pass photo</h2>
<h3 id="step-1-hubris">Step 1: Hubris</h3>

<p>So I had a bit of a casual browse, and got the picture of the boarding pass, and then‚Ä¶. I didn‚Äôt know what was supposed to happen after that.</p>

<p>Well, I‚Äôd heard that it‚Äôs bad to post your boarding pass online, because if you do, a bored 17 year-old Russian boy called ‚ÄúKatie-senpai‚Äù might somehow use it to commit identity fraud. But I don‚Äôt know anyone like that, so I just clumsily googled some stuff.</p>

<h4 id="googling-how-2-hakc-boarding-pass">Googling how 2 hakc boarding pass</h4>
<p><img src="https://mango.pdf.zone/img/sunburnt-country/uhhboardingpasshacking.png" alt="uhhh|small"></p>

<p>Eventually I found <a href="https://null-byte.wonderhowto.com/how-to/hackers-use-hidden-data-airline-boarding-passes-hack-flights-0180728/">a blog post</a> explaining that yes, pictures of boarding passes can indeed be used for Crimes. The part you wanna be looking at for all your criming needs is the barcode, because it‚Äôs got the ‚ÄúBooking Reference‚Äù (e.g. <code>H8JA2A</code>) in it.</p>

<p>Why do you want the booking reference? It‚Äôs one of the two things you need to log in to the airline website to manage your flight.</p>

<p>The second one is your‚Ä¶ last name. I was really hoping the second one would be like a password or something. But, no, it‚Äôs the booking reference the airline emails you and prints on your boarding pass. And it also lets you log in to the airline website?</p>

<p>That sounds suspiciously like a password to me, but like I‚Äôm still fine to pretend it‚Äôs not if you are.</p>

<h3 id="step-2-scan-the-barcode">Step 2: Scan the barcode</h3>
<p>I‚Äôve been practicing every morning at sunrise, but still can‚Äôt scan barcodes with my eyes. I had to settle for a barcode scanner app on my phone, but when I tried to scan the picture in the Instagram post, it didn‚Äôt work :((</p>

<p><img src="https://mango.pdf.zone/img/sunburnt-country/boardingpass.png" alt="the boarding pass photo">
<em>Maybe I shouldn‚Äôt have blurred out the barcode first</em></p>

<h3 id="step-2-scan-the-barcode-but-more">Step 2: Scan the barcode, but more</h3>

<p>Well, maybe it wasn‚Äôt scanning because the picture was too blurry.</p>

<p>I spent around 15 minutes in an ‚Äúenhance, ENHANCE‚Äù montage, fiddling around with the image, increasing the contrast, and so on. Despite the montage taking up way too much of the 22 minute episode, I couldn‚Äôt even get the barcode to scan<sup id="fnref:step3" role="doc-noteref"><a href="#fn:step3">6</a></sup>.</p>

<h3 id="step-2-notice-that-the-booking-reference-is-printed-right-there-on-the-paper">Step 2: Notice that the Booking Reference is printed right there on the paper</h3>

<p>After staring at this image for 15 minutes, I noticed the Booking Reference is just‚Ä¶ printed on the baggage receipt.</p>

<p>I graduated university.</p>

<p>But it did not prepare me for this.</p>

<p><img src="https://mango.pdf.zone/img/sunburnt-country/bookingrefhighlighted.png" alt="Boarding pass with booking reference highlighted">
<em>askdjhaflajkshdflkh</em></p>

<h3 id="step-3-visit-the-airlines-website">Step 3: Visit the airline‚Äôs website</h3>

<p><img src="https://mango.pdf.zone/img/sunburnt-country/bookinglogin2.png" alt="Manage booking login screen with empty fields-large"></p>

<p>After recovering from <em>that</em> emotional rollercoaster, I went to <a href="https://qantas.com.au/">qantas.com.au</a>, and clicked ‚ÄúManage Booking‚Äù. In case you don‚Äôt know it because you live in a country with fast internet, Qantas is the main airline here in Australia.</p>

<p>(I also very conveniently started recording my screen, which is gonna pay off <em>big time</em> in just a moment.)</p>

<h3 id="step-4-type-in-the-booking-reference">Step 4: Type in the Booking Reference</h3>

<p>Well, the login form was just‚Ä¶ <em>there</em>, and it was asking for a Booking Reference and a last name. I had just flawlessly read the Booking Reference from the boarding pass picture, and, well‚Ä¶ I knew the last name<sup id="fnref:lastname" role="doc-noteref"><a href="#fn:lastname">7</a></sup>.</p>

<p>I did hesitate for a split-second, but‚Ä¶ no, I had to know.</p>

<h3 id="step-5-crimes">Step 5: Crimes(?)</h3>

<video controls="" preload="auto">

    <source src="https://mango.pdf.zone/img/sunburnt-country/youngman.mp4" type="video/mp4">

<img src="https://mango.pdf.zone/img/sunburnt-country/summary.gif">
</video>
<p><em>youngman.mp4</em></p>

<p><img src="https://mango.pdf.zone/img/sunburnt-country/loggedin.png" alt="The logged in &quot;manage booking page&quot;">
<em>The ‚ÄúManage Booking‚Äù page, logged in as some guy called Anthony Abbott</em></p>

<h3 id="can-i-get-a-yikes-in-the-chat">Can I get a YIKES in the chat</h3>

<p>Leave a comment if you really felt that.</p>

<p><img src="https://mango.pdf.zone/img/sunburnt-country/yikes.png" alt="yikes"></p>

<p>I guess I was now logged the heck in as Tony Abbott? And for all I know, everyone else who saw his Instagram post was right there with me. It‚Äôs kinda wholesome, to imagine us all there together. But also probably suboptimal in a governmental sense.</p>

<h5 id="was-there-anything-secret-in-here">Was there anything secret in here?</h5>

<p>I then just incredibly browsed the page, browsed it so hard.</p>

<p>I saw Tony Abbott‚Äôs name<sup id="fnref:name" role="doc-noteref"><a href="#fn:name">8</a></sup>, flight times, and Frequent Flyer number, but not really anything <em>super</em> secret-looking. Not gonna be committing any cyber treason with a Frequent Flyer number. The flight was in the past, so I couldn‚Äôt change anything, either.</p>

<p>The page said the flight had been booked by a travel agent, so I guessed some information would be missing because of that.</p>

<p>I clicked around and scrolled a considerable length, but still didn‚Äôt find any government secrets.</p>

<p>Some people might give up here. But I, the Icarus of computers, was simply too dumb to know when to stop.</p>

<h3 id="were-not-done-just-because-a-web-page-says-were-done">We‚Äôre not done just because a <em>web page</em> says we‚Äôre done</h3>

<p>I wanted to see if there were juicy things hidden <em>inside</em> the page. To do it, I had to use the <em>only</em> hacker tool I know.</p>

<p><img src="https://mango.pdf.zone/img/sunburnt-country/inspectelement.png" alt="Right click > Inspect-small">
<em>Right click &gt; Inspect Element, all you need to subvert the Commonwealth of Australia</em></p>

<p>Listen. This is the only part of the story that might be confused for highly elite computer skill. It‚Äôs not, though. Maybe later someone will show you this same thing to try and flex, acting like only <em>they</em> know how to do it. You will not go gently into that good night. You will refuse to acknowledge their flex, killing them instantly.</p>

<h5 id="how-does-inspect-element-work">How does ‚ÄúInspect Element‚Äù work?</h5>
<p>‚ÄúInspect Element‚Äù, as it‚Äôs called, is a feature of Google Chrome that lets you see the computer‚Äôs internal representation (HTML) of the page you‚Äôre looking at. Kinda like opening up a clock and looking at the cool cog party inside.</p>

<p><img src="https://upload.wikimedia.org/wikipedia/commons/6/67/Pocketwatch_cutaway_drawing.jpg" alt="cog party|small">
<em>Yeahhh go little cogs, look at ‚Äòem absolutely going off. Now imagine this but with like, JavaScript</em></p>

<p>Everything you see when you use ‚ÄúInspect Element‚Äù was already downloaded to your computer, you just hadn‚Äôt asked Chrome to show it to you yet. Just like how the cogs were already in the watch, you just hadn‚Äôt opened it up to look.</p>

<p>But let us dispense with frivolous cog talk. Cheap tricks such as ‚ÄúInspect Element‚Äù are used by programmers to try and understand how the website works. This is ultimately futile: Nobody can understand how websites work. Unfortunately, it kinda <em>looks</em> like hacking the first time you see it.</p>

<p>If you‚Äôd like to know more about it, I‚Äôve prepared a short video.</p>

<blockquote><p lang="en" dir="ltr">hey youtube welcome to my hacking tutorial, today we're gonna hack.... the nsa <a href="https://t.co/2Z35GJjSZE">pic.twitter.com/2Z35GJjSZE</a></p>‚Äî ‚ÄúAlex‚Äù (@mangopdf) <a href="https://twitter.com/mangopdf/status/1123400764926226432?ref_src=twsrc%5Etfw">May 1, 2019</a></blockquote>


<h3 id="browsing-the-manage-booking-pages-html">Browsing the ‚ÄúManage Booking‚Äù page‚Äôs HTML</h3>

<p>I scrolled around the page‚Äôs HTML, not really knowing what it meant, furiously trying to find anything that looked out of place or secret.</p>

<p>I eventually realised that manually reading HTML with my eyes was not an efficient way of defending my country, and Ctrl + F‚Äôd the HTML for ‚Äúpassport‚Äù.</p>

<h3 id="oh-no">oh no</h3>

<p><img src="https://mango.pdf.zone/img/sunburnt-country/passportjson.gif" alt="Blurred screenshot of close up &quot;passport&quot; number"></p>

<h3 id="oh-yes">Oh yes</h3>

<p>It‚Äôs just <em>there</em>.</p>

<p>At this point I was fairly sure I was looking at the <em>extremely</em> secret government-issued ID of the <em>28th Prime Minister of the Commonwealth of Australia, servant to her Majesty Queen Elizabeth II</em> and I was <em>kinda</em> worried that I was somehow doing something wrong, but like, not enough to stop.</p>

<h3 id="anything-else-in-this-page">‚Ä¶.anything <em>else</em> in this page?</h3>

<p>Well damn, if Tony Abbott‚Äôs passport number is in this treasure trove of computer spaghetti, maybe there‚Äôs wayyyyy more. Perhaps this HTML contains the lost launch codes to the Sydney Opera House, or Harold Holt<sup id="fnref:holt" role="doc-noteref"><a href="#fn:holt">9</a></sup>.</p>

<p>Maybe there‚Äôs a phone number?</p>

<p>Searching for <code>phone</code> and <code>number</code> didn‚Äôt get anywhere, so I searched for <code>614</code>, the first 3 digits of an Australian phone number, using my colossal and highly celestial galaxy brain.</p>

<h5 id="weird-uppercase-letters">Weird uppercase letters</h5>
<p>A weird pile of what I could only describe as extremely uppercase letters came up. It looked like this:</p>

<div><div><pre><code>RQST QF HK1 HNDSYD/03EN|FQTV QF HK1|CTCM QF HK1 614[phone number]|CKIN QF HN1 DO NOT SEAT ROW [row number] PLS SEAT LAST ROW OF [row letter] WINDOW
</code></pre></div></div>
<p>So, there‚Äôs a lot going on here. There is indeed a phone number in here. But what the heck is all this <em>other</em> stuff?</p>

<p>I realised this was like‚Ä¶ Qantas staff talking to eachother <em>about</em> Tony Abbott, but not <em>to</em> him?</p>

<p>In what is surely the subtweeting of the century, it has a ‚Ä¶</p></div></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://mango.pdf.zone/finding-former-australian-prime-minister-tony-abbotts-passport-number-on-instagram">https://mango.pdf.zone/finding-former-australian-prime-minister-tony-abbotts-passport-number-on-instagram</a></em></p>]]>
            </description>
            <link>https://mango.pdf.zone/finding-former-australian-prime-minister-tony-abbotts-passport-number-on-instagram</link>
            <guid isPermaLink="false">hacker-news-small-sites-24488224</guid>
            <pubDate>Wed, 16 Sep 2020 00:16:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Warning Signs of a Project Crisis]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24488128">thread link</a>) | @ohjeez
<br/>
September 15, 2020 | https://www.functionize.com/blog/how-to-recognize-the-warning-signs-of-a-project-crisis/ | <a href="https://web.archive.org/web/*/https://www.functionize.com/blog/how-to-recognize-the-warning-signs-of-a-project-crisis/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
          <p><img width="1080" height="634" src="https://3laqvw22wekb3ykm8z4dbnq8-wpengine.netdna-ssl.com/wp-content/uploads/2020/09/ft-project-crisis.jpg" alt="How to recognize the warning signs of a project crisis" srcset="https://www.functionize.com/wp-content/uploads/2020/09/ft-project-crisis.jpg 1080w, https://www.functionize.com/wp-content/uploads/2020/09/ft-project-crisis-300x176.jpg 300w, https://www.functionize.com/wp-content/uploads/2020/09/ft-project-crisis-1024x601.jpg 1024w, https://www.functionize.com/wp-content/uploads/2020/09/ft-project-crisis-768x451.jpg 768w" sizes="(max-width: 1080px) 100vw, 1080px">      </p>	  
    
        <blockquote><p>You sometimes can identify markers for an imminent project meltdown. But you have to pay attention to the red flags. Here‚Äôs what to look for.</p></blockquote>
<p>I should have recognized the signs earlier. Everyone else in our startup software company was busy at work, aware that we needed to finish our software to acquire the venture capital we needed. Yet, Sandra began bringing the newspaper to work, and reading the entire thing, while the people around her wrote code, worked on the business plan, or tried to make sense of our accounting. Although it was inevitable that she‚Äôd leave ‚Äì and perhaps the team implosion was also a foregone conclusion ‚Äì I somehow refused to deal with the early indications.</p>
<p>Not every software development crisis has an early warning system, but plenty of them do. If you learn to recognize the signs early enough ‚Äì and you‚Äôre willing to confront the problem, as I was not ‚Äì you may be able to prevent the project from failing. If you can‚Äôt prevent the meltdown, perhaps you can save yourself.</p>
<h3>Meetings of the minds</h3>
<p>When you first join a team, or when you begin to have a bad feeling that you can‚Äôt quite name, pay attention to the way people behave during team meetings. I don‚Äôt mean necessarily that you should rush to get your r√©sum√© in order, if people get upset with one another. But do watch for signs that the proceedings don‚Äôt matter to the participants.</p>
<p>A quality engineer at a midrange German bank attended his first meeting on a new project. People arrived and left at will, without saying a word. Nobody kept minutes, he told me. ‚ÄúWe usually don‚Äôt need that,‚Äù project participants told him. At that point, says the engineer, ‚ÄúI knew that the level of discipline in this project was far too low to produce anything valuable. This proved to be true within a year.‚Äù</p>
<p>Are developers writing code instead of paying attention to what the users are asking? Do people regularly check their e-mail? It‚Äôs time to wonder about their commitment.</p>
<p>Meetings also show stress among the people who are supposed to be working together, especially when meetings don‚Äôt happen. In one project, where formerly independent teams were expected to merge, ‚ÄúThey saw themselves as competing with one another,‚Äù reports Solomon, a programmer at a large financial firm. ‚ÄúWhen we did the requirements interviews, the users (and their managers) were looking to ‚Äòprotect‚Äô the ‚Äòway we‚Äôve always done business.'‚Äù Some managers planned to limit the influence of other groups; political battles were fought over the design. ‚ÄúThere was no process for surfacing these issues (many of them valid business issues) and having management make a decision,‚Äù Solomon says.</p>
<p>In fact, the number of meetings you attend is a sign on its own. If you have to gather a committee for a two-hour roundtable for every decision ‚Äì because nobody can accept one person making the call ‚Äì bump that project to the bottom of your priority list. Particularly so if meetings have more than five people, or when managers outnumber workers. Each such meeting moves the project doomsday clock closer to boom.</p>
<p>Another red flag is procrastination about timely updates for stakeholders. For example: A decision is required but not yet made. A milestone is not reached due to delays but someone doesn‚Äôt want to disclose that stumble. ‚ÄúThose may not kill or put a project in ‚Äòzombie,‚Äô status,‚Äù says one programmer, ‚ÄúBut if the communication has broken down it‚Äôs a good indicator of heading that way.‚Äù</p>
<h3>Expectations out of whack</h3>
<p>I‚Äôve heard dozens of stories from developers and tester about the signs that a project is headed downhill. By far, the most common source of problems is inaccurate or poorly-communicated project expectations ‚Äì and an inappropriate reaction from management when things go awry.</p>
<p>‚ÄúWhy haven‚Äôt we done [this task]?‚Äù</p>
<p>‚ÄúOh, [task] is easy; we can do that any time.‚Äù</p>
<p>For example, one tester once was on a project that was completely oversold. The project team spent long weeks on the project. They even pulled all-nighters. But <a href="https://www.functionize.com/blog/estimating-testing-time-a-few-useful-guidelines/">the scope was too large for the timeframe and the staffing</a>. ‚ÄúThe pressure on the company to produce a customer (and on the executive team) was such that the team was nearly run into the ground.‚Äù</p>
<p>This tester was lucky. After a wholesale change in upper management, a VP was sent to fire everyone in sight, after being told that the problems were the team‚Äôs fault. But this executive was astute enough to listen. The VP realized the problem wasn‚Äôt the staff, but the sales person and upper management who had sold the project. ‚ÄúHe was able to slightly reset expectations with the customer, and we managed to put the project into production, producing a reference in the process.‚Äù Whew. One happy ending.</p>
<p>Others aren‚Äôt so fortunate. Don, a software consultant, found that ‚Äúthe surest single measure of increased likelihood of project failure is a management or owners who believe the task being performed is of one or more orders of magnitude less complexity than it actually is. This is usually reflected in poor or inept staffing‚Ä¶ and other resource and planning shortfalls.‚Äù</p>
<h3>The C-suite gets involved</h3>
<p>If there‚Äôs no <a href="https://www.functionize.com/blog/how-to-do-a-product-evaluation-for-enterprise-software/">project champion</a>, by whatever job title, you should worry. Project sponsors need clout; the people above them have to respect them. Otherwise, while projects can be completed, they‚Äôre rarely transformational. However, the project champion also captures and communicates the team‚Äôs vision.</p>
<p>The sad alternative is when you see a big upswing in manager and upper-level manager check-ins. There‚Äôs a sudden surge in, ‚ÄúIs there anything we can do to help?‚Äù questions that would have been useful two months earlier.</p>
<p>Or personnel appear who aren‚Äôt integrated into the team. They don‚Äôt seem to have clear roles. For instance, a director from another department shows up, demanding to know why they weren‚Äôt consulted on the project, even though their superior had approved the process or task.</p>
<p>Another sign: Your project scope changes like the weather, for reasons you cannot fathom, and you have no ability to push back. As one techie described a too-familiar scenario: ‚ÄúThe smoke of your burning deadlines will outline vast and terrible corporate gods who do not wish you well.‚Äù</p>
<h3>Project plan? What project plan?</h3>
<p>Often, those inaccurate expectations are a sign of earlier errors in analysis. A sure sign of failure is when time pressure exceeds normal limits ‚Äì by far. ‚ÄúAll of a sudden, you have loads of work to do, in ever-decreasing time intervals,‚Äù says a consultant who works in financial organizations. ‚ÄúThis clearly shows that some points during the analysis and/or design phase was done horribly wrong.‚Äù</p>
<p>A related sign: The software is being built in parts, and nobody has integrated the parts yet. Especially if it‚Äôs because they don‚Äôt like to collaborate with the other authors.</p>
<p>There are <em>so</em> many variations.</p>
<ul>
<li>The project manager never presents a timeline, schedule, or milestone list.</li>
<li>A deadline for an important task is postponed more than two times.</li>
<li>Your weekly update call includes a lot of awkward silences. Or the definition of ‚Äúdone‚Äù drifts into science fiction.</li>
<li>You hear, ‚ÄúAre you sure this will take that long?‚Äù</li>
<li>Or they say, ‚ÄúLet‚Äôs use the occasion to also do &lt;big thing that‚Äôs completely unrelated&gt; while we have leverage.‚Äù</li>
</ul>
<p>You don‚Äôt have to wait long for over-complicated expectations to emerge. Solomon adds, ‚ÄúWhen the chief architect explained the project, I started to count the tiers, and arrived at seven. A seven-tier architecture would contain so many chances to fail that I was immediately sure that the product would never see the customers. I was right. Twenty-three million Euros for nothing.‚Äù</p>
<h3>The attack of the killer accountants</h3>
<p>Your first clue: The snack closet doesn‚Äôt get refilled.</p>
<p>The more elaborate version: A random bean counter yells for the fainting couch when you submit a project expense line item has been utterly unremarkable during your entire tenure. Long-standing vendor contracts are scrutinized. Suddenly you need signoff from busybodies who have to render judgment on a critical spending component of your plan which nonetheless represents &lt;1% of the budgeted outlay.</p>
<p>The cost cutting isn‚Äôt logical. They don‚Äôt lay off an engineering team, which might be a hard-headed business decision. But they cancel required services, such as the organization‚Äôs Trello subscription.</p>
<h3>Inappropriate staffing</h3>
<p>Instead of dealing with the underlying problem ‚Äì the team or the company can‚Äôt deliver what they‚Äôd promised ‚Äì one way that poor management deals with the impending crisis is to hire or fire people. Unfortunately, <a href="https://www.functionize.com/blog/whats-the-difference-between-a-good-qa-director-and-a-great-one/">they often pick the wrong ones</a>. For example, in one project, Management felt the project was underfunded for the goals it was trying to reach.&nbsp;They couldn‚Äôt hire enough people with the right skills (that was too expensive) and caused the project to be slow to deliver.</p>
<p>When you can‚Äôt hire as many people as you need, you attempt to get more from the existing staff. In some cases, management threatens to lay people off if they don‚Äôt work harder. In one tester‚Äôs <a href="https://www.oreilly.com/content/3-reasons-to-stop-hating-one-on-one-meetings/" target="_blank" rel="noopener noreferrer">one-on-one session meeting</a>, the manager pointed out that the tester wasn‚Äôt at work in the evening. The tester told him he currently worked 50 hour weeks, and the company only paid for 37.5 hour weeks. The manager responded, ‚ÄúIf you are not working 60 hour weeks, you are not working hard.‚Äù Ten minutes later, he added, ‚ÄúIf you are not working hard, you are the list of people to be laid off.‚Äù The tester took the boss at his word. ‚ÄúI‚Äôm not sure if that project ever shipped. I quit and found a new job.‚Äù</p>
<p>How long do you wait before you recognize there‚Äôs a crisis? David‚Äôs ready to throw in the towel. He‚Äôs in a group that handles a couple dozen products, but David is the only developer, tester, and now manager. ‚ÄúI know the situation is bad. My company decided to fix the problem with people leaving or being laid off by building from the top. My program manager left, so naturally they replace him with a VP of Sales.‚Äù Two months ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.functionize.com/blog/how-to-recognize-the-warning-signs-of-a-project-crisis/">https://www.functionize.com/blog/how-to-recognize-the-warning-signs-of-a-project-crisis/</a></em></p>]]>
            </description>
            <link>https://www.functionize.com/blog/how-to-recognize-the-warning-signs-of-a-project-crisis/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24488128</guid>
            <pubDate>Wed, 16 Sep 2020 00:02:37 GMT</pubDate>
        </item>
    </channel>
</rss>
